,id,author,subject,content_url,dtype,date,content
0,1,Bernard Ligny,  Re: Why do we have to specify a context for @PropertyInject ?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1490891241997-5796750.post%40n5.nabble.com%3E,users,"Thu, 30 Mar 2017 16:27:21 GMT",Improvement issue created:&#010;https://issues.apache.org/jira/browse/CAMEL-11097&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Why-do-we-have-to-specify-a-context-for-PropertyInject-tp5796699p5796750.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
1,2,Antonin Stefanutti,    Re: Why do we have to specify a context for @PropertyInject ?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAF52D5C-2241-4160-AE7E-58F89DAF7E5E%40stefanutti.fr%3E,users,"Tue, 04 Apr 2017 12:50:49 GMT","Thanks for the detailed report. That makes sense to contextualize the default context based&#010;on @ContextName.&#010;&#010;Antonin&#010;&#010;&gt; On 30 Mar 2017, at 18:27, Bernard Ligny &lt;bernard.ligny@gmail.com&gt; wrote:&#010;&gt; &#010;&gt; Improvement issue created:&#010;&gt; https://issues.apache.org/jira/browse/CAMEL-11097&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Why-do-we-have-to-specify-a-context-for-PropertyInject-tp5796699p5796750.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;"
2,3,jbailie1992,Camel - No component found with scheme:mybatis,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1490915351181-5796761.post%40n5.nabble.com%3E,users,"Thu, 30 Mar 2017 23:09:11 GMT","I've got a Spring Boot app that makes use of Camel and Mybatis. I've got the&#010;following mybatis dependencies in pom.xml:&#010;&#010;*pom.xml*&#010;&#010;    ....&#010;    &lt;dependency&gt;&#010;        &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;&#010;        &lt;artifactId&gt;camel-mybatis&lt;/artifactId&gt;&#010;        &lt;version&gt;${camel.version}&lt;/version&gt;&#010;    &lt;/dependency&gt;&#010;    ....&#010;    &lt;dependency&gt;&#010;        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;&#010;        &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;&#010;        &lt;version&gt;1.0.1&lt;/version&gt;&#010;    &lt;/dependency&gt;&#010;    ....&#010;&#010;I've got the following route:&#010;&#010;*MyRoute.java*&#010;&#010;    @Component&#010;    public class MyRoute extends SpringRouteBuilder{&#010;&#010;        @Autowired&#010;        MQConnectionProperties mqConnectionProperties;&#010;&#010;        @Override&#010;        public void configure() throws Exception {&#010;            from(mqConnectionProperties.getResponseQueue())&#010;            .to(""mybatis:selectLogByPrimaryKey?statementType=SelectOne"")&#010;            .process(new TargetSystemProcessor())&#010;            .end()&#010;        }&#010;    }&#010;&#010;and the test for the route:&#010;&#010;*MyRouteUnitTest.java*&#010;&#010;    @RunWith(SpringJUnit4ClassRunner.class)&#010;    @ContextConfiguration(classes = {MyRouteTestConfiguration.class})&#010;    @DirtiesContext(classMode = ClassMode.AFTER_EACH_TEST_METHOD)&#010;    public class MyRouteUnitTest extends CamelTestSupport{&#010;&#010;        @Mock&#010;        MyBatisComponent mybatis;&#010;        @Autowired&#010;        MQConnectionProperties mqProps;&#010;        @Autowired&#010;        MyRouteBuilder route;&#010;&#010;        @Before&#010;        public void setup() throws Exception {&#010;            super.setUp();&#010;            context.addComponent(""mybatis"", mybatis);&#010;        }&#010;    &#010;        @Test&#010;        public void test() throws Exception {&#010;            startCamelContext();&#010;        &#010;            assertTrue(true);&#010;&#010;            stopCamelContext();&#010;        }&#010;    }&#010;&#010;When I try to start the test without adding mybatis as a component to the&#010;context, I get this error:&#010;&#010;    org.apache.camel.FailedToCreateRouteException: Failed to create route&#010;My_Route at: &gt;&gt;&gt;&#010;To[mybatis:selectAuditLogByPrimaryKey?statementType=SelectOne] &lt;&lt;&lt; in route:&#010;Route(My_Route)[[From[seda:inpu... because of Failed to resolve endpoint:&#010;mybatis://selectAuditLogByPrimaryKey?statementType=SelectOne due to: Cannot&#010;auto create component: mybatis&#010;    ....&#010;    Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to&#010;resolve endpoint:&#010;mybatis://selectAuditLogByPrimaryKey?statementType=SelectOne due to: Cannot&#010;auto create component: mybatis&#010;    ....&#010;    Caused by: java.io.FileNotFoundException: Cannot find resource:&#010;SqlMapConfig.xml in classpath for URI: SqlMapConfig.xml&#010;&#010;&#010;&#010;Whenever I add the component to the context as shown i nthe test above, I&#010;get this error:&#010;&#010;    org.apache.camel.FailedToCreateRouteException: Failed to create route&#010;My_Route at: &gt;&gt;&gt;&#010;To[mybatis:selectAuditLogByPrimaryKey?statementType=SelectOne] &lt;&lt;&lt; in route:&#010;Route(My_Route)[[From[seda:inpu... because of Failed to resolve endpoint:&#010;mybatis://selectAuditLogByPrimaryKey?statementType=SelectOne due to: No&#010;component found with scheme: mybatis&#010;&#010;&#010;As far as I can tell, I've got the right dependencies i nthe pom file to&#010;hook all of this together, and mybatis works fine in the source code. For&#010;unit testing I can work around it by replacing the endpoint, but I can't&#010;write any integration tests for my route&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-No-component-found-with-scheme-mybatis-tp5796761.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
3,4,varunmaurya,Shutting down camel immediately,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1490919993384-5796763.post%40n5.nabble.com%3E,users,"Fri, 31 Mar 2017 00:26:33 GMT",How can we shutdown camel context and underlying routes immediately (not&#010;gracefully).&#010;http://stackoverflow.com/questions/43124437/how-to-stop-camel-context-immediately/&#010;&lt;http://stackoverflow.com/questions/43124437/how-to-stop-camel-context-immediately/&gt;&#010; &#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Shutting-down-camel-immediately-tp5796763.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
4,5,Claus Ibsen,  Re: Shutting down camel immediately,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNmf34TYo%2B-S_a2z3BhMWCvsR_kYvu9ADewvxEaeYHOL4Q%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 08:06:40 GMT","System.exit(0) shutdown really fast.&#010;&#010;Well just set a short timeout value like 1 second or something. But&#010;mind its not a good idea to shutdown a running app and not give it&#010;time to shutdown correct&#010;&#010;On Fri, Mar 31, 2017 at 2:26 AM, varunmaurya &lt;speedvarun@gmail.com&gt; wrote:&#010;&gt; How can we shutdown camel context and underlying routes immediately (not&#010;&gt; gracefully).&#010;&gt; http://stackoverflow.com/questions/43124437/how-to-stop-camel-context-immediately/&#010;&gt; &lt;http://stackoverflow.com/questions/43124437/how-to-stop-camel-context-immediately/&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Shutting-down-camel-immediately-tp5796763.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
5,6,,Re: Splitting within transactions,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNmf34TYo%2B-S_a2z3BhMWCvsR_kYvu9ADewvxEaeYHOL4Q%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 08:06:40 GMT","System.exit(0) shutdown really fast.&#010;&#010;Well just set a short timeout value like 1 second or something. But&#010;mind its not a good idea to shutdown a running app and not give it&#010;time to shutdown correct&#010;&#010;On Fri, Mar 31, 2017 at 2:26 AM, varunmaurya &lt;speedvarun@gmail.com&gt; wrote:&#010;&gt; How can we shutdown camel context and underlying routes immediately (not&#010;&gt; gracefully).&#010;&gt; http://stackoverflow.com/questions/43124437/how-to-stop-camel-context-immediately/&#010;&gt; &lt;http://stackoverflow.com/questions/43124437/how-to-stop-camel-context-immediately/&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Shutting-down-camel-immediately-tp5796763.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
6,7,firpili,  Re: Splitting within transactions,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1490951272545-5796774.post%40n5.nabble.com%3E,users,"Fri, 31 Mar 2017 09:07:52 GMT","Hi Claus ! I am more or less new in Camel .. I would like to do something&#010;similar but with files..&#010;&#010;I mean.. I have a XML file like:&#010;&lt;Orders&gt;&#010;&lt;order&gt;&#010;&lt;id&gt;1&lt;/id&gt;&#010;&lt;desc&gt;desc 1&lt;/desc&gt;&#010;&lt;/order&gt;&#010;&lt;order&gt;&#010;&lt;id&gt;2&lt;/id&gt;&#010;&lt;desc&gt;dec 2&lt;/desc&gt;&#010;&lt;/order&gt;&#010;&lt;/Orders&gt;&#010;&#010;and i want to split it in order to store in a database in a single&#010;transaction.. I mean.. if some Order is wrong during the process no 'order'&#010;of this XML file will be store in the database.. instead of that i would&#010;like to throw an exception or st like that..&#010;&#010;Do u thing is enough with this or i need to configure anything in my&#010;database configuration ?&#010;I am a bit lost.&#010;&#010;from(""direct:myRoute"").transacted().split(xpath(""Orders/order"")).unmarshall(dataFormat).process(My&#010;Processor()).to(""jta:com.model.Orders?usePersists=true"")&#010;&#010;It would be great if someone can help me, thanks!!&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Splitting-within-transactions-tp5719539p5796774.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
7,8,Nick Dmnick,Searching analog of getBean (Spring) in Blueprint,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1490962746398-5796781.post%40n5.nabble.com%3E,users,"Fri, 31 Mar 2017 12:19:06 GMT","Hello, Camel community. &#010;&#010;What is an analog of Spring' getBean method in Blueprint? Can't find in&#010;google. &#010;&#010;What I use now in Spring:&#010;&#010;private ApplicationContext appContext;&#010;ITProfixLogger sli= (ITProfixLogger) appContext.getBean(""logW"");&#010;&#010;What I need: convert it in Blueprint.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Searching-analog-of-getBean-Spring-in-Blueprint-tp5796781.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
8,9,Quinn Stevenson,  Re: Searching analog of getBean (Spring) in Blueprint,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CEDBABBE3-358D-4219-9E1E-5994D1B6AB33%40pronoia-solutions.com%3E,users,"Tue, 04 Apr 2017 15:00:41 GMT","You get it from the Blueprint Container (  https://osgi.org/javadoc/r4v42/org/osgi/service/blueprint/container/BlueprintContainer.html#getComponentInstance(java.lang.String)&#010;&lt;https://osgi.org/javadoc/r4v42/org/osgi/service/blueprint/container/BlueprintContainer.html#getComponentInstance(java.lang.String)&gt;&#010;)&#010;&#010;&#010;&#010;&#010;&gt; On Mar 31, 2017, at 6:19 AM, Nick Dmnick &lt;DmitrenkoNA@skblab.ru&gt; wrote:&#010;&gt; &#010;&gt; Hello, Camel community. &#010;&gt; &#010;&gt; What is an analog of Spring' getBean method in Blueprint? Can't find in&#010;&gt; google. &#010;&gt; &#010;&gt; What I use now in Spring:&#010;&gt; &#010;&gt; private ApplicationContext appContext;&#010;&gt; ITProfixLogger sli= (ITProfixLogger) appContext.getBean(""logW"");&#010;&gt; &#010;&gt; What I need: convert it in Blueprint.&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Searching-analog-of-getBean-Spring-in-Blueprint-tp5796781.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;"
9,10,,Re: Using ConsumerTemplate to fetch files.,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CEDBABBE3-358D-4219-9E1E-5994D1B6AB33%40pronoia-solutions.com%3E,users,"Tue, 04 Apr 2017 15:00:41 GMT","You get it from the Blueprint Container (  https://osgi.org/javadoc/r4v42/org/osgi/service/blueprint/container/BlueprintContainer.html#getComponentInstance(java.lang.String)&#010;&lt;https://osgi.org/javadoc/r4v42/org/osgi/service/blueprint/container/BlueprintContainer.html#getComponentInstance(java.lang.String)&gt;&#010;)&#010;&#010;&#010;&#010;&#010;&gt; On Mar 31, 2017, at 6:19 AM, Nick Dmnick &lt;DmitrenkoNA@skblab.ru&gt; wrote:&#010;&gt; &#010;&gt; Hello, Camel community. &#010;&gt; &#010;&gt; What is an analog of Spring' getBean method in Blueprint? Can't find in&#010;&gt; google. &#010;&gt; &#010;&gt; What I use now in Spring:&#010;&gt; &#010;&gt; private ApplicationContext appContext;&#010;&gt; ITProfixLogger sli= (ITProfixLogger) appContext.getBean(""logW"");&#010;&gt; &#010;&gt; What I need: convert it in Blueprint.&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Searching-analog-of-getBean-Spring-in-Blueprint-tp5796781.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;"
10,11,dilip.pashupathi,  Re: Using ConsumerTemplate to fetch files.,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1490964397877-5796783.post%40n5.nabble.com%3E,users,"Fri, 31 Mar 2017 12:46:37 GMT","Hi, &#010;I was working with something similar to this problem. But I am not able to&#010;capture the exceptions properly. &#010;&#010;Setps:&#010;1. Download the existing file from the FTP&#010;2. Push the file to backup folder and append the file name with current date&#010;3. Push a new file to the FTP which has a complete new file&#010;&#010;Here is gist of what I am trying to achieve&#010;&#010;in RouteBuilder:&#010; public void configure() throws Exception {&#010;&#010;        onException(Exception.class)&#010;                .log(""Exception returned due: ${exception.message}"")&#010;                .to(INTERNAL_ERROR_HANDLER_ENDPOINT_URI)&#010;                .to(logError(PACKAGE_NAME))&#010;                .handled(true);&#010;&#010;       from(INTERNAL_ERROR_HANDLER_ENDPOINT_URI)&#010;                .log(""File error route triggered due to :&#010;${exception?.class}"")&#010;                .transform().simple(""Error ${exception.message}"")&#010;                .bean(responseTranslator, ""translateError"")&#010;                .end();&#010;&#010;       from(ENDPOINT_URI)&#010;                .to(log(PACKAGE_NAME))&#010;                .process(contentBackupProcessor)&#010;                .to(INTERNAL_ENDPOINT_URI)&#010;                .end();&#010;&#010;       from(INTERNAL_ENDPOINT_URI)&#010;                .process(requestProcessor)&#010;                .to(ftpHostConfiguration.ftpEndpointForPublishing())&#010;                .bean(responseTranslator, ""translate"")&#010;                .to(log(PACKAGE_NAME));&#010;    }&#010;&#010;ContentBackupProcessor:&#010;&#010;       logger.debug(""File backup processor called."");&#010;        CamelContext context = exchange.getContext();&#010;        Endpoint ftp =&#010;context.getEndpoint(ftpHostConfiguration.ftpConsumerEndpointForBackupProcessor());&#010;        PollingConsumer consumer = ftp.createPollingConsumer();&#010;        logger.debug(""FTP Consumer created for backup"");&#010;        Endpoint producerFtp =&#010;context.getEndpoint(ftpHostConfiguration.ftpProducerEndpointForBackupProcessor());&#010;        ProducerTemplate template =&#010;exchange.getContext().createProducerTemplate();&#010;        logger.debug(""FTP Producer created for backup"");&#010;        consumer.start();&#010;        while(true){&#010;            Exchange result = consumer.receive(5000);&#010;            if(result == null){&#010;                break;&#010;            }&#010;            template.send(producerFtp, result);&#010;        }&#010;        consumer.stop();&#010;    }&#010;&#010;And this is how my FTP URL Looks like&#010;URL 1: Consumer URL for downloading the file&#010;ftp://XXXXC@localhost:8899/?password=XXXXC&amp;consumer.bridgeErrorHandler=true&amp;throwExceptionOnConnectFailed=true&amp;maximumReconnectAttempts=0&amp;useList=true&amp;delete=true&#010;&#010;URL 2: Producer URL for moving to backup folder and adding current date to&#010;the fileName&#010;ftp://XXXXC@localhost:8899/backup?password=XXXXC&amp;consumer.bridgeErrorHandler=true&amp;throwExceptionOnConnectFailed=true&amp;maximumReconnectAttempts=0&amp;useList=true&amp;fileName=${file:name.noext}_${date:now:yyyyMMdd.hhmmss}.js&#010;&#010;&#010;ftp://XXXX@localhost:8899/?password=XXXX&amp;consumer.bridgeErrorHandler=true&amp;throwExceptionOnConnectFailed=true&amp;maximumReconnectAttempts=0&#010;&#010;Since URL 1 and URL 2 is written inside the processor when exception happens&#010;like unable to connect to FTP, onException is not able to handle that&#010;properly. And the route ends with a lot of stack trace.&#010;&#010;Kindly help. This is a bit urgent since we have a service that needs to be&#010;delivered urgently. &#010;&#010;Thanks &amp; Regards&#010;Dilip H Pashupathi&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-ConsumerTemplate-to-fetch-files-tp3304671p5796783.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
11,12,dilip.pashupathi,    Re: Using ConsumerTemplate to fetch files.,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491197514768-5796842.post%40n5.nabble.com%3E,users,"Mon, 03 Apr 2017 05:31:54 GMT","Hi, Thanks for the reply, &#010;The thing is we don't have multiple FTP servers. We have only one server&#010;where all operations happens.&#010;&#010;1. At the root folder of the FTP, there is file that needs to be deleted&#010;2. Before deleting that file, the file should be taken as a backup and&#010;placed in one of the subdirectory. &#010;3. After that from the request I need read the data and produce a file that&#010;should be placed in the ftp root directory. &#010;&#010;For all the above only a single FTP server is available and there are three&#010;different calls happening. &#010;First call is to download the file from &#010;ftp_site/somefile.js&#010;Pass this on to&#010;ftp_site/backup&#010;Read the file from request params and place it in &#010;ftp_site/somefile_update_&lt;date_time&gt;.js&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-ConsumerTemplate-to-fetch-files-tp3304671p5796842.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
12,13,dilip.pashupathi,      Re: Using ConsumerTemplate to fetch files.,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491202615485-5796845.post%40n5.nabble.com%3E,users,"Mon, 03 Apr 2017 06:56:55 GMT","Hi, &#010;&#010;I also tried your suggestions like below&#010;&#010; from(""ftp://username@localhost:8899/...&lt;other_default_params&gt;"")&#010;     .mulitcast().to(""direct:processes-backup"",""direct:upload-fresh"");&#010;&#010;from(""direct:process-backup"")&#010;   .bean(responseTranslator,""translate"").&#010;&#010;&#010;But when I started my jetty server where the service is deployed it stopped&#010;with an error stating that ""Connection Refused"". &#010;&#010;I was trying to simulate if any exception happens then that should be caught&#010;and thrown by onException handler. &#010;&#010;Here is is the basics of how this service is configured. We have three&#010;different layers each separated by their own configurations. &#010;1. Application or App layer&#010;2. Business - where logical stuff happens&#010;3. Integration services - where the connection with backend is established&#010;and request is sent to third party services for further processing. &#010;&#010;And for all this we are only using camels ""direct"" component only since we&#010;don't have any use for other components. And these are deployed on ""JBoss 7""&#010;servers for actual integration test. And for local test we use Jetty Server. &#010;&#010;And since starting up the Jetty server will ping all the services and see if&#010;the routes are all connectable, if any of them throws error our servers are&#010;configured to stop there till the problem is resolved. &#010;&#010;hence I cannot use the ""from"" at the very beginning  to do a multicast as&#010;well. &#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-ConsumerTemplate-to-fetch-files-tp3304671p5796845.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
13,14,dilip.pashupathi,        Re: Using ConsumerTemplate to fetch files.,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491202952197-5796846.post%40n5.nabble.com%3E,users,"Mon, 03 Apr 2017 07:02:32 GMT","Hi, &#010;&#010;Basic idea here is to capture any exception that may occur due to failure in&#010;FTP connections or any other form of exception. Since the process is&#010;happening inside the contentBackupProcessor, Camel is basically ignoring the&#010;exception and continuing with the next operation as if nothing wrong&#010;happened. &#010;&#010;Thanks&#010;Dilip&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-ConsumerTemplate-to-fetch-files-tp3304671p5796846.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
14,15,Zoran Regvart,      Re: Using ConsumerTemplate to fetch files.,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCABD_Zr9X7Qs8mJNMZAOwPErs5iZfQJryt9TwM961yvH6fNSoNw%40mail.gmail.com%3E,users,"Mon, 03 Apr 2017 08:45:15 GMT","Hi Dilip,&#010;doesn't a single ftp route with fileExist=Move fulfil your&#010;requirements? You mention that you use direct routes so starting from&#010;a direct route with body set to payload of the new file to be uploaded&#010;to the FTP server and CamelFileName header set to the file name:&#010;&#010;    from(""direct:uploadAndBackup"").to(""ftp:...?fileExist=Move&amp;moveExisting=backup"")&#010;&#010;I think you might be over thinking and creating an overly complex&#010;solution for a relatively simple task you need to perform.&#010;&#010;Checkout the options from file component[1] as they can be used in the&#010;ftp component as noted in the fine documentation[2]&#010;&#010;zoran&#010;&#010;[1] https://camel.apache.org/file2.html&#010;[2] https://camel.apache.org/ftp2.html&#010;&#010;On Mon, Apr 3, 2017 at 7:31 AM, dilip.pashupathi&#010;&lt;dilip.pashupathi@gmail.com&gt; wrote:&#010;&gt; 1. At the root folder of the FTP, there is file that needs to be deleted&#010;&gt; 2. Before deleting that file, the file should be taken as a backup and&#010;&gt; placed in one of the subdirectory.&#010;&gt; 3. After that from the request I need read the data and produce a file that&#010;&gt; should be placed in the ftp root directory.&#010;&#010;&#010;&#010;&#010;-- &#010;Zoran Regvart&#010;&#010;"
15,16,Amuthan,unable to unzip the gzip files,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1490967629790-5796784.post%40n5.nabble.com%3E,users,"Fri, 31 Mar 2017 13:40:29 GMT","Hi All,&#010;&#010;My requirement is to read the gzip files from the source location then unzip&#010;it and place it in destination folder.&#010;So I have written the below code to achieve the same.&#010;&#010;package com.evolvus.examples.camel.fileOne;&#010;&#010;import org.apache.camel.CamelContext;&#010;import org.apache.camel.Processor;&#010;import org.apache.camel.builder.RouteBuilder;&#010;import org.apache.camel.impl.DefaultCamelContext;&#010;&#010;public class App {&#010;    public static void main(final String[] args) throws Exception {&#010;        final String sourceFolder = ""file:C:\\Amu\\abc\\EIAS\\Camel\\input"";&#010;       final String destinationFolder =&#010;""file:C:\\Amu\\abc\\EIAS\\Camel\\output"";&#010;        final CamelContext camelContext = new DefaultCamelContext();&#010;        camelContext.addRoutes(new RouteBuilder() {&#010;            @Override&#010;            public void configure() {&#010;            &#009;&#010;                from(sourceFolder)&#010;                &#009;&#009;&#009;&#009;&#010;                &#009;&#009;&#009;&#009;&#009;.unmarshal().gzip()                &#010;                .to(destinationFolder);&#010;            }&#010;        });&#010;&#010;        camelContext.start();&#010;        Thread.sleep(30000);&#010;        camelContext.stop();&#010;    }&#010;}&#010;&#010;After the code execution the output folder is containing the unzipped files&#010;with .gz extension.&#010;Kindly help me with this.&#010;&#010;regards,&#010;Amu&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/unable-to-unzip-the-gzip-files-tp5796784.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
16,17,,Re: Using rollback() inside onException,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1490967629790-5796784.post%40n5.nabble.com%3E,users,"Fri, 31 Mar 2017 13:40:29 GMT","Hi All,&#010;&#010;My requirement is to read the gzip files from the source location then unzip&#010;it and place it in destination folder.&#010;So I have written the below code to achieve the same.&#010;&#010;package com.evolvus.examples.camel.fileOne;&#010;&#010;import org.apache.camel.CamelContext;&#010;import org.apache.camel.Processor;&#010;import org.apache.camel.builder.RouteBuilder;&#010;import org.apache.camel.impl.DefaultCamelContext;&#010;&#010;public class App {&#010;    public static void main(final String[] args) throws Exception {&#010;        final String sourceFolder = ""file:C:\\Amu\\abc\\EIAS\\Camel\\input"";&#010;       final String destinationFolder =&#010;""file:C:\\Amu\\abc\\EIAS\\Camel\\output"";&#010;        final CamelContext camelContext = new DefaultCamelContext();&#010;        camelContext.addRoutes(new RouteBuilder() {&#010;            @Override&#010;            public void configure() {&#010;            &#009;&#010;                from(sourceFolder)&#010;                &#009;&#009;&#009;&#009;&#010;                &#009;&#009;&#009;&#009;&#009;.unmarshal().gzip()                &#010;                .to(destinationFolder);&#010;            }&#010;        });&#010;&#010;        camelContext.start();&#010;        Thread.sleep(30000);&#010;        camelContext.stop();&#010;    }&#010;}&#010;&#010;After the code execution the output folder is containing the unzipped files&#010;with .gz extension.&#010;Kindly help me with this.&#010;&#010;regards,&#010;Amu&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/unable-to-unzip-the-gzip-files-tp5796784.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
17,18,Martin Lichtin,  Re: Using rollback() inside onException,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C9fc782d6-7d5d-9e16-a038-f1c68e41ff6b%40yahoo.com%3E,users,"Sat, 01 Apr 2017 08:03:48 GMT","Thanks, indeed it all works as expected without using rollback().&#010;I had cases of onException().handled(true)....rollback().end() that could be simplified to&#010;onException()....end().&#010;&#010;&#010;On 31.03.2017 17:10, Quinn Stevenson wrote:&#010;&gt; I don’t this this would make sense for handling java.lang.Exception - I think you’re&#010;right about Camel doing the same action by default.&#010;&gt;&#010;&gt; I guess if there was some other exception you were handling (i.e. handled(true)), you&#010;may want to call rollback - but I can’t think of a really good example right of hand.  The&#010;place’s I’ve used rollback() (actually markRollbackOnly() - I’ve never used rollback())&#010;are in routes where something besides an exception determines whether or not I want to rollback&#010;the transaction.&#010;&gt;&#010;&gt; For what it’s worth ...&#010;&gt;&#010;&gt;&#010;&gt;&gt; On Mar 31, 2017, at 6:18 AM, Martin Lichtin&lt;lichtin@yahoo.com.INVALID&gt;  wrote:&#010;&gt;&gt;&#010;&gt;&gt; Hi&#010;&gt;&gt; Wanted to ask, what would be a reason to explicitly call rollback() in an onException().&#010;&gt;&gt;&#010;&gt;&gt; For example, would this make sense?&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; .onException(Exception.class).rollback().end()&#010;&gt;&gt;&#010;&gt;&gt; I'm under the expression above line could just be left out, as Camel anyway lets&#010;&gt;&gt;&#010;&gt;&gt; the exception up and that will cause the transaction to roll back.&#010;&#010;&#010;"
18,19,preader,IOException: Stream closed - when forwarding HTTP request,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491036576475-5796802.post%40n5.nabble.com%3E,users,"Sat, 01 Apr 2017 08:49:36 GMT","I'm doing an HTTP forward in a Camel Processor and getting a Stream closed&#010;error as shown in the stack trace below. This used to work when using Camel&#010;2.13.2, but it is no longer working now we're running Camel 2.17.1. I've&#010;also tried 2.17.6 and 2.18.3 with the same result. The stack trace below is&#010;when using 2.18.3.&#010;&#010;The application runs on Tomcat 8.0.30, JDK 8.&#010;&#010;Route configuration:&#010;        from(""servlet:///?matchOnUriPrefix=true"")&#010;        .to(""restInboundRequestTransformer"")   // This is the Processor that&#010;is performing the forward.&#010;        ...&#010;&#010;Forwarding:&#010;        httpReq.getRequestDispatcher(requestURI).forward(httpReq, httpRsp);&#010;        ex.setProperty(Exchange.ROUTE_STOP, Boolean.TRUE);&#010;&#010;https://issues.apache.org/jira/browse/CAMEL-10425 is very similar, but&#010;indicates it is fixed in Camel 2.18.1.&#010;&#010;This seems like a bug in Camel, but I'd appreciate any advice on whether&#010;there is a better way for forwarding an HTTP request than what I'm doing.&#010;&#010;org.apache.camel.RuntimeCamelException: java.io.IOException: Stream closed&#010;&#009;at org.apache.camel.http.common.HttpMessage.createBody(HttpMessage.java:74)&#010;&#009;at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:47)&#010;&#009;at&#010;org.apache.camel.http.common.DefaultHttpBinding.readBody(DefaultHttpBinding.java:184)&#010;&#009;at&#010;org.apache.camel.http.common.DefaultHttpBinding.readRequest(DefaultHttpBinding.java:107)&#010;&#009;at org.apache.camel.http.common.HttpMessage.&lt;init&gt;(HttpMessage.java:52)&#010;&#009;at&#010;org.apache.camel.http.common.CamelServlet.doService(CamelServlet.java:169)&#010;&#009;at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:74)&#010;&#009;at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&#010;&#009;at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:719)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:465)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:390)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:317)&#010;&#009;at&#010;com.mycompany.camel.processor.RestInboundRequestTransformer.process(RestInboundRequestTransformer.java:98)&#010;&#009;at&#010;org.apache.camel.impl.ProcessorEndpoint.onExchange(ProcessorEndpoint.java:103)&#010;&#009;at&#010;org.apache.camel.impl.ProcessorEndpoint$1.process(ProcessorEndpoint.java:71)&#010;&#009;at&#010;org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)&#010;&#009;at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145)&#010;&#009;at&#010;org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:77)&#010;&#009;at&#010;org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542)&#010;&#009;at&#010;org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197)&#010;&#009;at org.apache.camel.processor.Pipeline.process(Pipeline.java:120)&#010;&#009;at org.apache.camel.processor.Pipeline.process(Pipeline.java:83)&#010;&#009;at&#010;org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197)&#010;&#009;at&#010;org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97)&#010;&#009;at&#010;org.apache.camel.http.common.CamelServlet.doService(CamelServlet.java:195)&#010;&#009;at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:74)&#010;&#009;at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&#010;&#009;at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&#010;&#009;at&#010;org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)&#010;&#009;at&#010;org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:106)&#010;&#009;at&#010;org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)&#010;&#009;at&#010;org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)&#010;&#009;at&#010;org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)&#010;&#009;at&#010;org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)&#010;&#009;at&#010;org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)&#010;&#009;at&#010;org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:521)&#010;&#009;at&#010;org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1096)&#010;&#009;at&#010;org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:674)&#010;&#009;at&#010;org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500)&#010;&#009;at&#010;org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456)&#010;&#009;at&#010;java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&#010;&#009;at&#010;java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&#010;&#009;at&#010;org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)&#010;&#009;at java.lang.Thread.run(Thread.java:745)&#010;Caused by: java.io.IOException: Stream closed&#010;&#009;at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:372)&#010;&#009;at&#010;org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:156)&#010;&#009;at org.apache.camel.util.IOHelper.copy(IOHelper.java:196)&#010;&#009;at org.apache.camel.util.IOHelper.copy(IOHelper.java:169)&#010;&#009;at org.apache.camel.util.IOHelper.copyAndCloseInput(IOHelper.java:218)&#010;&#009;at org.apache.camel.util.IOHelper.copyAndCloseInput(IOHelper.java:214)&#010;&#009;at&#010;org.apache.camel.http.common.HttpHelper.readResponseBodyFromInputStream(HttpHelper.java:244)&#010;&#009;at&#010;org.apache.camel.http.common.HttpHelper.readRequestBodyFromServletRequest(HttpHelper.java:195)&#010;&#009;at&#010;org.apache.camel.http.common.DefaultHttpBinding.parseBody(DefaultHttpBinding.java:572)&#010;&#009;at org.apache.camel.http.common.HttpMessage.createBody(HttpMessage.java:72)&#010;&#009;... 52 more&#010;&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/IOException-Stream-closed-when-forwarding-HTTP-request-tp5796802.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
19,20,,Re: Curious routing case,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491036576475-5796802.post%40n5.nabble.com%3E,users,"Sat, 01 Apr 2017 08:49:36 GMT","I'm doing an HTTP forward in a Camel Processor and getting a Stream closed&#010;error as shown in the stack trace below. This used to work when using Camel&#010;2.13.2, but it is no longer working now we're running Camel 2.17.1. I've&#010;also tried 2.17.6 and 2.18.3 with the same result. The stack trace below is&#010;when using 2.18.3.&#010;&#010;The application runs on Tomcat 8.0.30, JDK 8.&#010;&#010;Route configuration:&#010;        from(""servlet:///?matchOnUriPrefix=true"")&#010;        .to(""restInboundRequestTransformer"")   // This is the Processor that&#010;is performing the forward.&#010;        ...&#010;&#010;Forwarding:&#010;        httpReq.getRequestDispatcher(requestURI).forward(httpReq, httpRsp);&#010;        ex.setProperty(Exchange.ROUTE_STOP, Boolean.TRUE);&#010;&#010;https://issues.apache.org/jira/browse/CAMEL-10425 is very similar, but&#010;indicates it is fixed in Camel 2.18.1.&#010;&#010;This seems like a bug in Camel, but I'd appreciate any advice on whether&#010;there is a better way for forwarding an HTTP request than what I'm doing.&#010;&#010;org.apache.camel.RuntimeCamelException: java.io.IOException: Stream closed&#010;&#009;at org.apache.camel.http.common.HttpMessage.createBody(HttpMessage.java:74)&#010;&#009;at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:47)&#010;&#009;at&#010;org.apache.camel.http.common.DefaultHttpBinding.readBody(DefaultHttpBinding.java:184)&#010;&#009;at&#010;org.apache.camel.http.common.DefaultHttpBinding.readRequest(DefaultHttpBinding.java:107)&#010;&#009;at org.apache.camel.http.common.HttpMessage.&lt;init&gt;(HttpMessage.java:52)&#010;&#009;at&#010;org.apache.camel.http.common.CamelServlet.doService(CamelServlet.java:169)&#010;&#009;at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:74)&#010;&#009;at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&#010;&#009;at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:719)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:465)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:390)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:317)&#010;&#009;at&#010;com.mycompany.camel.processor.RestInboundRequestTransformer.process(RestInboundRequestTransformer.java:98)&#010;&#009;at&#010;org.apache.camel.impl.ProcessorEndpoint.onExchange(ProcessorEndpoint.java:103)&#010;&#009;at&#010;org.apache.camel.impl.ProcessorEndpoint$1.process(ProcessorEndpoint.java:71)&#010;&#009;at&#010;org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)&#010;&#009;at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145)&#010;&#009;at&#010;org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:77)&#010;&#009;at&#010;org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542)&#010;&#009;at&#010;org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197)&#010;&#009;at org.apache.camel.processor.Pipeline.process(Pipeline.java:120)&#010;&#009;at org.apache.camel.processor.Pipeline.process(Pipeline.java:83)&#010;&#009;at&#010;org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197)&#010;&#009;at&#010;org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97)&#010;&#009;at&#010;org.apache.camel.http.common.CamelServlet.doService(CamelServlet.java:195)&#010;&#009;at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:74)&#010;&#009;at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&#010;&#009;at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)&#010;&#009;at&#010;org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&#010;&#009;at&#010;org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)&#010;&#009;at&#010;org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:106)&#010;&#009;at&#010;org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)&#010;&#009;at&#010;org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)&#010;&#009;at&#010;org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)&#010;&#009;at&#010;org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)&#010;&#009;at&#010;org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)&#010;&#009;at&#010;org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:521)&#010;&#009;at&#010;org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1096)&#010;&#009;at&#010;org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:674)&#010;&#009;at&#010;org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500)&#010;&#009;at&#010;org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456)&#010;&#009;at&#010;java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)&#010;&#009;at&#010;java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)&#010;&#009;at&#010;org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)&#010;&#009;at java.lang.Thread.run(Thread.java:745)&#010;Caused by: java.io.IOException: Stream closed&#010;&#009;at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:372)&#010;&#009;at&#010;org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:156)&#010;&#009;at org.apache.camel.util.IOHelper.copy(IOHelper.java:196)&#010;&#009;at org.apache.camel.util.IOHelper.copy(IOHelper.java:169)&#010;&#009;at org.apache.camel.util.IOHelper.copyAndCloseInput(IOHelper.java:218)&#010;&#009;at org.apache.camel.util.IOHelper.copyAndCloseInput(IOHelper.java:214)&#010;&#009;at&#010;org.apache.camel.http.common.HttpHelper.readResponseBodyFromInputStream(HttpHelper.java:244)&#010;&#009;at&#010;org.apache.camel.http.common.HttpHelper.readRequestBodyFromServletRequest(HttpHelper.java:195)&#010;&#009;at&#010;org.apache.camel.http.common.DefaultHttpBinding.parseBody(DefaultHttpBinding.java:572)&#010;&#009;at org.apache.camel.http.common.HttpMessage.createBody(HttpMessage.java:72)&#010;&#009;... 52 more&#010;&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/IOException-Stream-closed-when-forwarding-HTTP-request-tp5796802.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
20,21,Artur Jablonski,  Re: Curious routing case,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCADUzpe5K4Qy%3DDtu%3D9Qgnz4HoXXnLfp2UkShMgACy-n-Kv77XZg%40mail.gmail.com%3E,users,"Sat, 01 Apr 2017 11:09:21 GMT","Hey Zoran.&#010;&#010;I read again the patterns you mentioned. In my use case the order of&#010;processing within a group doesn't matter as long as two messages from the&#010;same group are never processed in parallel. So i guess resenquencer is out&#010;of the picture unless I didn't get the intention.&#010;&#010;So what we are left with is the content based router. Sure. The message&#010;comes, i can see what group it belongs two... And what next? Perhaps it's&#010;the very first message from that group so I would need to trigger creating&#010;route/processor for that group somehow, perhaps messages from this group&#010;were processed before in which case the processor for the group should&#010;already exist...&#010;&#010;&#010;&#010;&#010;On 31 Mar 2017 7:58 p.m., ""Zoran Regvart"" &lt;zoran@regvart.com&gt; wrote:&#010;&#010;&gt; Hi Artur,&#010;&gt; have a look at Camel EIP page[1], what you describe sounds to me like&#010;&gt; Resequencer and Content based router patterns,&#010;&gt;&#010;&gt; zoran&#010;&gt;&#010;&gt; [1] https://camel.apache.org/eip.html&#010;&gt;&#010;&gt; On Fri, Mar 31, 2017 at 5:08 PM, Artur Jablonski&#010;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt; &gt; Hello.&#010;&gt; &gt;&#010;&gt; &gt; I wonder if someone could push me in the right direction trying to&#010;&gt; express&#010;&gt; &gt; quite curious case in Camel route.&#010;&gt; &gt;&#010;&gt; &gt; Imagine there's a stream of messages some of which can be processed in&#010;&gt; &gt; parallel and some have to be processed serially. You can group the&#010;&gt; messages&#010;&gt; &gt; that require serial processing together by looking at the message body.&#010;&gt; You&#010;&gt; &gt; don't know upfront how many groups can occur in the stream.&#010;&gt; &gt;&#010;&gt; &gt; The way I thought about doing this is having a route for each message&#010;&gt; &gt; group. Since I don't know upfront how many and what groups there will be&#010;&gt; &gt; then I would need to create routes dynamically. If a message comes&#010;&gt; &gt; belonging to a group that doesn't have it's handling route, then i could&#010;&gt; &gt; create it (is that even possible??) Then if there's no messages coming&#010;&gt; for&#010;&gt; &gt; a given group in some time I could remove the route for the group to&#010;&gt; &gt; cleanup (is that possible?)&#010;&gt; &gt;&#010;&gt; &gt; New to Camel&#010;&gt; &gt;&#010;&gt; &gt; Thx!&#010;&gt; &gt; Artur&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Zoran Regvart&#010;&gt;&#010;&#010;"
21,22,Zoran Regvart,    Re: Curious routing case,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCABD_Zr95vrZzdwYTZFoQcKy-s3Xe8oG1uSUf3k-%3D%2BTSBPyNaYQ%40mail.gmail.com%3E,users,"Mon, 03 Apr 2017 09:09:54 GMT","Hi Artur,&#010;I was thinking that the order of the messages would be important as&#010;you need to process them sequentially.&#010;&#010;So I think you could use the dynamic message routing[1] with&#010;aggregator[2], something like:&#010;&#010;    from(""aws-sqs:..."")&#010;        .process(""#preProcess"")&#010;        .toD(""direct:${header.nextRoute}"");&#010;&#010;    from(""direct:parallel"")...;&#010;    from(""direct:sequential"").aggregate(simple(""${header.group}"")).completion..;&#010;&#010;So from yout SQS queue you would use a processor to pre-process&#010;message whose responsibility would be to set the (custom) `nextRoute`&#010;and (custom) `group` headers. `nextRoute` would be `parallel` or&#010;`sequential`, and if `sequential` the messages would be aggregated&#010;using the `group` header.&#010;&#010;You would want to define your own custom aggregation strategy or use&#010;the completion* options that are available to you. There also might be&#010;need to use seda[3] to fine tune any parallel processing. You might&#010;throw in there a data format unmarshaller[4] instead of the&#010;`preProcess` processor and use something like `${body.xyz} == foo` in&#010;the `toD` expression.&#010;&#010;And I would guess that you need to examine transactions or persistence&#010;at some point also in case your aggregation step runs for a long time&#010;or if your use case is sensitive to message loss if interrupted --&#010;which would undoubtedly lead you back to using queues to separate&#010;those two ways of processing,&#010;&#010;HTH,&#010;&#010;zoran&#010;&#010;[1] https://camel.apache.org/message-endpoint.html&#010;[2] https://camel.apache.org/aggregator2.html&#010;[3] https://camel.apache.org/seda.html&#010;[4] https://camel.apache.org/data-format.html&#010;&#010;On Sat, Apr 1, 2017 at 1:09 PM, Artur Jablonski&#010;&lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt; Hey Zoran.&#010;&gt;&#010;&gt; I read again the patterns you mentioned. In my use case the order of&#010;&gt; processing within a group doesn't matter as long as two messages from the&#010;&gt; same group are never processed in parallel. So i guess resenquencer is out&#010;&gt; of the picture unless I didn't get the intention.&#010;&gt;&#010;&gt; So what we are left with is the content based router. Sure. The message&#010;&gt; comes, i can see what group it belongs two... And what next? Perhaps it's&#010;&gt; the very first message from that group so I would need to trigger creating&#010;&gt; route/processor for that group somehow, perhaps messages from this group&#010;&gt; were processed before in which case the processor for the group should&#010;&gt; already exist...&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; On 31 Mar 2017 7:58 p.m., ""Zoran Regvart"" &lt;zoran@regvart.com&gt; wrote:&#010;&gt;&#010;&gt;&gt; Hi Artur,&#010;&gt;&gt; have a look at Camel EIP page[1], what you describe sounds to me like&#010;&gt;&gt; Resequencer and Content based router patterns,&#010;&gt;&gt;&#010;&gt;&gt; zoran&#010;&gt;&gt;&#010;&gt;&gt; [1] https://camel.apache.org/eip.html&#010;&gt;&gt;&#010;&gt;&gt; On Fri, Mar 31, 2017 at 5:08 PM, Artur Jablonski&#010;&gt;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt;&gt; &gt; Hello.&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; I wonder if someone could push me in the right direction trying to&#010;&gt;&gt; express&#010;&gt;&gt; &gt; quite curious case in Camel route.&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; Imagine there's a stream of messages some of which can be processed in&#010;&gt;&gt; &gt; parallel and some have to be processed serially. You can group the&#010;&gt;&gt; messages&#010;&gt;&gt; &gt; that require serial processing together by looking at the message body.&#010;&gt;&gt; You&#010;&gt;&gt; &gt; don't know upfront how many groups can occur in the stream.&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; The way I thought about doing this is having a route for each message&#010;&gt;&gt; &gt; group. Since I don't know upfront how many and what groups there will be&#010;&gt;&gt; &gt; then I would need to create routes dynamically. If a message comes&#010;&gt;&gt; &gt; belonging to a group that doesn't have it's handling route, then i could&#010;&gt;&gt; &gt; create it (is that even possible??) Then if there's no messages coming&#010;&gt;&gt; for&#010;&gt;&gt; &gt; a given group in some time I could remove the route for the group to&#010;&gt;&gt; &gt; cleanup (is that possible?)&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; New to Camel&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; Thx!&#010;&gt;&gt; &gt; Artur&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; --&#010;&gt;&gt; Zoran Regvart&#010;&gt;&gt;&#010;&#010;&#010;&#010;-- &#010;Zoran Regvart&#010;&#010;"
22,23,Artur Jablonski,      Re: Curious routing case,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCADUzpe71EqzOsSBk3XDx6hLAM9UTMYMOs6JPKaVgqQOp7H45TA%40mail.gmail.com%3E,users,"Mon, 03 Apr 2017 11:36:32 GMT","Hi Zoran,&#010;&#010;Thank you for such detailed response. This looks very promising. i will&#010;need to get my head around the aggregator pattern.&#010;For this week I will be busy with other tasks, but I will get back to it as&#010;soon as I can to see if I can get Camel work for the use case.&#010;&#010;Cheerio&#010;Artur&#010;&#010;On Mon, Apr 3, 2017 at 11:09 AM, Zoran Regvart &lt;zoran@regvart.com&gt; wrote:&#010;&#010;&gt; Hi Artur,&#010;&gt; I was thinking that the order of the messages would be important as&#010;&gt; you need to process them sequentially.&#010;&gt;&#010;&gt; So I think you could use the dynamic message routing[1] with&#010;&gt; aggregator[2], something like:&#010;&gt;&#010;&gt;     from(""aws-sqs:..."")&#010;&gt;         .process(""#preProcess"")&#010;&gt;         .toD(""direct:${header.nextRoute}"");&#010;&gt;&#010;&gt;     from(""direct:parallel"")...;&#010;&gt;     from(""direct:sequential"").aggregate(simple(""${header.&#010;&gt; group}"")).completion..;&#010;&gt;&#010;&gt; So from yout SQS queue you would use a processor to pre-process&#010;&gt; message whose responsibility would be to set the (custom) `nextRoute`&#010;&gt; and (custom) `group` headers. `nextRoute` would be `parallel` or&#010;&gt; `sequential`, and if `sequential` the messages would be aggregated&#010;&gt; using the `group` header.&#010;&gt;&#010;&gt; You would want to define your own custom aggregation strategy or use&#010;&gt; the completion* options that are available to you. There also might be&#010;&gt; need to use seda[3] to fine tune any parallel processing. You might&#010;&gt; throw in there a data format unmarshaller[4] instead of the&#010;&gt; `preProcess` processor and use something like `${body.xyz} == foo` in&#010;&gt; the `toD` expression.&#010;&gt;&#010;&gt; And I would guess that you need to examine transactions or persistence&#010;&gt; at some point also in case your aggregation step runs for a long time&#010;&gt; or if your use case is sensitive to message loss if interrupted --&#010;&gt; which would undoubtedly lead you back to using queues to separate&#010;&gt; those two ways of processing,&#010;&gt;&#010;&gt; HTH,&#010;&gt;&#010;&gt; zoran&#010;&gt;&#010;&gt; [1] https://camel.apache.org/message-endpoint.html&#010;&gt; [2] https://camel.apache.org/aggregator2.html&#010;&gt; [3] https://camel.apache.org/seda.html&#010;&gt; [4] https://camel.apache.org/data-format.html&#010;&gt;&#010;&gt; On Sat, Apr 1, 2017 at 1:09 PM, Artur Jablonski&#010;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt; &gt; Hey Zoran.&#010;&gt; &gt;&#010;&gt; &gt; I read again the patterns you mentioned. In my use case the order of&#010;&gt; &gt; processing within a group doesn't matter as long as two messages from the&#010;&gt; &gt; same group are never processed in parallel. So i guess resenquencer is&#010;&gt; out&#010;&gt; &gt; of the picture unless I didn't get the intention.&#010;&gt; &gt;&#010;&gt; &gt; So what we are left with is the content based router. Sure. The message&#010;&gt; &gt; comes, i can see what group it belongs two... And what next? Perhaps it's&#010;&gt; &gt; the very first message from that group so I would need to trigger&#010;&gt; creating&#010;&gt; &gt; route/processor for that group somehow, perhaps messages from this group&#010;&gt; &gt; were processed before in which case the processor for the group should&#010;&gt; &gt; already exist...&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; On 31 Mar 2017 7:58 p.m., ""Zoran Regvart"" &lt;zoran@regvart.com&gt; wrote:&#010;&gt; &gt;&#010;&gt; &gt;&gt; Hi Artur,&#010;&gt; &gt;&gt; have a look at Camel EIP page[1], what you describe sounds to me like&#010;&gt; &gt;&gt; Resequencer and Content based router patterns,&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; zoran&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; [1] https://camel.apache.org/eip.html&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; On Fri, Mar 31, 2017 at 5:08 PM, Artur Jablonski&#010;&gt; &gt;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt; &gt;&gt; &gt; Hello.&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; I wonder if someone could push me in the right direction trying to&#010;&gt; &gt;&gt; express&#010;&gt; &gt;&gt; &gt; quite curious case in Camel route.&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; Imagine there's a stream of messages some of which can be processed in&#010;&gt; &gt;&gt; &gt; parallel and some have to be processed serially. You can group the&#010;&gt; &gt;&gt; messages&#010;&gt; &gt;&gt; &gt; that require serial processing together by looking at the message&#010;&gt; body.&#010;&gt; &gt;&gt; You&#010;&gt; &gt;&gt; &gt; don't know upfront how many groups can occur in the stream.&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; The way I thought about doing this is having a route for each message&#010;&gt; &gt;&gt; &gt; group. Since I don't know upfront how many and what groups there will&#010;&gt; be&#010;&gt; &gt;&gt; &gt; then I would need to create routes dynamically. If a message comes&#010;&gt; &gt;&gt; &gt; belonging to a group that doesn't have it's handling route, then i&#010;&gt; could&#010;&gt; &gt;&gt; &gt; create it (is that even possible??) Then if there's no messages coming&#010;&gt; &gt;&gt; for&#010;&gt; &gt;&gt; &gt; a given group in some time I could remove the route for the group to&#010;&gt; &gt;&gt; &gt; cleanup (is that possible?)&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; New to Camel&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; Thx!&#010;&gt; &gt;&gt; &gt; Artur&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; --&#010;&gt; &gt;&gt; Zoran Regvart&#010;&gt; &gt;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Zoran Regvart&#010;&gt;&#010;&#010;"
23,24,Artur Jablonski,        Re: Curious routing case,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCADUzpe75hQ9n%2BCdz-NYvcuoDP%3DPi-JyyRnb%2BYc%3D1u9Ff5QqqNQ%40mail.gmail.com%3E,users,"Tue, 11 Apr 2017 08:45:49 GMT","Hello,&#010;&#010;I don't think this route definition is fitting my use case, though I learnt&#010;a thing or two about the interesting patterns linked. Thanks!&#010;&#010;Ok, so let me try to clarify the use case.&#010;&#010;&#010;1. The stream is infinite, it's not a batch job. The messages keep on&#010;coming from SQS 'all the time'&#010;&#010;2. More important thing is about parallel processing.&#010;&#010;Let A1 denote a message 1 from group A, B2 message 2 from group B, etc.&#010;&#010;Let's say this is the order in which the messages happen to appear&#010; in the route from SQS&#010;&#010;A1, A2, B1, C1, B2, A3, C2, B3&#010;&#010;Now what I am trying to achieve is grouping the messages that have to be&#010;processed sequentially (order doesn't matter as long as no two messages&#010;from the same group are processed at the same time).&#010;So I am trying to somehow get these streams&#010;&#010;A1, A2, A3&#010;&#010;B1, B2, B3&#010;&#010;C1, C2&#010;&#010;&#010;So, A1 B1 and C1 can be processed in parallel because they are from&#010;different groups, but the messages within groups need to be processed one&#010;by one.&#010;&#010;In my example, there are 3 groups, but there can be many and I don't know&#010;what they are in advance. The processing logic between the groups is&#010;similar and is a function of the group so I can get a processor for group A&#010;from a method call getProcessor(A), B getProcessor(B), etc.&#010;&#010;I am stuck at how to do that in Camel, because since I don't know the&#010;groups in advance, I would need to create processing routes dynamically.&#010;&#010;Say the system starts, and A1 arrives, there can't be any processor for&#010;group A yet, since it's the first message from the group and I need to&#010;somehow dynamically add processing capability of the group A to the route&#010;and then perhaps if the messages from group A stop arriving for some time,&#010;that processor could be removed.&#010;&#010;How to add the parallel part between the group messages is also blurry to&#010;me. One way of doing this I was thinking was to do a multicast to all the&#010;dynamically created processing routes for groups and stick a filter before&#010;so that only messages from particular group can go through. From multicast&#010;page:&#010;&#010;from(""direct:a"").multicast().parallelProcessing().to(""direct:x"",&#010;""direct:y"", ""direct:z"");&#010;&#010;But here the x,y,z endpoints are hardcoded. I could write up some custom&#010;multicast I suppose to search the routes in CamelContext...... not sure.&#010;&#010;Thanks&#010;Artur&#010;&#010;&#010;&#010;&#010;&#010;On Mon, Apr 3, 2017 at 1:36 PM, Artur Jablonski &lt;ajablonski@ravenpack.com&gt;&#010;wrote:&#010;&#010;&gt; Hi Zoran,&#010;&gt;&#010;&gt; Thank you for such detailed response. This looks very promising. i will&#010;&gt; need to get my head around the aggregator pattern.&#010;&gt; For this week I will be busy with other tasks, but I will get back to it&#010;&gt; as soon as I can to see if I can get Camel work for the use case.&#010;&gt;&#010;&gt; Cheerio&#010;&gt; Artur&#010;&gt;&#010;&gt; On Mon, Apr 3, 2017 at 11:09 AM, Zoran Regvart &lt;zoran@regvart.com&gt; wrote:&#010;&gt;&#010;&gt;&gt; Hi Artur,&#010;&gt;&gt; I was thinking that the order of the messages would be important as&#010;&gt;&gt; you need to process them sequentially.&#010;&gt;&gt;&#010;&gt;&gt; So I think you could use the dynamic message routing[1] with&#010;&gt;&gt; aggregator[2], something like:&#010;&gt;&gt;&#010;&gt;&gt;     from(""aws-sqs:..."")&#010;&gt;&gt;         .process(""#preProcess"")&#010;&gt;&gt;         .toD(""direct:${header.nextRoute}"");&#010;&gt;&gt;&#010;&gt;&gt;     from(""direct:parallel"")...;&#010;&gt;&gt;     from(""direct:sequential"").aggregate(simple(""${header.group}""&#010;&gt;&gt; )).completion..;&#010;&gt;&gt;&#010;&gt;&gt; So from yout SQS queue you would use a processor to pre-process&#010;&gt;&gt; message whose responsibility would be to set the (custom) `nextRoute`&#010;&gt;&gt; and (custom) `group` headers. `nextRoute` would be `parallel` or&#010;&gt;&gt; `sequential`, and if `sequential` the messages would be aggregated&#010;&gt;&gt; using the `group` header.&#010;&gt;&gt;&#010;&gt;&gt; You would want to define your own custom aggregation strategy or use&#010;&gt;&gt; the completion* options that are available to you. There also might be&#010;&gt;&gt; need to use seda[3] to fine tune any parallel processing. You might&#010;&gt;&gt; throw in there a data format unmarshaller[4] instead of the&#010;&gt;&gt; `preProcess` processor and use something like `${body.xyz} == foo` in&#010;&gt;&gt; the `toD` expression.&#010;&gt;&gt;&#010;&gt;&gt; And I would guess that you need to examine transactions or persistence&#010;&gt;&gt; at some point also in case your aggregation step runs for a long time&#010;&gt;&gt; or if your use case is sensitive to message loss if interrupted --&#010;&gt;&gt; which would undoubtedly lead you back to using queues to separate&#010;&gt;&gt; those two ways of processing,&#010;&gt;&gt;&#010;&gt;&gt; HTH,&#010;&gt;&gt;&#010;&gt;&gt; zoran&#010;&gt;&gt;&#010;&gt;&gt; [1] https://camel.apache.org/message-endpoint.html&#010;&gt;&gt; [2] https://camel.apache.org/aggregator2.html&#010;&gt;&gt; [3] https://camel.apache.org/seda.html&#010;&gt;&gt; [4] https://camel.apache.org/data-format.html&#010;&gt;&gt;&#010;&gt;&gt; On Sat, Apr 1, 2017 at 1:09 PM, Artur Jablonski&#010;&gt;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt;&gt; &gt; Hey Zoran.&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; I read again the patterns you mentioned. In my use case the order of&#010;&gt;&gt; &gt; processing within a group doesn't matter as long as two messages from&#010;&gt;&gt; the&#010;&gt;&gt; &gt; same group are never processed in parallel. So i guess resenquencer is&#010;&gt;&gt; out&#010;&gt;&gt; &gt; of the picture unless I didn't get the intention.&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; So what we are left with is the content based router. Sure. The message&#010;&gt;&gt; &gt; comes, i can see what group it belongs two... And what next? Perhaps&#010;&gt;&gt; it's&#010;&gt;&gt; &gt; the very first message from that group so I would need to trigger&#010;&gt;&gt; creating&#010;&gt;&gt; &gt; route/processor for that group somehow, perhaps messages from this group&#010;&gt;&gt; &gt; were processed before in which case the processor for the group should&#010;&gt;&gt; &gt; already exist...&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; On 31 Mar 2017 7:58 p.m., ""Zoran Regvart"" &lt;zoran@regvart.com&gt; wrote:&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; Hi Artur,&#010;&gt;&gt; &gt;&gt; have a look at Camel EIP page[1], what you describe sounds to me like&#010;&gt;&gt; &gt;&gt; Resequencer and Content based router patterns,&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; zoran&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; [1] https://camel.apache.org/eip.html&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; On Fri, Mar 31, 2017 at 5:08 PM, Artur Jablonski&#010;&gt;&gt; &gt;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt;&gt; &gt;&gt; &gt; Hello.&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; I wonder if someone could push me in the right direction trying to&#010;&gt;&gt; &gt;&gt; express&#010;&gt;&gt; &gt;&gt; &gt; quite curious case in Camel route.&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; Imagine there's a stream of messages some of which can be processed&#010;&gt;&gt; in&#010;&gt;&gt; &gt;&gt; &gt; parallel and some have to be processed serially. You can group the&#010;&gt;&gt; &gt;&gt; messages&#010;&gt;&gt; &gt;&gt; &gt; that require serial processing together by looking at the message&#010;&gt;&gt; body.&#010;&gt;&gt; &gt;&gt; You&#010;&gt;&gt; &gt;&gt; &gt; don't know upfront how many groups can occur in the stream.&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; The way I thought about doing this is having a route for each message&#010;&gt;&gt; &gt;&gt; &gt; group. Since I don't know upfront how many and what groups there&#010;&gt;&gt; will be&#010;&gt;&gt; &gt;&gt; &gt; then I would need to create routes dynamically. If a message comes&#010;&gt;&gt; &gt;&gt; &gt; belonging to a group that doesn't have it's handling route, then i&#010;&gt;&gt; could&#010;&gt;&gt; &gt;&gt; &gt; create it (is that even possible??) Then if there's no messages&#010;&gt;&gt; coming&#010;&gt;&gt; &gt;&gt; for&#010;&gt;&gt; &gt;&gt; &gt; a given group in some time I could remove the route for the group to&#010;&gt;&gt; &gt;&gt; &gt; cleanup (is that possible?)&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; New to Camel&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; Thx!&#010;&gt;&gt; &gt;&gt; &gt; Artur&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; --&#010;&gt;&gt; &gt;&gt; Zoran Regvart&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; --&#010;&gt;&gt; Zoran Regvart&#010;&gt;&gt;&#010;&gt;&#010;&gt;&#010;&#010;"
24,25,Artur Jablonski,          Re: Curious routing case,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCADUzpe681vK66TONtOUbrn6p_PkDjqcVUfFhswuhueEdqszKsQ%40mail.gmail.com%3E,users,"Tue, 11 Apr 2017 13:31:17 GMT","I guess one thing that come to my mind is to hide all this parallel stuff&#010;inside a processor, that would just spit out on the other end the result of&#010;processing all those messages. It would handle grouping and serializing and&#010;stuff I guess that would reduce the complexity of the route with a cost of&#010;complexity of the processor. I have no better ideas anyway, so I will give&#010;it a go&#010;&#010;On Tue, Apr 11, 2017 at 10:45 AM, Artur Jablonski &lt;ajablonski@ravenpack.com&gt;&#010;wrote:&#010;&#010;&gt; Hello,&#010;&gt;&#010;&gt; I don't think this route definition is fitting my use case, though I&#010;&gt; learnt a thing or two about the interesting patterns linked. Thanks!&#010;&gt;&#010;&gt; Ok, so let me try to clarify the use case.&#010;&gt;&#010;&gt;&#010;&gt; 1. The stream is infinite, it's not a batch job. The messages keep on&#010;&gt; coming from SQS 'all the time'&#010;&gt;&#010;&gt; 2. More important thing is about parallel processing.&#010;&gt;&#010;&gt; Let A1 denote a message 1 from group A, B2 message 2 from group B, etc.&#010;&gt;&#010;&gt; Let's say this is the order in which the messages happen to appear&#010;&gt;  in the route from SQS&#010;&gt;&#010;&gt; A1, A2, B1, C1, B2, A3, C2, B3&#010;&gt;&#010;&gt; Now what I am trying to achieve is grouping the messages that have to be&#010;&gt; processed sequentially (order doesn't matter as long as no two messages&#010;&gt; from the same group are processed at the same time).&#010;&gt; So I am trying to somehow get these streams&#010;&gt;&#010;&gt; A1, A2, A3&#010;&gt;&#010;&gt; B1, B2, B3&#010;&gt;&#010;&gt; C1, C2&#010;&gt;&#010;&gt;&#010;&gt; So, A1 B1 and C1 can be processed in parallel because they are from&#010;&gt; different groups, but the messages within groups need to be processed one&#010;&gt; by one.&#010;&gt;&#010;&gt; In my example, there are 3 groups, but there can be many and I don't know&#010;&gt; what they are in advance. The processing logic between the groups is&#010;&gt; similar and is a function of the group so I can get a processor for group A&#010;&gt; from a method call getProcessor(A), B getProcessor(B), etc.&#010;&gt;&#010;&gt; I am stuck at how to do that in Camel, because since I don't know the&#010;&gt; groups in advance, I would need to create processing routes dynamically.&#010;&gt;&#010;&gt; Say the system starts, and A1 arrives, there can't be any processor for&#010;&gt; group A yet, since it's the first message from the group and I need to&#010;&gt; somehow dynamically add processing capability of the group A to the route&#010;&gt; and then perhaps if the messages from group A stop arriving for some time,&#010;&gt; that processor could be removed.&#010;&gt;&#010;&gt; How to add the parallel part between the group messages is also blurry to&#010;&gt; me. One way of doing this I was thinking was to do a multicast to all the&#010;&gt; dynamically created processing routes for groups and stick a filter before&#010;&gt; so that only messages from particular group can go through. From multicast&#010;&gt; page:&#010;&gt;&#010;&gt; from(""direct:a"").multicast().parallelProcessing().to(""direct:x"",&#010;&gt; ""direct:y"", ""direct:z"");&#010;&gt;&#010;&gt; But here the x,y,z endpoints are hardcoded. I could write up some custom&#010;&gt; multicast I suppose to search the routes in CamelContext...... not sure.&#010;&gt;&#010;&gt; Thanks&#010;&gt; Artur&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; On Mon, Apr 3, 2017 at 1:36 PM, Artur Jablonski &lt;ajablonski@ravenpack.com&gt;&#010;&gt; wrote:&#010;&gt;&#010;&gt;&gt; Hi Zoran,&#010;&gt;&gt;&#010;&gt;&gt; Thank you for such detailed response. This looks very promising. i will&#010;&gt;&gt; need to get my head around the aggregator pattern.&#010;&gt;&gt; For this week I will be busy with other tasks, but I will get back to it&#010;&gt;&gt; as soon as I can to see if I can get Camel work for the use case.&#010;&gt;&gt;&#010;&gt;&gt; Cheerio&#010;&gt;&gt; Artur&#010;&gt;&gt;&#010;&gt;&gt; On Mon, Apr 3, 2017 at 11:09 AM, Zoran Regvart &lt;zoran@regvart.com&gt; wrote:&#010;&gt;&gt;&#010;&gt;&gt;&gt; Hi Artur,&#010;&gt;&gt;&gt; I was thinking that the order of the messages would be important as&#010;&gt;&gt;&gt; you need to process them sequentially.&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; So I think you could use the dynamic message routing[1] with&#010;&gt;&gt;&gt; aggregator[2], something like:&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt;     from(""aws-sqs:..."")&#010;&gt;&gt;&gt;         .process(""#preProcess"")&#010;&gt;&gt;&gt;         .toD(""direct:${header.nextRoute}"");&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt;     from(""direct:parallel"")...;&#010;&gt;&gt;&gt;     from(""direct:sequential"").aggregate(simple(""${header.group}""&#010;&gt;&gt;&gt; )).completion..;&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; So from yout SQS queue you would use a processor to pre-process&#010;&gt;&gt;&gt; message whose responsibility would be to set the (custom) `nextRoute`&#010;&gt;&gt;&gt; and (custom) `group` headers. `nextRoute` would be `parallel` or&#010;&gt;&gt;&gt; `sequential`, and if `sequential` the messages would be aggregated&#010;&gt;&gt;&gt; using the `group` header.&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; You would want to define your own custom aggregation strategy or use&#010;&gt;&gt;&gt; the completion* options that are available to you. There also might be&#010;&gt;&gt;&gt; need to use seda[3] to fine tune any parallel processing. You might&#010;&gt;&gt;&gt; throw in there a data format unmarshaller[4] instead of the&#010;&gt;&gt;&gt; `preProcess` processor and use something like `${body.xyz} == foo` in&#010;&gt;&gt;&gt; the `toD` expression.&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; And I would guess that you need to examine transactions or persistence&#010;&gt;&gt;&gt; at some point also in case your aggregation step runs for a long time&#010;&gt;&gt;&gt; or if your use case is sensitive to message loss if interrupted --&#010;&gt;&gt;&gt; which would undoubtedly lead you back to using queues to separate&#010;&gt;&gt;&gt; those two ways of processing,&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; HTH,&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; zoran&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; [1] https://camel.apache.org/message-endpoint.html&#010;&gt;&gt;&gt; [2] https://camel.apache.org/aggregator2.html&#010;&gt;&gt;&gt; [3] https://camel.apache.org/seda.html&#010;&gt;&gt;&gt; [4] https://camel.apache.org/data-format.html&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; On Sat, Apr 1, 2017 at 1:09 PM, Artur Jablonski&#010;&gt;&gt;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt;&gt;&gt; &gt; Hey Zoran.&#010;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt; I read again the patterns you mentioned. In my use case the order of&#010;&gt;&gt;&gt; &gt; processing within a group doesn't matter as long as two messages from&#010;&gt;&gt;&gt; the&#010;&gt;&gt;&gt; &gt; same group are never processed in parallel. So i guess resenquencer is&#010;&gt;&gt;&gt; out&#010;&gt;&gt;&gt; &gt; of the picture unless I didn't get the intention.&#010;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt; So what we are left with is the content based router. Sure. The message&#010;&gt;&gt;&gt; &gt; comes, i can see what group it belongs two... And what next? Perhaps&#010;&gt;&gt;&gt; it's&#010;&gt;&gt;&gt; &gt; the very first message from that group so I would need to trigger&#010;&gt;&gt;&gt; creating&#010;&gt;&gt;&gt; &gt; route/processor for that group somehow, perhaps messages from this&#010;&gt;&gt;&gt; group&#010;&gt;&gt;&gt; &gt; were processed before in which case the processor for the group should&#010;&gt;&gt;&gt; &gt; already exist...&#010;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt; On 31 Mar 2017 7:58 p.m., ""Zoran Regvart"" &lt;zoran@regvart.com&gt; wrote:&#010;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; Hi Artur,&#010;&gt;&gt;&gt; &gt;&gt; have a look at Camel EIP page[1], what you describe sounds to me like&#010;&gt;&gt;&gt; &gt;&gt; Resequencer and Content based router patterns,&#010;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt; &gt;&gt; zoran&#010;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt; &gt;&gt; [1] https://camel.apache.org/eip.html&#010;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt; &gt;&gt; On Fri, Mar 31, 2017 at 5:08 PM, Artur Jablonski&#010;&gt;&gt;&gt; &gt;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt;&gt;&gt; &gt;&gt; &gt; Hello.&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; I wonder if someone could push me in the right direction trying&#010;to&#010;&gt;&gt;&gt; &gt;&gt; express&#010;&gt;&gt;&gt; &gt;&gt; &gt; quite curious case in Camel route.&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; Imagine there's a stream of messages some of which can be processed&#010;&gt;&gt;&gt; in&#010;&gt;&gt;&gt; &gt;&gt; &gt; parallel and some have to be processed serially. You can group&#010;the&#010;&gt;&gt;&gt; &gt;&gt; messages&#010;&gt;&gt;&gt; &gt;&gt; &gt; that require serial processing together by looking at the message&#010;&gt;&gt;&gt; body.&#010;&gt;&gt;&gt; &gt;&gt; You&#010;&gt;&gt;&gt; &gt;&gt; &gt; don't know upfront how many groups can occur in the stream.&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; The way I thought about doing this is having a route for each&#010;&gt;&gt;&gt; message&#010;&gt;&gt;&gt; &gt;&gt; &gt; group. Since I don't know upfront how many and what groups there&#010;&gt;&gt;&gt; will be&#010;&gt;&gt;&gt; &gt;&gt; &gt; then I would need to create routes dynamically. If a message comes&#010;&gt;&gt;&gt; &gt;&gt; &gt; belonging to a group that doesn't have it's handling route, then&#010;i&#010;&gt;&gt;&gt; could&#010;&gt;&gt;&gt; &gt;&gt; &gt; create it (is that even possible??) Then if there's no messages&#010;&gt;&gt;&gt; coming&#010;&gt;&gt;&gt; &gt;&gt; for&#010;&gt;&gt;&gt; &gt;&gt; &gt; a given group in some time I could remove the route for the group&#010;to&#010;&gt;&gt;&gt; &gt;&gt; &gt; cleanup (is that possible?)&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; New to Camel&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; Thx!&#010;&gt;&gt;&gt; &gt;&gt; &gt; Artur&#010;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt; &gt;&gt; --&#010;&gt;&gt;&gt; &gt;&gt; Zoran Regvart&#010;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; --&#010;&gt;&gt;&gt; Zoran Regvart&#010;&gt;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&#010;&#010;"
25,26,Claus Ibsen,            Re: Curious routing case,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNkSFPAZhF9%3DotL4jjZFtHXMFWQoGoaov8xFV76b7MQySg%40mail.gmail.com%3E,users,"Tue, 11 Apr 2017 15:06:34 GMT","If you use ActiveMQ you can use its message grouping support&#010;http://activemq.apache.org/message-groups.html&#010;&#010;And Apache Kafka has topics where you can use partition ids to group&#010;by A, B, C and then have parallel processing of each group.&#010;&#010;Not sure SQS has such advanced features.&#010;&#010;Its a bit brittle to have to write java code or split / aggregate eip&#010;patterns in camel to do this, and if you want to have some level of&#010;transaction guarantees. All EIP patterns in camel are transient and&#010;dont persist their state etc.&#010;&#010;in other words try to use a better messaging system.&#010;&#010;&#010;On Tue, Apr 11, 2017 at 3:31 PM, Artur Jablonski&#010;&lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt; I guess one thing that come to my mind is to hide all this parallel stuff&#010;&gt; inside a processor, that would just spit out on the other end the result of&#010;&gt; processing all those messages. It would handle grouping and serializing and&#010;&gt; stuff I guess that would reduce the complexity of the route with a cost of&#010;&gt; complexity of the processor. I have no better ideas anyway, so I will give&#010;&gt; it a go&#010;&gt;&#010;&gt; On Tue, Apr 11, 2017 at 10:45 AM, Artur Jablonski &lt;ajablonski@ravenpack.com&gt;&#010;&gt; wrote:&#010;&gt;&#010;&gt;&gt; Hello,&#010;&gt;&gt;&#010;&gt;&gt; I don't think this route definition is fitting my use case, though I&#010;&gt;&gt; learnt a thing or two about the interesting patterns linked. Thanks!&#010;&gt;&gt;&#010;&gt;&gt; Ok, so let me try to clarify the use case.&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; 1. The stream is infinite, it's not a batch job. The messages keep on&#010;&gt;&gt; coming from SQS 'all the time'&#010;&gt;&gt;&#010;&gt;&gt; 2. More important thing is about parallel processing.&#010;&gt;&gt;&#010;&gt;&gt; Let A1 denote a message 1 from group A, B2 message 2 from group B, etc.&#010;&gt;&gt;&#010;&gt;&gt; Let's say this is the order in which the messages happen to appear&#010;&gt;&gt;  in the route from SQS&#010;&gt;&gt;&#010;&gt;&gt; A1, A2, B1, C1, B2, A3, C2, B3&#010;&gt;&gt;&#010;&gt;&gt; Now what I am trying to achieve is grouping the messages that have to be&#010;&gt;&gt; processed sequentially (order doesn't matter as long as no two messages&#010;&gt;&gt; from the same group are processed at the same time).&#010;&gt;&gt; So I am trying to somehow get these streams&#010;&gt;&gt;&#010;&gt;&gt; A1, A2, A3&#010;&gt;&gt;&#010;&gt;&gt; B1, B2, B3&#010;&gt;&gt;&#010;&gt;&gt; C1, C2&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; So, A1 B1 and C1 can be processed in parallel because they are from&#010;&gt;&gt; different groups, but the messages within groups need to be processed one&#010;&gt;&gt; by one.&#010;&gt;&gt;&#010;&gt;&gt; In my example, there are 3 groups, but there can be many and I don't know&#010;&gt;&gt; what they are in advance. The processing logic between the groups is&#010;&gt;&gt; similar and is a function of the group so I can get a processor for group A&#010;&gt;&gt; from a method call getProcessor(A), B getProcessor(B), etc.&#010;&gt;&gt;&#010;&gt;&gt; I am stuck at how to do that in Camel, because since I don't know the&#010;&gt;&gt; groups in advance, I would need to create processing routes dynamically.&#010;&gt;&gt;&#010;&gt;&gt; Say the system starts, and A1 arrives, there can't be any processor for&#010;&gt;&gt; group A yet, since it's the first message from the group and I need to&#010;&gt;&gt; somehow dynamically add processing capability of the group A to the route&#010;&gt;&gt; and then perhaps if the messages from group A stop arriving for some time,&#010;&gt;&gt; that processor could be removed.&#010;&gt;&gt;&#010;&gt;&gt; How to add the parallel part between the group messages is also blurry to&#010;&gt;&gt; me. One way of doing this I was thinking was to do a multicast to all the&#010;&gt;&gt; dynamically created processing routes for groups and stick a filter before&#010;&gt;&gt; so that only messages from particular group can go through. From multicast&#010;&gt;&gt; page:&#010;&gt;&gt;&#010;&gt;&gt; from(""direct:a"").multicast().parallelProcessing().to(""direct:x"",&#010;&gt;&gt; ""direct:y"", ""direct:z"");&#010;&gt;&gt;&#010;&gt;&gt; But here the x,y,z endpoints are hardcoded. I could write up some custom&#010;&gt;&gt; multicast I suppose to search the routes in CamelContext...... not sure.&#010;&gt;&gt;&#010;&gt;&gt; Thanks&#010;&gt;&gt; Artur&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; On Mon, Apr 3, 2017 at 1:36 PM, Artur Jablonski &lt;ajablonski@ravenpack.com&gt;&#010;&gt;&gt; wrote:&#010;&gt;&gt;&#010;&gt;&gt;&gt; Hi Zoran,&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; Thank you for such detailed response. This looks very promising. i will&#010;&gt;&gt;&gt; need to get my head around the aggregator pattern.&#010;&gt;&gt;&gt; For this week I will be busy with other tasks, but I will get back to it&#010;&gt;&gt;&gt; as soon as I can to see if I can get Camel work for the use case.&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; Cheerio&#010;&gt;&gt;&gt; Artur&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; On Mon, Apr 3, 2017 at 11:09 AM, Zoran Regvart &lt;zoran@regvart.com&gt; wrote:&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt; Hi Artur,&#010;&gt;&gt;&gt;&gt; I was thinking that the order of the messages would be important as&#010;&gt;&gt;&gt;&gt; you need to process them sequentially.&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt; So I think you could use the dynamic message routing[1] with&#010;&gt;&gt;&gt;&gt; aggregator[2], something like:&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt;     from(""aws-sqs:..."")&#010;&gt;&gt;&gt;&gt;         .process(""#preProcess"")&#010;&gt;&gt;&gt;&gt;         .toD(""direct:${header.nextRoute}"");&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt;     from(""direct:parallel"")...;&#010;&gt;&gt;&gt;&gt;     from(""direct:sequential"").aggregate(simple(""${header.group}""&#010;&gt;&gt;&gt;&gt; )).completion..;&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt; So from yout SQS queue you would use a processor to pre-process&#010;&gt;&gt;&gt;&gt; message whose responsibility would be to set the (custom) `nextRoute`&#010;&gt;&gt;&gt;&gt; and (custom) `group` headers. `nextRoute` would be `parallel` or&#010;&gt;&gt;&gt;&gt; `sequential`, and if `sequential` the messages would be aggregated&#010;&gt;&gt;&gt;&gt; using the `group` header.&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt; You would want to define your own custom aggregation strategy or use&#010;&gt;&gt;&gt;&gt; the completion* options that are available to you. There also might be&#010;&gt;&gt;&gt;&gt; need to use seda[3] to fine tune any parallel processing. You might&#010;&gt;&gt;&gt;&gt; throw in there a data format unmarshaller[4] instead of the&#010;&gt;&gt;&gt;&gt; `preProcess` processor and use something like `${body.xyz} == foo` in&#010;&gt;&gt;&gt;&gt; the `toD` expression.&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt; And I would guess that you need to examine transactions or persistence&#010;&gt;&gt;&gt;&gt; at some point also in case your aggregation step runs for a long time&#010;&gt;&gt;&gt;&gt; or if your use case is sensitive to message loss if interrupted --&#010;&gt;&gt;&gt;&gt; which would undoubtedly lead you back to using queues to separate&#010;&gt;&gt;&gt;&gt; those two ways of processing,&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt; HTH,&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt; zoran&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt; [1] https://camel.apache.org/message-endpoint.html&#010;&gt;&gt;&gt;&gt; [2] https://camel.apache.org/aggregator2.html&#010;&gt;&gt;&gt;&gt; [3] https://camel.apache.org/seda.html&#010;&gt;&gt;&gt;&gt; [4] https://camel.apache.org/data-format.html&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt; On Sat, Apr 1, 2017 at 1:09 PM, Artur Jablonski&#010;&gt;&gt;&gt;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt;&gt;&gt;&gt; &gt; Hey Zoran.&#010;&gt;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt;&gt; &gt; I read again the patterns you mentioned. In my use case the order of&#010;&gt;&gt;&gt;&gt; &gt; processing within a group doesn't matter as long as two messages from&#010;&gt;&gt;&gt;&gt; the&#010;&gt;&gt;&gt;&gt; &gt; same group are never processed in parallel. So i guess resenquencer&#010;is&#010;&gt;&gt;&gt;&gt; out&#010;&gt;&gt;&gt;&gt; &gt; of the picture unless I didn't get the intention.&#010;&gt;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt;&gt; &gt; So what we are left with is the content based router. Sure. The message&#010;&gt;&gt;&gt;&gt; &gt; comes, i can see what group it belongs two... And what next? Perhaps&#010;&gt;&gt;&gt;&gt; it's&#010;&gt;&gt;&gt;&gt; &gt; the very first message from that group so I would need to trigger&#010;&gt;&gt;&gt;&gt; creating&#010;&gt;&gt;&gt;&gt; &gt; route/processor for that group somehow, perhaps messages from this&#010;&gt;&gt;&gt;&gt; group&#010;&gt;&gt;&gt;&gt; &gt; were processed before in which case the processor for the group should&#010;&gt;&gt;&gt;&gt; &gt; already exist...&#010;&gt;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt;&gt; &gt; On 31 Mar 2017 7:58 p.m., ""Zoran Regvart"" &lt;zoran@regvart.com&gt;&#010;wrote:&#010;&gt;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt;&gt; &gt;&gt; Hi Artur,&#010;&gt;&gt;&gt;&gt; &gt;&gt; have a look at Camel EIP page[1], what you describe sounds to me&#010;like&#010;&gt;&gt;&gt;&gt; &gt;&gt; Resequencer and Content based router patterns,&#010;&gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt;&gt; &gt;&gt; zoran&#010;&gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt;&gt; &gt;&gt; [1] https://camel.apache.org/eip.html&#010;&gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt;&gt; &gt;&gt; On Fri, Mar 31, 2017 at 5:08 PM, Artur Jablonski&#010;&gt;&gt;&gt;&gt; &gt;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Hello.&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; I wonder if someone could push me in the right direction trying&#010;to&#010;&gt;&gt;&gt;&gt; &gt;&gt; express&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; quite curious case in Camel route.&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Imagine there's a stream of messages some of which can be processed&#010;&gt;&gt;&gt;&gt; in&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; parallel and some have to be processed serially. You can group&#010;the&#010;&gt;&gt;&gt;&gt; &gt;&gt; messages&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; that require serial processing together by looking at the message&#010;&gt;&gt;&gt;&gt; body.&#010;&gt;&gt;&gt;&gt; &gt;&gt; You&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; don't know upfront how many groups can occur in the stream.&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; The way I thought about doing this is having a route for each&#010;&gt;&gt;&gt;&gt; message&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; group. Since I don't know upfront how many and what groups&#010;there&#010;&gt;&gt;&gt;&gt; will be&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; then I would need to create routes dynamically. If a message&#010;comes&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; belonging to a group that doesn't have it's handling route,&#010;then i&#010;&gt;&gt;&gt;&gt; could&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; create it (is that even possible??) Then if there's no messages&#010;&gt;&gt;&gt;&gt; coming&#010;&gt;&gt;&gt;&gt; &gt;&gt; for&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; a given group in some time I could remove the route for the&#010;group to&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; cleanup (is that possible?)&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; New to Camel&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Thx!&#010;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Artur&#010;&gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt;&gt; &gt;&gt; --&#010;&gt;&gt;&gt;&gt; &gt;&gt; Zoran Regvart&#010;&gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&gt; --&#010;&gt;&gt;&gt;&gt; Zoran Regvart&#010;&gt;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&#010;&gt;&gt;&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
26,27,Henrique Viecili,              Re: Curious routing case,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2B2r3Z7WAr7uX%3DR2OFBPOFKvj5gG1TpXXYyQJZ78d%3D-3doGC7A%40mail.gmail.com%3E,users,"Thu, 20 Apr 2017 05:16:54 GMT","Hi Artur,&#010;&#010;As your group set is unbounded, you may need to look at creating&#010;(in-memory) queues and routes at runtime and attaching them to a camel&#010;context (or spawning their own context). You can use some camel trickery&#010;with DefaultCamelContext + RouteDefinition, it's ugly but it should work.&#010;&#010;Regards,&#010;Henrique&#010;&#010;&#010;&#010;Henrique Viecili&#010;&#010;On 12 April 2017 at 01:06, Claus Ibsen &lt;claus.ibsen@gmail.com&gt; wrote:&#010;&#010;&gt; If you use ActiveMQ you can use its message grouping support&#010;&gt; http://activemq.apache.org/message-groups.html&#010;&gt;&#010;&gt; And Apache Kafka has topics where you can use partition ids to group&#010;&gt; by A, B, C and then have parallel processing of each group.&#010;&gt;&#010;&gt; Not sure SQS has such advanced features.&#010;&gt;&#010;&gt; Its a bit brittle to have to write java code or split / aggregate eip&#010;&gt; patterns in camel to do this, and if you want to have some level of&#010;&gt; transaction guarantees. All EIP patterns in camel are transient and&#010;&gt; dont persist their state etc.&#010;&gt;&#010;&gt; in other words try to use a better messaging system.&#010;&gt;&#010;&gt;&#010;&gt; On Tue, Apr 11, 2017 at 3:31 PM, Artur Jablonski&#010;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt; &gt; I guess one thing that come to my mind is to hide all this parallel stuff&#010;&gt; &gt; inside a processor, that would just spit out on the other end the result&#010;&gt; of&#010;&gt; &gt; processing all those messages. It would handle grouping and serializing&#010;&gt; and&#010;&gt; &gt; stuff I guess that would reduce the complexity of the route with a cost&#010;&gt; of&#010;&gt; &gt; complexity of the processor. I have no better ideas anyway, so I will&#010;&gt; give&#010;&gt; &gt; it a go&#010;&gt; &gt;&#010;&gt; &gt; On Tue, Apr 11, 2017 at 10:45 AM, Artur Jablonski &lt;&#010;&gt; ajablonski@ravenpack.com&gt;&#010;&gt; &gt; wrote:&#010;&gt; &gt;&#010;&gt; &gt;&gt; Hello,&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; I don't think this route definition is fitting my use case, though I&#010;&gt; &gt;&gt; learnt a thing or two about the interesting patterns linked. Thanks!&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Ok, so let me try to clarify the use case.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; 1. The stream is infinite, it's not a batch job. The messages keep on&#010;&gt; &gt;&gt; coming from SQS 'all the time'&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; 2. More important thing is about parallel processing.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Let A1 denote a message 1 from group A, B2 message 2 from group B, etc.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Let's say this is the order in which the messages happen to appear&#010;&gt; &gt;&gt;  in the route from SQS&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; A1, A2, B1, C1, B2, A3, C2, B3&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Now what I am trying to achieve is grouping the messages that have to be&#010;&gt; &gt;&gt; processed sequentially (order doesn't matter as long as no two messages&#010;&gt; &gt;&gt; from the same group are processed at the same time).&#010;&gt; &gt;&gt; So I am trying to somehow get these streams&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; A1, A2, A3&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; B1, B2, B3&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; C1, C2&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; So, A1 B1 and C1 can be processed in parallel because they are from&#010;&gt; &gt;&gt; different groups, but the messages within groups need to be processed&#010;&gt; one&#010;&gt; &gt;&gt; by one.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; In my example, there are 3 groups, but there can be many and I don't&#010;&gt; know&#010;&gt; &gt;&gt; what they are in advance. The processing logic between the groups is&#010;&gt; &gt;&gt; similar and is a function of the group so I can get a processor for&#010;&gt; group A&#010;&gt; &gt;&gt; from a method call getProcessor(A), B getProcessor(B), etc.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; I am stuck at how to do that in Camel, because since I don't know the&#010;&gt; &gt;&gt; groups in advance, I would need to create processing routes dynamically.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Say the system starts, and A1 arrives, there can't be any processor for&#010;&gt; &gt;&gt; group A yet, since it's the first message from the group and I need to&#010;&gt; &gt;&gt; somehow dynamically add processing capability of the group A to the&#010;&gt; route&#010;&gt; &gt;&gt; and then perhaps if the messages from group A stop arriving for some&#010;&gt; time,&#010;&gt; &gt;&gt; that processor could be removed.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; How to add the parallel part between the group messages is also blurry&#010;&gt; to&#010;&gt; &gt;&gt; me. One way of doing this I was thinking was to do a multicast to all&#010;&gt; the&#010;&gt; &gt;&gt; dynamically created processing routes for groups and stick a filter&#010;&gt; before&#010;&gt; &gt;&gt; so that only messages from particular group can go through. From&#010;&gt; multicast&#010;&gt; &gt;&gt; page:&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; from(""direct:a"").multicast().parallelProcessing().to(""direct:x"",&#010;&gt; &gt;&gt; ""direct:y"", ""direct:z"");&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; But here the x,y,z endpoints are hardcoded. I could write up some custom&#010;&gt; &gt;&gt; multicast I suppose to search the routes in CamelContext...... not sure.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Thanks&#010;&gt; &gt;&gt; Artur&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; On Mon, Apr 3, 2017 at 1:36 PM, Artur Jablonski &lt;&#010;&gt; ajablonski@ravenpack.com&gt;&#010;&gt; &gt;&gt; wrote:&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt; Hi Zoran,&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt; Thank you for such detailed response. This looks very promising. i will&#010;&gt; &gt;&gt;&gt; need to get my head around the aggregator pattern.&#010;&gt; &gt;&gt;&gt; For this week I will be busy with other tasks, but I will get back to&#010;&gt; it&#010;&gt; &gt;&gt;&gt; as soon as I can to see if I can get Camel work for the use case.&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt; Cheerio&#010;&gt; &gt;&gt;&gt; Artur&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt; On Mon, Apr 3, 2017 at 11:09 AM, Zoran Regvart &lt;zoran@regvart.com&gt;&#010;&gt; wrote:&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; Hi Artur,&#010;&gt; &gt;&gt;&gt;&gt; I was thinking that the order of the messages would be important as&#010;&gt; &gt;&gt;&gt;&gt; you need to process them sequentially.&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; So I think you could use the dynamic message routing[1] with&#010;&gt; &gt;&gt;&gt;&gt; aggregator[2], something like:&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt;     from(""aws-sqs:..."")&#010;&gt; &gt;&gt;&gt;&gt;         .process(""#preProcess"")&#010;&gt; &gt;&gt;&gt;&gt;         .toD(""direct:${header.nextRoute}"");&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt;     from(""direct:parallel"")...;&#010;&gt; &gt;&gt;&gt;&gt;     from(""direct:sequential"").aggregate(simple(""${header.group}""&#010;&gt; &gt;&gt;&gt;&gt; )).completion..;&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; So from yout SQS queue you would use a processor to pre-process&#010;&gt; &gt;&gt;&gt;&gt; message whose responsibility would be to set the (custom) `nextRoute`&#010;&gt; &gt;&gt;&gt;&gt; and (custom) `group` headers. `nextRoute` would be `parallel` or&#010;&gt; &gt;&gt;&gt;&gt; `sequential`, and if `sequential` the messages would be aggregated&#010;&gt; &gt;&gt;&gt;&gt; using the `group` header.&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; You would want to define your own custom aggregation strategy or use&#010;&gt; &gt;&gt;&gt;&gt; the completion* options that are available to you. There also might&#010;be&#010;&gt; &gt;&gt;&gt;&gt; need to use seda[3] to fine tune any parallel processing. You might&#010;&gt; &gt;&gt;&gt;&gt; throw in there a data format unmarshaller[4] instead of the&#010;&gt; &gt;&gt;&gt;&gt; `preProcess` processor and use something like `${body.xyz} == foo` in&#010;&gt; &gt;&gt;&gt;&gt; the `toD` expression.&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; And I would guess that you need to examine transactions or persistence&#010;&gt; &gt;&gt;&gt;&gt; at some point also in case your aggregation step runs for a long time&#010;&gt; &gt;&gt;&gt;&gt; or if your use case is sensitive to message loss if interrupted --&#010;&gt; &gt;&gt;&gt;&gt; which would undoubtedly lead you back to using queues to separate&#010;&gt; &gt;&gt;&gt;&gt; those two ways of processing,&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; HTH,&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; zoran&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; [1] https://camel.apache.org/message-endpoint.html&#010;&gt; &gt;&gt;&gt;&gt; [2] https://camel.apache.org/aggregator2.html&#010;&gt; &gt;&gt;&gt;&gt; [3] https://camel.apache.org/seda.html&#010;&gt; &gt;&gt;&gt;&gt; [4] https://camel.apache.org/data-format.html&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; On Sat, Apr 1, 2017 at 1:09 PM, Artur Jablonski&#010;&gt; &gt;&gt;&gt;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt; &gt;&gt;&gt;&gt; &gt; Hey Zoran.&#010;&gt; &gt;&gt;&gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt; I read again the patterns you mentioned. In my use case the order&#010;of&#010;&gt; &gt;&gt;&gt;&gt; &gt; processing within a group doesn't matter as long as two messages&#010;&gt; from&#010;&gt; &gt;&gt;&gt;&gt; the&#010;&gt; &gt;&gt;&gt;&gt; &gt; same group are never processed in parallel. So i guess resenquencer&#010;&gt; is&#010;&gt; &gt;&gt;&gt;&gt; out&#010;&gt; &gt;&gt;&gt;&gt; &gt; of the picture unless I didn't get the intention.&#010;&gt; &gt;&gt;&gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt; So what we are left with is the content based router. Sure. The&#010;&gt; message&#010;&gt; &gt;&gt;&gt;&gt; &gt; comes, i can see what group it belongs two... And what next? Perhaps&#010;&gt; &gt;&gt;&gt;&gt; it's&#010;&gt; &gt;&gt;&gt;&gt; &gt; the very first message from that group so I would need to trigger&#010;&gt; &gt;&gt;&gt;&gt; creating&#010;&gt; &gt;&gt;&gt;&gt; &gt; route/processor for that group somehow, perhaps messages from this&#010;&gt; &gt;&gt;&gt;&gt; group&#010;&gt; &gt;&gt;&gt;&gt; &gt; were processed before in which case the processor for the group&#010;&gt; should&#010;&gt; &gt;&gt;&gt;&gt; &gt; already exist...&#010;&gt; &gt;&gt;&gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt; On 31 Mar 2017 7:58 p.m., ""Zoran Regvart"" &lt;zoran@regvart.com&gt;&#010;&gt; wrote:&#010;&gt; &gt;&gt;&gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; Hi Artur,&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; have a look at Camel EIP page[1], what you describe sounds&#010;to me&#010;&gt; like&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; Resequencer and Content based router patterns,&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; zoran&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; [1] https://camel.apache.org/eip.html&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; On Fri, Mar 31, 2017 at 5:08 PM, Artur Jablonski&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; Hello.&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; I wonder if someone could push me in the right direction&#010;trying&#010;&gt; to&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; express&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; quite curious case in Camel route.&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; Imagine there's a stream of messages some of which can&#010;be&#010;&gt; processed&#010;&gt; &gt;&gt;&gt;&gt; in&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; parallel and some have to be processed serially. You can&#010;group&#010;&gt; the&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; messages&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; that require serial processing together by looking at&#010;the message&#010;&gt; &gt;&gt;&gt;&gt; body.&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; You&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; don't know upfront how many groups can occur in the stream.&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; The way I thought about doing this is having a route for&#010;each&#010;&gt; &gt;&gt;&gt;&gt; message&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; group. Since I don't know upfront how many and what groups&#010;there&#010;&gt; &gt;&gt;&gt;&gt; will be&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; then I would need to create routes dynamically. If a message&#010;&gt; comes&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; belonging to a group that doesn't have it's handling route,&#010;then&#010;&gt; i&#010;&gt; &gt;&gt;&gt;&gt; could&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; create it (is that even possible??) Then if there's no&#010;messages&#010;&gt; &gt;&gt;&gt;&gt; coming&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; for&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; a given group in some time I could remove the route for&#010;the&#010;&gt; group to&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; cleanup (is that possible?)&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; New to Camel&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; Thx!&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; &gt; Artur&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; --&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt; Zoran Regvart&#010;&gt; &gt;&gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&gt; --&#010;&gt; &gt;&gt;&gt;&gt; Zoran Regvart&#010;&gt; &gt;&gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&#010;"
27,28,JD Innocenti,AggregationStrategy: null body in new exchange,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491229244820-5796879.post%40n5.nabble.com%3E,users,"Mon, 03 Apr 2017 14:20:44 GMT","Hi all,&#010;&#010;I'm having a problem with the AggregationStrategy I implemented for an&#010;application. In short, the newExchange parameters I receive (to follow the&#010;same naming convention as in the  documentation&#010;&lt;https://camel.apache.org/aggregator.html&gt;  ) always have a null body. &#010;&#010;To elaborate: my route is pretty simple. It downloads files from an FTP&#010;server, transforms then into POJOs, aggregate those into a single POJO,&#010;which is then marshalled and saved to a file. I'm working with JBoss&#010;Developer Studio (an Eclipse derivative), and when I test from the IDE, this&#010;works fine (behind the scenes, the IDE does ""mvn clean package&#010;org.apache.camel:camel-maven-plugin:run"").&#010;&#010;However, when I build an OSGi bundle of my application (with ""mvn clean&#010;install""), which I then deploy in JBoss Fuse (on Karaf), the deployment is&#010;successful but my aggregator only receives null-bodied ""newExchange"" params.&#010;The correlation expression I use is a simple constant, since all POJOs must&#010;be aggregated.&#010;&#010;I also posted about this issue on  StackOverflow&#010;&lt;https://stackoverflow.com/questions/43184357/different-behavior-of-apache-camel-aggregation-in-ide-and-when-deployed-in-jboss&gt;&#010;&#010;, in case someone finds this post in the future ;)&#010;&#010;Here's what the aggregation looks like in my Camel context:&#010;&#010;&#010;&#010;And for the sake of completeness, here's the beginning of the aggregator:&#010;&#010;&#010;&#010;(MyPojoClass is in the same package than the aggregator) &#010;With the above, once again, everything happens as expected in the IDE, but&#010;when I deploy my application in Fuse, I get ""Nothing to aggregate"" all the&#010;time.&#010;&#010;I tried to set a header on all the messages and aggregate on the header&#010;(instead of the constant I currently use), but the results are the same.&#010;&#010;Please help, Camel user mailing list, you're my only hope. :)&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/AggregationStrategy-null-body-in-new-exchange-tp5796879.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
28,29,Quinn Stevenson,  Re: AggregationStrategy: null body in new exchange,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CA2E176BC-A12C-4A90-B25B-33929B9A248D%40pronoia-solutions.com%3E,users,"Wed, 05 Apr 2017 11:29:52 GMT","Can you share a little more of the route?  Specifically Iâ€™d like to see the portion that&#010;is supposed to be reading the file and passing it on the the aggregation strategy.&#010;&#010;&#010;&#010;&gt; On Apr 3, 2017, at 8:20 AM, JD Innocenti &lt;jd.innocenti@gmail.com&gt; wrote:&#010;&gt; &#010;&gt; Hi all,&#010;&gt; &#010;&gt; I'm having a problem with the AggregationStrategy I implemented for an&#010;&gt; application. In short, the newExchange parameters I receive (to follow the&#010;&gt; same naming convention as in the  documentation&#010;&gt; &lt;https://camel.apache.org/aggregator.html&gt;  ) always have a null body. &#010;&gt; &#010;&gt; To elaborate: my route is pretty simple. It downloads files from an FTP&#010;&gt; server, transforms then into POJOs, aggregate those into a single POJO,&#010;&gt; which is then marshalled and saved to a file. I'm working with JBoss&#010;&gt; Developer Studio (an Eclipse derivative), and when I test from the IDE, this&#010;&gt; works fine (behind the scenes, the IDE does ""mvn clean package&#010;&gt; org.apache.camel:camel-maven-plugin:run"").&#010;&gt; &#010;&gt; However, when I build an OSGi bundle of my application (with ""mvn clean&#010;&gt; install""), which I then deploy in JBoss Fuse (on Karaf), the deployment is&#010;&gt; successful but my aggregator only receives null-bodied ""newExchange"" params.&#010;&gt; The correlation expression I use is a simple constant, since all POJOs must&#010;&gt; be aggregated.&#010;&gt; &#010;&gt; I also posted about this issue on  StackOverflow&#010;&gt; &lt;https://stackoverflow.com/questions/43184357/different-behavior-of-apache-camel-aggregation-in-ide-and-when-deployed-in-jboss&gt;&#010;&#010;&gt; , in case someone finds this post in the future ;)&#010;&gt; &#010;&gt; Here's what the aggregation looks like in my Camel context:&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; And for the sake of completeness, here's the beginning of the aggregator:&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; (MyPojoClass is in the same package than the aggregator) &#010;&gt; With the above, once again, everything happens as expected in the IDE, but&#010;&gt; when I deploy my application in Fuse, I get ""Nothing to aggregate"" all the&#010;&gt; time.&#010;&gt; &#010;&gt; I tried to set a header on all the messages and aggregate on the header&#010;&gt; (instead of the constant I currently use), but the results are the same.&#010;&gt; &#010;&gt; Please help, Camel user mailing list, you're my only hope. :)&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/AggregationStrategy-null-body-in-new-exchange-tp5796879.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;"
29,30,JD Innocenti,    Re: AggregationStrategy: null body in new exchange,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491399203347-5797016.post%40n5.nabble.com%3E,users,"Wed, 05 Apr 2017 13:33:23 GMT","Hi,&#010;&#010;In fact, I recently had a breakthrough on this issue. It turns out that it&#010;is due to a conflict during class loading. In my aggregator, I have the&#010;following code:&#010;&#010;&#010;And this code results in newBody being null. However, if I replace this&#010;with:&#010;&#010;&#010;&#010;This results in ""java.lang.ClassCastException: net.j11e.MyClass cannot be&#010;cast to net.j11e.MyClass"".&#010;&#010;Apparently, it is possible for multiple class loaders to load the same class&#010;(here, MyClass). Indeed, the command ""osgi:find-class MyClass"" finds two&#010;hits: one in my bundle, and another in dozer-osgi. This makes sense,&#010;considering I use a dozer transformation to create instances of MyClass.&#010;&#010;By renaming MyClass (to MyOtherClass) and rebooting (!), I manage to get my&#010;application to work. However, by uninstalling and reinstalling my bundle,&#010;the issue comes back. It looks like the class stays in some bundle's ""cache""&#010;when I uninstall/install my bundle... Whereas running the application&#010;manually (or from the IDE) just loads everything ""from scratch"" everytime,&#010;explaining why it works.&#010;&#010;The question I have now is: how can I prevent this conflict from happening?&#010;My application is pretty simple, I don't play with classloaders manually...&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/AggregationStrategy-null-body-in-new-exchange-tp5796879p5797016.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
30,31,Claus Ibsen,  Re: AggregationStrategy: null body in new exchange,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNkwtLYvq7%2B3O%2B-coibhHSzDESyJkqNgtNNSbj-XEnDFTA%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 11:35:48 GMT","Make a simple unit test with your aggregator and agg strategy and get&#010;that working outside osgi/karaf and then take it from there.&#010;&#010;&#010;&#010;On Mon, Apr 3, 2017 at 4:20 PM, JD Innocenti &lt;jd.innocenti@gmail.com&gt; wrote:&#010;&gt; Hi all,&#010;&gt;&#010;&gt; I'm having a problem with the AggregationStrategy I implemented for an&#010;&gt; application. In short, the newExchange parameters I receive (to follow the&#010;&gt; same naming convention as in the  documentation&#010;&gt; &lt;https://camel.apache.org/aggregator.html&gt;  ) always have a null body.&#010;&gt;&#010;&gt; To elaborate: my route is pretty simple. It downloads files from an FTP&#010;&gt; server, transforms then into POJOs, aggregate those into a single POJO,&#010;&gt; which is then marshalled and saved to a file. I'm working with JBoss&#010;&gt; Developer Studio (an Eclipse derivative), and when I test from the IDE, this&#010;&gt; works fine (behind the scenes, the IDE does ""mvn clean package&#010;&gt; org.apache.camel:camel-maven-plugin:run"").&#010;&gt;&#010;&gt; However, when I build an OSGi bundle of my application (with ""mvn clean&#010;&gt; install""), which I then deploy in JBoss Fuse (on Karaf), the deployment is&#010;&gt; successful but my aggregator only receives null-bodied ""newExchange"" params.&#010;&gt; The correlation expression I use is a simple constant, since all POJOs must&#010;&gt; be aggregated.&#010;&gt;&#010;&gt; I also posted about this issue on  StackOverflow&#010;&gt; &lt;https://stackoverflow.com/questions/43184357/different-behavior-of-apache-camel-aggregation-in-ide-and-when-deployed-in-jboss&gt;&#010;&gt; , in case someone finds this post in the future ;)&#010;&gt;&#010;&gt; Here's what the aggregation looks like in my Camel context:&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; And for the sake of completeness, here's the beginning of the aggregator:&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; (MyPojoClass is in the same package than the aggregator)&#010;&gt; With the above, once again, everything happens as expected in the IDE, but&#010;&gt; when I deploy my application in Fuse, I get ""Nothing to aggregate"" all the&#010;&gt; time.&#010;&gt;&#010;&gt; I tried to set a header on all the messages and aggregate on the header&#010;&gt; (instead of the constant I currently use), but the results are the same.&#010;&gt;&#010;&gt; Please help, Camel user mailing list, you're my only hope. :)&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/AggregationStrategy-null-body-in-new-exchange-tp5796879.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
31,32,JD Innocenti,    Re: AggregationStrategy: null body in new exchange,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491399306675-5797017.post%40n5.nabble.com%3E,users,"Wed, 05 Apr 2017 13:35:06 GMT","Hi,&#010;&#010;Thanks for the reply! As I said to Quinn Stevenson,  I recently had a&#010;breakthrough on this issue. It turns out that it is due to a conflict during&#010;class loading. In my aggregator, I have the following code:&#010;&#010;&#010;&#010;And this code results in newBody being null. However, if I replace this&#010;with:&#010;&#010;&#010;&#010;This results in ""java.lang.ClassCastException: net.j11e.MyClass cannot be&#010;cast to net.j11e.MyClass"".&#010;&#010;Apparently, it is possible for multiple class loaders to load the same class&#010;(here, MyClass). Indeed, the command ""osgi:find-class MyClass"" finds two&#010;hits: one in my bundle, and another in dozer-osgi. This makes sense,&#010;considering I use a dozer transformation to create instances of MyClass.&#010;&#010;By renaming MyClass (to MyOtherClass) and rebooting (!), I manage to get my&#010;application to work. However, by uninstalling and reinstalling my bundle,&#010;the issue comes back. It looks like the class stays in some bundle's ""cache""&#010;when I uninstall/install my bundle... Whereas running the application&#010;manually (or from the IDE) just loads everything ""from scratch"" everytime,&#010;explaining why it works.&#010;&#010;The question I have now is: how can I prevent this conflict from happening?&#010;My application is pretty simple, I don't play with classloaders manually...&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/AggregationStrategy-null-body-in-new-exchange-tp5796879p5797017.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
32,33,Quinn Stevenson,      Re: AggregationStrategy: null body in new exchange,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C6145D957-6314-4B71-B89A-DCF988631505%40pronoia-solutions.com%3E,users,"Wed, 05 Apr 2017 13:46:10 GMT","The easiest way to avoid this problem is to ensure you have unique package names.  OSGi allows&#010;you to have an implementation of the a class in your bundle as well as import it (useful for&#010;providing default implementations).&#010;&#010;As far as net.j11i.MyClass being in the dozer-osgi bundle - which version of Dozer are you&#010;using?  I looked in v5.5.1 of the dozer-osgi bundle, and it isnâ€™t there.  Did you build&#010;dozer yourself and add this class?&#010;&#010;&gt; On Apr 5, 2017, at 7:35 AM, JD Innocenti &lt;jd.innocenti@gmail.com&gt; wrote:&#010;&gt; &#010;&gt; Hi,&#010;&gt; &#010;&gt; Thanks for the reply! As I said to Quinn Stevenson,  I recently had a&#010;&gt; breakthrough on this issue. It turns out that it is due to a conflict during&#010;&gt; class loading. In my aggregator, I have the following code:&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; And this code results in newBody being null. However, if I replace this&#010;&gt; with:&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; This results in ""java.lang.ClassCastException: net.j11e.MyClass cannot be&#010;&gt; cast to net.j11e.MyClass"".&#010;&gt; &#010;&gt; Apparently, it is possible for multiple class loaders to load the same class&#010;&gt; (here, MyClass). Indeed, the command ""osgi:find-class MyClass"" finds two&#010;&gt; hits: one in my bundle, and another in dozer-osgi. This makes sense,&#010;&gt; considering I use a dozer transformation to create instances of MyClass.&#010;&gt; &#010;&gt; By renaming MyClass (to MyOtherClass) and rebooting (!), I manage to get my&#010;&gt; application to work. However, by uninstalling and reinstalling my bundle,&#010;&gt; the issue comes back. It looks like the class stays in some bundle's ""cache""&#010;&gt; when I uninstall/install my bundle... Whereas running the application&#010;&gt; manually (or from the IDE) just loads everything ""from scratch"" everytime,&#010;&gt; explaining why it works.&#010;&gt; &#010;&gt; The question I have now is: how can I prevent this conflict from happening?&#010;&gt; My application is pretty simple, I don't play with classloaders manually...&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/AggregationStrategy-null-body-in-new-exchange-tp5796879p5797017.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;"
33,34,JD Innocenti,        Re: AggregationStrategy: null body in new exchange,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491407484466-5797024.post%40n5.nabble.com%3E,users,"Wed, 05 Apr 2017 15:51:24 GMT","When I look into the imported packages of dozer (v5.5.1) in JBoss Fuse's web&#010;UI, I see all of my application's packages... It says ""Dynamic import -&#010;imported due to DynamicImport-Package=*"". &#010;&#010;So I found a fix to my issue: every time I deploy a new version of my&#010;bundle, I refresh dozer's bundle. This ""removes"" my packages (including the&#010;one with MyClass) from dozer's imported packages, and solves my problem.&#010;&#010;Now, on to ""why is my log4j.properties ignored when I deploy my application&#010;in karaf, while it's not when I run my application from the terminal""... :)&#010;&#010;Thanks for your time anyway! And if you have ideas regarding the reason&#010;dozer imports my bundle's packages, I'm interested.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/AggregationStrategy-null-body-in-new-exchange-tp5796879p5797024.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
34,35,Erin Bailey,TELUS Health,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491229921378-5796882.post%40n5.nabble.com%3E,users,"Mon, 03 Apr 2017 14:32:01 GMT","TELUS Health is currently looking for a Senior Developer Analyst with Apache&#010;Camel experience to join our TELUS Health Exchange Product Development team&#010;in either Toronto, Montreal or Ottawa.&#010;&#010;https://telus.taleo.net/careersection/10000.th/jobdetail.ftl?lang=en&amp;job=HEA02758-17 &#010;&#010;If interested, please feel free to contact me at erin.bailey@telus.com&#010;&#010;TELUS in Health has continued to develop its position and expand its&#010;footprint in the healthcare sector with over 1,700 team members dedicated to&#010;turning information into better health outcomes for Canadians. &#010;&#010;At TELUS, we believe that technology can have an important impact on&#010;transforming healthcare by connecting doctors and other health practitioners&#010;with one another and with their patients. Moreover, we are working towards&#010;making prevention and wellness more accessible to everyone. &#010;&#010;Since 2008, the company has developed a broad cross-section of digital&#010;solutions for all major stakeholders in the healthcare system, including&#010;hospitals, physicians, pharmacists and extended healthcare providers, such&#010;as physiotherapists and chiropractors. Our solutions are aimed at improving&#010;the patient experience, increasing efficiencies and positively impacting&#010;health outcomes.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/TELUS-Health-tp5796882.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
35,36,Cristiano Costantini,Name of the method with proxy,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAAPbCXh1WSVO4HY9s-hc75YcySczk46Lnkw4h9%3DMbnxs4LaK0w%40mail.gmail.com%3E,users,"Mon, 03 Apr 2017 14:57:57 GMT","Hello,&#010;&#010;when using proxy in Camel (http://camel.apache.org/using-camelproxy.html)&#010;in camel after 2.16.3 where ""*parameter binding is enabled by default*"",&#010;how can I retrieve the name of the invoked method?&#010;&#010;previously, on Camel 2.15, I used to ""choice"" over the method name&#010;extracted with simple with the expression:&#010;&#010;$simple{body.method.name}&#010;&#010;If I want to use parameter binding, how can I route the incoming payload&#010;depending on the method name?&#010;&#010;(The interface I am using with the proxy has an half dozen of methods, each&#010;one taking a single argument of type List&lt;MyBean&gt;)&#010;&#010;thank you,&#010;&#010;Cristiano&#010;&#010;"
36,37,Gary,javax.xml.bind.JAXBException:  doesnt contain ObjectFactory.class or jaxb.index,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491261985771-5796884.post%40n5.nabble.com%3E,users,"Mon, 03 Apr 2017 23:26:25 GMT","thank you in advance&#010;I have my jaxb annotated class path defined in the Jaxb contextPath, I also&#010;have the jaxb.index file with the simple name of the annotated class in it.&#010;I continue to get the error in subject. ???? I even added the jaxb.index&#010;physically under my classpath. Java 1.7, camel 2.15&#010;&#010;here's my camel context&#010;    &lt;camelContext &#010;        id=""Camel.Context.XML.Tranformer""&#010;    &#009;trace=""false""&#010;    &#009;xmlns=""http://camel.apache.org/schema/blueprint""&gt;&#010;&#009;&#009;&lt;dataFormats&gt;&#010;    &#009;&#009;&lt;jaxb id=""myJaxb"" prettyPrint=""true""&#010;contextPath=""com.ge.ip.zone3.decoders""/&gt;&#010;  &#009;&#009;&lt;/dataFormats&gt;&#010;  &#009;&#009;&#010;    &lt;route id=""SmartSignal.Database.Xml.Translate.Route"" autoStartup=""true""&gt;&#010;&#009;    &lt;from uri=""{{inputUri}}"" /&gt;&#010;&#009;    &lt;log message=""Received XML file ${file:name}"" /&gt;&#010;&#009;    &#009;&lt;marshal ref=""myJaxb"" /&gt;&#010;&#009;&#009;&#009;&#010;  &#009;&#009;&lt;log message=""sending ${file:name} to output"" /&gt;&#010;&#009;    &lt;to uri=""{{outputUri}}"" /&gt;&#010;     &lt;/route&gt;&#010;     &#010;   &lt;/camelContext&gt;&#010;-----&#010;under com.ge.ip.zone3.decoders &#010;jaxb.index&#010;SSDatabaseDecoder.java&#010;---------------&#010;simple jaxb annotated class&#010;--&#010;package com.ge.ip.zone3.decoders;&#010;&#010;import javax.xml.bind.annotation.XmlRootElement;&#010;import javax.xml.bind.annotation.XmlElement;&#010;import javax.xml.bind.annotation.XmlElementWrapper;&#010;import javax.xml.bind.annotation.XmlAccessType;&#010;import javax.xml.bind.annotation.XmlAccessorType;&#010;import javax.xml.bind.annotation.XmlAttribute;&#010;import javax.xml.bind.annotation.XmlSeeAlso;&#010;import java.util.List;&#010;import java.util.Map;&#010;&#010;@XmlRootElement(name = ""TransferDataHeader"")&#010;@XmlAccessorType(XmlAccessType.FIELD)&#010;public class SSDatabaseDecoder {&#010;&#010;    @XmlElement(name = ""ApplicationId"")&#010;//    @Field(""ApplicationId"")&#010;    private String ApplicationId;&#010; &#010;    @XmlElement(name = ""Category"")&#010;//    @Field(""Category"")&#010;    private String Category;&#010;   &#010;    @XmlElement(name = ""ClientApplicationVersionBuild"")&#010;//    @Field(""ClientApplicationVersionBuild"")&#010;    private String ClientApplicationVersionBuild;&#010;    &#010;    @XmlElement(name = ""ClientApplicationVersionMajor"")&#010;//    @Field(""ClientApplicationVersionMajor"")&#010;    private String ClientApplicationVersionMajor;&#010;&#010;    @XmlElement(name = ""ClientApplicationVersionMinor"")&#010;//    @Field(""ClientApplicationVersionMinor"")&#010;    private String ClientApplicationVersionMinor;&#010;    &#010;    @XmlElement(name = ""ClientApplicationVersionRevision"")&#010;//    @Field(""ClientApplicationVersionRevision"")&#010;    private String ClientApplicationVersionRevision;&#010;&#010;    @XmlElement(name = ""ContractVersion"")&#010;//    @Field(""ContractVersion"")&#010;    private String ContractVersion;&#010;    &#010;    @XmlElement(name = ""ExportedUtcDate"")&#010;//    @Field(""ExportedUtcDate"")&#010;    private String ExportedUtcDate;&#010;    &#010;    @XmlElement(name = ""ExporterFirstName"")&#010;//    @Field(""ExporterFirstName"")&#010;    private String ExporterFirstName;&#010;    &#010;    @XmlElement(name = ""ExporterLastName"")&#010;//    @Field(""ExporterLastName"")&#010;    private String ExporterLastName;&#010;    &#010;    @XmlElement(name = ""ExporterLoginId"")&#010;//    @Field(""ExporterLoginId"")&#010;    private String ExporterLoginId;&#010;&#010;    @XmlElement(name = ""HeaderVersion"")&#010;//    @Field(""HeaderVersion"")&#010;    private String HeaderVersion;&#010;&#010;    @XmlElement(name = ""ImportedDate"")&#010;//    @Field(""ImportedDate"")&#010;    private String ImportedDate;&#010;&#010;    @XmlElement(name = ""ImporterId"")&#010;//    @Field(""ImporterId"")&#010;    private String ImporterId;&#010;    &#010;    @XmlElement(name = ""InstallationId"")&#010;//    @Field(""InstallationId"")&#010;    private String InstallationId;&#010;   &#010;    @XmlElement(name = ""InstallationName"")&#010;//    @Field(""InstallationName"")&#010;    private String InstallationName;&#010;    &#010;    @XmlElement(name = ""ItemId"")&#010;//    @Field(""ItemId"")&#010;    private String ItemId;&#010;    &#010;    @XmlElement(name = ""ItemName"")&#010;//    @Field(""ItemName"")&#010;    private String ItemName;&#010;&#010;    @XmlElement(name = ""ProductBuildNumber"")&#010;//    @Field(""ProductBuildNumber"")&#010;    private String ProductBuildNumber;&#010;    &#010;    @XmlElement(name = ""ProductPatchNumber"")&#010;//    @Field(""ProductPatchNumber"")&#010;    private String ProductPatchNumber;&#010;    &#010;    @XmlElement(name = ""ProductVersion"")&#010;//    @Field(""ProductVersion"")&#010;    private String ProductVersion;&#010;&#010;    @XmlElement(name = ""ProductVersionMajor"")&#010;//    @Field(""ProductVersionMajor"")&#010;    private String ProductVersionMajor;&#010;    &#010;    @XmlElement(name = ""ProductVersionMinor"")&#010;//    @Field(""ProductVersionMinor"")&#010;    private String ProductVersionMinor; &#010;    &#010;    public SSDatabaseDecoder() {&#010;    &#009;super();&#010;    }&#010;    &#010;    public String getApplicationId() {&#010;        return ApplicationId;&#010;    }&#010;&#010;    public void setApplicationId(String ApplicationId) {&#010;        this.ApplicationId = ApplicationId;&#010;    }&#010;    &#010;    public String getCategory() {&#010;        return Category;&#010;    }&#010;&#010;    public void setCategory(String Category) {&#010;        this.Category = Category;&#010;    }&#010;&#010;    public String getClientApplicationVersionBuild() {&#010;    &#009;return ClientApplicationVersionBuild;&#010;    }&#010;    &#010;    public void setClientApplicationVersionBuild(String&#010;ClientApplicationVersionBuild) {&#010;        this.ClientApplicationVersionBuild = ClientApplicationVersionBuild;&#010;    }&#010;&#010;    public String getClientApplicationVersionMajor() {&#010;    &#009;return ClientApplicationVersionMajor;&#010;    }&#010;    &#010;    public void setClientApplicationVersionMajor(String&#010;ClientApplicationVersionBuild) {&#010;        this.ClientApplicationVersionMajor = ClientApplicationVersionMajor;&#010;    }&#010;&#010;    public String getClientApplicationVersionMinor() {&#010;    &#009;return ClientApplicationVersionMinor;&#010;    }&#010;    &#010;    public void setClientApplicationVersionMinor(String&#010;ClientApplicationVersionMinor) {&#010;        this.ClientApplicationVersionMinor = ClientApplicationVersionMinor;&#010;    }&#010;&#010;    public String getClientApplicationVersionRevision() {&#010;    &#009;return ClientApplicationVersionRevision;&#010;    }&#010;    &#010;    public void setClientApplicationVersionRevision(String&#010;ClientApplicationVersionRevision) {&#010;        this.ClientApplicationVersionRevision =&#010;ClientApplicationVersionRevision;&#010;    }&#010;&#010;    public String getContractVersion() {&#010;    &#009;return ContractVersion;&#010;    }&#010;    &#010;    public void setContractVersion(String ContractVersion) {&#010;        this.ContractVersion = ContractVersion;&#010;    }&#010;&#010;    public String getExportedUtcDate() {&#010;    &#009;return ContractVersion;&#010;    }&#010;    &#010;    public void setExportedUtcDate(String ExportedUtcDate) {&#010;        this.ExportedUtcDate = ExportedUtcDate;&#010;    }    &#010;&#010;    public String getExporterFirstName() {&#010;    &#009;return ExporterFirstName;&#010;    }&#010;    &#010;    public void setExporterFirstName(String ExporterFirstName) {&#010;        this.ExporterFirstName = ExporterFirstName;&#010;    }&#010;&#010;    public String getExporterLastName() {&#010;    &#009;return ExporterLastName;&#010;    }&#010;    &#010;    public void setExporterLastName(String ExporterLastName) {&#010;        this.ExporterLastName = ExporterLastName;&#010;    }    &#010;    &#010;    public String getExporterLoginId() {&#010;    &#009;return ExporterLoginId;&#010;    }&#010;    &#010;    public void getExporterLoginId(String ExporterLoginId) {&#010;        this.ExporterLoginId = ExporterLoginId;&#010;    }    &#010;&#010;    public String getHeaderVersion() {&#010;    &#009;return HeaderVersion;&#010;    }&#010;    &#010;    public void setHeaderVersion(String HeaderVersion) {&#010;        this.HeaderVersion = HeaderVersion;&#010;    }&#010; &#010;    public String getImportedDate() {&#010;    &#009;return ImportedDate;&#010;    }&#010;    &#010;    public void setImportedDate(String ImportedDate) {&#010;        this.ImportedDate = ImportedDate;&#010;    }&#010;&#010;    public String getImporterId() {&#010;    &#009;return ImporterId;&#010;    }&#010;    &#010;    public void setImporterId(String ImporterId) {&#010;        this.ImporterId = ImporterId;&#010;    }&#010;&#010;    public String getInstallationId() {&#010;    &#009;return InstallationId;&#010;    }&#010;    &#010;    public void setInstallationId(String InstallationId) {&#010;        this.InstallationId = InstallationId;&#010;    }&#010;&#010;    public String getInstallationName() {&#010;    &#009;return InstallationName;&#010;    }&#010;    &#010;    public void setInstallationName(String InstallationName) {&#010;        this.InstallationName = InstallationName;&#010;    }&#010;&#010;    public String getItemId() {&#010;    &#009;return ItemId;&#010;    }&#010;    &#010;    public void setItemId(String ItemId) {&#010;        this.ItemId = ItemId;&#010;    }&#010;    &#010;    public String getItemName() {&#010;    &#009;return ItemName;&#010;    }&#010;    &#010;    public void setItemName(String ItemName) {&#010;        this.ItemName = ItemName;&#010;    }&#010;&#010;    public String getProductBuildNumber() {&#010;    &#009;return ProductBuildNumber;&#010;    }&#010;    &#010;    public void setProductBuildNumber(String ProductBuildNumber) {&#010;        this.ProductBuildNumber = ProductBuildNumber;&#010;    }&#010;&#010;    public String getProductPatchNumber() {&#010;    &#009;return ProductPatchNumber;&#010;    }&#010;    &#010;    public void setProductPatchNumber(String ProductPatchNumber) {&#010;        this.ProductPatchNumber = ProductPatchNumber;&#010;    }&#010; &#010;    public String getProductVersion() {&#010;    &#009;return ProductVersion;&#010;    }&#010;    &#010;    public void setProductVersion(String ProductVersion) {&#010;        this.ProductVersion = ProductVersion;&#010;    }&#010;&#010;    public String getProductVersionMajor() {&#010;    &#009;return ProductVersionMajor;&#010;    }&#010;    &#010;    public void setProductVersionMajor(String ProductVersionMajor) {&#010;        this.ProductVersionMajor = ProductVersionMajor;&#010;    }&#010;&#010;    public String getProductVersionMinor() {&#010;    &#009;return ProductVersionMinor;&#010;    }&#010;    &#010;    public void setProductVersionMinor(String ProductVersionMinor) {&#010;        this.ProductVersionMinor = ProductVersionMinor;&#010;    }&#010;    &#010;}&#010;&#010;&#010;&#010;&#010;-----&#010;Gary Lee Mills&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/javax-xml-bind-JAXBException-doesnt-contain-ObjectFactory-class-or-jaxb-index-tp5796884.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
37,38,Gary,  Re: javax.xml.bind.JAXBException:  doesnt contain ObjectFactory.class or jaxb.index,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491312354019-5796915.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 13:25:54 GMT","it turns out I had the jaxb.index file in the wrong location. &#010;&#010;it needs to be under maven structure ""resources"". &#010;so I added the resources/com/ge/ip/zone3/decoders and place the jaxb.index&#010;here, and it works. &#010;&#010;thank you &#010;&#010;&#010;&#010;-----&#010;Gary Lee Mills&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/javax-xml-bind-JAXBException-doesnt-contain-ObjectFactory-class-or-jaxb-index-tp5796884p5796915.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
38,39,,RE: Camel Http vs Camel Http4 - Content Type Header,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491312354019-5796915.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 13:25:54 GMT","it turns out I had the jaxb.index file in the wrong location. &#010;&#010;it needs to be under maven structure ""resources"". &#010;so I added the resources/com/ge/ip/zone3/decoders and place the jaxb.index&#010;here, and it works. &#010;&#010;thank you &#010;&#010;&#010;&#010;-----&#010;Gary Lee Mills&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/javax-xml-bind-JAXBException-doesnt-contain-ObjectFactory-class-or-jaxb-index-tp5796884p5796915.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
39,40,"Goyal, Arpit",  RE: Camel Http vs Camel Http4 - Content Type Header,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3Cac960ff362d5444bbff5bcbb22ee04f0%40sap.com%3E,users,"Mon, 03 Apr 2017 23:32:43 GMT","Hi Claus,&#010;&#010;HttpProduce -- from camel-http4 library is setting the content-type 'text/plain'  in method&#010;[1] line # 488 (camel version 2.16.3) even though we have set the Content-Type to be NULL&#010;- This is NOT the case with HttpProducer - from camel-http library. &#010;&#010;By enabling the apache commons log, the headers are clearly visible.&#010;&#010;The end-system we are invoking throws '415' due to the wrong Content Type passed and if we&#010;DO NOT pass any content type it works. As at execution time we can't determine the Content-Type,&#010;we want to pass it NULL. &#010;&#010;Any possible way to achieve not sending of Content-Type header? &#010;&#010;2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; POST /service/scim/Users&#010;HTTP/1.1&#010;2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; breadcrumbId: ID-i044312-33503-1491259732621-0-1&#010;2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Content-Length: 518&#010;2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Content-Type: text/plain&#010;&#009;&#009;&#009;&#009;&#009;&#009;---- in this line.&#010;2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Host: xxxxxxx&#010;2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Connection: Keep-Alive&#010;2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.2&#010;(Java/1.7.0_101)&#010;2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Accept-Encoding: gzip,deflate&#010;2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Authorization: Basic&#010;XXXXXXXX&#010;2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""POST /service/scim/Users&#010;HTTP/1.1[\r][\n]""&#010;2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""breadcrumbId: ID-i044312-33503-1491259732621-0-1[\r][\n]""&#010;2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Content-Length: 518[\r][\n]""&#010;2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Content-Type: text/plain[\r][\n]""&#010;&#009;&#009;&#009;&#009;&#009;--- in this line&#010;2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Host: xxxxxxxxx[\r][\n]""&#010;2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Connection: Keep-Alive[\r][\n]""&#010;2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""User-Agent: Apache-HttpClient/4.5.2&#010;(Java/1.7.0_101)[\r][\n]""&#010;2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Accept-Encoding: gzip,deflate[\r][\n]""&#010;2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Authorization: Basic&#010;XXXXXXXX[\r][\n]""&#010;2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""[\r][\n]""&#010;2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""{[\r][\n]""&#010;2017/04/04 00:48:55:620 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""}""&#010;&#010;[1] - org.apache.camel.component.http4.HttpProducer.createRequestEntity(Exchange) &#010;&#010;Regards,&#010;Arpit.&#010;&#010;&#010;-----Original Message-----&#010;From: souciance [mailto:souciance.eqdam.rashti@gmail.com] &#010;Sent: Thursday, February 9, 2017 1:40 PM&#010;To: users@camel.apache.org&#010;Subject: Re: Camel Http vs Camel Http4 - Content Type Header&#010;&#010;Well it should be pretty easy to setup a http server and see what headers&#010;your route are sending and compare that to what the actual server wants. If&#010;camel-http4 is suppressing some headers then perhaps try another component.&#010;&#010;On Thu, Feb 9, 2017 at 10:32 PM, Goyal, Arpit [via Camel] &lt;&#010;ml-node+s465427n5793736h79@n5.nabble.com&gt; wrote:&#010;&#010;&gt; Hi,&#010;&gt;&#010;&gt; We were on Camel-Http (2.16) and moving to Camel-Http4 (2.16) and saw that&#010;&gt; URL which worked with Camel-http now fails with Camel-Http4 with status&#010;&gt; code - 415 (Unsupported Media Type).&#010;&gt;&#010;&gt; Caused by: org.apache.camel.http.common.HttpOperationFailedException:&#010;&gt; HTTP operation failed invoking https://&lt;host&gt;:&lt;port&gt;/&#010;&gt; myservice/Users?authMethod=Basic with statusCode: 415&#010;&gt;&#010;&gt; Saw this discussion on Nabble - http://camel.465427.n5.nabble.&#010;&gt; com/Http4-Set-Header-Content-Type-not-passing-through-to-&#010;&gt; the-HTTP-Request-td5746414.html#a5752856&#010;&gt;&#010;&gt; Does this mean we CAN""T USE - Camel-HTTP4 ?&#010;&gt;&#010;&gt; Regards,&#010;&gt; Arpit.&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-&#010;&gt; Content-Type-Header-tp5793736.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-Content-Type-Header-tp5793736p5793737.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
40,41,"Goyal, Arpit",    Re: Camel Http vs Camel Http4 - Content Type Header,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C63544303-ABF8-4415-86D4-EA0DF4FFEDE5%40sap.com%3E,users,"Wed, 05 Apr 2017 03:25:31 GMT","Anyone else has idea of this camel logic?&#010;&#010;Sent from my iPhone&#010;&#010;&gt; On Apr 3, 2017, at 4:33 PM, Goyal, Arpit &lt;arpit.goyal@sap.com&gt; wrote:&#010;&gt; &#010;&gt; Hi Claus,&#010;&gt; &#010;&gt; HttpProduce -- from camel-http4 library is setting the content-type 'text/plain'  in&#010;method [1] line # 488 (camel version 2.16.3) even though we have set the Content-Type to be&#010;NULL - This is NOT the case with HttpProducer - from camel-http library. &#010;&gt; &#010;&gt; By enabling the apache commons log, the headers are clearly visible.&#010;&gt; &#010;&gt; The end-system we are invoking throws '415' due to the wrong Content Type passed and&#010;if we DO NOT pass any content type it works. As at execution time we can't determine the Content-Type,&#010;we want to pass it NULL. &#010;&gt; &#010;&gt; Any possible way to achieve not sending of Content-Type header? &#010;&gt; &#010;&gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; POST /service/scim/Users&#010;HTTP/1.1&#010;&gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; breadcrumbId:&#010;ID-i044312-33503-1491259732621-0-1&#010;&gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Content-Length:&#010;518&#010;&gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Content-Type:&#010;text/plain                            ---- in this line.&#010;&gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Host: xxxxxxx&#010;&gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Connection: Keep-Alive&#010;&gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.2&#010;(Java/1.7.0_101)&#010;&gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Accept-Encoding:&#010;gzip,deflate&#010;&gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Authorization:&#010;Basic XXXXXXXX&#010;&gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""POST /service/scim/Users&#010;HTTP/1.1[\r][\n]""&#010;&gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""breadcrumbId: ID-i044312-33503-1491259732621-0-1[\r][\n]""&#010;&gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Content-Length:&#010;518[\r][\n]""&#010;&gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Content-Type: text/plain[\r][\n]""&#010;                       --- in this line&#010;&gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Host: xxxxxxxxx[\r][\n]""&#010;&gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Connection: Keep-Alive[\r][\n]""&#010;&gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""User-Agent: Apache-HttpClient/4.5.2&#010;(Java/1.7.0_101)[\r][\n]""&#010;&gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Accept-Encoding:&#010;gzip,deflate[\r][\n]""&#010;&gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Authorization:&#010;Basic XXXXXXXX[\r][\n]""&#010;&gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""[\r][\n]""&#010;&gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""{[\r][\n]""&#010;&gt; 2017/04/04 00:48:55:620 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""}""&#010;&gt; &#010;&gt; [1] - org.apache.camel.component.http4.HttpProducer.createRequestEntity(Exchange) &#010;&gt; &#010;&gt; Regards,&#010;&gt; Arpit.&#010;&gt; &#010;&gt; &#010;&gt; -----Original Message-----&#010;&gt; From: souciance [mailto:souciance.eqdam.rashti@gmail.com] &#010;&gt; Sent: Thursday, February 9, 2017 1:40 PM&#010;&gt; To: users@camel.apache.org&#010;&gt; Subject: Re: Camel Http vs Camel Http4 - Content Type Header&#010;&gt; &#010;&gt; Well it should be pretty easy to setup a http server and see what headers&#010;&gt; your route are sending and compare that to what the actual server wants. If&#010;&gt; camel-http4 is suppressing some headers then perhaps try another component.&#010;&gt; &#010;&gt; On Thu, Feb 9, 2017 at 10:32 PM, Goyal, Arpit [via Camel] &lt;&#010;&gt; ml-node+s465427n5793736h79@n5.nabble.com&gt; wrote:&#010;&gt; &#010;&gt;&gt; Hi,&#010;&gt;&gt; &#010;&gt;&gt; We were on Camel-Http (2.16) and moving to Camel-Http4 (2.16) and saw that&#010;&gt;&gt; URL which worked with Camel-http now fails with Camel-Http4 with status&#010;&gt;&gt; code - 415 (Unsupported Media Type).&#010;&gt;&gt; &#010;&gt;&gt; Caused by: org.apache.camel.http.common.HttpOperationFailedException:&#010;&gt;&gt; HTTP operation failed invoking https://&lt;host&gt;:&lt;port&gt;/&#010;&gt;&gt; myservice/Users?authMethod=Basic with statusCode: 415&#010;&gt;&gt; &#010;&gt;&gt; Saw this discussion on Nabble - http://camel.465427.n5.nabble.&#010;&gt;&gt; com/Http4-Set-Header-Content-Type-not-passing-through-to-&#010;&gt;&gt; the-HTTP-Request-td5746414.html#a5752856&#010;&gt;&gt; &#010;&gt;&gt; Does this mean we CAN""T USE - Camel-HTTP4 ?&#010;&gt;&gt; &#010;&gt;&gt; Regards,&#010;&gt;&gt; Arpit.&#010;&gt;&gt; &#010;&gt;&gt; &#010;&gt;&gt; ------------------------------&#010;&gt;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt;&gt; below:&#010;&gt;&gt; http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-&#010;&gt;&gt; Content-Type-Header-tp5793736.html&#010;&gt;&gt; To start a new topic under Camel - Users, email&#010;&gt;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt;&gt; To unsubscribe from Camel - Users, click here&#010;&gt;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt;&gt; .&#010;&gt;&gt; NAML&#010;&gt;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&gt; &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-Content-Type-Header-tp5793736p5793737.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
41,42,souciance,      Re: Camel Http vs Camel Http4 - Content Type Header,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs38uurAfpFy8Uo0%3DSBhUFDoa%2BKF4kZcM_kT570o6q5%2B7w%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 05:34:01 GMT","Can you share your entire route code?&#010;&#010;Den 5 apr. 2017 5:25 fm skrev ""Goyal, Arpit [via Camel]"" &lt;&#010;ml-node+s465427n5796938h41@n5.nabble.com&gt;:&#010;&#010;&gt; Anyone else has idea of this camel logic?&#010;&gt;&#010;&gt; Sent from my iPhone&#010;&gt;&#010;&gt; &gt; On Apr 3, 2017, at 4:33 PM, Goyal, Arpit &lt;[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=0&gt;&gt; wrote:&#010;&gt; &gt;&#010;&gt; &gt; Hi Claus,&#010;&gt; &gt;&#010;&gt; &gt; HttpProduce -- from camel-http4 library is setting the content-type&#010;&gt; 'text/plain'  in method [1] line # 488 (camel version 2.16.3) even though&#010;&gt; we have set the Content-Type to be NULL - This is NOT the case with&#010;&gt; HttpProducer - from camel-http library.&#010;&gt; &gt;&#010;&gt; &gt; By enabling the apache commons log, the headers are clearly visible.&#010;&gt; &gt;&#010;&gt; &gt; The end-system we are invoking throws '415' due to the wrong Content&#010;&gt; Type passed and if we DO NOT pass any content type it works. As at&#010;&gt; execution time we can't determine the Content-Type, we want to pass it&#010;&gt; NULL.&#010;&gt; &gt;&#010;&gt; &gt; Any possible way to achieve not sending of Content-Type header?&#010;&gt; &gt;&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; POST&#010;&gt; /service/scim/Users HTTP/1.1&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; breadcrumbId: ID-i044312-33503-1491259732621-0-1&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; Content-Length: 518&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; Content-Type: text/plain                            ---- in this line.&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Host:&#010;&gt; xxxxxxx&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; Connection: Keep-Alive&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; User-Agent: Apache-HttpClient/4.5.2 (Java/1.7.0_101)&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; Accept-Encoding: gzip,deflate&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; Authorization: Basic XXXXXXXX&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""POST&#010;&gt; /service/scim/Users HTTP/1.1[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""breadcrumbId: ID-i044312-33503-1491259732621-0-1[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""Content-Length: 518[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""Content-Type: text/plain[\r][\n]""                        --- in this line&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Host:&#010;&gt; xxxxxxxxx[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""Connection: Keep-Alive[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""User-Agent: Apache-HttpClient/4.5.2 (Java/1.7.0_101)[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""Accept-Encoding: gzip,deflate[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""Authorization: Basic XXXXXXXX[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""{[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:620 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""}""&#010;&gt; &gt;&#010;&gt; &gt; [1] - org.apache.camel.component.http4.HttpProducer.createRequestEntity(Exchange)&#010;&gt;&#010;&gt; &gt;&#010;&gt; &gt; Regards,&#010;&gt; &gt; Arpit.&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; -----Original Message-----&#010;&gt; &gt; From: souciance [mailto:[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=1&gt;]&#010;&gt; &gt; Sent: Thursday, February 9, 2017 1:40 PM&#010;&gt; &gt; To: [hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=2&gt;&#010;&gt; &gt; Subject: Re: Camel Http vs Camel Http4 - Content Type Header&#010;&gt; &gt;&#010;&gt; &gt; Well it should be pretty easy to setup a http server and see what&#010;&gt; headers&#010;&gt; &gt; your route are sending and compare that to what the actual server wants.&#010;&gt; If&#010;&gt; &gt; camel-http4 is suppressing some headers then perhaps try another&#010;&gt; component.&#010;&gt; &gt;&#010;&gt; &gt; On Thu, Feb 9, 2017 at 10:32 PM, Goyal, Arpit [via Camel] &lt;&#010;&gt; &gt; [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=3&gt;&gt;&#010;&gt; wrote:&#010;&gt; &gt;&#010;&gt; &gt;&gt; Hi,&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; We were on Camel-Http (2.16) and moving to Camel-Http4 (2.16) and saw&#010;&gt; that&#010;&gt; &gt;&gt; URL which worked with Camel-http now fails with Camel-Http4 with status&#010;&gt; &gt;&gt; code - 415 (Unsupported Media Type).&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Caused by: org.apache.camel.http.common.HttpOperationFailedException:&#010;&gt; &gt;&gt; HTTP operation failed invoking https://&lt;host&gt;:&lt;port&gt;/&#010;&gt; &gt;&gt; myservice/Users?authMethod=Basic with statusCode: 415&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Saw this discussion on Nabble - http://camel.465427.n5.nabble.&#010;&gt; &gt;&gt; com/Http4-Set-Header-Content-Type-not-passing-through-to-&#010;&gt; &gt;&gt; the-HTTP-Request-td5746414.html#a5752856&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Does this mean we CAN""T USE - Camel-HTTP4 ?&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Regards,&#010;&gt; &gt;&gt; Arpit.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; ------------------------------&#010;&gt; &gt;&gt; If you reply to this email, your message will be added to the&#010;&gt; discussion&#010;&gt; &gt;&gt; below:&#010;&gt; &gt;&gt; http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-&#010;&gt; &gt;&gt; Content-Type-Header-tp5793736.html&#010;&gt; &gt;&gt; To start a new topic under Camel - Users, email&#010;&gt; &gt;&gt; [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=4&gt;&#010;&gt; &gt;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &gt;&gt; &lt;&#010;&gt; &gt;&gt; .&#010;&gt; &gt;&gt; NAML&#010;&gt; &gt;&gt; &lt;http://camel.465427.n5.nabble.com/template/&#010;&gt; NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%&#010;&gt; 21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.&#010;&gt; BasicNamespace-nabble.view.web.template.NabbleNamespace-&#010;&gt; nabble.view.web.template.NodeNamespace&amp;breadcrumbs=&#010;&gt; notify_subscribers%21nabble%3Aemail.naml-instant_emails%&#010;&gt; 21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; --&#010;&gt; &gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; com/Camel-Http-vs-Camel-Http4-Content-Type-Header-tp5793736p5793737.html&#010;&gt; &gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-&#010;&gt; Content-Type-Header-tp5793736p5796938.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-Content-Type-Header-tp5793736p5796944.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
42,43,"Goyal, Arpit",        RE: Camel Http vs Camel Http4 - Content Type Header,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C9a78b6bb614a446787b2881d913b4447%40sap.com%3E,users,"Thu, 06 Apr 2017 05:43:57 GMT","Hi souciance,&#010;&#010;Below is the complete test case I have written to debug this problem. You can import and fix&#010;the 'package' and 'logger' to remove errors. 'createRouteBuilder' method at the end has the&#010;two routes using camel-http and camel-http4. The URLs are constants. &#010;&#010;I am using the SAP Cloud Identity API [1] which expects Content-Type: application/scim+json.&#010;But if this is not given then it works fine. In case of camel-http4 we get 'text/plain' by&#010;default. &#010;&#010;Can't provide credential, you may be able to debug to see the 'Content Type' getting set with&#010;Camel-Http4 and not getting with Camel-Http&#010;&#010;Right now my need is to just make it empty like Camel-http. We HAD to move to camel-http4&#010;because of SSL support. And now this one use-case isn't working :( &#010;&#010;Regards,&#010;Arpit.&#010;&#010;[1] - https://help.sap.com/viewer/6d6d63354d1242d185ab4830fc04feb1/Cloud/en-US/2f215687fcf34170b0bbc8b36b60f2e9.html&#010;&#010;&#010;&#010;Complete test case&#010;&#010;import org.apache.camel.CamelContext;&#010;import org.apache.camel.EndpointInject;&#010;import org.apache.camel.Exchange;&#010;import org.apache.camel.Processor;&#010;import org.apache.camel.Produce;&#010;import org.apache.camel.ProducerTemplate;&#010;import org.apache.camel.builder.RouteBuilder;&#010;import org.apache.camel.component.direct.DirectEndpoint;&#010;import org.apache.camel.http.common.HttpOperationFailedException;&#010;import org.apache.camel.impl.DefaultCamelContext;&#010;import org.apache.camel.impl.DefaultExchange;&#010;import org.apache.camel.impl.SimpleRegistry;&#010;import org.apache.camel.testng.CamelTestSupport;&#010;import org.testng.annotations.Test;&#010;&#010;public class TestSCIMScenario extends CamelTestSupport {&#010;&#010;  static {&#010;    System.setProperty(""javax.net.debug"", ""all"");&#010;    System.setProperty(""org.apache.commons.logging.Log"", ""org.apache.commons.logging.impl.SimpleLog"");&#010;    System.setProperty(""org.apache.commons.logging.simplelog.showdatetime"", ""true"");&#010;    System.setProperty(""org.apache.commons.logging.simplelog.log.org.apache.http"", ""DEBUG"");&#010;  }&#010;&#010;  @EndpointInject(uri = ""direct:startHttp"")&#010;  protected DirectEndpoint startHttp;&#010;&#010;  @EndpointInject(uri = ""direct:startHttp4"")&#010;  protected DirectEndpoint startHttp4;&#010;&#010;  @Produce(uri = ""direct:start"")&#010;  protected ProducerTemplate producer;&#010;&#010;  /* Payload based on SAP Cloud Indentity REST API - https://help.sap.com/viewer/6d6d63354d1242d185ab4830fc04feb1/Cloud/en-US/2f215687fcf34170b0bbc8b36b60f2e9.html&#010;*/&#010;  private static final String SCIM_PAYLOAD = ""{\r\n  \""userName\"": \""alexAderson\"",\r\n  \""name\"":&#010;{\r\n    \""givenName\"": \""Alex\"",\r\n    \""familyName\"": \""Anderson\"",\r\n    \""honorificPrefix\"":&#010;\""Mr.\""\r\n  },\r\n  \""emails\"": [\r\n    {\r\n      \""value\"": \""alex.anderson@myworld.com\""\r\n&#010;   }\r\n  ],\r\n  \""addresses\"": [\r\n    {\r\n      \""type\"": \""home\"",\r\n      \""streetAddress\"":&#010;\""1029 East River Drive\"",\r\n      \""locality\"": \""Street 301\"",\r\n      \""region\"": \""CA\"",\r\n&#010;     \""postalCode\"": \""94401\""\r\n    }\r\n  ],\r\n  \""phoneNumbers\"": [],\r\n  \""displayName\"":&#010;\""nosample\"",\r\n  \""company\"": \""YYY_USA\"",\r\n  \""active\"": true\r\n}"";&#010;&#010;  /* Camel-Http4 based URL */&#010;  private static final String http4Endpoint = ""https4://&lt;tenant ID&gt;.ondemand.com/service/scim/Users?proxyAuthHost=ppppp&amp;proxyAuthPort=8888&amp;proxyAuthScheme=http4&amp;authUsername=xxxxxx&amp;authPassword=yyyyy&amp;httpClientConfigurer=#customConfigurer"";&#010;&#010;  /* Camel-Http based URL */&#010;  private static final String httpEndpoint = ""https://&lt;tenant ID&gt;.ondemand.com/service/scim/Users?proxyHost=ppppp&amp;proxyPort=8888&amp;authUsername=xxxxxx&amp;authPassword=yyyyy&amp;authMethod=Basic"";&#010;&#010;  private static final Logger LOG = LogManager.getLogger();&#010;&#010;  @Test&#010;  public void testSCIMHttp() throws Exception {&#010;    DefaultExchange request = (DefaultExchange) producer.request(startHttp, new Processor()&#010;{&#010;&#010;      @Override&#010;      public void process(Exchange exchange) throws Exception {&#010;&#010;      }&#010;    });&#010;    if (request.getException() != null) {&#010;      throw request.getException();&#010;    }&#010;&#010;  }&#010;&#010;  @Test&#010;  public void testSCIMHttp4() throws Exception {&#010;    DefaultExchange request = (DefaultExchange) producer.request(startHttp4, new Processor()&#010;{&#010;&#010;      @Override&#010;      public void process(Exchange exchange) throws Exception {&#010;&#010;      }&#010;    });&#010;    if (request.getException() != null) {&#010;      throw request.getException();&#010;    }&#010;&#010;  }&#010;&#010;  protected CamelContext createCamelContext() throws Exception {&#010;    SimpleRegistry registry = new SimpleRegistry();&#010;    registry.put(""customConfigurer"", new CustomHttpClientConfigurer());&#010;    CamelContext cc = new DefaultCamelContext(registry);&#010;    return cc;&#010;  }&#010;&#010;  @Override&#010;  protected RouteBuilder createRouteBuilder() throws Exception {&#010;&#010;    return new RouteBuilder() {&#010;&#010;      @Override&#010;      public void configure() throws Exception {&#010;        onException(Exception.class).process(new Processor() {&#010;&#010;          @Override&#010;          public void process(Exchange exchange) throws Exception {&#010;            Exception exception = null;&#010;            if (exchange != null &amp;&amp; exchange.getProperty(CAMEL_PROPERTY_EXCEPTION_CAUGHT)&#010;instanceof Exception) {&#010;              exception =  (Exception) exchange.getProperty(CAMEL_PROPERTY_EXCEPTION_CAUGHT);&#010;            }&#010;            if (exception instanceof HttpOperationFailedException) {&#010;              HttpOperationFailedException ex = (HttpOperationFailedException) exception;&#010;              LOG.info(""*********************HTTP FAILED BEGIN*********************"");&#010;              LOG.info(""Status Code "" + ex.getStatusCode() + "" Status Text "" + ex.getStatusText()&#010;+ "" Response Body "" + ex.getResponseBody());&#010;              LOG.info(""*********************HTTP FAILED END*********************"");&#010;            }&#010;            if(exception != null) {&#010;              throw exception;  &#010;            }            &#010;          }&#010;        });&#010;&#010;        from(startHttp).setBody().constant(SCIM_PAYLOAD).to(httpEndpoint).process(new Processor()&#010;{&#010;&#010;          @Override&#010;          public void process(Exchange exchange) throws Exception {&#010;            LOG.info(""*********************HTTP SUCCESS BEGIN*********************"");&#010;            LOG.info(exchange.getIn().getBody(String.class));&#010;            LOG.info(""*********************HTTP SUCCESS END*********************"");&#010;          }&#010;        });&#010;&#010;        from(startHttp4).setBody().constant(SCIM_PAYLOAD).setHeader(Exchange.CONTENT_TYPE).constant(null).to(http4Endpoint);&#010;      }&#010;    };&#010;  }&#010;}&#010;&#010;-----Original Message-----&#010;From: souciance [mailto:souciance.eqdam.rashti@gmail.com] &#010;Sent: Tuesday, April 4, 2017 10:34 PM&#010;To: users@camel.apache.org&#010;Subject: Re: Camel Http vs Camel Http4 - Content Type Header&#010;&#010;Can you share your entire route code?&#010;&#010;Den 5 apr. 2017 5:25 fm skrev ""Goyal, Arpit [via Camel]"" &lt;&#010;ml-node+s465427n5796938h41@n5.nabble.com&gt;:&#010;&#010;&gt; Anyone else has idea of this camel logic?&#010;&gt;&#010;&gt; Sent from my iPhone&#010;&gt;&#010;&gt; &gt; On Apr 3, 2017, at 4:33 PM, Goyal, Arpit &lt;[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=0&gt;&gt; wrote:&#010;&gt; &gt;&#010;&gt; &gt; Hi Claus,&#010;&gt; &gt;&#010;&gt; &gt; HttpProduce -- from camel-http4 library is setting the content-type&#010;&gt; 'text/plain'  in method [1] line # 488 (camel version 2.16.3) even though&#010;&gt; we have set the Content-Type to be NULL - This is NOT the case with&#010;&gt; HttpProducer - from camel-http library.&#010;&gt; &gt;&#010;&gt; &gt; By enabling the apache commons log, the headers are clearly visible.&#010;&gt; &gt;&#010;&gt; &gt; The end-system we are invoking throws '415' due to the wrong Content&#010;&gt; Type passed and if we DO NOT pass any content type it works. As at&#010;&gt; execution time we can't determine the Content-Type, we want to pass it&#010;&gt; NULL.&#010;&gt; &gt;&#010;&gt; &gt; Any possible way to achieve not sending of Content-Type header?&#010;&gt; &gt;&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; POST&#010;&gt; /service/scim/Users HTTP/1.1&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; breadcrumbId: ID-i044312-33503-1491259732621-0-1&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; Content-Length: 518&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; Content-Type: text/plain                            ---- in this line.&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; Host:&#010;&gt; xxxxxxx&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; Connection: Keep-Alive&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; User-Agent: Apache-HttpClient/4.5.2 (Java/1.7.0_101)&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; Accept-Encoding: gzip,deflate&#010;&gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; Authorization: Basic XXXXXXXX&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""POST&#010;&gt; /service/scim/Users HTTP/1.1[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""breadcrumbId: ID-i044312-33503-1491259732621-0-1[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""Content-Length: 518[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""Content-Type: text/plain[\r][\n]""                        --- in this line&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Host:&#010;&gt; xxxxxxxxx[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""Connection: Keep-Alive[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""User-Agent: Apache-HttpClient/4.5.2 (Java/1.7.0_101)[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""Accept-Encoding: gzip,deflate[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""Authorization: Basic XXXXXXXX[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; ""{[\r][\n]""&#010;&gt; &gt; 2017/04/04 00:48:55:620 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""}""&#010;&gt; &gt;&#010;&gt; &gt; [1] - org.apache.camel.component.http4.HttpProducer.createRequestEntity(Exchange)&#010;&gt;&#010;&gt; &gt;&#010;&gt; &gt; Regards,&#010;&gt; &gt; Arpit.&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; -----Original Message-----&#010;&gt; &gt; From: souciance [mailto:[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=1&gt;]&#010;&gt; &gt; Sent: Thursday, February 9, 2017 1:40 PM&#010;&gt; &gt; To: [hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=2&gt;&#010;&gt; &gt; Subject: Re: Camel Http vs Camel Http4 - Content Type Header&#010;&gt; &gt;&#010;&gt; &gt; Well it should be pretty easy to setup a http server and see what&#010;&gt; headers&#010;&gt; &gt; your route are sending and compare that to what the actual server wants.&#010;&gt; If&#010;&gt; &gt; camel-http4 is suppressing some headers then perhaps try another&#010;&gt; component.&#010;&gt; &gt;&#010;&gt; &gt; On Thu, Feb 9, 2017 at 10:32 PM, Goyal, Arpit [via Camel] &lt;&#010;&gt; &gt; [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=3&gt;&gt;&#010;&gt; wrote:&#010;&gt; &gt;&#010;&gt; &gt;&gt; Hi,&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; We were on Camel-Http (2.16) and moving to Camel-Http4 (2.16) and saw&#010;&gt; that&#010;&gt; &gt;&gt; URL which worked with Camel-http now fails with Camel-Http4 with status&#010;&gt; &gt;&gt; code - 415 (Unsupported Media Type).&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Caused by: org.apache.camel.http.common.HttpOperationFailedException:&#010;&gt; &gt;&gt; HTTP operation failed invoking https://&lt;host&gt;:&lt;port&gt;/&#010;&gt; &gt;&gt; myservice/Users?authMethod=Basic with statusCode: 415&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Saw this discussion on Nabble - http://camel.465427.n5.nabble.&#010;&gt; &gt;&gt; com/Http4-Set-Header-Content-Type-not-passing-through-to-&#010;&gt; &gt;&gt; the-HTTP-Request-td5746414.html#a5752856&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Does this mean we CAN""T USE - Camel-HTTP4 ?&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Regards,&#010;&gt; &gt;&gt; Arpit.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; ------------------------------&#010;&gt; &gt;&gt; If you reply to this email, your message will be added to the&#010;&gt; discussion&#010;&gt; &gt;&gt; below:&#010;&gt; &gt;&gt; http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-&#010;&gt; &gt;&gt; Content-Type-Header-tp5793736.html&#010;&gt; &gt;&gt; To start a new topic under Camel - Users, email&#010;&gt; &gt;&gt; [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=4&gt;&#010;&gt; &gt;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &gt;&gt; &lt;&#010;&gt; &gt;&gt; .&#010;&gt; &gt;&gt; NAML&#010;&gt; &gt;&gt; &lt;http://camel.465427.n5.nabble.com/template/&#010;&gt; NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%&#010;&gt; 21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.&#010;&gt; BasicNamespace-nabble.view.web.template.NabbleNamespace-&#010;&gt; nabble.view.web.template.NodeNamespace&amp;breadcrumbs=&#010;&gt; notify_subscribers%21nabble%3Aemail.naml-instant_emails%&#010;&gt; 21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; --&#010;&gt; &gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; com/Camel-Http-vs-Camel-Http4-Content-Type-Header-tp5793736p5793737.html&#010;&gt; &gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-&#010;&gt; Content-Type-Header-tp5793736p5796938.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-Content-Type-Header-tp5793736p5796944.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
43,44,souciance,          RE: Camel Http vs Camel Http4 - Content Type Header,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs058CrWz6zHLv-dYNT0Dtu_eUOEZx1WrXbSGVhqRYixWw%40mail.gmail.com%3E,users,"Thu, 06 Apr 2017 06:05:48 GMT","Hi, I can take a look later during the day and get back to you.&#010;&#010;Den 6 apr. 2017 7:44 fm skrev ""Goyal, Arpit [via Camel]"" &lt;&#010;ml-node+s465427n5797051h44@n5.nabble.com&gt;:&#010;&#010;&gt; Hi souciance,&#010;&gt;&#010;&gt; Below is the complete test case I have written to debug this problem. You&#010;&gt; can import and fix the 'package' and 'logger' to remove errors.&#010;&gt; 'createRouteBuilder' method at the end has the two routes using camel-http&#010;&gt; and camel-http4. The URLs are constants.&#010;&gt;&#010;&gt; I am using the SAP Cloud Identity API [1] which expects Content-Type:&#010;&gt; application/scim+json. But if this is not given then it works fine. In case&#010;&gt; of camel-http4 we get 'text/plain' by default.&#010;&gt;&#010;&gt; Can't provide credential, you may be able to debug to see the 'Content&#010;&gt; Type' getting set with Camel-Http4 and not getting with Camel-Http&#010;&gt;&#010;&gt; Right now my need is to just make it empty like Camel-http. We HAD to move&#010;&gt; to camel-http4 because of SSL support. And now this one use-case isn't&#010;&gt; working :(&#010;&gt;&#010;&gt; Regards,&#010;&gt; Arpit.&#010;&gt;&#010;&gt; [1] - https://help.sap.com/viewer/6d6d63354d1242d185ab4830fc04fe&#010;&gt; b1/Cloud/en-US/2f215687fcf34170b0bbc8b36b60f2e9.html&#010;&gt;&#010;&gt;&#010;&gt; Complete test case&#010;&gt;&#010;&gt; import org.apache.camel.CamelContext;&#010;&gt; import org.apache.camel.EndpointInject;&#010;&gt; import org.apache.camel.Exchange;&#010;&gt; import org.apache.camel.Processor;&#010;&gt; import org.apache.camel.Produce;&#010;&gt; import org.apache.camel.ProducerTemplate;&#010;&gt; import org.apache.camel.builder.RouteBuilder;&#010;&gt; import org.apache.camel.component.direct.DirectEndpoint;&#010;&gt; import org.apache.camel.http.common.HttpOperationFailedException;&#010;&gt; import org.apache.camel.impl.DefaultCamelContext;&#010;&gt; import org.apache.camel.impl.DefaultExchange;&#010;&gt; import org.apache.camel.impl.SimpleRegistry;&#010;&gt; import org.apache.camel.testng.CamelTestSupport;&#010;&gt; import org.testng.annotations.Test;&#010;&gt;&#010;&gt; public class TestSCIMScenario extends CamelTestSupport {&#010;&gt;&#010;&gt;   static {&#010;&gt;     System.setProperty(""javax.net.debug"", ""all"");&#010;&gt;     System.setProperty(""org.apache.commons.logging.Log"",&#010;&gt; ""org.apache.commons.logging.impl.SimpleLog"");&#010;&gt;     System.setProperty(""org.apache.commons.logging.simplelog.showdatetime"",&#010;&gt; ""true"");&#010;&gt;     System.setProperty(""org.apache.commons.logging.&#010;&gt; simplelog.log.org.apache.http"", ""DEBUG"");&#010;&gt;   }&#010;&gt;&#010;&gt;   @EndpointInject(uri = ""direct:startHttp"")&#010;&gt;   protected DirectEndpoint startHttp;&#010;&gt;&#010;&gt;   @EndpointInject(uri = ""direct:startHttp4"")&#010;&gt;   protected DirectEndpoint startHttp4;&#010;&gt;&#010;&gt;   @Produce(uri = ""direct:start"")&#010;&gt;   protected ProducerTemplate producer;&#010;&gt;&#010;&gt;   /* Payload based on SAP Cloud Indentity REST API -&#010;&gt; https://help.sap.com/viewer/6d6d63354d1242d185ab4830fc04feb1/Cloud/en-US/&#010;&gt; 2f215687fcf34170b0bbc8b36b60f2e9.html */&#010;&gt;   private static final String SCIM_PAYLOAD = ""{\r\n  \""userName\"":&#010;&gt; \""alexAderson\"",\r\n  \""name\"": {\r\n    \""givenName\"": \""Alex\"",\r\n&#010;&gt;  \""familyName\"": \""Anderson\"",\r\n    \""honorificPrefix\"": \""Mr.\""\r\n&#010;&gt;  },\r\n  \""emails\"": [\r\n    {\r\n      \""value\"": \""[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5797051&amp;i=0&gt;\""\r\n    }\r\n&#010;&gt;  ],\r\n  \""addresses\"": [\r\n    {\r\n      \""type\"": \""home\"",\r\n&#010;&gt;  \""streetAddress\"": \""1029 East River Drive\"",\r\n      \""locality\"":&#010;&gt; \""Street 301\"",\r\n      \""region\"": \""CA\"",\r\n      \""postalCode\"":&#010;&gt; \""94401\""\r\n    }\r\n  ],\r\n  \""phoneNumbers\"": [],\r\n  \""displayName\"":&#010;&gt; \""nosample\"",\r\n  \""company\"": \""YYY_USA\"",\r\n  \""active\"": true\r\n}"";&#010;&gt;&#010;&gt;   /* Camel-Http4 based URL */&#010;&gt;   private static final String http4Endpoint = ""https4://&lt;tenant ID&gt;.&#010;&gt; ondemand.com/service/scim/Users?proxyAuthHost=ppppp&amp;proxyAuthPort=8888&amp;&#010;&gt; proxyAuthScheme=http4&amp;authUsername=xxxxxx&amp;authPassword=yyyyy&amp;&#010;&gt; httpClientConfigurer=#customConfigurer"";&#010;&gt;&#010;&gt;   /* Camel-Http based URL */&#010;&gt;   private static final String httpEndpoint = ""https://&lt;tenant ID&gt;.&#010;&gt; ondemand.com/service/scim/Users?proxyHost=ppppp&amp;&#010;&gt; proxyPort=8888&amp;authUsername=xxxxxx&amp;authPassword=yyyyy&amp;authMethod=Basic"";&#010;&gt;&#010;&gt;   private static final Logger LOG = LogManager.getLogger();&#010;&gt;&#010;&gt;   @Test&#010;&gt;   public void testSCIMHttp() throws Exception {&#010;&gt;     DefaultExchange request = (DefaultExchange)&#010;&gt; producer.request(startHttp, new Processor() {&#010;&gt;&#010;&gt;       @Override&#010;&gt;       public void process(Exchange exchange) throws Exception {&#010;&gt;&#010;&gt;       }&#010;&gt;     });&#010;&gt;     if (request.getException() != null) {&#010;&gt;       throw request.getException();&#010;&gt;     }&#010;&gt;&#010;&gt;   }&#010;&gt;&#010;&gt;   @Test&#010;&gt;   public void testSCIMHttp4() throws Exception {&#010;&gt;     DefaultExchange request = (DefaultExchange)&#010;&gt; producer.request(startHttp4, new Processor() {&#010;&gt;&#010;&gt;       @Override&#010;&gt;       public void process(Exchange exchange) throws Exception {&#010;&gt;&#010;&gt;       }&#010;&gt;     });&#010;&gt;     if (request.getException() != null) {&#010;&gt;       throw request.getException();&#010;&gt;     }&#010;&gt;&#010;&gt;   }&#010;&gt;&#010;&gt;   protected CamelContext createCamelContext() throws Exception {&#010;&gt;     SimpleRegistry registry = new SimpleRegistry();&#010;&gt;     registry.put(""customConfigurer"", new CustomHttpClientConfigurer());&#010;&gt;     CamelContext cc = new DefaultCamelContext(registry);&#010;&gt;     return cc;&#010;&gt;   }&#010;&gt;&#010;&gt;   @Override&#010;&gt;   protected RouteBuilder createRouteBuilder() throws Exception {&#010;&gt;&#010;&gt;     return new RouteBuilder() {&#010;&gt;&#010;&gt;       @Override&#010;&gt;       public void configure() throws Exception {&#010;&gt;         onException(Exception.class).process(new Processor() {&#010;&gt;&#010;&gt;           @Override&#010;&gt;           public void process(Exchange exchange) throws Exception {&#010;&gt;             Exception exception = null;&#010;&gt;             if (exchange != null &amp;&amp; exchange.getProperty(CAMEL_PROPERTY_EXCEPTION_CAUGHT)&#010;&gt; instanceof Exception) {&#010;&gt;               exception =  (Exception) exchange.getProperty(CAMEL_PROPERTY_EXCEPTION_CAUGHT);&#010;&gt;&#010;&gt;             }&#010;&gt;             if (exception instanceof HttpOperationFailedException) {&#010;&gt;               HttpOperationFailedException ex =&#010;&gt; (HttpOperationFailedException) exception;&#010;&gt;               LOG.info(""*********************HTTP FAILED&#010;&gt; BEGIN*********************"");&#010;&gt;               LOG.info(""Status Code "" + ex.getStatusCode() + "" Status Text&#010;&gt; "" + ex.getStatusText() + "" Response Body "" + ex.getResponseBody());&#010;&gt;               LOG.info(""*********************HTTP FAILED&#010;&gt; END*********************"");&#010;&gt;             }&#010;&gt;             if(exception != null) {&#010;&gt;               throw exception;&#010;&gt;             }&#010;&gt;           }&#010;&gt;         });&#010;&gt;&#010;&gt;         from(startHttp).setBody().constant(SCIM_PAYLOAD).to(httpEndpoint).process(new&#010;&gt; Processor() {&#010;&gt;&#010;&gt;           @Override&#010;&gt;           public void process(Exchange exchange) throws Exception {&#010;&gt;             LOG.info(""*********************HTTP SUCCESS&#010;&gt; BEGIN*********************"");&#010;&gt;             LOG.info(exchange.getIn().getBody(String.class));&#010;&gt;             LOG.info(""*********************HTTP SUCCESS&#010;&gt; END*********************"");&#010;&gt;           }&#010;&gt;         });&#010;&gt;&#010;&gt;         from(startHttp4).setBody().constant(SCIM_PAYLOAD).&#010;&gt; setHeader(Exchange.CONTENT_TYPE).constant(null).to(http4Endpoint);&#010;&gt;       }&#010;&gt;     };&#010;&gt;   }&#010;&gt; }&#010;&gt;&#010;&gt; -----Original Message-----&#010;&gt; From: souciance [mailto:[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5797051&amp;i=1&gt;]&#010;&gt; Sent: Tuesday, April 4, 2017 10:34 PM&#010;&gt; To: [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5797051&amp;i=2&gt;&#010;&gt; Subject: Re: Camel Http vs Camel Http4 - Content Type Header&#010;&gt;&#010;&gt; Can you share your entire route code?&#010;&gt;&#010;&gt; Den 5 apr. 2017 5:25 fm skrev ""Goyal, Arpit [via Camel]"" &lt;&#010;&gt; [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5797051&amp;i=3&gt;&gt;:&#010;&gt;&#010;&gt; &gt; Anyone else has idea of this camel logic?&#010;&gt; &gt;&#010;&gt; &gt; Sent from my iPhone&#010;&gt; &gt;&#010;&gt; &gt; &gt; On Apr 3, 2017, at 4:33 PM, Goyal, Arpit &lt;[hidden email]&#010;&gt; &gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=0&gt;&gt; wrote:&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; Hi Claus,&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; HttpProduce -- from camel-http4 library is setting the content-type&#010;&gt; &gt; 'text/plain'  in method [1] line # 488 (camel version 2.16.3) even&#010;&gt; though&#010;&gt; &gt; we have set the Content-Type to be NULL - This is NOT the case with&#010;&gt; &gt; HttpProducer - from camel-http library.&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; By enabling the apache commons log, the headers are clearly visible.&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; The end-system we are invoking throws '415' due to the wrong Content&#010;&gt; &gt; Type passed and if we DO NOT pass any content type it works. As at&#010;&gt; &gt; execution time we can't determine the Content-Type, we want to pass it&#010;&gt; &gt; NULL.&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; Any possible way to achieve not sending of Content-Type header?&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; POST&#010;&gt; &gt; /service/scim/Users HTTP/1.1&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; breadcrumbId: ID-i044312-33503-1491259732621-0-1&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; Content-Length: 518&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; Content-Type: text/plain                            ---- in this line.&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; Host:&#010;&gt; &gt; xxxxxxx&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; Connection: Keep-Alive&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; User-Agent: Apache-HttpClient/4.5.2 (Java/1.7.0_101)&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; Accept-Encoding: gzip,deflate&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; Authorization: Basic XXXXXXXX&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""POST&#010;&gt; &gt; /service/scim/Users HTTP/1.1[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""breadcrumbId: ID-i044312-33503-1491259732621-0-1[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""Content-Length: 518[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""Content-Type: text/plain[\r][\n]""                        --- in this&#010;&gt; line&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Host:&#010;&gt; &gt; xxxxxxxxx[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""Connection: Keep-Alive[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""User-Agent: Apache-HttpClient/4.5.2 (Java/1.7.0_101)[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""Accept-Encoding: gzip,deflate[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""Authorization: Basic XXXXXXXX[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""{[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:620 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""}""&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; [1] - org.apache.camel.component.http4.HttpProducer.createRequestEntity(Exchange)&#010;&gt;&#010;&gt; &gt;&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; Regards,&#010;&gt; &gt; &gt; Arpit.&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; -----Original Message-----&#010;&gt; &gt; &gt; From: souciance [mailto:[hidden email]&#010;&gt; &gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=1&gt;]&#010;&gt; &gt; &gt; Sent: Thursday, February 9, 2017 1:40 PM&#010;&gt; &gt; &gt; To: [hidden email]&#010;&gt; &gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=2&gt;&#010;&gt; &gt; &gt; Subject: Re: Camel Http vs Camel Http4 - Content Type Header&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; Well it should be pretty easy to setup a http server and see what&#010;&gt; &gt; headers&#010;&gt; &gt; &gt; your route are sending and compare that to what the actual server&#010;&gt; wants.&#010;&gt; &gt; If&#010;&gt; &gt; &gt; camel-http4 is suppressing some headers then perhaps try another&#010;&gt; &gt; component.&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; On Thu, Feb 9, 2017 at 10:32 PM, Goyal, Arpit [via Camel] &lt;&#010;&gt; &gt; &gt; [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=3&gt;&gt;&#010;&gt;&#010;&gt; &gt; wrote:&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt;&gt; Hi,&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt; We were on Camel-Http (2.16) and moving to Camel-Http4 (2.16) and saw&#010;&gt; &gt; that&#010;&gt; &gt; &gt;&gt; URL which worked with Camel-http now fails with Camel-Http4 with&#010;&gt; status&#010;&gt; &gt; &gt;&gt; code - 415 (Unsupported Media Type).&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt; Caused by: org.apache.camel.http.common.HttpOperationFailedException:&#010;&gt;&#010;&gt; &gt; &gt;&gt; HTTP operation failed invoking https://&lt;host&gt;:&lt;port&gt;/&#010;&gt; &gt; &gt;&gt; myservice/Users?authMethod=Basic with statusCode: 415&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt; Saw this discussion on Nabble - http://camel.465427.n5.nabble.&#010;&gt; &gt; &gt;&gt; com/Http4-Set-Header-Content-Type-not-passing-through-to-&#010;&gt; &gt; &gt;&gt; the-HTTP-Request-td5746414.html#a5752856&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt; Does this mean we CAN""T USE - Camel-HTTP4 ?&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt; Regards,&#010;&gt; &gt; &gt;&gt; Arpit.&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt; ------------------------------&#010;&gt; &gt; &gt;&gt; If you reply to this email, your message will be added to the&#010;&gt; &gt; discussion&#010;&gt; &gt; &gt;&gt; below:&#010;&gt; &gt; &gt;&gt; http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-&#010;&gt; &gt; &gt;&gt; Content-Type-Header-tp5793736.html&#010;&gt; &gt; &gt;&gt; To start a new topic under Camel - Users, email&#010;&gt; &gt; &gt;&gt; [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=4&gt;&#010;&gt;&#010;&gt; &gt; &gt;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &gt; &gt;&gt; &lt;&#010;&gt; &gt; &gt;&gt; .&#010;&gt; &gt; &gt;&gt; NAML&#010;&gt; &gt; &gt;&gt; &lt;http://camel.465427.n5.nabble.com/template/&#010;&gt; &gt; NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%&#010;&gt; &gt; 21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.&#010;&gt; &gt; BasicNamespace-nabble.view.web.template.NabbleNamespace-&#010;&gt; &gt; nabble.view.web.template.NodeNamespace&amp;breadcrumbs=&#010;&gt; &gt; notify_subscribers%21nabble%3Aemail.naml-instant_emails%&#010;&gt; &gt; 21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; --&#010;&gt; &gt; &gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; &gt; com/Camel-Http-vs-Camel-Http4-Content-Type-Header-tp5793736p5793737.html&#010;&gt;&#010;&gt; &gt; &gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; ------------------------------&#010;&gt; &gt; If you reply to this email, your message will be added to the discussion&#010;&gt; &gt; below:&#010;&gt; &gt; http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-&#010;&gt; &gt; Content-Type-Header-tp5793736p5796938.html&#010;&gt; &gt; To start a new topic under Camel - Users, email&#010;&gt; &gt; [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5797051&amp;i=4&gt;&#010;&gt; &gt; To unsubscribe from Camel - Users, click here&#010;&gt; &gt; &lt;&#010;&gt; &gt; .&#010;&gt; &gt; NAML&#010;&gt; &gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_&#010;&gt; viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.&#010;&gt; BasicNamespace-nabble.view.web.template.NabbleNamespace-&#010;&gt; nabble.view.web.template.NodeNamespace&amp;breadcrumbs=&#010;&gt; notify_subscribers%21nabble%3Aemail.naml-instant_emails%&#010;&gt; 21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt; &gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; com/Camel-Http-vs-Camel-Http4-Content-Type-Header-tp5793736p5796944.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-&#010;&gt; Content-Type-Header-tp5793736p5797051.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-Content-Type-Header-tp5793736p5797052.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
44,45,"Goyal, Arpit",            RE: Camel Http vs Camel Http4 - Content Type Header,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3Cc067523d6ba6436285655c9036ce1215%40sap.com%3E,users,"Sat, 08 Apr 2017 06:11:50 GMT","Hi Souciance,&#010;&#010;Any luck in solving the puzzle?&#010;&#010;Regards,&#010;Arpit.&#010;&#010;-----Original Message-----&#010;From: souciance [mailto:souciance.eqdam.rashti@gmail.com] &#010;Sent: Wednesday, April 5, 2017 11:06 PM&#010;To: users@camel.apache.org&#010;Subject: RE: Camel Http vs Camel Http4 - Content Type Header&#010;&#010;Hi, I can take a look later during the day and get back to you.&#010;&#010;Den 6 apr. 2017 7:44 fm skrev ""Goyal, Arpit [via Camel]"" &lt;&#010;ml-node+s465427n5797051h44@n5.nabble.com&gt;:&#010;&#010;&gt; Hi souciance,&#010;&gt;&#010;&gt; Below is the complete test case I have written to debug this problem. You&#010;&gt; can import and fix the 'package' and 'logger' to remove errors.&#010;&gt; 'createRouteBuilder' method at the end has the two routes using camel-http&#010;&gt; and camel-http4. The URLs are constants.&#010;&gt;&#010;&gt; I am using the SAP Cloud Identity API [1] which expects Content-Type:&#010;&gt; application/scim+json. But if this is not given then it works fine. In case&#010;&gt; of camel-http4 we get 'text/plain' by default.&#010;&gt;&#010;&gt; Can't provide credential, you may be able to debug to see the 'Content&#010;&gt; Type' getting set with Camel-Http4 and not getting with Camel-Http&#010;&gt;&#010;&gt; Right now my need is to just make it empty like Camel-http. We HAD to move&#010;&gt; to camel-http4 because of SSL support. And now this one use-case isn't&#010;&gt; working :(&#010;&gt;&#010;&gt; Regards,&#010;&gt; Arpit.&#010;&gt;&#010;&gt; [1] - https://help.sap.com/viewer/6d6d63354d1242d185ab4830fc04fe&#010;&gt; b1/Cloud/en-US/2f215687fcf34170b0bbc8b36b60f2e9.html&#010;&gt;&#010;&gt;&#010;&gt; Complete test case&#010;&gt;&#010;&gt; import org.apache.camel.CamelContext;&#010;&gt; import org.apache.camel.EndpointInject;&#010;&gt; import org.apache.camel.Exchange;&#010;&gt; import org.apache.camel.Processor;&#010;&gt; import org.apache.camel.Produce;&#010;&gt; import org.apache.camel.ProducerTemplate;&#010;&gt; import org.apache.camel.builder.RouteBuilder;&#010;&gt; import org.apache.camel.component.direct.DirectEndpoint;&#010;&gt; import org.apache.camel.http.common.HttpOperationFailedException;&#010;&gt; import org.apache.camel.impl.DefaultCamelContext;&#010;&gt; import org.apache.camel.impl.DefaultExchange;&#010;&gt; import org.apache.camel.impl.SimpleRegistry;&#010;&gt; import org.apache.camel.testng.CamelTestSupport;&#010;&gt; import org.testng.annotations.Test;&#010;&gt;&#010;&gt; public class TestSCIMScenario extends CamelTestSupport {&#010;&gt;&#010;&gt;   static {&#010;&gt;     System.setProperty(""javax.net.debug"", ""all"");&#010;&gt;     System.setProperty(""org.apache.commons.logging.Log"",&#010;&gt; ""org.apache.commons.logging.impl.SimpleLog"");&#010;&gt;     System.setProperty(""org.apache.commons.logging.simplelog.showdatetime"",&#010;&gt; ""true"");&#010;&gt;     System.setProperty(""org.apache.commons.logging.&#010;&gt; simplelog.log.org.apache.http"", ""DEBUG"");&#010;&gt;   }&#010;&gt;&#010;&gt;   @EndpointInject(uri = ""direct:startHttp"")&#010;&gt;   protected DirectEndpoint startHttp;&#010;&gt;&#010;&gt;   @EndpointInject(uri = ""direct:startHttp4"")&#010;&gt;   protected DirectEndpoint startHttp4;&#010;&gt;&#010;&gt;   @Produce(uri = ""direct:start"")&#010;&gt;   protected ProducerTemplate producer;&#010;&gt;&#010;&gt;   /* Payload based on SAP Cloud Indentity REST API -&#010;&gt; https://help.sap.com/viewer/6d6d63354d1242d185ab4830fc04feb1/Cloud/en-US/&#010;&gt; 2f215687fcf34170b0bbc8b36b60f2e9.html */&#010;&gt;   private static final String SCIM_PAYLOAD = ""{\r\n  \""userName\"":&#010;&gt; \""alexAderson\"",\r\n  \""name\"": {\r\n    \""givenName\"": \""Alex\"",\r\n&#010;&gt;  \""familyName\"": \""Anderson\"",\r\n    \""honorificPrefix\"": \""Mr.\""\r\n&#010;&gt;  },\r\n  \""emails\"": [\r\n    {\r\n      \""value\"": \""[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5797051&amp;i=0&gt;\""\r\n    }\r\n&#010;&gt;  ],\r\n  \""addresses\"": [\r\n    {\r\n      \""type\"": \""home\"",\r\n&#010;&gt;  \""streetAddress\"": \""1029 East River Drive\"",\r\n      \""locality\"":&#010;&gt; \""Street 301\"",\r\n      \""region\"": \""CA\"",\r\n      \""postalCode\"":&#010;&gt; \""94401\""\r\n    }\r\n  ],\r\n  \""phoneNumbers\"": [],\r\n  \""displayName\"":&#010;&gt; \""nosample\"",\r\n  \""company\"": \""YYY_USA\"",\r\n  \""active\"": true\r\n}"";&#010;&gt;&#010;&gt;   /* Camel-Http4 based URL */&#010;&gt;   private static final String http4Endpoint = ""https4://&lt;tenant ID&gt;.&#010;&gt; ondemand.com/service/scim/Users?proxyAuthHost=ppppp&amp;proxyAuthPort=8888&amp;&#010;&gt; proxyAuthScheme=http4&amp;authUsername=xxxxxx&amp;authPassword=yyyyy&amp;&#010;&gt; httpClientConfigurer=#customConfigurer"";&#010;&gt;&#010;&gt;   /* Camel-Http based URL */&#010;&gt;   private static final String httpEndpoint = ""https://&lt;tenant ID&gt;.&#010;&gt; ondemand.com/service/scim/Users?proxyHost=ppppp&amp;&#010;&gt; proxyPort=8888&amp;authUsername=xxxxxx&amp;authPassword=yyyyy&amp;authMethod=Basic"";&#010;&gt;&#010;&gt;   private static final Logger LOG = LogManager.getLogger();&#010;&gt;&#010;&gt;   @Test&#010;&gt;   public void testSCIMHttp() throws Exception {&#010;&gt;     DefaultExchange request = (DefaultExchange)&#010;&gt; producer.request(startHttp, new Processor() {&#010;&gt;&#010;&gt;       @Override&#010;&gt;       public void process(Exchange exchange) throws Exception {&#010;&gt;&#010;&gt;       }&#010;&gt;     });&#010;&gt;     if (request.getException() != null) {&#010;&gt;       throw request.getException();&#010;&gt;     }&#010;&gt;&#010;&gt;   }&#010;&gt;&#010;&gt;   @Test&#010;&gt;   public void testSCIMHttp4() throws Exception {&#010;&gt;     DefaultExchange request = (DefaultExchange)&#010;&gt; producer.request(startHttp4, new Processor() {&#010;&gt;&#010;&gt;       @Override&#010;&gt;       public void process(Exchange exchange) throws Exception {&#010;&gt;&#010;&gt;       }&#010;&gt;     });&#010;&gt;     if (request.getException() != null) {&#010;&gt;       throw request.getException();&#010;&gt;     }&#010;&gt;&#010;&gt;   }&#010;&gt;&#010;&gt;   protected CamelContext createCamelContext() throws Exception {&#010;&gt;     SimpleRegistry registry = new SimpleRegistry();&#010;&gt;     registry.put(""customConfigurer"", new CustomHttpClientConfigurer());&#010;&gt;     CamelContext cc = new DefaultCamelContext(registry);&#010;&gt;     return cc;&#010;&gt;   }&#010;&gt;&#010;&gt;   @Override&#010;&gt;   protected RouteBuilder createRouteBuilder() throws Exception {&#010;&gt;&#010;&gt;     return new RouteBuilder() {&#010;&gt;&#010;&gt;       @Override&#010;&gt;       public void configure() throws Exception {&#010;&gt;         onException(Exception.class).process(new Processor() {&#010;&gt;&#010;&gt;           @Override&#010;&gt;           public void process(Exchange exchange) throws Exception {&#010;&gt;             Exception exception = null;&#010;&gt;             if (exchange != null &amp;&amp; exchange.getProperty(CAMEL_PROPERTY_EXCEPTION_CAUGHT)&#010;&gt; instanceof Exception) {&#010;&gt;               exception =  (Exception) exchange.getProperty(CAMEL_PROPERTY_EXCEPTION_CAUGHT);&#010;&gt;&#010;&gt;             }&#010;&gt;             if (exception instanceof HttpOperationFailedException) {&#010;&gt;               HttpOperationFailedException ex =&#010;&gt; (HttpOperationFailedException) exception;&#010;&gt;               LOG.info(""*********************HTTP FAILED&#010;&gt; BEGIN*********************"");&#010;&gt;               LOG.info(""Status Code "" + ex.getStatusCode() + "" Status Text&#010;&gt; "" + ex.getStatusText() + "" Response Body "" + ex.getResponseBody());&#010;&gt;               LOG.info(""*********************HTTP FAILED&#010;&gt; END*********************"");&#010;&gt;             }&#010;&gt;             if(exception != null) {&#010;&gt;               throw exception;&#010;&gt;             }&#010;&gt;           }&#010;&gt;         });&#010;&gt;&#010;&gt;         from(startHttp).setBody().constant(SCIM_PAYLOAD).to(httpEndpoint).process(new&#010;&gt; Processor() {&#010;&gt;&#010;&gt;           @Override&#010;&gt;           public void process(Exchange exchange) throws Exception {&#010;&gt;             LOG.info(""*********************HTTP SUCCESS&#010;&gt; BEGIN*********************"");&#010;&gt;             LOG.info(exchange.getIn().getBody(String.class));&#010;&gt;             LOG.info(""*********************HTTP SUCCESS&#010;&gt; END*********************"");&#010;&gt;           }&#010;&gt;         });&#010;&gt;&#010;&gt;         from(startHttp4).setBody().constant(SCIM_PAYLOAD).&#010;&gt; setHeader(Exchange.CONTENT_TYPE).constant(null).to(http4Endpoint);&#010;&gt;       }&#010;&gt;     };&#010;&gt;   }&#010;&gt; }&#010;&gt;&#010;&gt; -----Original Message-----&#010;&gt; From: souciance [mailto:[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5797051&amp;i=1&gt;]&#010;&gt; Sent: Tuesday, April 4, 2017 10:34 PM&#010;&gt; To: [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5797051&amp;i=2&gt;&#010;&gt; Subject: Re: Camel Http vs Camel Http4 - Content Type Header&#010;&gt;&#010;&gt; Can you share your entire route code?&#010;&gt;&#010;&gt; Den 5 apr. 2017 5:25 fm skrev ""Goyal, Arpit [via Camel]"" &lt;&#010;&gt; [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5797051&amp;i=3&gt;&gt;:&#010;&gt;&#010;&gt; &gt; Anyone else has idea of this camel logic?&#010;&gt; &gt;&#010;&gt; &gt; Sent from my iPhone&#010;&gt; &gt;&#010;&gt; &gt; &gt; On Apr 3, 2017, at 4:33 PM, Goyal, Arpit &lt;[hidden email]&#010;&gt; &gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=0&gt;&gt; wrote:&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; Hi Claus,&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; HttpProduce -- from camel-http4 library is setting the content-type&#010;&gt; &gt; 'text/plain'  in method [1] line # 488 (camel version 2.16.3) even&#010;&gt; though&#010;&gt; &gt; we have set the Content-Type to be NULL - This is NOT the case with&#010;&gt; &gt; HttpProducer - from camel-http library.&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; By enabling the apache commons log, the headers are clearly visible.&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; The end-system we are invoking throws '415' due to the wrong Content&#010;&gt; &gt; Type passed and if we DO NOT pass any content type it works. As at&#010;&gt; &gt; execution time we can't determine the Content-Type, we want to pass it&#010;&gt; &gt; NULL.&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; Any possible way to achieve not sending of Content-Type header?&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt; POST&#010;&gt; &gt; /service/scim/Users HTTP/1.1&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; breadcrumbId: ID-i044312-33503-1491259732621-0-1&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; Content-Length: 518&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; Content-Type: text/plain                            ---- in this line.&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; Host:&#010;&gt; &gt; xxxxxxx&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; Connection: Keep-Alive&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; User-Agent: Apache-HttpClient/4.5.2 (Java/1.7.0_101)&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; Accept-Encoding: gzip,deflate&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:618 CEST [DEBUG] headers - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; Authorization: Basic XXXXXXXX&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""POST&#010;&gt; &gt; /service/scim/Users HTTP/1.1[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""breadcrumbId: ID-i044312-33503-1491259732621-0-1[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""Content-Length: 518[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""Content-Type: text/plain[\r][\n]""                        --- in this&#010;&gt; line&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""Host:&#010;&gt; &gt; xxxxxxxxx[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""Connection: Keep-Alive[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""User-Agent: Apache-HttpClient/4.5.2 (Java/1.7.0_101)[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""Accept-Encoding: gzip,deflate[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""Authorization: Basic XXXXXXXX[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:619 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt;&#010;&gt; &gt; ""{[\r][\n]""&#010;&gt; &gt; &gt; 2017/04/04 00:48:55:620 CEST [DEBUG] wire - http-outgoing-0 &gt;&gt; ""}""&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; [1] - org.apache.camel.component.http4.HttpProducer.createRequestEntity(Exchange)&#010;&gt;&#010;&gt; &gt;&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; Regards,&#010;&gt; &gt; &gt; Arpit.&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; -----Original Message-----&#010;&gt; &gt; &gt; From: souciance [mailto:[hidden email]&#010;&gt; &gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=1&gt;]&#010;&gt; &gt; &gt; Sent: Thursday, February 9, 2017 1:40 PM&#010;&gt; &gt; &gt; To: [hidden email]&#010;&gt; &gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=2&gt;&#010;&gt; &gt; &gt; Subject: Re: Camel Http vs Camel Http4 - Content Type Header&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; Well it should be pretty easy to setup a http server and see what&#010;&gt; &gt; headers&#010;&gt; &gt; &gt; your route are sending and compare that to what the actual server&#010;&gt; wants.&#010;&gt; &gt; If&#010;&gt; &gt; &gt; camel-http4 is suppressing some headers then perhaps try another&#010;&gt; &gt; component.&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; On Thu, Feb 9, 2017 at 10:32 PM, Goyal, Arpit [via Camel] &lt;&#010;&gt; &gt; &gt; [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=3&gt;&gt;&#010;&gt;&#010;&gt; &gt; wrote:&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt;&gt; Hi,&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt; We were on Camel-Http (2.16) and moving to Camel-Http4 (2.16) and saw&#010;&gt; &gt; that&#010;&gt; &gt; &gt;&gt; URL which worked with Camel-http now fails with Camel-Http4 with&#010;&gt; status&#010;&gt; &gt; &gt;&gt; code - 415 (Unsupported Media Type).&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt; Caused by: org.apache.camel.http.common.HttpOperationFailedException:&#010;&gt;&#010;&gt; &gt; &gt;&gt; HTTP operation failed invoking https://&lt;host&gt;:&lt;port&gt;/&#010;&gt; &gt; &gt;&gt; myservice/Users?authMethod=Basic with statusCode: 415&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt; Saw this discussion on Nabble - http://camel.465427.n5.nabble.&#010;&gt; &gt; &gt;&gt; com/Http4-Set-Header-Content-Type-not-passing-through-to-&#010;&gt; &gt; &gt;&gt; the-HTTP-Request-td5746414.html#a5752856&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt; Does this mean we CAN""T USE - Camel-HTTP4 ?&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt; Regards,&#010;&gt; &gt; &gt;&gt; Arpit.&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&gt; ------------------------------&#010;&gt; &gt; &gt;&gt; If you reply to this email, your message will be added to the&#010;&gt; &gt; discussion&#010;&gt; &gt; &gt;&gt; below:&#010;&gt; &gt; &gt;&gt; http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-&#010;&gt; &gt; &gt;&gt; Content-Type-Header-tp5793736.html&#010;&gt; &gt; &gt;&gt; To start a new topic under Camel - Users, email&#010;&gt; &gt; &gt;&gt; [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796938&amp;i=4&gt;&#010;&gt;&#010;&gt; &gt; &gt;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &gt; &gt;&gt; &lt;&#010;&gt; &gt; &gt;&gt; .&#010;&gt; &gt; &gt;&gt; NAML&#010;&gt; &gt; &gt;&gt; &lt;http://camel.465427.n5.nabble.com/template/&#010;&gt; &gt; NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%&#010;&gt; &gt; 21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.&#010;&gt; &gt; BasicNamespace-nabble.view.web.template.NabbleNamespace-&#010;&gt; &gt; nabble.view.web.template.NodeNamespace&amp;breadcrumbs=&#010;&gt; &gt; notify_subscribers%21nabble%3Aemail.naml-instant_emails%&#010;&gt; &gt; 21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt; &gt; &gt;&gt;&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt;&#010;&gt; &gt; &gt; --&#010;&gt; &gt; &gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; &gt; com/Camel-Http-vs-Camel-Http4-Content-Type-Header-tp5793736p5793737.html&#010;&gt;&#010;&gt; &gt; &gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; ------------------------------&#010;&gt; &gt; If you reply to this email, your message will be added to the discussion&#010;&gt; &gt; below:&#010;&gt; &gt; http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-&#010;&gt; &gt; Content-Type-Header-tp5793736p5796938.html&#010;&gt; &gt; To start a new topic under Camel - Users, email&#010;&gt; &gt; [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5797051&amp;i=4&gt;&#010;&gt; &gt; To unsubscribe from Camel - Users, click here&#010;&gt; &gt; &lt;&#010;&gt; &gt; .&#010;&gt; &gt; NAML&#010;&gt; &gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_&#010;&gt; viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.&#010;&gt; BasicNamespace-nabble.view.web.template.NabbleNamespace-&#010;&gt; nabble.view.web.template.NodeNamespace&amp;breadcrumbs=&#010;&gt; notify_subscribers%21nabble%3Aemail.naml-instant_emails%&#010;&gt; 21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt; &gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; com/Camel-Http-vs-Camel-Http4-Content-Type-Header-tp5793736p5796944.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-&#010;&gt; Content-Type-Header-tp5793736p5797051.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-Http-vs-Camel-Http4-Content-Type-Header-tp5793736p5797052.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
45,46,urwithsumit,Camel Jetty & Cors not working,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491267301360-5796886.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 00:55:01 GMT","Hi,&#010;&#010;I am using Camel 2.18.2 and exposing REST api using camel Jetty component.&#010;The enableCORS options is set to true. Still the call to the API from&#010;angular 2 application is getting exception for CORS.&#010;&#010;Definition for the REST URI: &#010;from(""jetty:{{server.api.endpoint}}/file_monitor/report/all_file_updates?httpMethodRestrict=GET,OPTIONS&amp;enableCORS=true&amp;optionsEnabled=true"")&#010;&#009;&#009;&#009;&#009;.setHeader(Exchange.CONTENT_TYPE, constant(""application/json""))&#010;&#010;exception: &#010;Response to preflight request doesn't pass access control check: No&#010;'Access-Control-Allow-Origin' header is present on the requested resource. &#010;&#010;Any pointers on what i can correct?&#010;&#010;Regards&#010;Sumit&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-Jetty-Cors-not-working-tp5796886.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
46,47,syadav,impl cxf bus,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491283748309-5796887.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 05:29:08 GMT",Hi&#010;I want to implement a custom  cxf bus for tomee as tomee is not able to&#010;create cxf bus. So i what to implement cxf bus and force the tomee to use&#010;this implemented class &#010;&#010;Please help me this.&#010;&#010;Thanks&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/impl-cxf-bus-tp5796887.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
47,48,syadav,  Re: impl cxf bus,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491283814292-5796888.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 05:30:14 GMT",And this I want in java code no xml. I dont want to use any xmls&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/impl-cxf-bus-tp5796887p5796888.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
48,49,Romain Manni-Bucau,    Re: impl cxf bus,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCACLE%3D7OV%2BQtQeWKZgMu60_9mT6bbKnfRpeQ1w-NHpjPSG0%3DrDw%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 07:14:14 GMT","Hello,&#010;&#010;with camel-cdi you just define a CDI bus:&#010;&#010;@Dependent&#010;@Named(""mybus"")&#010;public class MyBus extends ExtensionManagerBus {&#010;}&#010;&#010;Then in your route you reference it by its name: .to(&#010;""cxfbean:xxxxx?bus=#mybus"")&#010;&#010;Romain Manni-Bucau&#010;@rmannibucau &lt;https://twitter.com/rmannibucau&gt; |  Blog&#010;&lt;https://blog-rmannibucau.rhcloud.com&gt; | Old Blog&#010;&lt;http://rmannibucau.wordpress.com&gt; | Github &lt;https://github.com/rmannibucau&gt; |&#010;LinkedIn &lt;https://www.linkedin.com/in/rmannibucau&gt; | JavaEE Factory&#010;&lt;https://javaeefactory-rmannibucau.rhcloud.com&gt;&#010;&#010;2017-04-04 7:30 GMT+02:00 syadav &lt;b.srisailam@gmail.com&gt;:&#010;&#010;&gt; And this I want in java code no xml. I dont want to use any xmls&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; com/impl-cxf-bus-tp5796887p5796888.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&#010;"
49,50,,Performance issue in Camel SFTP component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCACLE%3D7OV%2BQtQeWKZgMu60_9mT6bbKnfRpeQ1w-NHpjPSG0%3DrDw%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 07:14:14 GMT","Hello,&#010;&#010;with camel-cdi you just define a CDI bus:&#010;&#010;@Dependent&#010;@Named(""mybus"")&#010;public class MyBus extends ExtensionManagerBus {&#010;}&#010;&#010;Then in your route you reference it by its name: .to(&#010;""cxfbean:xxxxx?bus=#mybus"")&#010;&#010;Romain Manni-Bucau&#010;@rmannibucau &lt;https://twitter.com/rmannibucau&gt; |  Blog&#010;&lt;https://blog-rmannibucau.rhcloud.com&gt; | Old Blog&#010;&lt;http://rmannibucau.wordpress.com&gt; | Github &lt;https://github.com/rmannibucau&gt; |&#010;LinkedIn &lt;https://www.linkedin.com/in/rmannibucau&gt; | JavaEE Factory&#010;&lt;https://javaeefactory-rmannibucau.rhcloud.com&gt;&#010;&#010;2017-04-04 7:30 GMT+02:00 syadav &lt;b.srisailam@gmail.com&gt;:&#010;&#010;&gt; And this I want in java code no xml. I dont want to use any xmls&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; com/impl-cxf-bus-tp5796887p5796888.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&#010;"
50,51,Ayush Dixit,  Performance issue in Camel SFTP component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCY4PR05MB288556474F742B4395CD66D3AF0B0%40CY4PR05MB2885.namprd05.prod.outlook.com%3E,users,"Tue, 04 Apr 2017 07:16:08 GMT","&#010;Hi ,&#010;&#010;&#010;We have implemented a camel route where we are having camel sftp producer to transfer a files&#010;to remote SFTP location but on performance testing on client environment and on our local&#010;environment we have observed degradation in the time for transferring files to remote SFTP&#010;location. Please find the detailed analysis below. The we tried the various test in our local&#010;environment. In each test we put around 22 files on camel file consumer and each file took&#010;below time to write the file. PFB details&#010;&#010;&#010;========================================================================================&#010;When target directory having 20,000 files. Camel sftp producer took around 1 minute 43 second&#010;to a transfer file&#010;========================================================================================&#010;&#010;DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.component.file.FileConsumer&gt; About to process file: GenericFile[/data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFORPMAJAR17020726.txt]&#010;using exchange: Exchange[ST30PERFORPMAJAR17020726.txt]&#010;           INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;Picked IOP response file : ST30PERFORPMAJAR17020726.txt from IOP FTP directory&#010;            INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;Sending IOP response file : ST30PERFORPMAJAR17020726.txt to ICOMS FTP directory&#010;            DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#010;Exchange[ST30PERFORPMAJAR17020726.txt]&#010;&#010;&#010;&#010;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.component.file.GenericFileConverter&gt; Read file /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFORPMAJAR17020726.txt&#010;(no charset)&#010;           DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; About to store file: QST30PERFORPMAJAR17020726.txt&#010;using stream: java.io.BufferedInputStream@54a89ff5&#010;           DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.658 seconds (658 millis)&#010;to store file: QST30PERFORPMAJAR17020726.txt and FTP client returned: true&#010;&#010;           DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote [icoms/1/QST30PERFORPMAJAR17020726.txt]&#010;to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]]&#010;           DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file: icoms/1/QST30PERFORPMAJAR17020726.txt&#010;to: icoms/1/ST30PERFORPMAJAR17020726.txt&#010;            INFO 07:02:20 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;IOP response file : ST30PERFORPMAJAR17020726.txt successfully sent to ICOMS FTP directory&#010;&#010;&#010;=======================================================================================&#010;When target directory having 40,000 files. Camel sftp producer took around 3 minute 17 second&#010;to transfer file&#010;=======================================================================================&#010;&#010;DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.component.file.FileConsumer&gt; About to process file: GenericFile[/data/users/slvm02/smp53/domains/v&#010;                                mb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt] using&#010;exchange: Exchange[SX30RPMAJAR1702483756.txt]&#010;                INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;Picked IOP response file :&#010;                                SX30RPMAJAR1702483756.txt from IOP FTP directory&#010;                INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;Sending IOP response file&#010;                                : SX30RPMAJAR1702483756.txt to ICOMS FTP directory&#010;                DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPer&#010;                                Poll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#010;Exchange[SX30RPMAJAR1702483756.txt]&#010;&#010;&#010;                DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.component.file.GenericFileConverter&gt; Read file /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt&#010;(no charset)&#010;                DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; About to store file: QSX30RPMAJAR1702483756.txt&#010;using stream: java.io.BufferedInputStream@7954cfa8&#010;                DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.659 seconds (659 millis)&#010;to store file: QSX30RPMAJAR1702483756.txt and FTP client returned: true&#010;                DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote [icoms/1/QSX30RPMAJAR1702483756.txt]&#010;to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]]&#010;                DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file: icoms/1/QSX30RPMAJAR1702483756.txt&#010;to: icoms/1/SX30RPMAJAR1702483756.txt&#010;                INFO 07:50:41 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;IOP response file : SX30RPMAJAR1702483756.txt successfully sent to ICOMS FTP directory&#010;&#010;&#010;&#010;====================================================================================================&#010;Similarly when we achieved the files from target directory. It took around 6 sec.It seems&#010;like there is a performance issue with camel sftp component. Does it list the files in target&#010;directory which is taking time.&#010;===================================================================================================&#010;&#010;PFB the producer route which we set up&#010;sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#010;&#010;&#010;Please let us know if you need anything else.&#010;&#010;&#010;Ayush Dixit&#010;Software Engineer&#010;ayush.dixit@sigma-systems.com&lt;mailto:ayush.dixit@sigma-systems.com&gt;&#010;O: +91.20.25661992 x 321 |  M: +91-814-982-6260 | Skype: ayushdixit421&#010;[cid:image001.jpg@01D16809.E12C0D50]&lt;http://www.sigma-systems.com/&gt;&#010;&#010;&#010;&#010;&#010;"
51,52,Claus Ibsen,    Re: Performance issue in Camel SFTP component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yN%3DokDLFFxhA5MDAWwH0oLovNB_D6BMYCuLhMfUimw8tng%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 08:05:06 GMT","Please spend more time to read the documentation and you can find options&#010;to tweak the options to use or not use FTP list etc, and there is also a&#010;stepwise option&#010;&#010;On Tue, Apr 4, 2017 at 9:16 AM, Ayush Dixit &lt;Ayush.Dixit@sigma-systems.com&gt;&#010;wrote:&#010;&#010;&gt;&#010;&gt;&#010;&gt; Hi ,&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; We have implemented a camel route where we are having camel sftp producer&#010;&gt; to transfer a files to remote SFTP location but on performance testing on&#010;&gt; client environment and on our local environment we have observed&#010;&gt; degradation in the time for transferring files to remote SFTP location.&#010;&gt; Please find the detailed analysis below. The we tried the various test in&#010;&gt; our local environment. In each test we put around 22 files on camel file&#010;&gt; consumer and each file took below time to write the file. PFB details&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; ============================================================&#010;&gt; ============================&#010;&gt;&#010;&gt; When target directory having 20,000 files. Camel sftp producer took around&#010;&gt; 1 minute 43 second to a transfer file&#010;&gt;&#010;&gt; ============================================================&#010;&gt; ============================&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#010;&gt; GenericFile[/data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFORPMAJAR17020726.txt]&#010;&gt; using exchange: Exchange[ST30PERFORPMAJAR17020726.txt]&#010;&gt;&#010;&gt;            INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;&gt; Picked IOP response file : ST30PERFORPMAJAR17020726.txt from IOP FTP&#010;&gt; directory&#010;&gt;&#010;&gt;             INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;&gt; Sending IOP response file : ST30PERFORPMAJAR17020726.txt to ICOMS FTP&#010;&gt; directory&#010;&gt;&#010;&gt;             DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#010;&gt; 190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#010;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser] Exchange[&#010;&gt; ST30PERFORPMAJAR17020726.txt]&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;             DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file&#010;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFORPMAJAR17020726.txt&#010;&gt; (no charset)&#010;&gt;&#010;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#010;&gt; file: QST30PERFORPMAJAR17020726.txt using stream:&#010;&gt; java.io.BufferedInputStream@54a89ff5&#010;&gt;&#010;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.658 seconds&#010;&gt; (658 millis) to store file: QST30PERFORPMAJAR17020726.txt and FTP client&#010;&gt; returned: true&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote [icoms/1/QST30PERFORPMAJAR17020726.txt]&#010;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#010;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]]&#010;&gt;&#010;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#010;&gt; icoms/1/QST30PERFORPMAJAR17020726.txt to: icoms/1/&#010;&gt; ST30PERFORPMAJAR17020726.txt&#010;&gt;&#010;&gt;             INFO 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;&gt; IOP response file : ST30PERFORPMAJAR17020726.txt successfully sent to ICOMS&#010;&gt; FTP directory&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; ============================================================&#010;&gt; ===========================&#010;&gt;&#010;&gt; When target directory having 40,000 files. Camel sftp producer took around&#010;&gt; 3 minute 17 second to transfer file&#010;&gt;&#010;&gt; ============================================================&#010;&gt; ===========================&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#010;&gt; GenericFile[/data/users/slvm02/smp53/domains/v&#010;&gt;&#010;&gt;                                 mb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt]&#010;&gt; using exchange: Exchange[SX30RPMAJAR1702483756.txt]&#010;&gt;&#010;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;&gt; Picked IOP response file :&#010;&gt;&#010;&gt;                                 SX30RPMAJAR1702483756.txt from IOP FTP&#010;&gt; directory&#010;&gt;&#010;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;&gt; Sending IOP response file&#010;&gt;&#010;&gt;                                 : SX30RPMAJAR1702483756.txt to ICOMS FTP&#010;&gt; directory&#010;&gt;&#010;&gt;                 DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#010;&gt; 190/icoms/1?download=false&amp;maxMessagesPer&#010;&gt;&#010;&gt;                                 Poll=10&amp;password=xxxxxx&amp;&#010;&gt; tempPrefix=Q&amp;username=sigmauser] Exchange[SX30RPMAJAR1702483756.txt]&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file&#010;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt&#010;&gt; (no charset)&#010;&gt;&#010;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#010;&gt; file: QSX30RPMAJAR1702483756.txt using stream: java.io.BufferedInputStream@&#010;&gt; 7954cfa8&#010;&gt;&#010;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.659 seconds&#010;&gt; (659 millis) to store file: QSX30RPMAJAR1702483756.txt and FTP client&#010;&gt; returned: true&#010;&gt;&#010;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote [icoms/1/QSX30RPMAJAR1702483756.txt]&#010;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#010;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]]&#010;&gt;&#010;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#010;&gt; icoms/1/QSX30RPMAJAR1702483756.txt to: icoms/1/SX30RPMAJAR1702483756.txt&#010;&gt;&#010;&gt;                 INFO 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;&gt; IOP response file : SX30RPMAJAR1702483756.txt successfully sent to ICOMS&#010;&gt; FTP directory&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; ============================================================&#010;&gt; ========================================&#010;&gt;&#010;&gt; Similarly when we achieved the files from target directory. It took around&#010;&gt; 6 sec.It seems like there is a performance issue with camel sftp component.&#010;&gt; Does it list the files in target directory which is taking time.&#010;&gt;&#010;&gt; ============================================================&#010;&gt; =======================================&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; PFB the producer route which we set up&#010;&gt;&#010;&gt; sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#010;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; Please let us know if you need anything else.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; *Ayush Dixit*&#010;&gt; *Software Engineer*&#010;&gt; ayush.dixit@sigma-systems.com&#010;&gt;&#010;&gt; O: +91.20.25661992 x 321 &lt;+91%2020%202566%201992&gt; |  M: +91-814-982-6260&#010;&gt; &lt;+91%2081498%2026260&gt; | Skype: ayushdixit421&#010;&gt;&#010;&gt; [image: cid:image001.jpg@01D16809.E12C0D50]&#010;&gt; &lt;http://www.sigma-systems.com/&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
52,53,Ayush Dixit,      RE: Performance issue in Camel SFTP component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCY4PR05MB288500B6CF77E297A58C0CC5AF0B0%40CY4PR05MB2885.namprd05.prod.outlook.com%3E,users,"Tue, 04 Apr 2017 10:10:17 GMT","&#013;&#010;Thanks Claus , I've tried  stepwise=false  in camel producer . No such luck &#013;&#010;&#013;&#010;Also, I have tried download=false and useList=false. Still the performance is same. I am referring&#010;the below link for camel documentation&#013;&#010;&#013;&#010;http://camel.apache.org/ftp2.html &#013;&#010;&#013;&#010;Is there is anything else you think I can try?&#013;&#010;&#013;&#010;Thanks&#013;&#010;Ayush&#013;&#010;&#013;&#010;&#013;&#010;-----Original Message-----&#013;&#010;From: Claus Ibsen [mailto:claus.ibsen@gmail.com] &#013;&#010;Sent: Tuesday, April 4, 2017 1:35 PM&#013;&#010;To: users@camel.apache.org&#013;&#010;Cc: users-subscribe@camel.apache.org&#013;&#010;Subject: Re: Performance issue in Camel SFTP component&#013;&#010;&#013;&#010;Please spend more time to read the documentation and you can find options to tweak the options&#010;to use or not use FTP list etc, and there is also a stepwise option&#013;&#010;&#013;&#010;On Tue, Apr 4, 2017 at 9:16 AM, Ayush Dixit &lt;Ayush.Dixit@sigma-systems.com&gt;&#013;&#010;wrote:&#013;&#010;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; Hi ,&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; We have implemented a camel route where we are having camel sftp &#013;&#010;&gt; producer to transfer a files to remote SFTP location but on &#013;&#010;&gt; performance testing on client environment and on our local environment &#013;&#010;&gt; we have observed degradation in the time for transferring files to remote SFTP location.&#013;&#010;&gt; Please find the detailed analysis below. The we tried the various test &#013;&#010;&gt; in our local environment. In each test we put around 22 files on camel &#013;&#010;&gt; file consumer and each file took below time to write the file. PFB &#013;&#010;&gt; details&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; ============================================================&#013;&#010;&gt; ============================&#013;&#010;&gt;&#013;&#010;&gt; When target directory having 20,000 files. Camel sftp producer took &#013;&#010;&gt; around&#013;&#010;&gt; 1 minute 43 second to a transfer file&#013;&#010;&gt;&#013;&#010;&gt; ============================================================&#013;&#010;&gt; ============================&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#013;&#010;&gt; GenericFile[/data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&#013;&#010;&gt; /ST30PERFORPMAJAR17020726.txt] using exchange: &#013;&#010;&gt; Exchange[ST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt;&#013;&#010;&gt;            INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#013;&#010;&gt; nseFtpRouteBuilder&gt; Picked IOP response file : &#013;&#010;&gt; ST30PERFORPMAJAR17020726.txt from IOP FTP directory&#013;&#010;&gt;&#013;&#010;&gt;             INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#013;&#010;&gt; nseFtpRouteBuilder&gt; Sending IOP response file : &#013;&#010;&gt; ST30PERFORPMAJAR17020726.txt to ICOMS FTP directory&#013;&#010;&gt;&#013;&#010;&gt;             DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#013;&#010;&gt; 190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#013;&#010;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser] Exchange[ &#013;&#010;&gt; ST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;             DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file &#013;&#010;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFORP&#013;&#010;&gt; MAJAR17020726.txt&#013;&#010;&gt; (no charset)&#013;&#010;&gt;&#013;&#010;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#013;&#010;&gt; file: QST30PERFORPMAJAR17020726.txt using stream:&#013;&#010;&gt; java.io.BufferedInputStream@54a89ff5&#013;&#010;&gt;&#013;&#010;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.658 &#013;&#010;&gt; seconds&#013;&#010;&gt; (658 millis) to store file: QST30PERFORPMAJAR17020726.txt and FTP &#013;&#010;&gt; client&#013;&#010;&gt; returned: true&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote &#013;&#010;&gt; [icoms/1/QST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#013;&#010;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#013;&#010;&gt; ]&#013;&#010;&gt;&#013;&#010;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#013;&#010;&gt; icoms/1/QST30PERFORPMAJAR17020726.txt to: icoms/1/ &#013;&#010;&gt; ST30PERFORPMAJAR17020726.txt&#013;&#010;&gt;&#013;&#010;&gt;             INFO 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#013;&#010;&gt; nseFtpRouteBuilder&gt; IOP response file : ST30PERFORPMAJAR17020726.txt &#013;&#010;&gt; successfully sent to ICOMS FTP directory&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; ============================================================&#013;&#010;&gt; ===========================&#013;&#010;&gt;&#013;&#010;&gt; When target directory having 40,000 files. Camel sftp producer took &#013;&#010;&gt; around&#013;&#010;&gt; 3 minute 17 second to transfer file&#013;&#010;&gt;&#013;&#010;&gt; ============================================================&#013;&#010;&gt; ===========================&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#013;&#010;&gt; GenericFile[/data/users/slvm02/smp53/domains/v&#013;&#010;&gt;&#013;&#010;&gt;                                 &#013;&#010;&gt; mb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt]&#013;&#010;&gt; using exchange: Exchange[SX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&#013;&#010;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#013;&#010;&gt; nseFtpRouteBuilder&gt;&#013;&#010;&gt; Picked IOP response file :&#013;&#010;&gt;&#013;&#010;&gt;                                 SX30RPMAJAR1702483756.txt from IOP FTP &#013;&#010;&gt; directory&#013;&#010;&gt;&#013;&#010;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#013;&#010;&gt; nseFtpRouteBuilder&gt;&#013;&#010;&gt; Sending IOP response file&#013;&#010;&gt;&#013;&#010;&gt;                                 : SX30RPMAJAR1702483756.txt to ICOMS &#013;&#010;&gt; FTP directory&#013;&#010;&gt;&#013;&#010;&gt;                 DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#013;&#010;&gt; 190/icoms/1?download=false&amp;maxMessagesPer&#013;&#010;&gt;&#013;&#010;&gt;                                 Poll=10&amp;password=xxxxxx&amp; &#013;&#010;&gt; tempPrefix=Q&amp;username=sigmauser] Exchange[SX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file &#013;&#010;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJAR&#013;&#010;&gt; 1702483756.txt&#013;&#010;&gt; (no charset)&#013;&#010;&gt;&#013;&#010;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#013;&#010;&gt; file: QSX30RPMAJAR1702483756.txt using stream: &#013;&#010;&gt; java.io.BufferedInputStream@&#013;&#010;&gt; 7954cfa8&#013;&#010;&gt;&#013;&#010;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.659 &#013;&#010;&gt; seconds&#013;&#010;&gt; (659 millis) to store file: QSX30RPMAJAR1702483756.txt and FTP client&#013;&#010;&gt; returned: true&#013;&#010;&gt;&#013;&#010;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote &#013;&#010;&gt; [icoms/1/QSX30RPMAJAR1702483756.txt]&#013;&#010;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#013;&#010;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#013;&#010;&gt; ]&#013;&#010;&gt;&#013;&#010;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#013;&#010;&gt; icoms/1/QSX30RPMAJAR1702483756.txt to: &#013;&#010;&gt; icoms/1/SX30RPMAJAR1702483756.txt&#013;&#010;&gt;&#013;&#010;&gt;                 INFO 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#013;&#010;&gt; nseFtpRouteBuilder&gt; IOP response file : SX30RPMAJAR1702483756.txt &#013;&#010;&gt; successfully sent to ICOMS FTP directory&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; ============================================================&#013;&#010;&gt; ========================================&#013;&#010;&gt;&#013;&#010;&gt; Similarly when we achieved the files from target directory. It took &#013;&#010;&gt; around&#013;&#010;&gt; 6 sec.It seems like there is a performance issue with camel sftp component.&#013;&#010;&gt; Does it list the files in target directory which is taking time.&#013;&#010;&gt;&#013;&#010;&gt; ============================================================&#013;&#010;&gt; =======================================&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; PFB the producer route which we set up&#013;&#010;&gt;&#013;&#010;&gt; sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#013;&#010;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; Please let us know if you need anything else.&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; *Ayush Dixit*&#013;&#010;&gt; *Software Engineer*&#013;&#010;&gt; ayush.dixit@sigma-systems.com&#013;&#010;&gt;&#013;&#010;&gt; O: +91.20.25661992 x 321 &lt;+91%2020%202566%201992&gt; |  M: &#013;&#010;&gt; +91-814-982-6260 &lt;+91%2081498%2026260&gt; | Skype: ayushdixit421&#013;&#010;&gt;&#013;&#010;&gt; [image: cid:image001.jpg@01D16809.E12C0D50]&#013;&#010;&gt; &lt;http://www.sigma-systems.com/&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&#013;&#010;&#013;&#010;&#013;&#010;--&#013;&#010;Claus Ibsen&#013;&#010;-----------------&#013;&#010;http://davsclaus.com @davsclaus&#013;&#010;Camel in Action 2: https://www.manning.com/ibsen2&#013;&#010;"
53,54,Claus Ibsen,        Re: Performance issue in Camel SFTP component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNksbd7r6dUFPYy64A2ny9qS6%2B3c%3DB44Gp%2BWa9AQy4GdhA%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 07:38:12 GMT","Try with maxMessagesPerPoll to set an upper limit.&#010;&#010;On Tue, Apr 4, 2017 at 12:10 PM, Ayush Dixit&#010;&lt;Ayush.Dixit@sigma-systems.com&gt; wrote:&#010;&gt;&#010;&gt; Thanks Claus , I've tried  stepwise=false  in camel producer . No such luck&#010;&gt;&#010;&gt; Also, I have tried download=false and useList=false. Still the performance is same. I&#010;am referring the below link for camel documentation&#010;&gt;&#010;&gt; http://camel.apache.org/ftp2.html&#010;&gt;&#010;&gt; Is there is anything else you think I can try?&#010;&gt;&#010;&gt; Thanks&#010;&gt; Ayush&#010;&gt;&#010;&gt;&#010;&gt; -----Original Message-----&#010;&gt; From: Claus Ibsen [mailto:claus.ibsen@gmail.com]&#010;&gt; Sent: Tuesday, April 4, 2017 1:35 PM&#010;&gt; To: users@camel.apache.org&#010;&gt; Cc: users-subscribe@camel.apache.org&#010;&gt; Subject: Re: Performance issue in Camel SFTP component&#010;&gt;&#010;&gt; Please spend more time to read the documentation and you can find options to tweak the&#010;options to use or not use FTP list etc, and there is also a stepwise option&#010;&gt;&#010;&gt; On Tue, Apr 4, 2017 at 9:16 AM, Ayush Dixit &lt;Ayush.Dixit@sigma-systems.com&gt;&#010;&gt; wrote:&#010;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; Hi ,&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; We have implemented a camel route where we are having camel sftp&#010;&gt;&gt; producer to transfer a files to remote SFTP location but on&#010;&gt;&gt; performance testing on client environment and on our local environment&#010;&gt;&gt; we have observed degradation in the time for transferring files to remote SFTP location.&#010;&gt;&gt; Please find the detailed analysis below. The we tried the various test&#010;&gt;&gt; in our local environment. In each test we put around 22 files on camel&#010;&gt;&gt; file consumer and each file took below time to write the file. PFB&#010;&gt;&gt; details&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; ============================================================&#010;&gt;&gt; ============================&#010;&gt;&gt;&#010;&gt;&gt; When target directory having 20,000 files. Camel sftp producer took&#010;&gt;&gt; around&#010;&gt;&gt; 1 minute 43 second to a transfer file&#010;&gt;&gt;&#010;&gt;&gt; ============================================================&#010;&gt;&gt; ============================&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#010;&gt;&gt; GenericFile[/data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&#010;&gt;&gt; /ST30PERFORPMAJAR17020726.txt] using exchange:&#010;&gt;&gt; Exchange[ST30PERFORPMAJAR17020726.txt]&#010;&gt;&gt;&#010;&gt;&gt;            INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#010;&gt;&gt; nseFtpRouteBuilder&gt; Picked IOP response file :&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt from IOP FTP directory&#010;&gt;&gt;&#010;&gt;&gt;             INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#010;&gt;&gt; nseFtpRouteBuilder&gt; Sending IOP response file :&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt to ICOMS FTP directory&#010;&gt;&gt;&#010;&gt;&gt;             DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#010;&gt;&gt; 190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#010;&gt;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser] Exchange[&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt]&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;             DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file&#010;&gt;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFORP&#010;&gt;&gt; MAJAR17020726.txt&#010;&gt;&gt; (no charset)&#010;&gt;&gt;&#010;&gt;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#010;&gt;&gt; file: QST30PERFORPMAJAR17020726.txt using stream:&#010;&gt;&gt; java.io.BufferedInputStream@54a89ff5&#010;&gt;&gt;&#010;&gt;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.658&#010;&gt;&gt; seconds&#010;&gt;&gt; (658 millis) to store file: QST30PERFORPMAJAR17020726.txt and FTP&#010;&gt;&gt; client&#010;&gt;&gt; returned: true&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote&#010;&gt;&gt; [icoms/1/QST30PERFORPMAJAR17020726.txt]&#010;&gt;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#010;&gt;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#010;&gt;&gt; ]&#010;&gt;&gt;&#010;&gt;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#010;&gt;&gt; icoms/1/QST30PERFORPMAJAR17020726.txt to: icoms/1/&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt&#010;&gt;&gt;&#010;&gt;&gt;             INFO 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#010;&gt;&gt; nseFtpRouteBuilder&gt; IOP response file : ST30PERFORPMAJAR17020726.txt&#010;&gt;&gt; successfully sent to ICOMS FTP directory&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; ============================================================&#010;&gt;&gt; ===========================&#010;&gt;&gt;&#010;&gt;&gt; When target directory having 40,000 files. Camel sftp producer took&#010;&gt;&gt; around&#010;&gt;&gt; 3 minute 17 second to transfer file&#010;&gt;&gt;&#010;&gt;&gt; ============================================================&#010;&gt;&gt; ===========================&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#010;&gt;&gt; GenericFile[/data/users/slvm02/smp53/domains/v&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; mb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt]&#010;&gt;&gt; using exchange: Exchange[SX30RPMAJAR1702483756.txt]&#010;&gt;&gt;&#010;&gt;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#010;&gt;&gt; nseFtpRouteBuilder&gt;&#010;&gt;&gt; Picked IOP response file :&#010;&gt;&gt;&#010;&gt;&gt;                                 SX30RPMAJAR1702483756.txt from IOP FTP&#010;&gt;&gt; directory&#010;&gt;&gt;&#010;&gt;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#010;&gt;&gt; nseFtpRouteBuilder&gt;&#010;&gt;&gt; Sending IOP response file&#010;&gt;&gt;&#010;&gt;&gt;                                 : SX30RPMAJAR1702483756.txt to ICOMS&#010;&gt;&gt; FTP directory&#010;&gt;&gt;&#010;&gt;&gt;                 DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#010;&gt;&gt; 190/icoms/1?download=false&amp;maxMessagesPer&#010;&gt;&gt;&#010;&gt;&gt;                                 Poll=10&amp;password=xxxxxx&amp;&#010;&gt;&gt; tempPrefix=Q&amp;username=sigmauser] Exchange[SX30RPMAJAR1702483756.txt]&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file&#010;&gt;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJAR&#010;&gt;&gt; 1702483756.txt&#010;&gt;&gt; (no charset)&#010;&gt;&gt;&#010;&gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#010;&gt;&gt; file: QSX30RPMAJAR1702483756.txt using stream:&#010;&gt;&gt; java.io.BufferedInputStream@&#010;&gt;&gt; 7954cfa8&#010;&gt;&gt;&#010;&gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.659&#010;&gt;&gt; seconds&#010;&gt;&gt; (659 millis) to store file: QSX30RPMAJAR1702483756.txt and FTP client&#010;&gt;&gt; returned: true&#010;&gt;&gt;&#010;&gt;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote&#010;&gt;&gt; [icoms/1/QSX30RPMAJAR1702483756.txt]&#010;&gt;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#010;&gt;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#010;&gt;&gt; ]&#010;&gt;&gt;&#010;&gt;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#010;&gt;&gt; icoms/1/QSX30RPMAJAR1702483756.txt to:&#010;&gt;&gt; icoms/1/SX30RPMAJAR1702483756.txt&#010;&gt;&gt;&#010;&gt;&gt;                 INFO 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#010;&gt;&gt; nseFtpRouteBuilder&gt; IOP response file : SX30RPMAJAR1702483756.txt&#010;&gt;&gt; successfully sent to ICOMS FTP directory&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; ============================================================&#010;&gt;&gt; ========================================&#010;&gt;&gt;&#010;&gt;&gt; Similarly when we achieved the files from target directory. It took&#010;&gt;&gt; around&#010;&gt;&gt; 6 sec.It seems like there is a performance issue with camel sftp component.&#010;&gt;&gt; Does it list the files in target directory which is taking time.&#010;&gt;&gt;&#010;&gt;&gt; ============================================================&#010;&gt;&gt; =======================================&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; PFB the producer route which we set up&#010;&gt;&gt;&#010;&gt;&gt; sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#010;&gt;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; Please let us know if you need anything else.&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; *Ayush Dixit*&#010;&gt;&gt; *Software Engineer*&#010;&gt;&gt; ayush.dixit@sigma-systems.com&#010;&gt;&gt;&#010;&gt;&gt; O: +91.20.25661992 x 321 &lt;+91%2020%202566%201992&gt; |  M:&#010;&gt;&gt; +91-814-982-6260 &lt;+91%2081498%2026260&gt; | Skype: ayushdixit421&#010;&gt;&gt;&#010;&gt;&gt; [image: cid:image001.jpg@01D16809.E12C0D50]&#010;&gt;&gt; &lt;http://www.sigma-systems.com/&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
54,55,Ayush Dixit,          RE: Performance issue in Camel SFTP component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CMWHPR05MB2896023849CD4DBA242C64CBAF0A0%40MWHPR05MB2896.namprd05.prod.outlook.com%3E,users,"Wed, 05 Apr 2017 07:52:17 GMT","Hi Claus,&#013;&#010;&#013;&#010;Already tried that , See below endpoint configuration . No luck :( &#013;&#010;&#013;&#010;to(""sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&amp;stepwise=false"")&#013;&#010;&#013;&#010;Thanks&#013;&#010;Ayush &#013;&#010;&#013;&#010;-----Original Message-----&#013;&#010;From: Claus Ibsen [mailto:claus.ibsen@gmail.com] &#013;&#010;Sent: Wednesday, April 5, 2017 1:08 PM&#013;&#010;To: users@camel.apache.org&#013;&#010;Subject: Re: Performance issue in Camel SFTP component&#013;&#010;&#013;&#010;Try with maxMessagesPerPoll to set an upper limit.&#013;&#010;&#013;&#010;On Tue, Apr 4, 2017 at 12:10 PM, Ayush Dixit &lt;Ayush.Dixit@sigma-systems.com&gt; wrote:&#013;&#010;&gt;&#013;&#010;&gt; Thanks Claus , I've tried  stepwise=false  in camel producer . No such &#013;&#010;&gt; luck&#013;&#010;&gt;&#013;&#010;&gt; Also, I have tried download=false and useList=false. Still the &#013;&#010;&gt; performance is same. I am referring the below link for camel &#013;&#010;&gt; documentation&#013;&#010;&gt;&#013;&#010;&gt; http://camel.apache.org/ftp2.html&#013;&#010;&gt;&#013;&#010;&gt; Is there is anything else you think I can try?&#013;&#010;&gt;&#013;&#010;&gt; Thanks&#013;&#010;&gt; Ayush&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; -----Original Message-----&#013;&#010;&gt; From: Claus Ibsen [mailto:claus.ibsen@gmail.com]&#013;&#010;&gt; Sent: Tuesday, April 4, 2017 1:35 PM&#013;&#010;&gt; To: users@camel.apache.org&#013;&#010;&gt; Cc: users-subscribe@camel.apache.org&#013;&#010;&gt; Subject: Re: Performance issue in Camel SFTP component&#013;&#010;&gt;&#013;&#010;&gt; Please spend more time to read the documentation and you can find &#013;&#010;&gt; options to tweak the options to use or not use FTP list etc, and there &#013;&#010;&gt; is also a stepwise option&#013;&#010;&gt;&#013;&#010;&gt; On Tue, Apr 4, 2017 at 9:16 AM, Ayush Dixit &#013;&#010;&gt; &lt;Ayush.Dixit@sigma-systems.com&gt;&#013;&#010;&gt; wrote:&#013;&#010;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; Hi ,&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; We have implemented a camel route where we are having camel sftp &#013;&#010;&gt;&gt; producer to transfer a files to remote SFTP location but on &#013;&#010;&gt;&gt; performance testing on client environment and on our local &#013;&#010;&gt;&gt; environment we have observed degradation in the time for transferring files to remote&#010;SFTP location.&#013;&#010;&gt;&gt; Please find the detailed analysis below. The we tried the various &#013;&#010;&gt;&gt; test in our local environment. In each test we put around 22 files on &#013;&#010;&gt;&gt; camel file consumer and each file took below time to write the file. &#013;&#010;&gt;&gt; PFB details&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ============================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; When target directory having 20,000 files. Camel sftp producer took &#013;&#010;&gt;&gt; around&#013;&#010;&gt;&gt; 1 minute 43 second to a transfer file&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ============================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#013;&#010;&gt;&gt; GenericFile[/data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/&#013;&#010;&gt;&gt; 1 /ST30PERFORPMAJAR17020726.txt] using exchange:&#013;&#010;&gt;&gt; Exchange[ST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt; Picked IOP response file :&#013;&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt from IOP FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;             INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt; Sending IOP response file :&#013;&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt to ICOMS FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;             DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#013;&#010;&gt;&gt; 190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#013;&#010;&gt;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser] Exchange[ &#013;&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;             DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file &#013;&#010;&gt;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFOR&#013;&#010;&gt;&gt; P&#013;&#010;&gt;&gt; MAJAR17020726.txt&#013;&#010;&gt;&gt; (no charset)&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#013;&#010;&gt;&gt; file: QST30PERFORPMAJAR17020726.txt using stream:&#013;&#010;&gt;&gt; java.io.BufferedInputStream@54a89ff5&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.658 &#013;&#010;&gt;&gt; seconds&#013;&#010;&gt;&gt; (658 millis) to store file: QST30PERFORPMAJAR17020726.txt and FTP &#013;&#010;&gt;&gt; client&#013;&#010;&gt;&gt; returned: true&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote &#013;&#010;&gt;&gt; [icoms/1/QST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#013;&#010;&gt;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#013;&#010;&gt;&gt; ]&#013;&#010;&gt;&gt; ]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#013;&#010;&gt;&gt; icoms/1/QST30PERFORPMAJAR17020726.txt to: icoms/1/ &#013;&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;             INFO 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt; IOP response file : ST30PERFORPMAJAR17020726.txt&#013;&#010;&gt;&gt; successfully sent to ICOMS FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ===========================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; When target directory having 40,000 files. Camel sftp producer took &#013;&#010;&gt;&gt; around&#013;&#010;&gt;&gt; 3 minute 17 second to transfer file&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ===========================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#013;&#010;&gt;&gt; GenericFile[/data/users/slvm02/smp53/domains/v&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; mb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&gt; using exchange: Exchange[SX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt;&#013;&#010;&gt;&gt; Picked IOP response file :&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                                 SX30RPMAJAR1702483756.txt from IOP &#013;&#010;&gt;&gt; FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt;&#013;&#010;&gt;&gt; Sending IOP response file&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                                 : SX30RPMAJAR1702483756.txt to ICOMS &#013;&#010;&gt;&gt; FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 &#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#013;&#010;&gt;&gt; 190/icoms/1?download=false&amp;maxMessagesPer&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                                 Poll=10&amp;password=xxxxxx&amp; &#013;&#010;&gt;&gt; tempPrefix=Q&amp;username=sigmauser] Exchange[SX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 &#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file &#013;&#010;&gt;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJA&#013;&#010;&gt;&gt; R&#013;&#010;&gt;&gt; 1702483756.txt&#013;&#010;&gt;&gt; (no charset)&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 &#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#013;&#010;&gt;&gt; file: QSX30RPMAJAR1702483756.txt using stream:&#013;&#010;&gt;&gt; java.io.BufferedInputStream@&#013;&#010;&gt;&gt; 7954cfa8&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 &#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.659 &#013;&#010;&gt;&gt; seconds&#013;&#010;&gt;&gt; (659 millis) to store file: QSX30RPMAJAR1702483756.txt and FTP client&#013;&#010;&gt;&gt; returned: true&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 &#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote &#013;&#010;&gt;&gt; [icoms/1/QSX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#013;&#010;&gt;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#013;&#010;&gt;&gt; ]&#013;&#010;&gt;&gt; ]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 &#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#013;&#010;&gt;&gt; icoms/1/QSX30RPMAJAR1702483756.txt to:&#013;&#010;&gt;&gt; icoms/1/SX30RPMAJAR1702483756.txt&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 INFO 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt; IOP response file : SX30RPMAJAR1702483756.txt&#013;&#010;&gt;&gt; successfully sent to ICOMS FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ========================================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; Similarly when we achieved the files from target directory. It took &#013;&#010;&gt;&gt; around&#013;&#010;&gt;&gt; 6 sec.It seems like there is a performance issue with camel sftp component.&#013;&#010;&gt;&gt; Does it list the files in target directory which is taking time.&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; =======================================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; PFB the producer route which we set up&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#013;&#010;&gt;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; Please let us know if you need anything else.&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; *Ayush Dixit*&#013;&#010;&gt;&gt; *Software Engineer*&#013;&#010;&gt;&gt; ayush.dixit@sigma-systems.com&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; O: +91.20.25661992 x 321 &lt;+91%2020%202566%201992&gt; |  M:&#013;&#010;&gt;&gt; +91-814-982-6260 &lt;+91%2081498%2026260&gt; | Skype: ayushdixit421&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; [image: cid:image001.jpg@01D16809.E12C0D50]&#013;&#010;&gt;&gt; &lt;http://www.sigma-systems.com/&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; --&#013;&#010;&gt; Claus Ibsen&#013;&#010;&gt; -----------------&#013;&#010;&gt; http://davsclaus.com @davsclaus&#013;&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#013;&#010;&#013;&#010;&#013;&#010;&#013;&#010;--&#013;&#010;Claus Ibsen&#013;&#010;-----------------&#013;&#010;http://davsclaus.com @davsclaus&#013;&#010;Camel in Action 2: https://www.manning.com/ibsen2&#013;&#010;"
55,56,Ayush Dixit,          RE: Performance issue in Camel SFTP component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCY4PR05MB28857E840D4E5C7801BAB592AF0D0%40CY4PR05MB2885.namprd05.prod.outlook.com%3E,users,"Thu, 06 Apr 2017 05:30:49 GMT","Should I raise a JIRA for that?&#013;&#010;&#013;&#010;-----Original Message-----&#013;&#010;From: Ayush Dixit &#013;&#010;Sent: Wednesday, April 5, 2017 1:22 PM&#013;&#010;To: users@camel.apache.org&#013;&#010;Subject: RE: Performance issue in Camel SFTP component&#013;&#010;&#013;&#010;Hi Claus,&#013;&#010;&#013;&#010;Already tried that , See below endpoint configuration . No luck :( &#013;&#010;&#013;&#010;to(""sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&amp;stepwise=false"")&#013;&#010;&#013;&#010;Thanks&#013;&#010;Ayush &#013;&#010;&#013;&#010;-----Original Message-----&#013;&#010;From: Claus Ibsen [mailto:claus.ibsen@gmail.com]&#013;&#010;Sent: Wednesday, April 5, 2017 1:08 PM&#013;&#010;To: users@camel.apache.org&#013;&#010;Subject: Re: Performance issue in Camel SFTP component&#013;&#010;&#013;&#010;Try with maxMessagesPerPoll to set an upper limit.&#013;&#010;&#013;&#010;On Tue, Apr 4, 2017 at 12:10 PM, Ayush Dixit &lt;Ayush.Dixit@sigma-systems.com&gt; wrote:&#013;&#010;&gt;&#013;&#010;&gt; Thanks Claus , I've tried  stepwise=false  in camel producer . No such &#013;&#010;&gt; luck&#013;&#010;&gt;&#013;&#010;&gt; Also, I have tried download=false and useList=false. Still the &#013;&#010;&gt; performance is same. I am referring the below link for camel &#013;&#010;&gt; documentation&#013;&#010;&gt;&#013;&#010;&gt; http://camel.apache.org/ftp2.html&#013;&#010;&gt;&#013;&#010;&gt; Is there is anything else you think I can try?&#013;&#010;&gt;&#013;&#010;&gt; Thanks&#013;&#010;&gt; Ayush&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; -----Original Message-----&#013;&#010;&gt; From: Claus Ibsen [mailto:claus.ibsen@gmail.com]&#013;&#010;&gt; Sent: Tuesday, April 4, 2017 1:35 PM&#013;&#010;&gt; To: users@camel.apache.org&#013;&#010;&gt; Cc: users-subscribe@camel.apache.org&#013;&#010;&gt; Subject: Re: Performance issue in Camel SFTP component&#013;&#010;&gt;&#013;&#010;&gt; Please spend more time to read the documentation and you can find &#013;&#010;&gt; options to tweak the options to use or not use FTP list etc, and there &#013;&#010;&gt; is also a stepwise option&#013;&#010;&gt;&#013;&#010;&gt; On Tue, Apr 4, 2017 at 9:16 AM, Ayush Dixit &#013;&#010;&gt; &lt;Ayush.Dixit@sigma-systems.com&gt;&#013;&#010;&gt; wrote:&#013;&#010;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; Hi ,&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; We have implemented a camel route where we are having camel sftp &#013;&#010;&gt;&gt; producer to transfer a files to remote SFTP location but on &#013;&#010;&gt;&gt; performance testing on client environment and on our local &#013;&#010;&gt;&gt; environment we have observed degradation in the time for transferring files to remote&#010;SFTP location.&#013;&#010;&gt;&gt; Please find the detailed analysis below. The we tried the various &#013;&#010;&gt;&gt; test in our local environment. In each test we put around 22 files on &#013;&#010;&gt;&gt; camel file consumer and each file took below time to write the file.&#013;&#010;&gt;&gt; PFB details&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ============================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; When target directory having 20,000 files. Camel sftp producer took &#013;&#010;&gt;&gt; around&#013;&#010;&gt;&gt; 1 minute 43 second to a transfer file&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ============================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#013;&#010;&gt;&gt; GenericFile[/data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/&#013;&#010;&gt;&gt; 1 /ST30PERFORPMAJAR17020726.txt] using exchange:&#013;&#010;&gt;&gt; Exchange[ST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt; Picked IOP response file :&#013;&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt from IOP FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;             INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt; Sending IOP response file :&#013;&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt to ICOMS FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;             DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#013;&#010;&gt;&gt; 190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#013;&#010;&gt;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser] Exchange[ &#013;&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;             DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file &#013;&#010;&gt;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFOR&#013;&#010;&gt;&gt; P&#013;&#010;&gt;&gt; MAJAR17020726.txt&#013;&#010;&gt;&gt; (no charset)&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#013;&#010;&gt;&gt; file: QST30PERFORPMAJAR17020726.txt using stream:&#013;&#010;&gt;&gt; java.io.BufferedInputStream@54a89ff5&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.658 &#013;&#010;&gt;&gt; seconds&#013;&#010;&gt;&gt; (658 millis) to store file: QST30PERFORPMAJAR17020726.txt and FTP &#013;&#010;&gt;&gt; client&#013;&#010;&gt;&gt; returned: true&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote &#013;&#010;&gt;&gt; [icoms/1/QST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#013;&#010;&gt;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#013;&#010;&gt;&gt; ]&#013;&#010;&gt;&gt; ]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#013;&#010;&gt;&gt; icoms/1/QST30PERFORPMAJAR17020726.txt to: icoms/1/ &#013;&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;             INFO 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt; IOP response file : ST30PERFORPMAJAR17020726.txt&#013;&#010;&gt;&gt; successfully sent to ICOMS FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ===========================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; When target directory having 40,000 files. Camel sftp producer took &#013;&#010;&gt;&gt; around&#013;&#010;&gt;&gt; 3 minute 17 second to transfer file&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ===========================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#013;&#010;&gt;&gt; GenericFile[/data/users/slvm02/smp53/domains/v&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; mb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&gt; using exchange: Exchange[SX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt;&#013;&#010;&gt;&gt; Picked IOP response file :&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                                 SX30RPMAJAR1702483756.txt from IOP &#013;&#010;&gt;&gt; FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt;&#013;&#010;&gt;&gt; Sending IOP response file&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                                 : SX30RPMAJAR1702483756.txt to ICOMS &#013;&#010;&gt;&gt; FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6&#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#013;&#010;&gt;&gt; 190/icoms/1?download=false&amp;maxMessagesPer&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                                 Poll=10&amp;password=xxxxxx&amp; &#013;&#010;&gt;&gt; tempPrefix=Q&amp;username=sigmauser] Exchange[SX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6&#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file &#013;&#010;&gt;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJA&#013;&#010;&gt;&gt; R&#013;&#010;&gt;&gt; 1702483756.txt&#013;&#010;&gt;&gt; (no charset)&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6&#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#013;&#010;&gt;&gt; file: QSX30RPMAJAR1702483756.txt using stream:&#013;&#010;&gt;&gt; java.io.BufferedInputStream@&#013;&#010;&gt;&gt; 7954cfa8&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6&#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.659 &#013;&#010;&gt;&gt; seconds&#013;&#010;&gt;&gt; (659 millis) to store file: QSX30RPMAJAR1702483756.txt and FTP client&#013;&#010;&gt;&gt; returned: true&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6&#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote &#013;&#010;&gt;&gt; [icoms/1/QSX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#013;&#010;&gt;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#013;&#010;&gt;&gt; ]&#013;&#010;&gt;&gt; ]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6&#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#013;&#010;&gt;&gt; icoms/1/QSX30RPMAJAR1702483756.txt to:&#013;&#010;&gt;&gt; icoms/1/SX30RPMAJAR1702483756.txt&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 INFO 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt; IOP response file : SX30RPMAJAR1702483756.txt&#013;&#010;&gt;&gt; successfully sent to ICOMS FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ========================================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; Similarly when we achieved the files from target directory. It took &#013;&#010;&gt;&gt; around&#013;&#010;&gt;&gt; 6 sec.It seems like there is a performance issue with camel sftp component.&#013;&#010;&gt;&gt; Does it list the files in target directory which is taking time.&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; =======================================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; PFB the producer route which we set up&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#013;&#010;&gt;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; Please let us know if you need anything else.&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; *Ayush Dixit*&#013;&#010;&gt;&gt; *Software Engineer*&#013;&#010;&gt;&gt; ayush.dixit@sigma-systems.com&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; O: +91.20.25661992 x 321 &lt;+91%2020%202566%201992&gt; |  M:&#013;&#010;&gt;&gt; +91-814-982-6260 &lt;+91%2081498%2026260&gt; | Skype: ayushdixit421&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; [image: cid:image001.jpg@01D16809.E12C0D50]&#013;&#010;&gt;&gt; &lt;http://www.sigma-systems.com/&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; --&#013;&#010;&gt; Claus Ibsen&#013;&#010;&gt; -----------------&#013;&#010;&gt; http://davsclaus.com @davsclaus&#013;&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#013;&#010;&#013;&#010;&#013;&#010;&#013;&#010;--&#013;&#010;Claus Ibsen&#013;&#010;-----------------&#013;&#010;http://davsclaus.com @davsclaus&#013;&#010;Camel in Action 2: https://www.manning.com/ibsen2&#013;&#010;"
56,57,Ayush Dixit,          RE: Performance issue in Camel SFTP component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCY4PR05MB288576BAD17B89A63CA0EA5FAF010%40CY4PR05MB2885.namprd05.prod.outlook.com%3E,users,"Mon, 10 Apr 2017 05:12:36 GMT","Hi &#013;&#010;&#013;&#010;Any luck in solving the problem?&#013;&#010;&#013;&#010;Regards&#013;&#010;Ayush&#013;&#010;&#013;&#010;-----Original Message-----&#013;&#010;From: Ayush Dixit &#013;&#010;Sent: Thursday, April 6, 2017 11:01 AM&#013;&#010;To: 'users@camel.apache.org' &lt;users@camel.apache.org&gt;&#013;&#010;Subject: RE: Performance issue in Camel SFTP component&#013;&#010;&#013;&#010;Should I raise a JIRA for that?&#013;&#010;&#013;&#010;-----Original Message-----&#013;&#010;From: Ayush Dixit&#013;&#010;Sent: Wednesday, April 5, 2017 1:22 PM&#013;&#010;To: users@camel.apache.org&#013;&#010;Subject: RE: Performance issue in Camel SFTP component&#013;&#010;&#013;&#010;Hi Claus,&#013;&#010;&#013;&#010;Already tried that , See below endpoint configuration . No luck :( &#013;&#010;&#013;&#010;to(""sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&amp;stepwise=false"")&#013;&#010;&#013;&#010;Thanks&#013;&#010;Ayush &#013;&#010;&#013;&#010;-----Original Message-----&#013;&#010;From: Claus Ibsen [mailto:claus.ibsen@gmail.com]&#013;&#010;Sent: Wednesday, April 5, 2017 1:08 PM&#013;&#010;To: users@camel.apache.org&#013;&#010;Subject: Re: Performance issue in Camel SFTP component&#013;&#010;&#013;&#010;Try with maxMessagesPerPoll to set an upper limit.&#013;&#010;&#013;&#010;On Tue, Apr 4, 2017 at 12:10 PM, Ayush Dixit &lt;Ayush.Dixit@sigma-systems.com&gt; wrote:&#013;&#010;&gt;&#013;&#010;&gt; Thanks Claus , I've tried  stepwise=false  in camel producer . No such &#013;&#010;&gt; luck&#013;&#010;&gt;&#013;&#010;&gt; Also, I have tried download=false and useList=false. Still the &#013;&#010;&gt; performance is same. I am referring the below link for camel &#013;&#010;&gt; documentation&#013;&#010;&gt;&#013;&#010;&gt; http://camel.apache.org/ftp2.html&#013;&#010;&gt;&#013;&#010;&gt; Is there is anything else you think I can try?&#013;&#010;&gt;&#013;&#010;&gt; Thanks&#013;&#010;&gt; Ayush&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; -----Original Message-----&#013;&#010;&gt; From: Claus Ibsen [mailto:claus.ibsen@gmail.com]&#013;&#010;&gt; Sent: Tuesday, April 4, 2017 1:35 PM&#013;&#010;&gt; To: users@camel.apache.org&#013;&#010;&gt; Cc: users-subscribe@camel.apache.org&#013;&#010;&gt; Subject: Re: Performance issue in Camel SFTP component&#013;&#010;&gt;&#013;&#010;&gt; Please spend more time to read the documentation and you can find &#013;&#010;&gt; options to tweak the options to use or not use FTP list etc, and there &#013;&#010;&gt; is also a stepwise option&#013;&#010;&gt;&#013;&#010;&gt; On Tue, Apr 4, 2017 at 9:16 AM, Ayush Dixit &#013;&#010;&gt; &lt;Ayush.Dixit@sigma-systems.com&gt;&#013;&#010;&gt; wrote:&#013;&#010;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; Hi ,&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; We have implemented a camel route where we are having camel sftp &#013;&#010;&gt;&gt; producer to transfer a files to remote SFTP location but on &#013;&#010;&gt;&gt; performance testing on client environment and on our local &#013;&#010;&gt;&gt; environment we have observed degradation in the time for transferring files to remote&#010;SFTP location.&#013;&#010;&gt;&gt; Please find the detailed analysis below. The we tried the various &#013;&#010;&gt;&gt; test in our local environment. In each test we put around 22 files on &#013;&#010;&gt;&gt; camel file consumer and each file took below time to write the file.&#013;&#010;&gt;&gt; PFB details&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ============================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; When target directory having 20,000 files. Camel sftp producer took &#013;&#010;&gt;&gt; around&#013;&#010;&gt;&gt; 1 minute 43 second to a transfer file&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ============================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#013;&#010;&gt;&gt; GenericFile[/data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/&#013;&#010;&gt;&gt; 1 /ST30PERFORPMAJAR17020726.txt] using exchange:&#013;&#010;&gt;&gt; Exchange[ST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt; Picked IOP response file :&#013;&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt from IOP FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;             INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt; Sending IOP response file :&#013;&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt to ICOMS FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;             DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#013;&#010;&gt;&gt; 190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#013;&#010;&gt;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser] Exchange[ &#013;&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;             DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file &#013;&#010;&gt;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFOR&#013;&#010;&gt;&gt; P&#013;&#010;&gt;&gt; MAJAR17020726.txt&#013;&#010;&gt;&gt; (no charset)&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#013;&#010;&gt;&gt; file: QST30PERFORPMAJAR17020726.txt using stream:&#013;&#010;&gt;&gt; java.io.BufferedInputStream@54a89ff5&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.658 &#013;&#010;&gt;&gt; seconds&#013;&#010;&gt;&gt; (658 millis) to store file: QST30PERFORPMAJAR17020726.txt and FTP &#013;&#010;&gt;&gt; client&#013;&#010;&gt;&gt; returned: true&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote &#013;&#010;&gt;&gt; [icoms/1/QST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#013;&#010;&gt;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#013;&#010;&gt;&gt; ]&#013;&#010;&gt;&gt; ]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#013;&#010;&gt;&gt; icoms/1/QST30PERFORPMAJAR17020726.txt to: icoms/1/ &#013;&#010;&gt;&gt; ST30PERFORPMAJAR17020726.txt&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;             INFO 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt; IOP response file : ST30PERFORPMAJAR17020726.txt&#013;&#010;&gt;&gt; successfully sent to ICOMS FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ===========================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; When target directory having 40,000 files. Camel sftp producer took &#013;&#010;&gt;&gt; around&#013;&#010;&gt;&gt; 3 minute 17 second to transfer file&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ===========================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#013;&#010;&gt;&gt; GenericFile[/data/users/slvm02/smp53/domains/v&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; mb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&gt; using exchange: Exchange[SX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt;&#013;&#010;&gt;&gt; Picked IOP response file :&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                                 SX30RPMAJAR1702483756.txt from IOP &#013;&#010;&gt;&gt; FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt;&#013;&#010;&gt;&gt; Sending IOP response file&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                                 : SX30RPMAJAR1702483756.txt to ICOMS &#013;&#010;&gt;&gt; FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6&#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#013;&#010;&gt;&gt; 190/icoms/1?download=false&amp;maxMessagesPer&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                                 Poll=10&amp;password=xxxxxx&amp; &#013;&#010;&gt;&gt; tempPrefix=Q&amp;username=sigmauser] Exchange[SX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6&#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file &#013;&#010;&gt;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJA&#013;&#010;&gt;&gt; R&#013;&#010;&gt;&gt; 1702483756.txt&#013;&#010;&gt;&gt; (no charset)&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6&#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#013;&#010;&gt;&gt; file: QSX30RPMAJAR1702483756.txt using stream:&#013;&#010;&gt;&gt; java.io.BufferedInputStream@&#013;&#010;&gt;&gt; 7954cfa8&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6&#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.659 &#013;&#010;&gt;&gt; seconds&#013;&#010;&gt;&gt; (659 millis) to store file: QSX30RPMAJAR1702483756.txt and FTP client&#013;&#010;&gt;&gt; returned: true&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6&#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote &#013;&#010;&gt;&gt; [icoms/1/QSX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#013;&#010;&gt;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#013;&#010;&gt;&gt; ]&#013;&#010;&gt;&gt; ]&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6&#013;&#010;&gt;&gt; -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#013;&#010;&gt;&gt; icoms/1/QSX30RPMAJAR1702483756.txt to:&#013;&#010;&gt;&gt; icoms/1/SX30RPMAJAR1702483756.txt&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;                 INFO 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#013;&#010;&gt;&gt; o&#013;&#010;&gt;&gt; nseFtpRouteBuilder&gt; IOP response file : SX30RPMAJAR1702483756.txt&#013;&#010;&gt;&gt; successfully sent to ICOMS FTP directory&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; ========================================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; Similarly when we achieved the files from target directory. It took &#013;&#010;&gt;&gt; around&#013;&#010;&gt;&gt; 6 sec.It seems like there is a performance issue with camel sftp component.&#013;&#010;&gt;&gt; Does it list the files in target directory which is taking time.&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; ============================================================&#013;&#010;&gt;&gt; =======================================&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; PFB the producer route which we set up&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#013;&#010;&gt;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; Please let us know if you need anything else.&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; *Ayush Dixit*&#013;&#010;&gt;&gt; *Software Engineer*&#013;&#010;&gt;&gt; ayush.dixit@sigma-systems.com&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; O: +91.20.25661992 x 321 &lt;+91%2020%202566%201992&gt; |  M:&#013;&#010;&gt;&gt; +91-814-982-6260 &lt;+91%2081498%2026260&gt; | Skype: ayushdixit421&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt; [image: cid:image001.jpg@01D16809.E12C0D50]&#013;&#010;&gt;&gt; &lt;http://www.sigma-systems.com/&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; --&#013;&#010;&gt; Claus Ibsen&#013;&#010;&gt; -----------------&#013;&#010;&gt; http://davsclaus.com @davsclaus&#013;&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#013;&#010;&#013;&#010;&#013;&#010;&#013;&#010;--&#013;&#010;Claus Ibsen&#013;&#010;-----------------&#013;&#010;http://davsclaus.com @davsclaus&#013;&#010;Camel in Action 2: https://www.manning.com/ibsen2&#013;&#010;"
57,58,Onder SEZGIN,            Re: Performance issue in Camel SFTP component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAE9ARBTAOj_Yajo0gN4ncchpBqxRKwjr1Wqc0_%3DRLgbzD73P8g%40mail.gmail.com%3E,users,"Mon, 10 Apr 2017 05:24:24 GMT","Hi Ayush,&#010;&#010;As souciance suggested, i guess you should use another FTP client to&#010;transfer files and better measure camel FTP component against and get some&#010;benchmark results to compare in a better way.&#010;&#010;If the file transfer is what we are talking, there may be lots of reason&#010;why you have low performance. Network connectivity, firewalls, proxies, big&#010;files &amp; blocking IO etc..&#010;&#010;Even if there may be a problem regarding camel, having what you provided is&#010;not sufficient to diagnose and resolve the problem.&#010;&#010;Rough to say that, you seem you have to deep dive into details to resolve&#010;the problem.&#010;&#010;Regards&#010;&#010;On Mon, Apr 10, 2017 at 8:12 AM, Ayush Dixit &lt;Ayush.Dixit@sigma-systems.com&gt;&#010;wrote:&#010;&#010;&gt; Hi&#010;&gt;&#010;&gt; Any luck in solving the problem?&#010;&gt;&#010;&gt; Regards&#010;&gt; Ayush&#010;&gt;&#010;&gt; -----Original Message-----&#010;&gt; From: Ayush Dixit&#010;&gt; Sent: Thursday, April 6, 2017 11:01 AM&#010;&gt; To: 'users@camel.apache.org' &lt;users@camel.apache.org&gt;&#010;&gt; Subject: RE: Performance issue in Camel SFTP component&#010;&gt;&#010;&gt; Should I raise a JIRA for that?&#010;&gt;&#010;&gt; -----Original Message-----&#010;&gt; From: Ayush Dixit&#010;&gt; Sent: Wednesday, April 5, 2017 1:22 PM&#010;&gt; To: users@camel.apache.org&#010;&gt; Subject: RE: Performance issue in Camel SFTP component&#010;&gt;&#010;&gt; Hi Claus,&#010;&gt;&#010;&gt; Already tried that , See below endpoint configuration . No luck :(&#010;&gt;&#010;&gt; to(""sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#010;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&amp;stepwise=false"")&#010;&gt;&#010;&gt; Thanks&#010;&gt; Ayush&#010;&gt;&#010;&gt; -----Original Message-----&#010;&gt; From: Claus Ibsen [mailto:claus.ibsen@gmail.com]&#010;&gt; Sent: Wednesday, April 5, 2017 1:08 PM&#010;&gt; To: users@camel.apache.org&#010;&gt; Subject: Re: Performance issue in Camel SFTP component&#010;&gt;&#010;&gt; Try with maxMessagesPerPoll to set an upper limit.&#010;&gt;&#010;&gt; On Tue, Apr 4, 2017 at 12:10 PM, Ayush Dixit &lt;&#010;&gt; Ayush.Dixit@sigma-systems.com&gt; wrote:&#010;&gt; &gt;&#010;&gt; &gt; Thanks Claus , I've tried  stepwise=false  in camel producer . No such&#010;&gt; &gt; luck&#010;&gt; &gt;&#010;&gt; &gt; Also, I have tried download=false and useList=false. Still the&#010;&gt; &gt; performance is same. I am referring the below link for camel&#010;&gt; &gt; documentation&#010;&gt; &gt;&#010;&gt; &gt; http://camel.apache.org/ftp2.html&#010;&gt; &gt;&#010;&gt; &gt; Is there is anything else you think I can try?&#010;&gt; &gt;&#010;&gt; &gt; Thanks&#010;&gt; &gt; Ayush&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; -----Original Message-----&#010;&gt; &gt; From: Claus Ibsen [mailto:claus.ibsen@gmail.com]&#010;&gt; &gt; Sent: Tuesday, April 4, 2017 1:35 PM&#010;&gt; &gt; To: users@camel.apache.org&#010;&gt; &gt; Cc: users-subscribe@camel.apache.org&#010;&gt; &gt; Subject: Re: Performance issue in Camel SFTP component&#010;&gt; &gt;&#010;&gt; &gt; Please spend more time to read the documentation and you can find&#010;&gt; &gt; options to tweak the options to use or not use FTP list etc, and there&#010;&gt; &gt; is also a stepwise option&#010;&gt; &gt;&#010;&gt; &gt; On Tue, Apr 4, 2017 at 9:16 AM, Ayush Dixit&#010;&gt; &gt; &lt;Ayush.Dixit@sigma-systems.com&gt;&#010;&gt; &gt; wrote:&#010;&gt; &gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Hi ,&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; We have implemented a camel route where we are having camel sftp&#010;&gt; &gt;&gt; producer to transfer a files to remote SFTP location but on&#010;&gt; &gt;&gt; performance testing on client environment and on our local&#010;&gt; &gt;&gt; environment we have observed degradation in the time for transferring&#010;&gt; files to remote SFTP location.&#010;&gt; &gt;&gt; Please find the detailed analysis below. The we tried the various&#010;&gt; &gt;&gt; test in our local environment. In each test we put around 22 files on&#010;&gt; &gt;&gt; camel file consumer and each file took below time to write the file.&#010;&gt; &gt;&gt; PFB details&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; ============================================================&#010;&gt; &gt;&gt; ============================&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; When target directory having 20,000 files. Camel sftp producer took&#010;&gt; &gt;&gt; around&#010;&gt; &gt;&gt; 1 minute 43 second to a transfer file&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; ============================================================&#010;&gt; &gt;&gt; ============================&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#010;&gt; &gt;&gt; GenericFile[/data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/&#010;&gt; &gt;&gt; 1 /ST30PERFORPMAJAR17020726.txt] using exchange:&#010;&gt; &gt;&gt; Exchange[ST30PERFORPMAJAR17020726.txt]&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;            INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#010;&gt; &gt;&gt; o&#010;&gt; &gt;&gt; nseFtpRouteBuilder&gt; Picked IOP response file :&#010;&gt; &gt;&gt; ST30PERFORPMAJAR17020726.txt from IOP FTP directory&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;             INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#010;&gt; &gt;&gt; o&#010;&gt; &gt;&gt; nseFtpRouteBuilder&gt; Sending IOP response file :&#010;&gt; &gt;&gt; ST30PERFORPMAJAR17020726.txt to ICOMS FTP directory&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;             DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://&#010;&gt; 10.100.150.&#010;&gt; &gt;&gt; 190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#010;&gt; &gt;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser] Exchange[&#010;&gt; &gt;&gt; ST30PERFORPMAJAR17020726.txt]&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;             DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file&#010;&gt; &gt;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFOR&#010;&gt; &gt;&gt; P&#010;&gt; &gt;&gt; MAJAR17020726.txt&#010;&gt; &gt;&gt; (no charset)&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#010;&gt; &gt;&gt; file: QST30PERFORPMAJAR17020726.txt using stream:&#010;&gt; &gt;&gt; java.io.BufferedInputStream@54a89ff5&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.658&#010;&gt; &gt;&gt; seconds&#010;&gt; &gt;&gt; (658 millis) to store file: QST30PERFORPMAJAR17020726.txt and FTP&#010;&gt; &gt;&gt; client&#010;&gt; &gt;&gt; returned: true&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote&#010;&gt; &gt;&gt; [icoms/1/QST30PERFORPMAJAR17020726.txt]&#010;&gt; &gt;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#010;&gt; &gt;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#010;&gt; &gt;&gt; ]&#010;&gt; &gt;&gt; ]&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#010;&gt; &gt;&gt; icoms/1/QST30PERFORPMAJAR17020726.txt to: icoms/1/&#010;&gt; &gt;&gt; ST30PERFORPMAJAR17020726.txt&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;             INFO 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#010;&gt; &gt;&gt; o&#010;&gt; &gt;&gt; nseFtpRouteBuilder&gt; IOP response file : ST30PERFORPMAJAR17020726.txt&#010;&gt; &gt;&gt; successfully sent to ICOMS FTP directory&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; ============================================================&#010;&gt; &gt;&gt; ===========================&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; When target directory having 40,000 files. Camel sftp producer took&#010;&gt; &gt;&gt; around&#010;&gt; &gt;&gt; 3 minute 17 second to transfer file&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; ============================================================&#010;&gt; &gt;&gt; ===========================&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#010;&gt; &gt;&gt; GenericFile[/data/users/slvm02/smp53/domains/v&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; mb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt]&#010;&gt; &gt;&gt; using exchange: Exchange[SX30RPMAJAR1702483756.txt]&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#010;&gt; &gt;&gt; o&#010;&gt; &gt;&gt; nseFtpRouteBuilder&gt;&#010;&gt; &gt;&gt; Picked IOP response file :&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;                                 SX30RPMAJAR1702483756.txt from IOP&#010;&gt; &gt;&gt; FTP directory&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#010;&gt; &gt;&gt; o&#010;&gt; &gt;&gt; nseFtpRouteBuilder&gt;&#010;&gt; &gt;&gt; Sending IOP response file&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;                                 : SX30RPMAJAR1702483756.txt to ICOMS&#010;&gt; &gt;&gt; FTP directory&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;                 DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6&#010;&gt; &gt;&gt; -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://&#010;&gt; 10.100.150.&#010;&gt; &gt;&gt; 190/icoms/1?download=false&amp;maxMessagesPer&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;                                 Poll=10&amp;password=xxxxxx&amp;&#010;&gt; &gt;&gt; tempPrefix=Q&amp;username=sigmauser] Exchange[SX30RPMAJAR1702483756.txt]&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6&#010;&gt; &gt;&gt; -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file&#010;&gt; &gt;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJA&#010;&gt; &gt;&gt; R&#010;&gt; &gt;&gt; 1702483756.txt&#010;&gt; &gt;&gt; (no charset)&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6&#010;&gt; &gt;&gt; -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#010;&gt; &gt;&gt; file: QSX30RPMAJAR1702483756.txt using stream:&#010;&gt; &gt;&gt; java.io.BufferedInputStream@&#010;&gt; &gt;&gt; 7954cfa8&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6&#010;&gt; &gt;&gt; -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.659&#010;&gt; &gt;&gt; seconds&#010;&gt; &gt;&gt; (659 millis) to store file: QSX30RPMAJAR1702483756.txt and FTP client&#010;&gt; &gt;&gt; returned: true&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6&#010;&gt; &gt;&gt; -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote&#010;&gt; &gt;&gt; [icoms/1/QSX30RPMAJAR1702483756.txt]&#010;&gt; &gt;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#010;&gt; &gt;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#010;&gt; &gt;&gt; ]&#010;&gt; &gt;&gt; ]&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6&#010;&gt; &gt;&gt; -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#010;&gt; &gt;&gt; icoms/1/QSX30RPMAJAR1702483756.txt to:&#010;&gt; &gt;&gt; icoms/1/SX30RPMAJAR1702483756.txt&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;                 INFO 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResp&#010;&gt; &gt;&gt; o&#010;&gt; &gt;&gt; nseFtpRouteBuilder&gt; IOP response file : SX30RPMAJAR1702483756.txt&#010;&gt; &gt;&gt; successfully sent to ICOMS FTP directory&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; ============================================================&#010;&gt; &gt;&gt; ========================================&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Similarly when we achieved the files from target directory. It took&#010;&gt; &gt;&gt; around&#010;&gt; &gt;&gt; 6 sec.It seems like there is a performance issue with camel sftp&#010;&gt; component.&#010;&gt; &gt;&gt; Does it list the files in target directory which is taking time.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; ============================================================&#010;&gt; &gt;&gt; =======================================&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; PFB the producer route which we set up&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#010;&gt; &gt;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Please let us know if you need anything else.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; *Ayush Dixit*&#010;&gt; &gt;&gt; *Software Engineer*&#010;&gt; &gt;&gt; ayush.dixit@sigma-systems.com&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; O: +91.20.25661992 x 321 &lt;+91%2020%202566%201992&gt; |  M:&#010;&gt; &gt;&gt; +91-814-982-6260 &lt;+91%2081498%2026260&gt; | Skype: ayushdixit421&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; [image: cid:image001.jpg@01D16809.E12C0D50]&#010;&gt; &gt;&gt; &lt;http://www.sigma-systems.com/&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; --&#010;&gt; &gt; Claus Ibsen&#010;&gt; &gt; -----------------&#010;&gt; &gt; http://davsclaus.com @davsclaus&#010;&gt; &gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&#010;"
58,59,Ayush Dixit,      RE: Performance issue in Camel SFTP component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCY4PR05MB2885476554480F9180DD6A84AF0A0%40CY4PR05MB2885.namprd05.prod.outlook.com%3E,users,"Wed, 05 Apr 2017 05:52:53 GMT","Hi,&#013;&#010;&#013;&#010;Can someone help me regarding the performance issue I am facing in camel SFTP component ?&#010;I have gone through the documentation but did not find anything that can improve performance.&#013;&#010;&#013;&#010;Thanks&#013;&#010;Ayush&#013;&#010;&#013;&#010;-----Original Message-----&#013;&#010;From: Ayush Dixit &#013;&#010;Sent: Tuesday, April 4, 2017 3:40 PM&#013;&#010;To: users@camel.apache.org&#013;&#010;Cc: 'claus.ibsen@gmail.com' &lt;claus.ibsen@gmail.com&gt;&#013;&#010;Subject: RE: Performance issue in Camel SFTP component&#013;&#010;&#013;&#010;&#013;&#010;Thanks Claus , I've tried  stepwise=false  in camel producer . No such luck &#013;&#010;&#013;&#010;Also, I have tried download=false and useList=false. Still the performance is same. I am referring&#010;the below link for camel documentation&#013;&#010;&#013;&#010;http://camel.apache.org/ftp2.html &#013;&#010;&#013;&#010;Is there is anything else you think I can try?&#013;&#010;&#013;&#010;Thanks&#013;&#010;Ayush&#013;&#010;&#013;&#010;&#013;&#010;-----Original Message-----&#013;&#010;From: Claus Ibsen [mailto:claus.ibsen@gmail.com]&#013;&#010;Sent: Tuesday, April 4, 2017 1:35 PM&#013;&#010;To: users@camel.apache.org&#013;&#010;Cc: users-subscribe@camel.apache.org&#013;&#010;Subject: Re: Performance issue in Camel SFTP component&#013;&#010;&#013;&#010;Please spend more time to read the documentation and you can find options to tweak the options&#010;to use or not use FTP list etc, and there is also a stepwise option&#013;&#010;&#013;&#010;On Tue, Apr 4, 2017 at 9:16 AM, Ayush Dixit &lt;Ayush.Dixit@sigma-systems.com&gt;&#013;&#010;wrote:&#013;&#010;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; Hi ,&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; We have implemented a camel route where we are having camel sftp &#013;&#010;&gt; producer to transfer a files to remote SFTP location but on &#013;&#010;&gt; performance testing on client environment and on our local environment &#013;&#010;&gt; we have observed degradation in the time for transferring files to remote SFTP location.&#013;&#010;&gt; Please find the detailed analysis below. The we tried the various test &#013;&#010;&gt; in our local environment. In each test we put around 22 files on camel &#013;&#010;&gt; file consumer and each file took below time to write the file. PFB &#013;&#010;&gt; details&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; ============================================================&#013;&#010;&gt; ============================&#013;&#010;&gt;&#013;&#010;&gt; When target directory having 20,000 files. Camel sftp producer took &#013;&#010;&gt; around&#013;&#010;&gt; 1 minute 43 second to a transfer file&#013;&#010;&gt;&#013;&#010;&gt; ============================================================&#013;&#010;&gt; ============================&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#013;&#010;&gt; GenericFile[/data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&#013;&#010;&gt; /ST30PERFORPMAJAR17020726.txt] using exchange: &#013;&#010;&gt; Exchange[ST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt;&#013;&#010;&gt;            INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#013;&#010;&gt; nseFtpRouteBuilder&gt; Picked IOP response file : &#013;&#010;&gt; ST30PERFORPMAJAR17020726.txt from IOP FTP directory&#013;&#010;&gt;&#013;&#010;&gt;             INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#013;&#010;&gt; nseFtpRouteBuilder&gt; Sending IOP response file : &#013;&#010;&gt; ST30PERFORPMAJAR17020726.txt to ICOMS FTP directory&#013;&#010;&gt;&#013;&#010;&gt;             DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#013;&#010;&gt; 190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#013;&#010;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser] Exchange[ &#013;&#010;&gt; ST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;             DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file &#013;&#010;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFORP&#013;&#010;&gt; MAJAR17020726.txt&#013;&#010;&gt; (no charset)&#013;&#010;&gt;&#013;&#010;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#013;&#010;&gt; file: QST30PERFORPMAJAR17020726.txt using stream:&#013;&#010;&gt; java.io.BufferedInputStream@54a89ff5&#013;&#010;&gt;&#013;&#010;&gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.658 &#013;&#010;&gt; seconds&#013;&#010;&gt; (658 millis) to store file: QST30PERFORPMAJAR17020726.txt and FTP &#013;&#010;&gt; client&#013;&#010;&gt; returned: true&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote &#013;&#010;&gt; [icoms/1/QST30PERFORPMAJAR17020726.txt]&#013;&#010;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#013;&#010;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#013;&#010;&gt; ]&#013;&#010;&gt;&#013;&#010;&gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#013;&#010;&gt; icoms/1/QST30PERFORPMAJAR17020726.txt to: icoms/1/ &#013;&#010;&gt; ST30PERFORPMAJAR17020726.txt&#013;&#010;&gt;&#013;&#010;&gt;             INFO 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#013;&#010;&gt; nseFtpRouteBuilder&gt; IOP response file : ST30PERFORPMAJAR17020726.txt&#013;&#010;&gt; successfully sent to ICOMS FTP directory&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; ============================================================&#013;&#010;&gt; ===========================&#013;&#010;&gt;&#013;&#010;&gt; When target directory having 40,000 files. Camel sftp producer took &#013;&#010;&gt; around&#013;&#010;&gt; 3 minute 17 second to transfer file&#013;&#010;&gt;&#013;&#010;&gt; ============================================================&#013;&#010;&gt; ===========================&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#013;&#010;&gt; GenericFile[/data/users/slvm02/smp53/domains/v&#013;&#010;&gt;&#013;&#010;&gt;                                 &#013;&#010;&gt; mb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt]&#013;&#010;&gt; using exchange: Exchange[SX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&#013;&#010;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#013;&#010;&gt; nseFtpRouteBuilder&gt;&#013;&#010;&gt; Picked IOP response file :&#013;&#010;&gt;&#013;&#010;&gt;                                 SX30RPMAJAR1702483756.txt from IOP FTP &#013;&#010;&gt; directory&#013;&#010;&gt;&#013;&#010;&gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#013;&#010;&gt; nseFtpRouteBuilder&gt;&#013;&#010;&gt; Sending IOP response file&#013;&#010;&gt;&#013;&#010;&gt;                                 : SX30RPMAJAR1702483756.txt to ICOMS &#013;&#010;&gt; FTP directory&#013;&#010;&gt;&#013;&#010;&gt;                 DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#013;&#010;&gt; 190/icoms/1?download=false&amp;maxMessagesPer&#013;&#010;&gt;&#013;&#010;&gt;                                 Poll=10&amp;password=xxxxxx&amp; &#013;&#010;&gt; tempPrefix=Q&amp;username=sigmauser] Exchange[SX30RPMAJAR1702483756.txt]&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file &#013;&#010;&gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJAR&#013;&#010;&gt; 1702483756.txt&#013;&#010;&gt; (no charset)&#013;&#010;&gt;&#013;&#010;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#013;&#010;&gt; file: QSX30RPMAJAR1702483756.txt using stream: &#013;&#010;&gt; java.io.BufferedInputStream@&#013;&#010;&gt; 7954cfa8&#013;&#010;&gt;&#013;&#010;&gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.659 &#013;&#010;&gt; seconds&#013;&#010;&gt; (659 millis) to store file: QSX30RPMAJAR1702483756.txt and FTP client&#013;&#010;&gt; returned: true&#013;&#010;&gt;&#013;&#010;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote &#013;&#010;&gt; [icoms/1/QSX30RPMAJAR1702483756.txt]&#013;&#010;&gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#013;&#010;&gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#013;&#010;&gt; ]&#013;&#010;&gt;&#013;&#010;&gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#013;&#010;&gt; icoms/1/QSX30RPMAJAR1702483756.txt to: &#013;&#010;&gt; icoms/1/SX30RPMAJAR1702483756.txt&#013;&#010;&gt;&#013;&#010;&gt;                 INFO 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#013;&#010;&gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#013;&#010;&gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#013;&#010;&gt; nseFtpRouteBuilder&gt; IOP response file : SX30RPMAJAR1702483756.txt&#013;&#010;&gt; successfully sent to ICOMS FTP directory&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; ============================================================&#013;&#010;&gt; ========================================&#013;&#010;&gt;&#013;&#010;&gt; Similarly when we achieved the files from target directory. It took &#013;&#010;&gt; around&#013;&#010;&gt; 6 sec.It seems like there is a performance issue with camel sftp component.&#013;&#010;&gt; Does it list the files in target directory which is taking time.&#013;&#010;&gt;&#013;&#010;&gt; ============================================================&#013;&#010;&gt; =======================================&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; PFB the producer route which we set up&#013;&#010;&gt;&#013;&#010;&gt; sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#013;&#010;&gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; Please let us know if you need anything else.&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt; *Ayush Dixit*&#013;&#010;&gt; *Software Engineer*&#013;&#010;&gt; ayush.dixit@sigma-systems.com&#013;&#010;&gt;&#013;&#010;&gt; O: +91.20.25661992 x 321 &lt;+91%2020%202566%201992&gt; |  M: &#013;&#010;&gt; +91-814-982-6260 &lt;+91%2081498%2026260&gt; | Skype: ayushdixit421&#013;&#010;&gt;&#013;&#010;&gt; [image: cid:image001.jpg@01D16809.E12C0D50]&#013;&#010;&gt; &lt;http://www.sigma-systems.com/&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&#013;&#010;&#013;&#010;&#013;&#010;--&#013;&#010;Claus Ibsen&#013;&#010;-----------------&#013;&#010;http://davsclaus.com @davsclaus&#013;&#010;Camel in Action 2: https://www.manning.com/ibsen2&#013;&#010;"
59,60,souciance,        Re: Performance issue in Camel SFTP component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs0ZtVz3jV%2BzFoLvjSy6p5GD2WA13auHApTVeyWcu%3DzC7A%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 06:58:55 GMT","Well, have you transferred the same amount of files with some other FTP&#010;client just to compare how much ""slower"" the ftp component is? 40,000 files&#010;in 3 minutes doesn't sounds ok.&#010;&#010;On Wed, Apr 5, 2017 at 7:53 AM, Ayush Dixit [via Camel] &lt;&#010;ml-node+s465427n5796945h58@n5.nabble.com&gt; wrote:&#010;&#010;&gt; Hi,&#010;&gt;&#010;&gt; Can someone help me regarding the performance issue I am facing in camel&#010;&gt; SFTP component ? I have gone through the documentation but did not find&#010;&gt; anything that can improve performance.&#010;&gt;&#010;&gt; Thanks&#010;&gt; Ayush&#010;&gt;&#010;&gt; -----Original Message-----&#010;&gt; From: Ayush Dixit&#010;&gt; Sent: Tuesday, April 4, 2017 3:40 PM&#010;&gt; To: [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=0&gt;&#010;&gt; Cc: '[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=1&gt;' &lt;[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=2&gt;&gt;&#010;&gt; Subject: RE: Performance issue in Camel SFTP component&#010;&gt;&#010;&gt;&#010;&gt; Thanks Claus , I've tried  stepwise=false  in camel producer . No such&#010;&gt; luck&#010;&gt;&#010;&gt; Also, I have tried download=false and useList=false. Still the performance&#010;&gt; is same. I am referring the below link for camel documentation&#010;&gt;&#010;&gt; http://camel.apache.org/ftp2.html&#010;&gt;&#010;&gt; Is there is anything else you think I can try?&#010;&gt;&#010;&gt; Thanks&#010;&gt; Ayush&#010;&gt;&#010;&gt;&#010;&gt; -----Original Message-----&#010;&gt; From: Claus Ibsen [mailto:[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=3&gt;]&#010;&gt; Sent: Tuesday, April 4, 2017 1:35 PM&#010;&gt; To: [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=4&gt;&#010;&gt; Cc: [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=5&gt;&#010;&gt; Subject: Re: Performance issue in Camel SFTP component&#010;&gt;&#010;&gt; Please spend more time to read the documentation and you can find options&#010;&gt; to tweak the options to use or not use FTP list etc, and there is also a&#010;&gt; stepwise option&#010;&gt;&#010;&gt; On Tue, Apr 4, 2017 at 9:16 AM, Ayush Dixit &lt;[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=6&gt;&gt;&#010;&gt; wrote:&#010;&gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; Hi ,&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; We have implemented a camel route where we are having camel sftp&#010;&gt; &gt; producer to transfer a files to remote SFTP location but on&#010;&gt; &gt; performance testing on client environment and on our local environment&#010;&gt; &gt; we have observed degradation in the time for transferring files to&#010;&gt; remote SFTP location.&#010;&gt; &gt; Please find the detailed analysis below. The we tried the various test&#010;&gt; &gt; in our local environment. In each test we put around 22 files on camel&#010;&gt; &gt; file consumer and each file took below time to write the file. PFB&#010;&gt; &gt; details&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; ============================================================&#010;&gt; &gt; ============================&#010;&gt; &gt;&#010;&gt; &gt; When target directory having 20,000 files. Camel sftp producer took&#010;&gt; &gt; around&#010;&gt; &gt; 1 minute 43 second to a transfer file&#010;&gt; &gt;&#010;&gt; &gt; ============================================================&#010;&gt; &gt; ============================&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#010;&gt; &gt; GenericFile[/data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&#010;&gt; &gt; /ST30PERFORPMAJAR17020726.txt] using exchange:&#010;&gt; &gt; Exchange[ST30PERFORPMAJAR17020726.txt]&#010;&gt; &gt;&#010;&gt; &gt;            INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#010;&gt; &gt; nseFtpRouteBuilder&gt; Picked IOP response file :&#010;&gt; &gt; ST30PERFORPMAJAR17020726.txt from IOP FTP directory&#010;&gt; &gt;&#010;&gt; &gt;             INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#010;&gt; &gt; nseFtpRouteBuilder&gt; Sending IOP response file :&#010;&gt; &gt; ST30PERFORPMAJAR17020726.txt to ICOMS FTP directory&#010;&gt; &gt;&#010;&gt; &gt;             DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://&#010;&gt; 10.100.150.&#010;&gt; &gt; 190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#010;&gt; &gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser] Exchange[&#010;&gt; &gt; ST30PERFORPMAJAR17020726.txt]&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;             DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file&#010;&gt; &gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFORP&#010;&gt; &gt; MAJAR17020726.txt&#010;&gt; &gt; (no charset)&#010;&gt; &gt;&#010;&gt; &gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#010;&gt; &gt; file: QST30PERFORPMAJAR17020726.txt using stream:&#010;&gt; &gt; java.io.BufferedInputStream@54a89ff5&#010;&gt; &gt;&#010;&gt; &gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.658&#010;&gt; &gt; seconds&#010;&gt; &gt; (658 millis) to store file: QST30PERFORPMAJAR17020726.txt and FTP&#010;&gt; &gt; client&#010;&gt; &gt; returned: true&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote&#010;&gt; &gt; [icoms/1/QST30PERFORPMAJAR17020726.txt]&#010;&gt; &gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#010;&gt; &gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#010;&gt; &gt; ]&#010;&gt; &gt;&#010;&gt; &gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#010;&gt; &gt; icoms/1/QST30PERFORPMAJAR17020726.txt to: icoms/1/&#010;&gt; &gt; ST30PERFORPMAJAR17020726.txt&#010;&gt; &gt;&#010;&gt; &gt;             INFO 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#010;&gt; &gt; nseFtpRouteBuilder&gt; IOP response file : ST30PERFORPMAJAR17020726.txt&#010;&gt; &gt; successfully sent to ICOMS FTP directory&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; ============================================================&#010;&gt; &gt; ===========================&#010;&gt; &gt;&#010;&gt; &gt; When target directory having 40,000 files. Camel sftp producer took&#010;&gt; &gt; around&#010;&gt; &gt; 3 minute 17 second to transfer file&#010;&gt; &gt;&#010;&gt; &gt; ============================================================&#010;&gt; &gt; ===========================&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#010;&gt; &gt; GenericFile[/data/users/slvm02/smp53/domains/v&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; mb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt]&#010;&gt; &gt; using exchange: Exchange[SX30RPMAJAR1702483756.txt]&#010;&gt; &gt;&#010;&gt; &gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#010;&gt; &gt; nseFtpRouteBuilder&gt;&#010;&gt; &gt; Picked IOP response file :&#010;&gt; &gt;&#010;&gt; &gt;                                 SX30RPMAJAR1702483756.txt from IOP FTP&#010;&gt; &gt; directory&#010;&gt; &gt;&#010;&gt; &gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#010;&gt; &gt; nseFtpRouteBuilder&gt;&#010;&gt; &gt; Sending IOP response file&#010;&gt; &gt;&#010;&gt; &gt;                                 : SX30RPMAJAR1702483756.txt to ICOMS&#010;&gt; &gt; FTP directory&#010;&gt; &gt;&#010;&gt; &gt;                 DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://&#010;&gt; 10.100.150.&#010;&gt; &gt; 190/icoms/1?download=false&amp;maxMessagesPer&#010;&gt; &gt;&#010;&gt; &gt;                                 Poll=10&amp;password=xxxxxx&amp;&#010;&gt; &gt; tempPrefix=Q&amp;username=sigmauser] Exchange[SX30RPMAJAR1702483756.txt]&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file&#010;&gt; &gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJAR&#010;&gt; &gt; 1702483756.txt&#010;&gt; &gt; (no charset)&#010;&gt; &gt;&#010;&gt; &gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to store&#010;&gt; &gt; file: QSX30RPMAJAR1702483756.txt using stream:&#010;&gt; &gt; java.io.BufferedInputStream@&#010;&gt; &gt; 7954cfa8&#010;&gt; &gt;&#010;&gt; &gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.659&#010;&gt; &gt; seconds&#010;&gt; &gt; (659 millis) to store file: QSX30RPMAJAR1702483756.txt and FTP client&#010;&gt; &gt; returned: true&#010;&gt; &gt;&#010;&gt; &gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote&#010;&gt; &gt; [icoms/1/QSX30RPMAJAR1702483756.txt]&#010;&gt; &gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#010;&gt; &gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#010;&gt; &gt; ]&#010;&gt; &gt;&#010;&gt; &gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#010;&gt; &gt; icoms/1/QSX30RPMAJAR1702483756.txt to:&#010;&gt; &gt; icoms/1/SX30RPMAJAR1702483756.txt&#010;&gt; &gt;&#010;&gt; &gt;                 INFO 07:50:41 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRespo&#010;&gt; &gt; nseFtpRouteBuilder&gt; IOP response file : SX30RPMAJAR1702483756.txt&#010;&gt; &gt; successfully sent to ICOMS FTP directory&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; ============================================================&#010;&gt; &gt; ========================================&#010;&gt; &gt;&#010;&gt; &gt; Similarly when we achieved the files from target directory. It took&#010;&gt; &gt; around&#010;&gt; &gt; 6 sec.It seems like there is a performance issue with camel sftp&#010;&gt; component.&#010;&gt; &gt; Does it list the files in target directory which is taking time.&#010;&gt; &gt;&#010;&gt; &gt; ============================================================&#010;&gt; &gt; =======================================&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; PFB the producer route which we set up&#010;&gt; &gt;&#010;&gt; &gt; sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#010;&gt; &gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; Please let us know if you need anything else.&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; *Ayush Dixit*&#010;&gt; &gt; *Software Engineer*&#010;&gt; &gt; [hidden email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=7&gt;&#010;&gt; &gt;&#010;&gt; &gt; O: +91.20.25661992 x 321 &lt;+91%2020%202566%201992&gt;&#010;&gt; &lt;+91%2020%202566%201992&gt; |  M:&#010;&gt; &gt; +91-814-982-6260 &lt;+91%2081498%2026260&gt; &lt;+91%2081498%2026260&gt; | Skype:&#010;&gt; ayushdixit421&#010;&gt; &gt;&#010;&gt; &gt; [image: cid:image001.jpg@01D16809.E12C0D50]&#010;&gt; &gt; &lt;http://www.sigma-systems.com/&gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Performance-issue-in-&#010;&gt; Camel-SFTP-component-tp5796893p5796945.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Performance-issue-in-Camel-SFTP-component-tp5796893p5796947.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
60,61,Ayush Dixit,          RE: Performance issue in Camel SFTP component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCY4PR05MB2885B457B7A730D7A0582EC9AF0A0%40CY4PR05MB2885.namprd05.prod.outlook.com%3E,users,"Wed, 05 Apr 2017 07:20:02 GMT","Hi Souciance,&#010;&#010;Thanks for reply.&#010;&#010;Yes the behaviour is same . I have tried on other SFTP's as well. The issue which we are facing&#010;is on client environment and with the below tests we are able to reproduce this issue in local&#010;environment as well. Which proves it is not related to SFTP server.&#010;&#010;Also there was 1 file which took around 3 min when target directory contain 40,000 file. I&#010;had put around 22 files , So the total time it took to transfer 22 files is around 22  * 3&#010;min = 66 min. The behaviour is exponential the number of files you increase on target directory.&#010;The camel route will take more time to transfer the file to target directory.&#010; &#010;I have enabled camel logger in DEBUG . I try to debug , what I observed is it is reading that&#010;is taking time. PFB logger.&#010;&#010;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;Sending IOP response file : SX30RPMAJAR1702483756.txt to ICOMS  FTP directory&#010;&#010;                 DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.&#010;190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp; &#010; tempPrefix=Q&amp;username=sigmauser] Exchange[SX30RPMAJAR1702483756.txt]&#010;&#010;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6  - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;org.apache.camel.component.file.GenericFileConverter&gt; Read file  /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJA&#010;1702483756.txt(no charset)&#010;&#010;&#010;Thanks&#010;Ayush&#010;&#010;&#010;-----Original Message-----&#010;From: souciance [mailto:souciance.eqdam.rashti@gmail.com] &#010;Sent: Wednesday, April 5, 2017 12:29 PM&#010;To: users@camel.apache.org&#010;Subject: Re: Performance issue in Camel SFTP component&#010;&#010;Well, have you transferred the same amount of files with some other FTP client just to compare&#010;how much ""slower"" the ftp component is? 40,000 files in 3 minutes doesn't sounds ok.&#010;&#010;On Wed, Apr 5, 2017 at 7:53 AM, Ayush Dixit [via Camel] &lt;&#010;ml-node+s465427n5796945h58@n5.nabble.com&gt; wrote:&#010;&#010;&gt; Hi,&#010;&gt;&#010;&gt; Can someone help me regarding the performance issue I am facing in &#010;&gt; camel SFTP component ? I have gone through the documentation but did &#010;&gt; not find anything that can improve performance.&#010;&gt;&#010;&gt; Thanks&#010;&gt; Ayush&#010;&gt;&#010;&gt; -----Original Message-----&#010;&gt; From: Ayush Dixit&#010;&gt; Sent: Tuesday, April 4, 2017 3:40 PM&#010;&gt; To: [hidden email] &#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=0&gt;&#010;&gt; Cc: '[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=1&gt;' &lt;[hidden &#010;&gt; email] &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=2&gt;&gt;&#010;&gt; Subject: RE: Performance issue in Camel SFTP component&#010;&gt;&#010;&gt;&#010;&gt; Thanks Claus , I've tried  stepwise=false  in camel producer . No such &#010;&gt; luck&#010;&gt;&#010;&gt; Also, I have tried download=false and useList=false. Still the &#010;&gt; performance is same. I am referring the below link for camel &#010;&gt; documentation&#010;&gt;&#010;&gt; http://camel.apache.org/ftp2.html&#010;&gt;&#010;&gt; Is there is anything else you think I can try?&#010;&gt;&#010;&gt; Thanks&#010;&gt; Ayush&#010;&gt;&#010;&gt;&#010;&gt; -----Original Message-----&#010;&gt; From: Claus Ibsen [mailto:[hidden email] &#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=3&gt;]&#010;&gt; Sent: Tuesday, April 4, 2017 1:35 PM&#010;&gt; To: [hidden email] &#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=4&gt;&#010;&gt; Cc: [hidden email] &#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=5&gt;&#010;&gt; Subject: Re: Performance issue in Camel SFTP component&#010;&gt;&#010;&gt; Please spend more time to read the documentation and you can find &#010;&gt; options to tweak the options to use or not use FTP list etc, and there &#010;&gt; is also a stepwise option&#010;&gt;&#010;&gt; On Tue, Apr 4, 2017 at 9:16 AM, Ayush Dixit &lt;[hidden email] &#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=6&gt;&gt;&#010;&gt; wrote:&#010;&gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; Hi ,&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; We have implemented a camel route where we are having camel sftp &#010;&gt; &gt; producer to transfer a files to remote SFTP location but on &#010;&gt; &gt; performance testing on client environment and on our local &#010;&gt; &gt; environment we have observed degradation in the time for &#010;&gt; &gt; transferring files to&#010;&gt; remote SFTP location.&#010;&gt; &gt; Please find the detailed analysis below. The we tried the various &#010;&gt; &gt; test in our local environment. In each test we put around 22 files &#010;&gt; &gt; on camel file consumer and each file took below time to write the &#010;&gt; &gt; file. PFB details&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; ============================================================&#010;&gt; &gt; ============================&#010;&gt; &gt;&#010;&gt; &gt; When target directory having 20,000 files. Camel sftp producer took &#010;&gt; &gt; around&#010;&gt; &gt; 1 minute 43 second to a transfer file&#010;&gt; &gt;&#010;&gt; &gt; ============================================================&#010;&gt; &gt; ============================&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#010;&gt; &gt; GenericFile[/data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses&#010;&gt; &gt; /1 /ST30PERFORPMAJAR17020726.txt] using exchange:&#010;&gt; &gt; Exchange[ST30PERFORPMAJAR17020726.txt]&#010;&gt; &gt;&#010;&gt; &gt;            INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRes&#010;&gt; &gt; po&#010;&gt; &gt; nseFtpRouteBuilder&gt; Picked IOP response file :&#010;&gt; &gt; ST30PERFORPMAJAR17020726.txt from IOP FTP directory&#010;&gt; &gt;&#010;&gt; &gt;             INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRes&#010;&gt; &gt; po&#010;&gt; &gt; nseFtpRouteBuilder&gt; Sending IOP response file :&#010;&gt; &gt; ST30PERFORPMAJAR17020726.txt to ICOMS FTP directory&#010;&gt; &gt;&#010;&gt; &gt;             DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://&#010;&gt; 10.100.150.&#010;&gt; &gt; 190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#010;&gt; &gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser] Exchange[ &#010;&gt; &gt; ST30PERFORPMAJAR17020726.txt]&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;             DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file &#010;&gt; &gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFO&#010;&gt; &gt; RP&#010;&gt; &gt; MAJAR17020726.txt&#010;&gt; &gt; (no charset)&#010;&gt; &gt;&#010;&gt; &gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to &#010;&gt; &gt; store&#010;&gt; &gt; file: QST30PERFORPMAJAR17020726.txt using stream:&#010;&gt; &gt; java.io.BufferedInputStream@54a89ff5&#010;&gt; &gt;&#010;&gt; &gt;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.658 &#010;&gt; &gt; seconds&#010;&gt; &gt; (658 millis) to store file: QST30PERFORPMAJAR17020726.txt and FTP &#010;&gt; &gt; client&#010;&gt; &gt; returned: true&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote &#010;&gt; &gt; [icoms/1/QST30PERFORPMAJAR17020726.txt]&#010;&gt; &gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#010;&gt; &gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmause&#010;&gt; &gt; r]&#010;&gt; &gt; ]&#010;&gt; &gt;&#010;&gt; &gt;            DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#010;&gt; &gt; icoms/1/QST30PERFORPMAJAR17020726.txt to: icoms/1/ &#010;&gt; &gt; ST30PERFORPMAJAR17020726.txt&#010;&gt; &gt;&#010;&gt; &gt;             INFO 07:02:20 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRes&#010;&gt; &gt; po&#010;&gt; &gt; nseFtpRouteBuilder&gt; IOP response file : ST30PERFORPMAJAR17020726.txt&#010;&gt; &gt; successfully sent to ICOMS FTP directory&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; ============================================================&#010;&gt; &gt; ===========================&#010;&gt; &gt;&#010;&gt; &gt; When target directory having 40,000 files. Camel sftp producer took &#010;&gt; &gt; around&#010;&gt; &gt; 3 minute 17 second to transfer file&#010;&gt; &gt;&#010;&gt; &gt; ============================================================&#010;&gt; &gt; ===========================&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.FileConsumer&gt; About to process file:&#010;&gt; &gt; GenericFile[/data/users/slvm02/smp53/domains/v&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; mb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt]&#010;&gt; &gt; using exchange: Exchange[SX30RPMAJAR1702483756.txt]&#010;&gt; &gt;&#010;&gt; &gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 &#010;&gt; &gt; -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRes&#010;&gt; &gt; po&#010;&gt; &gt; nseFtpRouteBuilder&gt;&#010;&gt; &gt; Picked IOP response file :&#010;&gt; &gt;&#010;&gt; &gt;                                 SX30RPMAJAR1702483756.txt from IOP &#010;&gt; &gt; FTP directory&#010;&gt; &gt;&#010;&gt; &gt;                 INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 &#010;&gt; &gt; -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRes&#010;&gt; &gt; po&#010;&gt; &gt; nseFtpRouteBuilder&gt;&#010;&gt; &gt; Sending IOP response file&#010;&gt; &gt;&#010;&gt; &gt;                                 : SX30RPMAJAR1702483756.txt to ICOMS &#010;&gt; &gt; FTP directory&#010;&gt; &gt;&#010;&gt; &gt;                 DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 &#010;&gt; &gt; -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://&#010;&gt; 10.100.150.&#010;&gt; &gt; 190/icoms/1?download=false&amp;maxMessagesPer&#010;&gt; &gt;&#010;&gt; &gt;                                 Poll=10&amp;password=xxxxxx&amp; &#010;&gt; &gt; tempPrefix=Q&amp;username=sigmauser] Exchange[SX30RPMAJAR1702483756.txt]&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 &#010;&gt; &gt; -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.GenericFileConverter&gt; Read file &#010;&gt; &gt; /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJ&#010;&gt; &gt; AR&#010;&gt; &gt; 1702483756.txt&#010;&gt; &gt; (no charset)&#010;&gt; &gt;&#010;&gt; &gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 &#010;&gt; &gt; -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.SftpOperations&gt; About to &#010;&gt; &gt; store&#010;&gt; &gt; file: QSX30RPMAJAR1702483756.txt using stream:&#010;&gt; &gt; java.io.BufferedInputStream@&#010;&gt; &gt; 7954cfa8&#010;&gt; &gt;&#010;&gt; &gt;                 DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 &#010;&gt; &gt; -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.659 &#010;&gt; &gt; seconds&#010;&gt; &gt; (659 millis) to store file: QSX30RPMAJAR1702483756.txt and FTP &#010;&gt; &gt; client&#010;&gt; &gt; returned: true&#010;&gt; &gt;&#010;&gt; &gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 &#010;&gt; &gt; -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote &#010;&gt; &gt; [icoms/1/QSX30RPMAJAR1702483756.txt]&#010;&gt; &gt; to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;&#010;&gt; &gt; maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmause&#010;&gt; &gt; r]&#010;&gt; &gt; ]&#010;&gt; &gt;&#010;&gt; &gt;                 DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 &#010;&gt; &gt; -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file:&#010;&gt; &gt; icoms/1/QSX30RPMAJAR1702483756.txt to:&#010;&gt; &gt; icoms/1/SX30RPMAJAR1702483756.txt&#010;&gt; &gt;&#010;&gt; &gt;                 INFO 07:50:41 (Camel (cfgMgrCamelContext) thread #6 &#010;&gt; &gt; -&#010;&gt; &gt; file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1)&#010;&gt; &gt; com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPRes&#010;&gt; &gt; po&#010;&gt; &gt; nseFtpRouteBuilder&gt; IOP response file : SX30RPMAJAR1702483756.txt&#010;&gt; &gt; successfully sent to ICOMS FTP directory&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; ============================================================&#010;&gt; &gt; ========================================&#010;&gt; &gt;&#010;&gt; &gt; Similarly when we achieved the files from target directory. It took &#010;&gt; &gt; around&#010;&gt; &gt; 6 sec.It seems like there is a performance issue with camel sftp&#010;&gt; component.&#010;&gt; &gt; Does it list the files in target directory which is taking time.&#010;&gt; &gt;&#010;&gt; &gt; ============================================================&#010;&gt; &gt; =======================================&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; PFB the producer route which we set up&#010;&gt; &gt;&#010;&gt; &gt; sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;&#010;&gt; &gt; password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; Please let us know if you need anything else.&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; *Ayush Dixit*&#010;&gt; &gt; *Software Engineer*&#010;&gt; &gt; [hidden email] &#010;&gt; &gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5796945&amp;i=7&gt;&#010;&gt; &gt;&#010;&gt; &gt; O: +91.20.25661992 x 321 &lt;+91%2020%202566%201992&gt;&#010;&gt; &lt;+91%2020%202566%201992&gt; |  M:&#010;&gt; &gt; +91-814-982-6260 &lt;+91%2081498%2026260&gt; &lt;+91%2081498%2026260&gt; | Skype:&#010;&gt; ayushdixit421&#010;&gt; &gt;&#010;&gt; &gt; [image: cid:image001.jpg@01D16809.E12C0D50]&#010;&gt; &gt; &lt;http://www.sigma-systems.com/&gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the &#010;&gt; discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Performance-issue-in-&#010;&gt; Camel-SFTP-component-tp5796893p5796945.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here &#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsu&#010;&gt; bscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpb&#010;&gt; C5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macr&#010;&gt; o_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namesp&#010;&gt; aces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.vi&#010;&gt; ew.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%&#010;&gt; 3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%2&#010;&gt; 1nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Performance-issue-in-Camel-SFTP-component-tp5796893p5796947.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
61,62,Ayush Dixit,  Performance issue in Camel SFTP component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCY4PR05MB2885D87E75E73981F09571ACAF0B0%40CY4PR05MB2885.namprd05.prod.outlook.com%3E,users,"Tue, 04 Apr 2017 07:23:03 GMT","&#010;&#010;Hi ,&#010;&#010;&#010;We have implemented a camel route where we are having camel sftp producer to transfer a files&#010;to remote SFTP location but on performance testing on client environment and on our local&#010;environment we have observed degradation in the time for transferring files to remote SFTP&#010;location. Please find the detailed analysis below. The we tried the various test in our local&#010;environment. In each test we put around 22 files on camel file consumer and each file took&#010;below time to write the file. PFB details&#010;&#010;&#010;========================================================================================&#010;When target directory having 20,000 files. Camel sftp producer took around 1 minute 43 second&#010;to a transfer file&#010;========================================================================================&#010;&#010;DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.FileConsumer&gt; About to process file: GenericFile[/data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFORPMAJAR17020726.txt]&#010;using exchange: Exchange[ST30PERFORPMAJAR17020726.txt]&#010;           INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;Picked IOP response file : ST30PERFORPMAJAR17020726.txt from IOP FTP directory&#010;            INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;Sending IOP response file : ST30PERFORPMAJAR17020726.txt to ICOMS FTP directory&#010;            DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#010;Exchange[ST30PERFORPMAJAR17020726.txt]&#010;&#010;&#010;&#010;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.GenericFileConverter&gt; Read file /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFORPMAJAR17020726.txt&#010;(no charset)&#010;           DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; About to store file: QST30PERFORPMAJAR17020726.txt&#010;using stream: java.io.BufferedInputStream@54a89ff5&lt;mailto:java.io.BufferedInputStream@54a89ff5&gt;&#010;           DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.658 seconds (658 millis)&#010;to store file: QST30PERFORPMAJAR17020726.txt and FTP client returned: true&#010;&#010;           DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote [icoms/1/QST30PERFORPMAJAR17020726.txt]&#010;to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]]&#010;           DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file: icoms/1/QST30PERFORPMAJAR17020726.txt&#010;to: icoms/1/ST30PERFORPMAJAR17020726.txt&#010;            INFO 07:02:20 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;IOP response file : ST30PERFORPMAJAR17020726.txt successfully sent to ICOMS FTP directory&#010;&#010;&#010;=======================================================================================&#010;When target directory having 40,000 files. Camel sftp producer took around 3 minute 17 second&#010;to transfer file&#010;=======================================================================================&#010;&#010;DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.FileConsumer&gt; About to process file: GenericFile[/data/users/slvm02/smp53/domains/v&#010;                                mb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt] using&#010;exchange: Exchange[SX30RPMAJAR1702483756.txt]&#010;                INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;Picked IOP response file :&#010;                                SX30RPMAJAR1702483756.txt from IOP FTP directory&#010;                INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;Sending IOP response file&#010;                                : SX30RPMAJAR1702483756.txt to ICOMS FTP directory&#010;                DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPer&#010;                                Poll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#010;Exchange[SX30RPMAJAR1702483756.txt]&#010;&#010;&#010;                DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.GenericFileConverter&gt; Read file /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt&#010;(no charset)&#010;                DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; About to store file: QSX30RPMAJAR1702483756.txt&#010;using stream: java.io.BufferedInputStream@7954cfa8&lt;mailto:java.io.BufferedInputStream@7954cfa8&gt;&#010;                DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.659 seconds (659 millis)&#010;to store file: QSX30RPMAJAR1702483756.txt and FTP client returned: true&#010;                DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote [icoms/1/QSX30RPMAJAR1702483756.txt]&#010;to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]]&#010;                DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file: icoms/1/QSX30RPMAJAR1702483756.txt&#010;to: icoms/1/SX30RPMAJAR1702483756.txt&#010;                INFO 07:50:41 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;IOP response file : SX30RPMAJAR1702483756.txt successfully sent to ICOMS FTP directory&#010;&#010;&#010;&#010;====================================================================================================&#010;Similarly when we achieved the files from target directory. It took around 6 sec.It seems&#010;like there is a performance issue with camel sftp component. Does it list the files in target&#010;directory which is taking time.&#010;===================================================================================================&#010;&#010;PFB the producer route which we set up&#010;sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#010;&#010;&#010;Ayush Dixit&#010;Software Engineer&#010;ayush.dixit@sigma-systems.com&lt;mailto:ayush.dixit@sigma-systems.com&gt;&#010;O: +91.20.25661992 x 321 |  M: +91-814-982-6260 | Skype: ayushdixit421&#010;[cid:image001.jpg@01D16809.E12C0D50]&lt;http://www.sigma-systems.com/&gt;&#010;&#010;&#010;&#010;&#010;"
62,63,,Re: camel-snmp Producer for sending TRAPS/INFORMS(2.18.3),http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCY4PR05MB2885D87E75E73981F09571ACAF0B0%40CY4PR05MB2885.namprd05.prod.outlook.com%3E,users,"Tue, 04 Apr 2017 07:23:03 GMT","&#010;&#010;Hi ,&#010;&#010;&#010;We have implemented a camel route where we are having camel sftp producer to transfer a files&#010;to remote SFTP location but on performance testing on client environment and on our local&#010;environment we have observed degradation in the time for transferring files to remote SFTP&#010;location. Please find the detailed analysis below. The we tried the various test in our local&#010;environment. In each test we put around 22 files on camel file consumer and each file took&#010;below time to write the file. PFB details&#010;&#010;&#010;========================================================================================&#010;When target directory having 20,000 files. Camel sftp producer took around 1 minute 43 second&#010;to a transfer file&#010;========================================================================================&#010;&#010;DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.FileConsumer&gt; About to process file: GenericFile[/data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFORPMAJAR17020726.txt]&#010;using exchange: Exchange[ST30PERFORPMAJAR17020726.txt]&#010;           INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;Picked IOP response file : ST30PERFORPMAJAR17020726.txt from IOP FTP directory&#010;            INFO 07:00:38 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;Sending IOP response file : ST30PERFORPMAJAR17020726.txt to ICOMS FTP directory&#010;            DEBUG 07:00:38 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#010;Exchange[ST30PERFORPMAJAR17020726.txt]&#010;&#010;&#010;&#010;            DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.GenericFileConverter&gt; Read file /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/ST30PERFORPMAJAR17020726.txt&#010;(no charset)&#010;           DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; About to store file: QST30PERFORPMAJAR17020726.txt&#010;using stream: java.io.BufferedInputStream@54a89ff5&lt;mailto:java.io.BufferedInputStream@54a89ff5&gt;&#010;           DEBUG 07:02:19 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.658 seconds (658 millis)&#010;to store file: QST30PERFORPMAJAR17020726.txt and FTP client returned: true&#010;&#010;           DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote [icoms/1/QST30PERFORPMAJAR17020726.txt]&#010;to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]]&#010;           DEBUG 07:02:20 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file: icoms/1/QST30PERFORPMAJAR17020726.txt&#010;to: icoms/1/ST30PERFORPMAJAR17020726.txt&#010;            INFO 07:02:20 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;IOP response file : ST30PERFORPMAJAR17020726.txt successfully sent to ICOMS FTP directory&#010;&#010;&#010;=======================================================================================&#010;When target directory having 40,000 files. Camel sftp producer took around 3 minute 17 second&#010;to transfer file&#010;=======================================================================================&#010;&#010;DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.FileConsumer&gt; About to process file: GenericFile[/data/users/slvm02/smp53/domains/v&#010;                                mb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt] using&#010;exchange: Exchange[SX30RPMAJAR1702483756.txt]&#010;                INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;Picked IOP response file :&#010;                                SX30RPMAJAR1702483756.txt from IOP FTP directory&#010;                INFO 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;Sending IOP response file&#010;                                : SX30RPMAJAR1702483756.txt to ICOMS FTP directory&#010;                DEBUG 07:47:23 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.processor.SendProcessor&gt; &gt;&gt;&gt;&gt; Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPer&#010;                                Poll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]&#010;Exchange[SX30RPMAJAR1702483756.txt]&#010;&#010;&#010;                DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.GenericFileConverter&gt; Read file /data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1/SX30RPMAJAR1702483756.txt&#010;(no charset)&#010;                DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; About to store file: QSX30RPMAJAR1702483756.txt&#010;using stream: java.io.BufferedInputStream@7954cfa8&lt;mailto:java.io.BufferedInputStream@7954cfa8&gt;&#010;                DEBUG 07:50:40 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; Took 0.659 seconds (659 millis)&#010;to store file: QSX30RPMAJAR1702483756.txt and FTP client returned: true&#010;                DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.RemoteFileProducer&gt; Wrote [icoms/1/QSX30RPMAJAR1702483756.txt]&#010;to [Endpoint[sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser]]&#010;                DEBUG 07:50:41 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;org.apache.camel.component.file.remote.SftpOperations&gt; Renaming file: icoms/1/QSX30RPMAJAR1702483756.txt&#010;to: icoms/1/SX30RPMAJAR1702483756.txt&#010;                INFO 07:50:41 (Camel (cfgMgrCamelContext) thread #6 - file:///data/users/slvm02/smp53/domains/vmb/Icoms/iop_responses/1&lt;file:///\\data\users\slvm02\smp53\domains\vmb\Icoms\iop_responses\1&gt;)&#010;com.sigma.samp.imp.virginmedia.bss.voice.camelroutes.iopRoute.IOPResponseFtpRouteBuilder&gt;&#010;IOP response file : SX30RPMAJAR1702483756.txt successfully sent to ICOMS FTP directory&#010;&#010;&#010;&#010;====================================================================================================&#010;Similarly when we achieved the files from target directory. It took around 6 sec.It seems&#010;like there is a performance issue with camel sftp component. Does it list the files in target&#010;directory which is taking time.&#010;===================================================================================================&#010;&#010;PFB the producer route which we set up&#010;sftp://10.100.150.190/icoms/1?download=false&amp;maxMessagesPerPoll=10&amp;password=xxxxxx&amp;tempPrefix=Q&amp;username=sigmauser&#010;&#010;&#010;Ayush Dixit&#010;Software Engineer&#010;ayush.dixit@sigma-systems.com&lt;mailto:ayush.dixit@sigma-systems.com&gt;&#010;O: +91.20.25661992 x 321 |  M: +91-814-982-6260 | Skype: ayushdixit421&#010;[cid:image001.jpg@01D16809.E12C0D50]&lt;http://www.sigma-systems.com/&gt;&#010;&#010;&#010;&#010;&#010;"
63,64,Claus Ibsen,  Re: camel-snmp Producer for sending TRAPS/INFORMS(2.18.3),http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNk8nBhCVwh_wUugmRBU5ids0kZcr55%2BnhzOUUrpRVpZFg%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 07:45:01 GMT","Look at the documentation on github - its the up to date docs&#010;https://github.com/apache/camel/tree/master/components#components&#010;&#010;And you can look at versions there too, eg find the 2.18.3 tag&#010;&#010;On Thu, Mar 30, 2017 at 2:47 PM, imranrazakhan &lt;imranrazakhan@gmail.com&gt; wrote:&#010;&gt; Hi,&#010;&gt;&#010;&gt; As per 2.18.3 release notes producer support available , but following URL&#010;&gt; doesn't have details&#010;&gt;&#010;&gt; http://camel.apache.org/snmp.html&#010;&gt;&#010;&gt; Regards&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/camel-snmp-Producer-for-sending-TRAPS-INFORMS-2-18-3-tp5796737.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
64,65,,Re: Hystrix on a routing slip,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNk8nBhCVwh_wUugmRBU5ids0kZcr55%2BnhzOUUrpRVpZFg%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 07:45:01 GMT","Look at the documentation on github - its the up to date docs&#010;https://github.com/apache/camel/tree/master/components#components&#010;&#010;And you can look at versions there too, eg find the 2.18.3 tag&#010;&#010;On Thu, Mar 30, 2017 at 2:47 PM, imranrazakhan &lt;imranrazakhan@gmail.com&gt; wrote:&#010;&gt; Hi,&#010;&gt;&#010;&gt; As per 2.18.3 release notes producer support available , but following URL&#010;&gt; doesn't have details&#010;&gt;&#010;&gt; http://camel.apache.org/snmp.html&#010;&gt;&#010;&gt; Regards&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/camel-snmp-Producer-for-sending-TRAPS-INFORMS-2-18-3-tp5796737.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
65,66,Claus Ibsen,  Re: Hystrix on a routing slip,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNnFv9qAm4%3DUjBA%2Bivj_onJ7cs%3D4Cr6kO1E-1eEzj%2B80qA%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 07:54:02 GMT","Yeah anything you put inside the hystrix block should work as a hystrix command.&#010;&#010;On Thu, Mar 30, 2017 at 10:56 PM, Priyanka Gopinath &lt;priyanka@karnam.net&gt; wrote:&#010;&gt; All of the hystrix examples are applied directly to an endpoint like -&#010;&gt; .hystrix()&#010;&gt; .hystrixConfiguration().executionTimeoutInMilliseconds(4000).end()&#010;&gt; .to(""direct:fast"")&#010;&gt; .onFallback()&#010;&gt; .transform().constant(""Fallback message"")&#010;&gt; .end() .&#010;&gt;&#010;&gt; How do we this to apply the hystrix configuration to a routing slip? Is&#010;&gt; this possible? Any ideas are appreciated.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
66,67,prabhakaran,multicast().stopOnException() - is there way to narrow to specific Exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491292447111-5796898.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 07:54:07 GMT",I have a long route with several multicast . There are a number of possible&#010;exceptions from these endpoints but i  want to stop the execution of&#010;multicast only if certain types of exceptions - for example network&#010;exception or ConnectionException . I want the multicast process to continue&#010;in terms of other exceptions after they are be handled by the onException&#010;clause. Is there a way i can specify some types of exception only on which&#010;the procession stops. ?&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/multicast-stopOnException-is-there-way-to-narrow-to-specific-Exception-tp5796898.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
67,68,,Re: [Urgent] Same file getting downloads from multiple instances,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491292447111-5796898.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 07:54:07 GMT",I have a long route with several multicast . There are a number of possible&#010;exceptions from these endpoints but i  want to stop the execution of&#010;multicast only if certain types of exceptions - for example network&#010;exception or ConnectionException . I want the multicast process to continue&#010;in terms of other exceptions after they are be handled by the onException&#010;clause. Is there a way i can specify some types of exception only on which&#010;the procession stops. ?&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/multicast-stopOnException-is-there-way-to-narrow-to-specific-Exception-tp5796898.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
68,69,Claus Ibsen,  Re: [Urgent] Same file getting downloads from multiple instances,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNnMSLjhqN-kTaULGgoHgLBC1MBj_do-BdOvgCG7gn0T-g%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 07:54:59 GMT","The Camel in Action 2nd ed book covers this in the transaction and&#010;idempotency chapter and as well in the clustering.&#010;&#010;On Fri, Mar 31, 2017 at 11:23 AM, chandresh pancholi&#010;&lt;chandreshpancholi007@gmail.com&gt; wrote:&#010;&gt; Hi,&#010;&gt;&#010;&gt; I am running Apache camel on 3 Kubernetes pods. Camel consumes file from&#010;&gt; FTP directory. These pods are downloading every file from same directory.&#010;&gt; Foe ex. directory /abc/def has 20 files every pods will download these 20&#010;&gt; files.If one router downloads a file another router in another pods&#010;&gt; shouldn't download.&#010;&gt;&#010;&gt; Is there any way I can use apache camel as distributed system to avoid&#010;&gt; duplicate download of files?&#010;&gt;&#010;&gt; Please help me out.&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Chandresh Pancholi&#010;&gt; Senior Software Engineer&#010;&gt; Flipkart.com&#010;&gt; Email-id:chandresh.pancholi@flipkart.com&#010;&gt; Contact:08951803660&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
69,70,anirban.gupta4,jaxrs resource classes not found Exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491295399048-5796903.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 08:43:19 GMT","Hi,&#010;&#010;In our Camel project, we are using the following cxf dependencies in pom&#010;&#010;&lt;dependency&gt;&#010;&#009;&#009;&#009;&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;&#010;&#009;&#009;&#009;&lt;artifactId&gt;cxf-rt-frontend-jaxws&lt;/artifactId&gt;&#010;&#009;&#009;&#009;&lt;version&gt;${cxf.version}&lt;/version&gt;&#010;&#009;&#009;&lt;/dependency&gt;&#010;&#009;&#009;&lt;dependency&gt;&#010;&#009;&#009;&#009;&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;&#010;&#009;&#009;&#009;&lt;artifactId&gt;cxf-rt-transports-http&lt;/artifactId&gt;&#010;&#009;&#009;&#009;&lt;version&gt;${cxf.version}&lt;/version&gt;&#010;&#009;&#009;&lt;/dependency&gt;&#010;&#009;&#009;&lt;dependency&gt;&#010;&#009;      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;&#010;&#009;      &lt;artifactId&gt;camel-cxf&lt;/artifactId&gt;&#010;&#009;      &lt;version&gt;2.18.2&lt;/version&gt;&#010;&#009;    &lt;/dependency&gt;&#010;&#009;    &lt;dependency&gt;&#010;&#009;      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;&#010;&#009;      &lt;artifactId&gt;camel-cxf-transport&lt;/artifactId&gt;&#010;&#009;      &lt;version&gt;2.18.2&lt;/version&gt;&#010;&#009;    &lt;/dependency&gt;&#010;&#009;    &lt;dependency&gt;&#010;&#009;&#009;&#009;&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;&#010;&#009;&#009;&#009;&lt;artifactId&gt;cxf-rt-transports-http-jetty&lt;/artifactId&gt;&#010;&#009;&#009;&#009;&lt;version&gt;3.1.10&lt;/version&gt;&#010;&#009;&#009;&lt;/dependency&gt;&#010;&#010;and the following dependencies for Rest&#010;&#010;&lt;dependency&gt;&#010;&#009;&#009;&#009;&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;&#010;&#009;&#009;&#009;&lt;artifactId&gt;cxf-spring-boot-starter-jaxrs&lt;/artifactId&gt;&#010;&#009;&#009;&#009;&lt;version&gt;${cxf.version}&lt;/version&gt;&#010;&#009;&#009;&lt;/dependency&gt;&#010;&#009;&#009;&lt;dependency&gt;&#010;&#009;&#009;&#009;&lt;groupId&gt;org.webjars&lt;/groupId&gt;&#010;&#009;&#009;&#009;&lt;artifactId&gt;swagger-ui&lt;/artifactId&gt;&#010;&#009;&#009;&#009;&lt;version&gt;2.1.0&lt;/version&gt;&#010;&#009;&#009;&lt;/dependency&gt;&#010;&#009;&#009;&lt;dependency&gt;&#010;&#009;&#009;&#009;&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;&#010;&#009;&#009;&#009;&lt;artifactId&gt;cxf-rt-rs-service-description-swagger&lt;/artifactId&gt;&#010;&#009;&#009;&#009;&lt;version&gt;${cxf.version}&lt;/version&gt;&#010;&#009;&#009;&lt;/dependency&gt;&#010;&#010;When I am using any one of the previous sets, my project is running but when&#010;I am adding both, the following exception is thrown at runtine&#010;&#010;Caused by: org.springframework.beans.BeanInstantiationException: Failed to&#010;instantiate [org.apache.cxf.endpoint.Server]: Factory method 'jaxRsServer'&#010;threw exception; nested exception is&#010;org.apache.cxf.service.factory.ServiceConstructionException&#010;&#009;at&#010;org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)&#010;~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)&#010;~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]&#010;&#009;... 18 common frames omitted&#010;Caused by: org.apache.cxf.service.factory.ServiceConstructionException: null&#010;&#009;at&#010;org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:219)&#010;~[cxf-rt-frontend-jaxrs-3.1.9.jar:3.1.9]&#010;&#009;at&#010;org.apache.cxf.jaxrs.spring.AbstractSpringConfigurationFactory.createJaxRsServer(AbstractSpringConfigurationFactory.java:56)&#010;~[cxf-rt-frontend-jaxrs-3.1.9.jar:3.1.9]&#010;&#009;at&#010;org.apache.cxf.jaxrs.spring.SpringComponentScanServer.jaxRsServer(SpringComponentScanServer.java:29)&#010;~[cxf-rt-frontend-jaxrs-3.1.9.jar:3.1.9]&#010;&#009;at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#010;~[na:1.8.0_111]&#010;&#009;at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&#010;~[na:1.8.0_111]&#010;&#009;at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&#010;~[na:1.8.0_111]&#010;&#009;at java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.8.0_111]&#010;&#009;at&#010;org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)&#010;~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]&#010;&#009;... 19 common frames omitted&#010;Caused by: org.apache.cxf.service.factory.ServiceConstructionException: No&#010;resource classes found&#010;&#009;at&#010;org.apache.cxf.jaxrs.AbstractJAXRSFactoryBean.checkResources(AbstractJAXRSFactoryBean.java:317)&#010;~[cxf-rt-frontend-jaxrs-3.1.9.jar:3.1.9]&#010;&#009;at&#010;org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:159)&#010;~[cxf-rt-frontend-jaxrs-3.1.9.jar:3.1.9]&#010;&#009;... 26 common frames omitted&#010;&#010;Please suggest what needs to be done&#010;&#010;The cxf version is 3.1.7&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/jaxrs-resource-classes-not-found-Exception-tp5796903.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
70,71,anirban.gupta4,  Re: jaxrs resource classes not found Exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491298198411-5796904.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 09:29:58 GMT",My project ran when I removed the following dependency&#010;&#010;&lt;dependency&gt;&#010;                        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;&#010;                       &#010;&lt;artifactId&gt;cxf-spring-boot-starter-jaxrs&lt;/artifactId&gt;&#010;                        &lt;version&gt;${cxf.version}&lt;/version&gt;&#010;                &lt;/dependency&gt;&#010;&#010;But I need it for some other reason. Can anyone say me a compatible version&#010;of this or what is causing this problem?&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/jaxrs-resource-classes-not-found-Exception-tp5796903p5796904.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
71,72,Amruta Jawlekar,How to append text to the beginning of the file using Camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491304357365-5796906.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 11:12:37 GMT","Hi All,&#010;&#010;I need to append text like XML Header tag in the beginning of a file.&#010;I know one way to achieve it - &#010;1. Create a String/StringBuilder/List&lt;String&gt; having header tag.&#010;2. Unmarshal the file contents and convert inputstream to List/String or any&#010;suitable object&#010;3. Append the existing contents to the header tag String/List&#010;4. Write contents to same file.&#010;&#010;But I feel that the 2nd step is unnecessary. I just need to append the XML&#010;tag to the start of file, regardless of what contents the File already has.&#010;&#010;Please let me know if Camel supports this? setting FileExists = Append&#010;always appends the text at the end of file, I need it in the beginning.&#010;&#010;OR &#010;&#010;is it better that I directly use the Java File API to do the same instead of&#010;above mentioned steps.&#010;&#010;Any pointers would be helpful. &#010;Thanks.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/How-to-append-text-to-the-beginning-of-the-file-using-Camel-tp5796906.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
72,73,Claus Ibsen,  Re: How to append text to the beginning of the file using Camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNmgkF6DxEi4ojXwi9p4niKPVhOR%3D%2BbEfR50i3Q5p4uO4w%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 12:09:11 GMT","Hi&#010;&#010;Yeah write your own java class / method that appends to the start of the file.&#010;&#010;There is no such functionality out of the box, as fileExists=Append&#010;appends at the end&#010;&#010;On Tue, Apr 4, 2017 at 1:12 PM, Amruta Jawlekar &lt;amruta.j@ignitiv.com&gt; wrote:&#010;&gt; Hi All,&#010;&gt;&#010;&gt; I need to append text like XML Header tag in the beginning of a file.&#010;&gt; I know one way to achieve it -&#010;&gt; 1. Create a String/StringBuilder/List&lt;String&gt; having header tag.&#010;&gt; 2. Unmarshal the file contents and convert inputstream to List/String or any&#010;&gt; suitable object&#010;&gt; 3. Append the existing contents to the header tag String/List&#010;&gt; 4. Write contents to same file.&#010;&gt;&#010;&gt; But I feel that the 2nd step is unnecessary. I just need to append the XML&#010;&gt; tag to the start of file, regardless of what contents the File already has.&#010;&gt;&#010;&gt; Please let me know if Camel supports this? setting FileExists = Append&#010;&gt; always appends the text at the end of file, I need it in the beginning.&#010;&gt;&#010;&gt; OR&#010;&gt;&#010;&gt; is it better that I directly use the Java File API to do the same instead of&#010;&gt; above mentioned steps.&#010;&gt;&#010;&gt; Any pointers would be helpful.&#010;&gt; Thanks.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/How-to-append-text-to-the-beginning-of-the-file-using-Camel-tp5796906.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
73,74,Amruta Jawlekar,    Re: How to append text to the beginning of the file using Camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491307880274-5796909.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 12:11:20 GMT",Thanks Claus for your prompt response :)&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/How-to-append-text-to-the-beginning-of-the-file-using-Camel-tp5796906p5796909.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
74,75,souciance,      Re: How to append text to the beginning of the file using Camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs0KUDENMmtfix2HAdXLbPaaYyi9s9b6GfKgC6woV2es2Q%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 12:20:09 GMT","You could perhaps PollEnrich to fetch the data from the file then then&#010;simply concatenate the new portion to the file data and then write to the&#010;same file again. But its easier to write some bean method to do this.&#010;&#010;On Tue, Apr 4, 2017 at 2:11 PM, Amruta Jawlekar [via Camel] &lt;&#010;ml-node+s465427n5796909h42@n5.nabble.com&gt; wrote:&#010;&#010;&gt; Thanks Claus for your prompt response :)&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/How-to-append-text-to-the-&#010;&gt; beginning-of-the-file-using-Camel-tp5796906p5796909.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/How-to-append-text-to-the-beginning-of-the-file-using-Camel-tp5796906p5796910.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
75,76,Amruta Jawlekar,        Re: How to append text to the beginning of the file using Camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491398578245-5797015.post%40n5.nabble.com%3E,users,"Wed, 05 Apr 2017 13:22:58 GMT",Thank you souciance. Enrich best suits my requirement and it worked! :)&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/How-to-append-text-to-the-beginning-of-the-file-using-Camel-tp5796906p5797015.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
76,77,chandresh pancholi,Is shutdownRunningTask deprecated in 2.18.3?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAMzr4XUeTZ59dkfhgrxrkNm5TuhwOiUKJJ1hhXRJnAvsw76Atg%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 11:58:16 GMT","Hi,&#010;&#010;I am using camel 2.18.3 and I am planning to use shutdownRunningTask(&#010;ShutdownRunningTask.CompleteAllTasks) as shutting down strategy.&#010;I am not able to locate this method shutdownRunningTask().&#010;&#010;&#010;-- &#010;Chandresh Pancholi&#010;Senior Software Engineer&#010;Flipkart.com&#010;Email-id:chandresh.pancholi@flipkart.com&#010;Contact:08951803660&#010;&#010;"
77,78,samer,Using Python script in Camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491311900635-5796914.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 13:18:20 GMT","I am trying to use python script in Camel and I am getting this exception:&#010;&#010;&#010; 107 - org.apache.camel.camel-blueprint - 2.17.0.redhat-630187 | Error&#010;occurred during starting Camel: CamelContext(camel-17) due Failed to create&#010;route VaraExportItemTimer at: &gt;&gt;&gt; SetHeader[previousTime, python{n  |           &#010;         &#010;H = dict(line.strip().split('=') for line in open('VaraExport.properties')&#010;if not line.startswith('#') and not line.startswith('\n'))n  |           if&#010;H.has_key(""time""):n  |                        result = H[""time""]n  |                 &#010;else :n  |                      result = '2001-01-01T00:00:00'n  |        &#010;}] &lt;&lt;&lt; in route:&#010;Route(VaraExportItemTimer)[[From[quartz2://PS/VaraExport?cro... because of&#010;expression must be specified&#010;org.apache.camel.FailedToCreateRouteException: Failed to create route&#010;VaraExportItemTimer at: &gt;&gt;&gt; SetHeader[previousTime, python{&#010;                        H = dict(line.strip().split('=') for line in&#010;open('VaraExport.properties') if not line.startswith('#') and not&#010;line.startswith('\n'))&#010;                        if H.has_key(""time""):&#010;                        result = H[""time""]&#010;                        else :&#010;                        result = '2001-01-01T00:00:00'&#010;        }] &lt;&lt;&lt; in route:&#010;Route(VaraExportItemTimer)[[From[quartz2://PS/VaraExport?cro... because of&#010;expression must be specified&#010;        at&#010;org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1072)&#010;        at&#010;org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:196)&#010;        at&#010;org.apache.camel.impl.DefaultCamelContext.startRoute(DefaultCamelContext.java:974)&#010;        at&#010;org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:3301)&#010;        at&#010;org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:3024)&#010;        at&#010;org.apache.camel.impl.DefaultCamelContext.access$000(DefaultCamelContext.java:175)&#010;        at&#010;org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2854)&#010;        at&#010;org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2850)&#010;        at&#010;org.apache.camel.impl.DefaultCamelContext.doWithDefinedClassLoader(DefaultCamelContext.java:2873)&#010;        at&#010;org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:2850)&#010;        at&#010;org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:61)&#010;        at&#010;org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:2819)&#010;        at&#010;org.apache.camel.blueprint.BlueprintCamelContext.start(BlueprintCamelContext.java:185)&#010;        at&#010;org.apache.camel.blueprint.BlueprintCamelContext.maybeStart(BlueprintCamelContext.java:217)&#010;        at&#010;org.apache.camel.blueprint.BlueprintCamelContext.serviceChanged(BlueprintCamelContext.java:155)&#010;        at&#010;org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:943)&#010;        at&#010;org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:794)&#010;        at&#010;org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:544)&#010;        at&#010;org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4445)&#010;        at org.apache.felix.framework.Felix.registerService(Felix.java:3431)&#010;        at&#010;org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:346)&#010;        at&#010;org.apache.aries.blueprint.container.BlueprintContainerImpl.registerService(BlueprintContainerImpl.java:459)&#010;        at&#010;org.apache.aries.blueprint.container.BlueprintContainerImpl.doRun(BlueprintContainerImpl.java:394)&#010;        at&#010;org.apache.aries.blueprint.container.BlueprintContainerImpl.run(BlueprintContainerImpl.java:270)&#010;        at&#010;org.apache.aries.blueprint.container.BlueprintExtender.createContainer(BlueprintExtender.java:294)&#010;        at&#010;org.apache.aries.blueprint.container.BlueprintExtender.createContainer(BlueprintExtender.java:263)&#010;        at&#010;org.apache.aries.blueprint.container.BlueprintExtender.modifiedBundle(BlueprintExtender.java:253)&#010;        at&#010;org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.customizerModified(BundleHookBundleTracker.java:500)&#010;        at&#010;org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.customizerModified(BundleHookBundleTracker.java:433)&#010;        at&#010;org.apache.aries.util.tracker.hook.BundleHookBundleTracker$AbstractTracked.track(BundleHookBundleTracker.java:725)&#010;        at&#010;org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.bundleChanged(BundleHookBundleTracker.java:463)&#010;        at&#010;org.apache.aries.util.tracker.hook.BundleHookBundleTracker$BundleEventHook.event(BundleHookBundleTracker.java:422)&#010;        at&#010;org.apache.felix.framework.util.SecureAction.invokeBundleEventHook(SecureAction.java:1127)&#010;        at&#010;org.apache.felix.framework.util.EventDispatcher.createWhitelistFromHooks(EventDispatcher.java:696)&#010;        at&#010;org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:484)&#010;        at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4429)&#010;        at org.apache.felix.framework.Felix.startBundle(Felix.java:2100)&#010;        at org.apache.felix.framework.Felix.updateBundle(Felix.java:2412)&#010;        at org.apache.felix.framework.BundleImpl.update(BundleImpl.java:994)&#010;        at org.apache.felix.framework.BundleImpl.update(BundleImpl.java:981)&#010;        at&#010;org.apache.karaf.util.bundles.BundleUtils.update(BundleUtils.java:43)&#010;        at&#010;org.apache.karaf.util.bundles.BundleUtils.update(BundleUtils.java:36)&#010;        at&#010;org.apache.karaf.shell.osgi.UpdateBundle.doExecute(UpdateBundle.java:37)&#010;        at&#010;org.apache.karaf.shell.osgi.BundleCommand.doExecute(BundleCommand.java:41)&#010;        at&#010;org.apache.karaf.shell.console.OsgiCommandSupport.execute(OsgiCommandSupport.java:38)&#010;        at&#010;org.apache.felix.gogo.commands.basic.AbstractCommand.execute(AbstractCommand.java:35)&#010;        at sun.reflect.GeneratedMethodAccessor154.invoke(Unknown Source)&#010;        at&#010;sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)[:1.8.0_121]&#010;        at java.lang.reflect.Method.invoke(Method.java:498)[:1.8.0_121]&#010;        at&#010;org.apache.aries.proxy.impl.ProxyHandler$1.invoke(ProxyHandler.java:54)&#010;        at&#010;org.apache.aries.proxy.impl.ProxyHandler.invoke(ProxyHandler.java:119)&#010;        at&#010;org.apache.karaf.shell.console.commands.$BlueprintCommand1994544654.execute(Unknown&#010;Source)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;        at&#010;org.apache.felix.gogo.runtime.CommandProxy.execute(CommandProxy.java:78)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;        at&#010;org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:477)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;        at&#010;org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:403)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;        at&#010;org.apache.felix.gogo.runtime.Pipe.run(Pipe.java:108)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;        at&#010;org.apache.felix.gogo.runtime.Closure.execute(Closure.java:183)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;        at&#010;org.apache.felix.gogo.runtime.Closure.execute(Closure.java:120)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;        at&#010;org.apache.felix.gogo.runtime.CommandSessionImpl.execute(CommandSessionImpl.java:92)&#010;        at&#010;org.apache.karaf.shell.console.jline.Console.run(Console.java:197)&#010;        at&#010;org.apache.karaf.shell.ssh.ShellFactoryImpl$ShellImpl$1.runConsole(ShellFactoryImpl.java:171)[32:org.apache.karaf.shell.ssh:2.4.0.redhat-630187]&#010;        at&#010;org.apache.karaf.shell.ssh.ShellFactoryImpl$ShellImpl$1$1.run(ShellFactoryImpl.java:126)&#010;        at java.security.AccessController.doPrivileged(Native&#010;Method)[:1.8.0_121]&#010;        at&#010;org.apache.karaf.jaas.modules.JaasHelper.doAs(JaasHelper.java:47)[17:org.apache.karaf.jaas.modules:2.4.0.redhat-630187]&#010;        at&#010;org.apache.karaf.shell.ssh.ShellFactoryImpl$ShellImpl$1.run(ShellFactoryImpl.java:124)[32:org.apache.karaf.shell.ssh:2.4.0.redhat-630187]&#010;Caused by: java.lang.IllegalArgumentException: expression must be specified&#010;        at org.apache.camel.util.ObjectHelper.notNull(ObjectHelper.java:308)&#010;        at&#010;org.apache.camel.processor.SetHeaderProcessor.&lt;init&gt;(SetHeaderProcessor.java:42)&#010;        at&#010;org.apache.camel.model.SetHeaderDefinition.createProcessor(SetHeaderDefinition.java:76)&#010;        at&#010;org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:534)&#010;        at&#010;org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:495)&#010;        at&#010;org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:219)&#010;        at&#010;org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1069)&#010;        ... 64 more&#010;&#010;&#010;&#010;I tried different workarounds and I have camel-script added to features in&#010;settings. Any hint on why I get this error and why camel is ignoring the&#010;content of my python script tag? below also is snippet on how i embed python&#010;script:&#010;&#010;    .....&#010;    &lt;route id=""VaraExportItemTimer""&gt;&#010;      &lt;from&#010;uri=""quartz2://PS/VaraExport?cron=0/30+*+*+*+*+?&amp;amp;stateful=true"" /&gt;&#010;      &lt;setHeader headerName=""previousTime""&gt;&#010;        &lt;python&gt;&#010;&#009;&#009;&#009;H = dict(line.strip().split('=') for line in&#010;open('VaraExport.properties') if not line.startswith('#') and not&#010;line.startswith('\n'))&#010;&#009;&#009;&#009;if H.has_key(""time""):&#010;        &#009;&#009;result = H[""time""]&#010;&#009;&#009;&#009;else :&#010;        &#009;&#009;result = '2001-01-01T00:00:00'&#010;        &lt;/python&gt;&#010;      &lt;/setHeader&gt;&#010;       .....&#010;&#010;Thanks!&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-Python-script-in-Camel-tp5796914.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
78,79,Claus Ibsen,  Re: Using Python script in Camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNktJ4_4MFFHejZOfFZtHsBd%3DKWhAropAp-xmpZP90bDUA%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 13:53:52 GMT","You likely need to inline the code using [[CDATA[ xml style.&#010;&#010;Or better yet put the python code in a file, and refer to this file&#010;from the camel route with resource:xxx. See more at&#010;http://camel.apache.org/scripting-languages.html&#010;&#010;&#010;On Tue, Apr 4, 2017 at 3:18 PM, samer &lt;samer.razzook@visma.com&gt; wrote:&#010;&gt; I am trying to use python script in Camel and I am getting this exception:&#010;&gt;&#010;&gt;&#010;&gt;  107 - org.apache.camel.camel-blueprint - 2.17.0.redhat-630187 | Error&#010;&gt; occurred during starting Camel: CamelContext(camel-17) due Failed to create&#010;&gt; route VaraExportItemTimer at: &gt;&gt;&gt; SetHeader[previousTime, python{n  |&#010;&gt; H = dict(line.strip().split('=') for line in open('VaraExport.properties')&#010;&gt; if not line.startswith('#') and not line.startswith('\n'))n  |           if&#010;&gt; H.has_key(""time""):n  |                        result = H[""time""]n  |&#010;&gt; else :n  |                      result = '2001-01-01T00:00:00'n  |&#010;&gt; }] &lt;&lt;&lt; in route:&#010;&gt; Route(VaraExportItemTimer)[[From[quartz2://PS/VaraExport?cro... because of&#010;&gt; expression must be specified&#010;&gt; org.apache.camel.FailedToCreateRouteException: Failed to create route&#010;&gt; VaraExportItemTimer at: &gt;&gt;&gt; SetHeader[previousTime, python{&#010;&gt;                         H = dict(line.strip().split('=') for line in&#010;&gt; open('VaraExport.properties') if not line.startswith('#') and not&#010;&gt; line.startswith('\n'))&#010;&gt;                         if H.has_key(""time""):&#010;&gt;                         result = H[""time""]&#010;&gt;                         else :&#010;&gt;                         result = '2001-01-01T00:00:00'&#010;&gt;         }] &lt;&lt;&lt; in route:&#010;&gt; Route(VaraExportItemTimer)[[From[quartz2://PS/VaraExport?cro... because of&#010;&gt; expression must be specified&#010;&gt;         at&#010;&gt; org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1072)&#010;&gt;         at&#010;&gt; org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:196)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.DefaultCamelContext.startRoute(DefaultCamelContext.java:974)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:3301)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:3024)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.DefaultCamelContext.access$000(DefaultCamelContext.java:175)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2854)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2850)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.DefaultCamelContext.doWithDefinedClassLoader(DefaultCamelContext.java:2873)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:2850)&#010;&gt;         at&#010;&gt; org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:61)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:2819)&#010;&gt;         at&#010;&gt; org.apache.camel.blueprint.BlueprintCamelContext.start(BlueprintCamelContext.java:185)&#010;&gt;         at&#010;&gt; org.apache.camel.blueprint.BlueprintCamelContext.maybeStart(BlueprintCamelContext.java:217)&#010;&gt;         at&#010;&gt; org.apache.camel.blueprint.BlueprintCamelContext.serviceChanged(BlueprintCamelContext.java:155)&#010;&gt;         at&#010;&gt; org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:943)&#010;&gt;         at&#010;&gt; org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:794)&#010;&gt;         at&#010;&gt; org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:544)&#010;&gt;         at&#010;&gt; org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4445)&#010;&gt;         at org.apache.felix.framework.Felix.registerService(Felix.java:3431)&#010;&gt;         at&#010;&gt; org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:346)&#010;&gt;         at&#010;&gt; org.apache.aries.blueprint.container.BlueprintContainerImpl.registerService(BlueprintContainerImpl.java:459)&#010;&gt;         at&#010;&gt; org.apache.aries.blueprint.container.BlueprintContainerImpl.doRun(BlueprintContainerImpl.java:394)&#010;&gt;         at&#010;&gt; org.apache.aries.blueprint.container.BlueprintContainerImpl.run(BlueprintContainerImpl.java:270)&#010;&gt;         at&#010;&gt; org.apache.aries.blueprint.container.BlueprintExtender.createContainer(BlueprintExtender.java:294)&#010;&gt;         at&#010;&gt; org.apache.aries.blueprint.container.BlueprintExtender.createContainer(BlueprintExtender.java:263)&#010;&gt;         at&#010;&gt; org.apache.aries.blueprint.container.BlueprintExtender.modifiedBundle(BlueprintExtender.java:253)&#010;&gt;         at&#010;&gt; org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.customizerModified(BundleHookBundleTracker.java:500)&#010;&gt;         at&#010;&gt; org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.customizerModified(BundleHookBundleTracker.java:433)&#010;&gt;         at&#010;&gt; org.apache.aries.util.tracker.hook.BundleHookBundleTracker$AbstractTracked.track(BundleHookBundleTracker.java:725)&#010;&gt;         at&#010;&gt; org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.bundleChanged(BundleHookBundleTracker.java:463)&#010;&gt;         at&#010;&gt; org.apache.aries.util.tracker.hook.BundleHookBundleTracker$BundleEventHook.event(BundleHookBundleTracker.java:422)&#010;&gt;         at&#010;&gt; org.apache.felix.framework.util.SecureAction.invokeBundleEventHook(SecureAction.java:1127)&#010;&gt;         at&#010;&gt; org.apache.felix.framework.util.EventDispatcher.createWhitelistFromHooks(EventDispatcher.java:696)&#010;&gt;         at&#010;&gt; org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:484)&#010;&gt;         at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4429)&#010;&gt;         at org.apache.felix.framework.Felix.startBundle(Felix.java:2100)&#010;&gt;         at org.apache.felix.framework.Felix.updateBundle(Felix.java:2412)&#010;&gt;         at org.apache.felix.framework.BundleImpl.update(BundleImpl.java:994)&#010;&gt;         at org.apache.felix.framework.BundleImpl.update(BundleImpl.java:981)&#010;&gt;         at&#010;&gt; org.apache.karaf.util.bundles.BundleUtils.update(BundleUtils.java:43)&#010;&gt;         at&#010;&gt; org.apache.karaf.util.bundles.BundleUtils.update(BundleUtils.java:36)&#010;&gt;         at&#010;&gt; org.apache.karaf.shell.osgi.UpdateBundle.doExecute(UpdateBundle.java:37)&#010;&gt;         at&#010;&gt; org.apache.karaf.shell.osgi.BundleCommand.doExecute(BundleCommand.java:41)&#010;&gt;         at&#010;&gt; org.apache.karaf.shell.console.OsgiCommandSupport.execute(OsgiCommandSupport.java:38)&#010;&gt;         at&#010;&gt; org.apache.felix.gogo.commands.basic.AbstractCommand.execute(AbstractCommand.java:35)&#010;&gt;         at sun.reflect.GeneratedMethodAccessor154.invoke(Unknown Source)&#010;&gt;         at&#010;&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)[:1.8.0_121]&#010;&gt;         at java.lang.reflect.Method.invoke(Method.java:498)[:1.8.0_121]&#010;&gt;         at&#010;&gt; org.apache.aries.proxy.impl.ProxyHandler$1.invoke(ProxyHandler.java:54)&#010;&gt;         at&#010;&gt; org.apache.aries.proxy.impl.ProxyHandler.invoke(ProxyHandler.java:119)&#010;&gt;         at&#010;&gt; org.apache.karaf.shell.console.commands.$BlueprintCommand1994544654.execute(Unknown&#010;&gt; Source)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;&gt;         at&#010;&gt; org.apache.felix.gogo.runtime.CommandProxy.execute(CommandProxy.java:78)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;&gt;         at&#010;&gt; org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:477)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;&gt;         at&#010;&gt; org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:403)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;&gt;         at&#010;&gt; org.apache.felix.gogo.runtime.Pipe.run(Pipe.java:108)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;&gt;         at&#010;&gt; org.apache.felix.gogo.runtime.Closure.execute(Closure.java:183)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;&gt;         at&#010;&gt; org.apache.felix.gogo.runtime.Closure.execute(Closure.java:120)[18:org.apache.karaf.shell.console:2.4.0.redhat-630187]&#010;&gt;         at&#010;&gt; org.apache.felix.gogo.runtime.CommandSessionImpl.execute(CommandSessionImpl.java:92)&#010;&gt;         at&#010;&gt; org.apache.karaf.shell.console.jline.Console.run(Console.java:197)&#010;&gt;         at&#010;&gt; org.apache.karaf.shell.ssh.ShellFactoryImpl$ShellImpl$1.runConsole(ShellFactoryImpl.java:171)[32:org.apache.karaf.shell.ssh:2.4.0.redhat-630187]&#010;&gt;         at&#010;&gt; org.apache.karaf.shell.ssh.ShellFactoryImpl$ShellImpl$1$1.run(ShellFactoryImpl.java:126)&#010;&gt;         at java.security.AccessController.doPrivileged(Native&#010;&gt; Method)[:1.8.0_121]&#010;&gt;         at&#010;&gt; org.apache.karaf.jaas.modules.JaasHelper.doAs(JaasHelper.java:47)[17:org.apache.karaf.jaas.modules:2.4.0.redhat-630187]&#010;&gt;         at&#010;&gt; org.apache.karaf.shell.ssh.ShellFactoryImpl$ShellImpl$1.run(ShellFactoryImpl.java:124)[32:org.apache.karaf.shell.ssh:2.4.0.redhat-630187]&#010;&gt; Caused by: java.lang.IllegalArgumentException: expression must be specified&#010;&gt;         at org.apache.camel.util.ObjectHelper.notNull(ObjectHelper.java:308)&#010;&gt;         at&#010;&gt; org.apache.camel.processor.SetHeaderProcessor.&lt;init&gt;(SetHeaderProcessor.java:42)&#010;&gt;         at&#010;&gt; org.apache.camel.model.SetHeaderDefinition.createProcessor(SetHeaderDefinition.java:76)&#010;&gt;         at&#010;&gt; org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:534)&#010;&gt;         at&#010;&gt; org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:495)&#010;&gt;         at&#010;&gt; org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:219)&#010;&gt;         at&#010;&gt; org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1069)&#010;&gt;         ... 64 more&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; I tried different workarounds and I have camel-script added to features in&#010;&gt; settings. Any hint on why I get this error and why camel is ignoring the&#010;&gt; content of my python script tag? below also is snippet on how i embed python&#010;&gt; script:&#010;&gt;&#010;&gt;     .....&#010;&gt;     &lt;route id=""VaraExportItemTimer""&gt;&#010;&gt;       &lt;from&#010;&gt; uri=""quartz2://PS/VaraExport?cron=0/30+*+*+*+*+?&amp;amp;stateful=true"" /&gt;&#010;&gt;       &lt;setHeader headerName=""previousTime""&gt;&#010;&gt;         &lt;python&gt;&#010;&gt;                         H = dict(line.strip().split('=') for line in&#010;&gt; open('VaraExport.properties') if not line.startswith('#') and not&#010;&gt; line.startswith('\n'))&#010;&gt;                         if H.has_key(""time""):&#010;&gt;                         result = H[""time""]&#010;&gt;                         else :&#010;&gt;                         result = '2001-01-01T00:00:00'&#010;&gt;         &lt;/python&gt;&#010;&gt;       &lt;/setHeader&gt;&#010;&gt;        .....&#010;&gt;&#010;&gt; Thanks!&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Using-Python-script-in-Camel-tp5796914.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
79,80,samer,    Re: Using Python script in Camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491316922522-5796922.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 14:42:02 GMT","Thanks for reply!&#010;&#010;One thing I missed writing in my above code, is that the directory I am&#010;loading the file from is populated by Camel:&#010;&#010;        &lt;python&gt;&#010;&#009;&#009;&#009;H = dict(line.strip().split('=') for line in&#010;open('{{datadir}}/properties/VaraExport.properties') if not&#010;line.startswith('#') and not line.startswith('\n'))&#010;&#009;&#009;&#009;if H.has_key(""time""):&#010;        &#009;&#009;result = H[""time""]&#010;&#009;&#009;&#009;else :&#010;        &#009;&#009;result = '2001-01-01T00:00:00'&#010;        &lt;/python&gt;&#010;&#010;&#010;So putting this code in python file and referencing it means I will have to&#010;somehow replace this variable. I am not python programmer, but is trying to&#010;use it instead of groovy, due to the memoryleak problem of groovy version&#010;that Camel is using.&#010;&#010;Note that I tried to put only one line instead of the above code and still I&#010;get same error!&#010;&lt;python&gt;&#010;    result = '2001-01-01T00:00:00'&#010;&lt;/python&gt;&#010;&#010;&#010;Maybe I will have to try doing this in java if its easier. Do I have to&#010;inline my code using [CDATA[]] xml style for that as well or was it due to&#010;the ""tab/indentation"" sensitivity of python you meant?&#010;&#010;Thanks!&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-Python-script-in-Camel-tp5796914p5796922.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
80,81,Claus Ibsen,      Re: Using Python script in Camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNkNiFJVRy_qVwcvvt%3DjMJRDPYN3YrZZijTUCe6iqw8L9g%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 11:21:42 GMT","[[CDATA[ is only when using XML.&#010;&#010;Also do a simple python example, try to see some of the unit tests of&#010;camel-script for a jython example.&#010;&#010;&#010;On Tue, Apr 4, 2017 at 4:42 PM, samer &lt;razzook@gmail.com&gt; wrote:&#010;&gt; Thanks for reply!&#010;&gt;&#010;&gt; One thing I missed writing in my above code, is that the directory I am&#010;&gt; loading the file from is populated by Camel:&#010;&gt;&#010;&gt;         &lt;python&gt;&#010;&gt;                         H = dict(line.strip().split('=') for line in&#010;&gt; open('{{datadir}}/properties/VaraExport.properties') if not&#010;&gt; line.startswith('#') and not line.startswith('\n'))&#010;&gt;                         if H.has_key(""time""):&#010;&gt;                         result = H[""time""]&#010;&gt;                         else :&#010;&gt;                         result = '2001-01-01T00:00:00'&#010;&gt;         &lt;/python&gt;&#010;&gt;&#010;&gt;&#010;&gt; So putting this code in python file and referencing it means I will have to&#010;&gt; somehow replace this variable. I am not python programmer, but is trying to&#010;&gt; use it instead of groovy, due to the memoryleak problem of groovy version&#010;&gt; that Camel is using.&#010;&gt;&#010;&gt; Note that I tried to put only one line instead of the above code and still I&#010;&gt; get same error!&#010;&gt; &lt;python&gt;&#010;&gt;     result = '2001-01-01T00:00:00'&#010;&gt; &lt;/python&gt;&#010;&gt;&#010;&gt;&#010;&gt; Maybe I will have to try doing this in java if its easier. Do I have to&#010;&gt; inline my code using [CDATA[]] xml style for that as well or was it due to&#010;&gt; the ""tab/indentation"" sensitivity of python you meant?&#010;&gt;&#010;&gt; Thanks!&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Using-Python-script-in-Camel-tp5796914p5796922.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
81,82,anirban.gupta4,Using Camel JDBC component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491312556098-5796916.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 13:29:16 GMT","Hi,&#010;&#010;I am using camel JDBC component. I found the documentation at the location&#010;&#010;http://camel.apache.org/jdbc.html&#010;&#010;I have two questions here:&#010;1. I have an URL of type ""jdbc:sqlserver://someIP"". How will I pass any&#010;queries here?&#010;2. How to set the userName, password for connecting to this DB?&#010;&#010;I am migrating from some other integration framework to Camel. So do not&#010;know how to do this in Camel.&#010;&#010;Please help&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-Camel-JDBC-component-tp5796916.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
82,83,Claus Ibsen,  Re: Using Camel JDBC component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNni4gYFc-bxQqf_8bdY59H4TL3FawQKOap-0BhiBPW_vA%40mail.gmail.com%3E,users,"Tue, 04 Apr 2017 13:56:08 GMT","Ad 1)&#010;You set a javax sql DataSource. So search the internet what that is&#010;and how to configure it.&#010;&#010;Ad 2)&#010;You set the queries in the message body. If you dont want to do that,&#010;use another component like camel-sql, or camel-mybatis, or camel-jpa&#010;from next release which has some support for queries.&#010;&#010;And there is some database examples&#010;https://github.com/apache/camel/tree/master/examples&#010;&#010;On Tue, Apr 4, 2017 at 3:29 PM, anirban.gupta4 &lt;anirban.gupta4@gmail.com&gt; wrote:&#010;&gt; Hi,&#010;&gt;&#010;&gt; I am using camel JDBC component. I found the documentation at the location&#010;&gt;&#010;&gt; http://camel.apache.org/jdbc.html&#010;&gt;&#010;&gt; I have two questions here:&#010;&gt; 1. I have an URL of type ""jdbc:sqlserver://someIP"". How will I pass any&#010;&gt; queries here?&#010;&gt; 2. How to set the userName, password for connecting to this DB?&#010;&gt;&#010;&gt; I am migrating from some other integration framework to Camel. So do not&#010;&gt; know how to do this in Camel.&#010;&gt;&#010;&gt; Please help&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Using-Camel-JDBC-component-tp5796916.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
83,84,romdj,Parsing/exporting sql result,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491323059445-5796926.post%40n5.nabble.com%3E,users,"Tue, 04 Apr 2017 16:24:19 GMT","Hello everyone, &#010;I apologize in advance as this is basic stuff, but after a full day of&#010;searching my brain is begging me to write this.&#010;&#010;So my goal is very simpleStupid, I'm querying a sql server db and I want to&#010;export that data to either json or csv.&#010;So using jdbc for the query returns an ArrayList&lt;HashMap&gt;. So obvious choice&#010;in my mind would be to try to use Jackson ObjectMapper but when I add &#010;&lt;dataFormats&gt;&lt;json id=""jack"" library=""Jackson"" prettyPrint=""true""&#010;objectMapper=""myMapper"" /&gt;&lt;/dataFormats&gt; &#010;I got /Attribute 'objectMapper' is not allowed to appear in element 'json'./&#010;&#010;Besides, I wouldn't know how to properly use it as I don't know how I could&#010;properly use it.&#010;The examples I have are queries run in JS in a CDATA long string. &#010;&#010;Is there any place where I can find a simple example of some data being&#010;fetched and exported from a sql db? This would be enormous.&#010;&#010;Thank you so much!&#010;Romain &#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Parsing-exporting-sql-result-tp5796926.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
84,85,Claus Ibsen,  Re: Parsing/exporting sql result,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yN%3DE66zTdSp_XyuEMsPr-RPa48z4ZgQbDKkAt4uMFsGzXA%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 11:20:24 GMT","There is some database examples&#010;https://github.com/apache/camel/tree/master/examples&#010;&#010;And there are also some Camel books which cover using database with Camel&#010;http://camel.apache.org/books&#010;&#010;&#010;On Tue, Apr 4, 2017 at 6:24 PM, romdj &lt;dev.romdj@gmail.com&gt; wrote:&#010;&gt; Hello everyone,&#010;&gt; I apologize in advance as this is basic stuff, but after a full day of&#010;&gt; searching my brain is begging me to write this.&#010;&gt;&#010;&gt; So my goal is very simpleStupid, I'm querying a sql server db and I want to&#010;&gt; export that data to either json or csv.&#010;&gt; So using jdbc for the query returns an ArrayList&lt;HashMap&gt;. So obvious choice&#010;&gt; in my mind would be to try to use Jackson ObjectMapper but when I add&#010;&gt; &lt;dataFormats&gt;&lt;json id=""jack"" library=""Jackson"" prettyPrint=""true""&#010;&gt; objectMapper=""myMapper"" /&gt;&lt;/dataFormats&gt;&#010;&gt; I got /Attribute 'objectMapper' is not allowed to appear in element 'json'./&#010;&gt;&#010;&gt; Besides, I wouldn't know how to properly use it as I don't know how I could&#010;&gt; properly use it.&#010;&gt; The examples I have are queries run in JS in a CDATA long string.&#010;&gt;&#010;&gt; Is there any place where I can find a simple example of some data being&#010;&gt; fetched and exported from a sql db? This would be enormous.&#010;&gt;&#010;&gt; Thank you so much!&#010;&gt; Romain&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Parsing-exporting-sql-result-tp5796926.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
85,86,andre.gill...@icg360.com,Sql Component StreamList Poll,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491367838950-5796939.post%40n5.nabble.com%3E,users,"Wed, 05 Apr 2017 04:50:38 GMT","I have a route similar to the following that uses the SQL Component:&#010;&#010;from(""sql:"" + QUERY + ""?outputType=StreamList"")&#010;&#009;&#009;.autoStartup(false)&#010;&#009;&#009;.routeId(getRouteId())&#010;&#009;&#009;.to(""log:stream"")&#010;&#009;&#009;.split(body(), new AggregationStrategy())&#010;&#009;&#009;.executorService(getThreadPool())&#010;&#009;&#009;.streaming()&#010;&#009;&#009;.parallelProcessing()&#010;&#009;&#009;.to(""log:postProcess"")&#010;&#009;&#009;.end()&#010;&#009;&#009;.process(new Processor() {&#010;            @Override&#010;            public void process(Exchange exchange) throws Exception {&#010;                // stop Camel by signaling to the latch&#010;            &#009;getCountDownLatch().countDown();&#010;            }&#010;        });&#009;&#009;&#010;&#010;I'm running into a problem and need direction. If the last streaming row is&#010;successfully processed by the route everything is fine. If the query returns&#010;0 results or If the last streaming row has an exception while in the route&#010;it, the sql component will poll and never get into the route to hit the last&#010;process (which notifies the countDownLatch await and stops the process).&#010;This is the error that it produces when in that state:&#010;&#010;00:33:37.150 [Camel (camel-1) thread #3 -&#010;sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW']&#010;WARN  o.s.j.support.SQLErrorCodesFactory - Error while extracting database&#010;name - falling back to empty error codes &#010;org.springframework.jdbc.support.MetaDataAccessException: Error while&#010;extracting DatabaseMetaData; nested exception is java.sql.SQLException:&#010;Invalid state, the Connection object is closed.&#010;&#009;at&#010;org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:342)&#010;&#009;at&#010;org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:366)&#010;&#009;at&#010;org.springframework.jdbc.support.SQLErrorCodesFactory.getErrorCodes(SQLErrorCodesFactory.java:212)&#010;&#009;at&#010;org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.setDataSource(SQLErrorCodeSQLExceptionTranslator.java:134)&#010;&#009;at&#010;org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.&lt;init&gt;(SQLErrorCodeSQLExceptionTranslator.java:97)&#010;&#009;at&#010;org.springframework.jdbc.support.JdbcAccessor.getExceptionTranslator(JdbcAccessor.java:99)&#010;&#009;at&#010;org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:649)&#010;&#009;at&#010;org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662)&#010;&#009;at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168)&#010;&#009;at&#010;org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175)&#010;&#009;at&#010;org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102)&#010;&#009;at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)&#010;&#009;at java.util.concurrent.FutureTask.runAndReset(Unknown Source)&#010;&#009;at&#010;java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(Unknown&#010;Source)&#010;&#009;at&#010;java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown&#010;Source)&#010;&#009;at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)&#010;&#009;at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)&#010;&#009;at java.lang.Thread.run(Unknown Source)&#010;Caused by: java.sql.SQLException: Invalid state, the Connection object is&#010;closed.&#010;&#009;at&#010;net.sourceforge.jtds.jdbc.JtdsConnection.checkOpen(JtdsConnection.java:1744)&#010;&#009;at&#010;net.sourceforge.jtds.jdbc.JtdsConnection.getMetaData(JtdsConnection.java:2350)&#010;&#009;at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#010;&#009;at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&#010;&#009;at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&#010;&#009;at java.lang.reflect.Method.invoke(Unknown Source)&#010;&#009;at&#010;org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:126)&#010;&#009;at&#010;org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:108)&#010;&#009;at&#010;org.apache.tomcat.jdbc.pool.DisposableConnectionFacade.invoke(DisposableConnectionFacade.java:81)&#010;&#009;at com.sun.proxy.$Proxy96.getMetaData(Unknown Source)&#010;&#009;at&#010;org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:331)&#010;&#009;... 17 common frames omitted&#010;00:33:37.152 [Camel (camel-1) thread #3 -&#010;sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW']&#010;WARN  o.a.camel.component.sql.SqlConsumer - Consumer&#010;Consumer[sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW'?noop=true&amp;outputType=StreamList]&#010;failed polling endpoint:&#010;sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW'?noop=true&amp;outputType=StreamList.&#010;Will try again at next poll. Caused by:&#010;[org.springframework.jdbc.UncategorizedSQLException -&#010;PreparedStatementCallback; uncategorized SQLException for SQL [SELECT Id,&#010;QuoteId  FROM [dbo].[IPSImporter] WHERE Status = 'NEW']; SQL state [HY010];&#010;error code [0]; Invalid state, the Connection object is closed.; nested&#010;exception is java.sql.SQLException: Invalid state, the Connection object is&#010;closed.] &#010;org.springframework.jdbc.UncategorizedSQLException:&#010;PreparedStatementCallback; uncategorized SQLException for SQL [SELECT Id,&#010;QuoteId  FROM [dbo].[IPSImporter] WHERE Status = 'NEW']; SQL state [HY010];&#010;error code [0]; Invalid state, the Connection object is closed.; nested&#010;exception is java.sql.SQLException: Invalid state, the Connection object is&#010;closed.&#010;&#009;at&#010;org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:84)&#010;&#009;at&#010;org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)&#010;&#009;at&#010;org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)&#010;&#009;at&#010;org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:649)&#010;&#009;at&#010;org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662)&#010;&#009;at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168)&#010;&#009;at&#010;org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175)&#010;&#009;at&#010;org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102)&#010;&#009;at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)&#010;&#009;at java.util.concurrent.FutureTask.runAndReset(Unknown Source)&#010;&#009;at&#010;java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(Unknown&#010;Source)&#010;&#009;at&#010;java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown&#010;Source)&#010;&#009;at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)&#010;&#009;at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)&#010;&#009;at java.lang.Thread.run(Unknown Source)&#010;Caused by: java.sql.SQLException: Invalid state, the Connection object is&#010;closed.&#010;&#009;at&#010;net.sourceforge.jtds.jdbc.JtdsConnection.checkOpen(JtdsConnection.java:1744)&#010;&#009;at&#010;net.sourceforge.jtds.jdbc.JtdsConnection.prepareStatement(JtdsConnection.java:2448)&#010;&#009;at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#010;&#009;at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&#010;&#009;at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&#010;&#009;at java.lang.reflect.Method.invoke(Unknown Source)&#010;&#009;at&#010;org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:126)&#010;&#009;at&#010;org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:108)&#010;&#009;at&#010;org.apache.tomcat.jdbc.pool.DisposableConnectionFacade.invoke(DisposableConnectionFacade.java:81)&#010;&#009;at com.sun.proxy.$Proxy96.prepareStatement(Unknown Source)&#010;&#009;at&#010;org.springframework.jdbc.core.JdbcTemplate$SimplePreparedStatementCreator.createPreparedStatement(JdbcTemplate.java:1521)&#010;&#009;at&#010;org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:627)&#010;&#009;... 11 common frames omitted&#010;00:33:37.653 [Camel (camel-1) thread #3 -&#010;sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW']&#010;WARN  o.a.camel.component.sql.SqlConsumer - Consumer&#010;Consumer[sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW'?noop=true&amp;outputType=StreamList]&#010;failed polling endpoint:&#010;sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW'?noop=true&amp;outputType=StreamList.&#010;Will try again at next poll. Caused by:&#010;[org.springframework.jdbc.UncategorizedSQLException -&#010;PreparedStatementCallback; uncategorized SQLException for SQL [SELECT Id,&#010;QuoteId  FROM [dbo].[IPSImporter] WHERE Status = 'NEW']; SQL state [HY010];&#010;error code [0]; Invalid state, the Connection object is closed.; nested&#010;exception is java.sql.SQLException: Invalid state, the Connection object is&#010;closed.] &#010;org.springframework.jdbc.UncategorizedSQLException:&#010;PreparedStatementCallback; uncategorized SQLException for SQL [SELECT Id,&#010;QuoteId  FROM [dbo].[IPSImporter] WHERE Status = 'NEW']; SQL state [HY010];&#010;error code [0]; Invalid state, the Connection object is closed.; nested&#010;exception is java.sql.SQLException: Invalid state, the Connection object is&#010;closed.&#010;&#009;at&#010;org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:84)&#010;&#009;at&#010;org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)&#010;&#009;at&#010;org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)&#010;&#009;at&#010;org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:649)&#010;&#009;at&#010;org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662)&#010;&#009;at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168)&#010;&#009;at&#010;org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175)&#010;&#009;at&#010;org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102)&#010;&#009;at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)&#010;&#009;at java.util.concurrent.FutureTask.runAndReset(Unknown Source)&#010;&#009;at&#010;java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(Unknown&#010;Source)&#010;&#009;at&#010;java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown&#010;Source)&#010;&#009;at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)&#010;&#009;at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)&#010;&#009;at java.lang.Thread.run(Unknown Source)&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Sql-Component-StreamList-Poll-tp5796939.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
86,87,Claus Ibsen,  Re: Sql Component StreamList Poll,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNmTP8Xy0SpLtZJg8BE2p0XO747iOPp4AJNbA%2Bc9rMX%3Dcw%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 07:41:04 GMT","Put the count down logic someplace else such as in your aggregation strategy&#010;&#010;On Wed, Apr 5, 2017 at 6:50 AM, andre.gilliam@icg360.com&#010;&lt;andre.gilliam@icg360.com&gt; wrote:&#010;&gt; I have a route similar to the following that uses the SQL Component:&#010;&gt;&#010;&gt; from(""sql:"" + QUERY + ""?outputType=StreamList"")&#010;&gt;                 .autoStartup(false)&#010;&gt;                 .routeId(getRouteId())&#010;&gt;                 .to(""log:stream"")&#010;&gt;                 .split(body(), new AggregationStrategy())&#010;&gt;                 .executorService(getThreadPool())&#010;&gt;                 .streaming()&#010;&gt;                 .parallelProcessing()&#010;&gt;                 .to(""log:postProcess"")&#010;&gt;                 .end()&#010;&gt;                 .process(new Processor() {&#010;&gt;             @Override&#010;&gt;             public void process(Exchange exchange) throws Exception {&#010;&gt;                 // stop Camel by signaling to the latch&#010;&gt;                 getCountDownLatch().countDown();&#010;&gt;             }&#010;&gt;         });&#010;&gt;&#010;&gt; I'm running into a problem and need direction. If the last streaming row is&#010;&gt; successfully processed by the route everything is fine. If the query returns&#010;&gt; 0 results or If the last streaming row has an exception while in the route&#010;&gt; it, the sql component will poll and never get into the route to hit the last&#010;&gt; process (which notifies the countDownLatch await and stops the process).&#010;&gt; This is the error that it produces when in that state:&#010;&gt;&#010;&gt; 00:33:37.150 [Camel (camel-1) thread #3 -&#010;&gt; sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW']&#010;&gt; WARN  o.s.j.support.SQLErrorCodesFactory - Error while extracting database&#010;&gt; name - falling back to empty error codes&#010;&gt; org.springframework.jdbc.support.MetaDataAccessException: Error while&#010;&gt; extracting DatabaseMetaData; nested exception is java.sql.SQLException:&#010;&gt; Invalid state, the Connection object is closed.&#010;&gt;         at&#010;&gt; org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:342)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:366)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.support.SQLErrorCodesFactory.getErrorCodes(SQLErrorCodesFactory.java:212)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.setDataSource(SQLErrorCodeSQLExceptionTranslator.java:134)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.&lt;init&gt;(SQLErrorCodeSQLExceptionTranslator.java:97)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.support.JdbcAccessor.getExceptionTranslator(JdbcAccessor.java:99)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:649)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662)&#010;&gt;         at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102)&#010;&gt;         at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)&#010;&gt;         at java.util.concurrent.FutureTask.runAndReset(Unknown Source)&#010;&gt;         at&#010;&gt; java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(Unknown&#010;&gt; Source)&#010;&gt;         at&#010;&gt; java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown&#010;&gt; Source)&#010;&gt;         at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)&#010;&gt;         at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)&#010;&gt;         at java.lang.Thread.run(Unknown Source)&#010;&gt; Caused by: java.sql.SQLException: Invalid state, the Connection object is&#010;&gt; closed.&#010;&gt;         at&#010;&gt; net.sourceforge.jtds.jdbc.JtdsConnection.checkOpen(JtdsConnection.java:1744)&#010;&gt;         at&#010;&gt; net.sourceforge.jtds.jdbc.JtdsConnection.getMetaData(JtdsConnection.java:2350)&#010;&gt;         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#010;&gt;         at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&#010;&gt;         at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&#010;&gt;         at java.lang.reflect.Method.invoke(Unknown Source)&#010;&gt;         at&#010;&gt; org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:126)&#010;&gt;         at&#010;&gt; org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:108)&#010;&gt;         at&#010;&gt; org.apache.tomcat.jdbc.pool.DisposableConnectionFacade.invoke(DisposableConnectionFacade.java:81)&#010;&gt;         at com.sun.proxy.$Proxy96.getMetaData(Unknown Source)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:331)&#010;&gt;         ... 17 common frames omitted&#010;&gt; 00:33:37.152 [Camel (camel-1) thread #3 -&#010;&gt; sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW']&#010;&gt; WARN  o.a.camel.component.sql.SqlConsumer - Consumer&#010;&gt; Consumer[sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW'?noop=true&amp;outputType=StreamList]&#010;&gt; failed polling endpoint:&#010;&gt; sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW'?noop=true&amp;outputType=StreamList.&#010;&gt; Will try again at next poll. Caused by:&#010;&gt; [org.springframework.jdbc.UncategorizedSQLException -&#010;&gt; PreparedStatementCallback; uncategorized SQLException for SQL [SELECT Id,&#010;&gt; QuoteId  FROM [dbo].[IPSImporter] WHERE Status = 'NEW']; SQL state [HY010];&#010;&gt; error code [0]; Invalid state, the Connection object is closed.; nested&#010;&gt; exception is java.sql.SQLException: Invalid state, the Connection object is&#010;&gt; closed.]&#010;&gt; org.springframework.jdbc.UncategorizedSQLException:&#010;&gt; PreparedStatementCallback; uncategorized SQLException for SQL [SELECT Id,&#010;&gt; QuoteId  FROM [dbo].[IPSImporter] WHERE Status = 'NEW']; SQL state [HY010];&#010;&gt; error code [0]; Invalid state, the Connection object is closed.; nested&#010;&gt; exception is java.sql.SQLException: Invalid state, the Connection object is&#010;&gt; closed.&#010;&gt;         at&#010;&gt; org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:84)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:649)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662)&#010;&gt;         at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102)&#010;&gt;         at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)&#010;&gt;         at java.util.concurrent.FutureTask.runAndReset(Unknown Source)&#010;&gt;         at&#010;&gt; java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(Unknown&#010;&gt; Source)&#010;&gt;         at&#010;&gt; java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown&#010;&gt; Source)&#010;&gt;         at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)&#010;&gt;         at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)&#010;&gt;         at java.lang.Thread.run(Unknown Source)&#010;&gt; Caused by: java.sql.SQLException: Invalid state, the Connection object is&#010;&gt; closed.&#010;&gt;         at&#010;&gt; net.sourceforge.jtds.jdbc.JtdsConnection.checkOpen(JtdsConnection.java:1744)&#010;&gt;         at&#010;&gt; net.sourceforge.jtds.jdbc.JtdsConnection.prepareStatement(JtdsConnection.java:2448)&#010;&gt;         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#010;&gt;         at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&#010;&gt;         at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&#010;&gt;         at java.lang.reflect.Method.invoke(Unknown Source)&#010;&gt;         at&#010;&gt; org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:126)&#010;&gt;         at&#010;&gt; org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:108)&#010;&gt;         at&#010;&gt; org.apache.tomcat.jdbc.pool.DisposableConnectionFacade.invoke(DisposableConnectionFacade.java:81)&#010;&gt;         at com.sun.proxy.$Proxy96.prepareStatement(Unknown Source)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.core.JdbcTemplate$SimplePreparedStatementCreator.createPreparedStatement(JdbcTemplate.java:1521)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:627)&#010;&gt;         ... 11 common frames omitted&#010;&gt; 00:33:37.653 [Camel (camel-1) thread #3 -&#010;&gt; sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW']&#010;&gt; WARN  o.a.camel.component.sql.SqlConsumer - Consumer&#010;&gt; Consumer[sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW'?noop=true&amp;outputType=StreamList]&#010;&gt; failed polling endpoint:&#010;&gt; sql://SELECT%20Id,%20QuoteId%20%20FROM%20%5Bdbo%5D.%5BIPSImporter%5D%20WHERE%20Status%20=%20'NEW'?noop=true&amp;outputType=StreamList.&#010;&gt; Will try again at next poll. Caused by:&#010;&gt; [org.springframework.jdbc.UncategorizedSQLException -&#010;&gt; PreparedStatementCallback; uncategorized SQLException for SQL [SELECT Id,&#010;&gt; QuoteId  FROM [dbo].[IPSImporter] WHERE Status = 'NEW']; SQL state [HY010];&#010;&gt; error code [0]; Invalid state, the Connection object is closed.; nested&#010;&gt; exception is java.sql.SQLException: Invalid state, the Connection object is&#010;&gt; closed.]&#010;&gt; org.springframework.jdbc.UncategorizedSQLException:&#010;&gt; PreparedStatementCallback; uncategorized SQLException for SQL [SELECT Id,&#010;&gt; QuoteId  FROM [dbo].[IPSImporter] WHERE Status = 'NEW']; SQL state [HY010];&#010;&gt; error code [0]; Invalid state, the Connection object is closed.; nested&#010;&gt; exception is java.sql.SQLException: Invalid state, the Connection object is&#010;&gt; closed.&#010;&gt;         at&#010;&gt; org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:84)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:649)&#010;&gt;         at&#010;&gt; org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:662)&#010;&gt;         at org.apache.camel.component.sql.SqlConsumer.poll(SqlConsumer.java:168)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:175)&#010;&gt;         at&#010;&gt; org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:102)&#010;&gt;         at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)&#010;&gt;         at java.util.concurrent.FutureTask.runAndReset(Unknown Source)&#010;&gt;         at&#010;&gt; java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(Unknown&#010;&gt; Source)&#010;&gt;         at&#010;&gt; java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown&#010;&gt; Source)&#010;&gt;         at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)&#010;&gt;         at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)&#010;&gt;         at java.lang.Thread.run(Unknown Source)&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Sql-Component-StreamList-Poll-tp5796939.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
87,88,Christian Schneider,jms component: Parameter destination.consumer.exclusive does not work,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C79e2f01a-5d73-da18-0ba9-588296a043e5%40die-schneider.net%3E,users,"Wed, 05 Apr 2017 07:29:07 GMT","Hi all,&#010;&#010;I am getting this exception when I try to create a consumer with a &#010;consumer.exclusive setting on the queue on camel 2.16.5 Any ideas? This &#010;used to work in older versions. I can provide an example or test if &#010;someone wants to dig into this.&#010;&#010;Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to &#010;resolve endpoint: jms://queue:queue1?destination.consumer.exclusive=true &#010;due to: There are 1 parameters that couldn't be set on the endpoint. &#010;Check the uri if the parameters are spelt correctly and that they are &#010;properties of the endpoint. Unknown &#010;parameters=[{destination.consumer.exclusive=true}]&#010;&#010;Best&#010;&#010;Christian&#010;&#010;-- &#010;Christian Schneider&#010;http://www.liquid-reality.de&#010;&#010;Open Source Architect&#010;http://www.talend.com&#010;&#010;&#010;"
88,89,Thomas Diesler,WildFy-Camel-4.6.0 released,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CC85C3A7E-7128-4D67-BC45-743CA76E8305%40gmail.com%3E,users,"Wed, 05 Apr 2017 08:47:54 GMT","Dear Folks,&#010;&#010;WildFly-Camel 4.6.0 provides Camel-2.18.3 integration with WildFly-10.1.0&#010;&#010;This is another upgrade release for supported Camel components, which now brings the total&#010;up to 112, with 35 components still planned &lt;https://github.com/wildfly-extras/wildfly-camel/blob/4.6.0/catalog/src/main/resources/component.roadmap#L115&gt;&#010;for future releases. All data formats and languages are fully supported. &#010;&#010;We also upgraded cloud integration to OpenShift-3.4 and had strong focus on the AIX and Windows&#010;platform. This is also the first release with makes every component, data format and language&#010;available as WildFly-Swarm Fraction &lt;https://issues.jboss.org/browse/SWARM-1079&gt;.  &#010;&#010;&#010;Additional components in the supported set &lt;http://wildfly-extras.github.io/wildfly-camel/#_camel_components&gt;&#010;are:&#010;&#010;* camel-amq&#010;* camel-rabitmq&#010;* camel-sjms-batch&#010;* camel-snmp&#010;* camel-splunk&#010;* camel-spring-batch&#010;* camel-spring-integration&#010;* camel-spring-ldap&#010;* camel-spring-redis&#010;&#010;Component upgrades include&#010;&#010;* Camel-2.18.3&#010;* HawtIO-1.5.0&#010;* OpenShift-3.4&#010;&#010;In addition to that, we also resolved a number of other tasks and bugfixes &lt;https://github.com/wildfly-extras/wildfly-camel/blob/master/docs/Changelog.md&gt;.&#010;&#010;For details please see the 4.6.0 Milestone &lt;https://github.com/wildfly-extras/wildfly-camel/issues?q=milestone:4.6.0&gt;.&#010;&#010;Enjoy&#010;&#010;"
89,90,Anton,  Re: WildFy-Camel-4.6.0 released,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAD44pJC_H2qMthwFUx9%2BRAFRjKgZVR%3Dv_N2Bs1XmrH1CX_LzuQ%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 08:53:33 GMT","Well done!&#010;&#010;Congrats!&#010;&#010;On 5 April 2017 at 10:47, Thomas Diesler &lt;thomas.diesler@gmail.com&gt; wrote:&#010;&#010;&gt; Dear Folks,&#010;&gt;&#010;&gt; WildFly-Camel 4.6.0 provides Camel-2.18.3 integration with WildFly-10.1.0&#010;&gt;&#010;&gt; This is another upgrade release for supported Camel components, which now&#010;&gt; brings the total up to 112, with 35 components still planned &lt;&#010;&gt; https://github.com/wildfly-extras/wildfly-camel/blob/4.6.&#010;&gt; 0/catalog/src/main/resources/component.roadmap#L115&gt; for future releases.&#010;&gt; All data formats and languages are fully supported.&#010;&gt;&#010;&gt; We also upgraded cloud integration to OpenShift-3.4 and had strong focus&#010;&gt; on the AIX and Windows platform. This is also the first release with makes&#010;&gt; every component, data format and language available as WildFly-Swarm&#010;&gt; Fraction &lt;https://issues.jboss.org/browse/SWARM-1079&gt;.&#010;&gt;&#010;&gt; Additional components in the supported set &lt;http://wildfly-extras.github.&#010;&gt; io/wildfly-camel/#_camel_components&gt; are:&#010;&gt;&#010;&gt; * camel-amq&#010;&gt; * camel-rabitmq&#010;&gt; * camel-sjms-batch&#010;&gt; * camel-snmp&#010;&gt; * camel-splunk&#010;&gt; * camel-spring-batch&#010;&gt; * camel-spring-integration&#010;&gt; * camel-spring-ldap&#010;&gt; * camel-spring-redis&#010;&gt;&#010;&gt; Component upgrades include&#010;&gt;&#010;&gt; * Camel-2.18.3&#010;&gt; * HawtIO-1.5.0&#010;&gt; * OpenShift-3.4&#010;&gt;&#010;&gt; In addition to that, we also resolved a number of other tasks and bugfixes&#010;&gt; &lt;https://github.com/wildfly-extras/wildfly-camel/blob/&#010;&gt; master/docs/Changelog.md&gt;.&#010;&gt;&#010;&gt; For details please see the 4.6.0 Milestone &lt;https://github.com/wildfly-&#010;&gt; extras/wildfly-camel/issues?q=milestone:4.6.0&gt;.&#010;&gt;&#010;&gt; Enjoy&#010;&gt;&#010;&#010;"
90,91,"Meyfarth, Frank",camel-cmis: sessionhandling not working as expected,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CD50A96E8.DC60%25meyfarth%40adesso.de%3E,users,"Wed, 05 Apr 2017 10:43:23 GMT","Hi everyone,&#013;&#010;&#013;&#010;Maybe I’m just to dumb to get it, but I believe I have found a bug in&#013;&#010;camel-cmis.&#013;&#010;&#013;&#010;I use the following URI within a CMIS producer to send a query to the CMIS&#013;&#010;system.&#013;&#010;&#013;&#010;cmis:http://rabobank-air-dev01.test-server.ag:8080/alfresco/api/-default-/p&#013;&#010;ublic/cmis/versions/1.1/atom?username=admin&amp;password=admin&amp;repositoryId=-de&#013;&#010;fault-&amp;queryMode=true&#013;&#010;&#013;&#010;As you can see, the server credentials are present as options within the&#013;&#010;URI.&#013;&#010;&#013;&#010;Unfortunately I always get HTTP code 401 Unauthorized. Although the&#013;&#010;credentials are correct and verified, off course.&#013;&#010;&#013;&#010;I already debugged into the component and found the following code in&#013;&#010;org.apache.camel.component.cmis.CMISComponent:&#013;&#010;&#013;&#010;...&#013;&#010;00 protected Endpoint createEndpoint(String uri, final String remaining,&#013;&#010;final Map&lt;String, Object&gt; parameters) throws Exception {&#013;&#010;01     boolean queryMode = removeQueryMode(parameters);&#013;&#010;02 &#013;&#010;03     CMISSessionFacade sessionFacade = new CMISSessionFacade(remaining);&#013;&#010;04     setProperties(sessionFacade, parameters);&#013;&#010;05 &#013;&#010;06     CMISEndpoint endpoint = new CMISEndpoint(uri, this, new&#013;&#010;CMISSessionFacadeFactory() {&#013;&#010;07         @Override&#013;&#010;08         public CMISSessionFacade create() throws Exception {&#013;&#010;09             CMISSessionFacade sessionFacade = new&#013;&#010;CMISSessionFacade(remaining);&#013;&#010;10             setProperties(sessionFacade, parameters);&#013;&#010;11 &#013;&#010;12             return sessionFacade;&#013;&#010;13         }&#013;&#010;14     });&#013;&#010;15 &#013;&#010;16     endpoint.setQueryMode(queryMode);&#013;&#010;17 &#013;&#010;18     return endpoint;&#013;&#010;19 }&#013;&#010;&#013;&#010;...&#013;&#010;&#013;&#010;At the beginning of the method all options are still present in the&#013;&#010;„parameters“ map. After the session facade has been created in line 03 of&#013;&#010;the method its parameters get set by calling „setProperties“. This works&#013;&#010;fine for the created session facade. But „setProperties“ removes the&#013;&#010;properties which have been successfully set from the „parameters“ map.&#013;&#010;Therefore parameters „username“ and „password“ are no longer present after&#013;&#010;execution of line 04. Later, when the „create“ method of the anonymous&#013;&#010;CMISEndpoint created in line 06 gets called, these are still not present&#013;&#010;and therefore NULL. And this is what finally leads to the 401 return code.&#013;&#010;&#013;&#010;Either I use the Endpoint in a wrong way. In that case probably someone&#013;&#010;can explain to me how to use it.&#013;&#010;Or this is actually a bug. In this case I could offer fixing or someone&#013;&#010;else does it. Which would be appreciated.&#013;&#010;&#013;&#010;Best regards and thanks for your help&#013;&#010;&#013;&#010;Frank&#013;&#010;&#013;&#010;&#013;&#010;&#013;&#010;&#013;&#010;-- &#013;&#010;Frank Meyfarth     &#013;&#010;adesso AG                     T +49 231 7000-2380&#013;&#010;Stockholmer Allee 20          F +49 231 7000-1000&#013;&#010;44269 Dortmund                E meyfarth@adesso.de&#013;&#010;                              www.adesso.de &lt;http://www.adesso.de&gt;&#013;&#010;                              blog.adesso.de &lt;http://blog.adesso.de&gt;&#013;&#010;&#013;&#010;&#013;&#010;-------------------------------------------------------&#013;&#010;     &gt;&gt;&gt; business. people. technology. &lt;&lt;&lt;&#013;&#010;-------------------------------------------------------&#013;&#010;&#013;&#010;adesso AG mit Sitz in Dortmund&#013;&#010;Vorstand: Michael Kenfenheuer (Vors.), Christoph Junge, Andreas Prenneis&#013;&#010;Vorsitzender des Aufsichtsrates: Prof. Dr. Volker Gruhn&#013;&#010;Amtsgericht Dortmund HRB 20663&#013;&#010;&#013;&#010;https://www.wirmachendasjetzt.de/de/?utm_source=Banner%20&amp;utm_medium=E-Mail&amp;utm_campaign=DGT&#013;&#010;"
91,92,Andrea Cosentino,  Re: camel-cmis: sessionhandling not working as expected,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C788621682.305832.1491389131308%40mail.yahoo.com%3E,users,"Wed, 05 Apr 2017 10:45:31 GMT","What is the camel version you're currently using? --Andrea Cosentino ----------------------------------Apache&#010;Camel PMC MemberApache Karaf CommitterApache Servicemix PMC MemberEmail: ancosen1985@yahoo.comTwitter:&#010;@oscerd2Github: oscerd &#010;&#010;    On Wednesday, April 5, 2017 12:43 PM, ""Meyfarth, Frank"" &lt;meyfarth@adesso.de&gt; wrote:&#010; &#010;&#010; Hi everyone,&#010;&#010;Maybe I’m just to dumb to get it, but I believe I have found a bug in&#010;camel-cmis.&#010;&#010;I use the following URI within a CMIS producer to send a query to the CMIS&#010;system.&#010;&#010;cmis:http://rabobank-air-dev01.test-server.ag:8080/alfresco/api/-default-/p&#010;ublic/cmis/versions/1.1/atom?username=admin&amp;password=admin&amp;repositoryId=-de&#010;fault-&amp;queryMode=true&#010;&#010;As you can see, the server credentials are present as options within the&#010;URI.&#010;&#010;Unfortunately I always get HTTP code 401 Unauthorized. Although the&#010;credentials are correct and verified, off course.&#010;&#010;I already debugged into the component and found the following code in&#010;org.apache.camel.component.cmis.CMISComponent:&#010;&#010;...&#010;00 protected Endpoint createEndpoint(String uri, final String remaining,&#010;final Map&lt;String, Object&gt; parameters) throws Exception {&#010;01    boolean queryMode = removeQueryMode(parameters);&#010;02 &#010;03    CMISSessionFacade sessionFacade = new CMISSessionFacade(remaining);&#010;04    setProperties(sessionFacade, parameters);&#010;05 &#010;06    CMISEndpoint endpoint = new CMISEndpoint(uri, this, new&#010;CMISSessionFacadeFactory() {&#010;07        @Override&#010;08        public CMISSessionFacade create() throws Exception {&#010;09            CMISSessionFacade sessionFacade = new&#010;CMISSessionFacade(remaining);&#010;10            setProperties(sessionFacade, parameters);&#010;11 &#010;12            return sessionFacade;&#010;13        }&#010;14    });&#010;15 &#010;16    endpoint.setQueryMode(queryMode);&#010;17 &#010;18    return endpoint;&#010;19 }&#010;&#010;...&#010;&#010;At the beginning of the method all options are still present in the&#010;„parameters“ map. After the session facade has been created in line 03 of&#010;the method its parameters get set by calling „setProperties“. This works&#010;fine for the created session facade. But „setProperties“ removes the&#010;properties which have been successfully set from the „parameters“ map.&#010;Therefore parameters „username“ and „password“ are no longer present after&#010;execution of line 04. Later, when the „create“ method of the anonymous&#010;CMISEndpoint created in line 06 gets called, these are still not present&#010;and therefore NULL. And this is what finally leads to the 401 return code.&#010;&#010;Either I use the Endpoint in a wrong way. In that case probably someone&#010;can explain to me how to use it.&#010;Or this is actually a bug. In this case I could offer fixing or someone&#010;else does it. Which would be appreciated.&#010;&#010;Best regards and thanks for your help&#010;&#010;Frank&#010;&#010;&#010;&#010;&#010;-- &#010;Frank Meyfarth    &#010;adesso AG                    T +49 231 7000-2380&#010;Stockholmer Allee 20          F +49 231 7000-1000&#010;44269 Dortmund                E meyfarth@adesso.de&#010;                              www.adesso.de &lt;http://www.adesso.de&gt;&#010;                              blog.adesso.de &lt;http://blog.adesso.de&gt;&#010;&#010;&#010;-------------------------------------------------------&#010;    &gt;&gt;&gt; business. people. technology. &lt;&lt;&lt;&#010;-------------------------------------------------------&#010;&#010;adesso AG mit Sitz in Dortmund&#010;Vorstand: Michael Kenfenheuer (Vors.), Christoph Junge, Andreas Prenneis&#010;Vorsitzender des Aufsichtsrates: Prof. Dr. Volker Gruhn&#010;Amtsgericht Dortmund HRB 20663&#010;&#010;https://www.wirmachendasjetzt.de/de/?utm_source=Banner%20&amp;utm_medium=E-Mail&amp;utm_campaign=DGT&#010;&#010;&#010;   &#010;"
92,93,"Meyfarth, Frank",    Re: camel-cmis: sessionhandling not working as expected,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CD50A9E54.DC63%25meyfarth%40adesso.de%3E,users,"Wed, 05 Apr 2017 11:15:54 GMT","2.17.0.redhat-630187&#013;&#010;&#013;&#010;-- &#013;&#010;Frank Meyfarth     &#013;&#010;adesso AG                     T +49 231 7000-2380&#013;&#010;Stockholmer Allee 20          F +49 231 7000-1000&#013;&#010;44269 Dortmund                E meyfarth@adesso.de&#013;&#010;                              www.adesso.de &lt;http://www.adesso.de&gt;&#013;&#010;                              blog.adesso.de &lt;http://blog.adesso.de&gt;&#013;&#010;&#013;&#010;&#013;&#010;&#013;&#010;&#013;&#010;Am 05.04.17, 12:45 schrieb ""Andrea Cosentino"" unter&#013;&#010;&lt;ancosen1985@yahoo.com.INVALID&gt;:&#013;&#010;&#013;&#010;&gt;What is the camel version you're currently using? --Andrea Cosentino&#013;&#010;&gt;----------------------------------Apache Camel PMC MemberApache Karaf&#013;&#010;&gt;CommitterApache Servicemix PMC MemberEmail: ancosen1985@yahoo.comTwitter:&#013;&#010;&gt;@oscerd2Github: oscerd&#013;&#010;&gt;&#013;&#010;&gt;    On Wednesday, April 5, 2017 12:43 PM, ""Meyfarth, Frank""&#013;&#010;&gt;&lt;meyfarth@adesso.de&gt; wrote:&#013;&#010;&gt; &#013;&#010;&gt;&#013;&#010;&gt; Hi everyone,&#013;&#010;&gt;&#013;&#010;&gt;Maybe I’m just to dumb to get it, but I believe I have found a bug in&#013;&#010;&gt;camel-cmis.&#013;&#010;&gt;&#013;&#010;&gt;I use the following URI within a CMIS producer to send a query to the CMIS&#013;&#010;&gt;system.&#013;&#010;&gt;&#013;&#010;&gt;cmis:http://rabobank-air-dev01.test-server.ag:8080/alfresco/api/-default-/&#013;&#010;&gt;p&#013;&#010;&gt;ublic/cmis/versions/1.1/atom?username=admin&amp;password=admin&amp;repositoryId=-d&#013;&#010;&gt;e&#013;&#010;&gt;fault-&amp;queryMode=true&#013;&#010;&gt;&#013;&#010;&gt;As you can see, the server credentials are present as options within the&#013;&#010;&gt;URI.&#013;&#010;&gt;&#013;&#010;&gt;Unfortunately I always get HTTP code 401 Unauthorized. Although the&#013;&#010;&gt;credentials are correct and verified, off course.&#013;&#010;&gt;&#013;&#010;&gt;I already debugged into the component and found the following code in&#013;&#010;&gt;org.apache.camel.component.cmis.CMISComponent:&#013;&#010;&gt;&#013;&#010;&gt;...&#013;&#010;&gt;00 protected Endpoint createEndpoint(String uri, final String remaining,&#013;&#010;&gt;final Map&lt;String, Object&gt; parameters) throws Exception {&#013;&#010;&gt;01    boolean queryMode = removeQueryMode(parameters);&#013;&#010;&gt;02 &#013;&#010;&gt;03    CMISSessionFacade sessionFacade = new CMISSessionFacade(remaining);&#013;&#010;&gt;04    setProperties(sessionFacade, parameters);&#013;&#010;&gt;05 &#013;&#010;&gt;06    CMISEndpoint endpoint = new CMISEndpoint(uri, this, new&#013;&#010;&gt;CMISSessionFacadeFactory() {&#013;&#010;&gt;07        @Override&#013;&#010;&gt;08        public CMISSessionFacade create() throws Exception {&#013;&#010;&gt;09            CMISSessionFacade sessionFacade = new&#013;&#010;&gt;CMISSessionFacade(remaining);&#013;&#010;&gt;10            setProperties(sessionFacade, parameters);&#013;&#010;&gt;11 &#013;&#010;&gt;12            return sessionFacade;&#013;&#010;&gt;13        }&#013;&#010;&gt;14    });&#013;&#010;&gt;15 &#013;&#010;&gt;16    endpoint.setQueryMode(queryMode);&#013;&#010;&gt;17 &#013;&#010;&gt;18    return endpoint;&#013;&#010;&gt;19 }&#013;&#010;&gt;&#013;&#010;&gt;...&#013;&#010;&gt;&#013;&#010;&gt;At the beginning of the method all options are still present in the&#013;&#010;&gt;„parameters“ map. After the session facade has been created in line 03 of&#013;&#010;&gt;the method its parameters get set by calling „setProperties“. This works&#013;&#010;&gt;fine for the created session facade. But „setProperties“ removes the&#013;&#010;&gt;properties which have been successfully set from the „parameters“ map.&#013;&#010;&gt;Therefore parameters „username“ and „password“ are no longer present after&#013;&#010;&gt;execution of line 04. Later, when the „create“ method of the anonymous&#013;&#010;&gt;CMISEndpoint created in line 06 gets called, these are still not present&#013;&#010;&gt;and therefore NULL. And this is what finally leads to the 401 return code.&#013;&#010;&gt;&#013;&#010;&gt;Either I use the Endpoint in a wrong way. In that case probably someone&#013;&#010;&gt;can explain to me how to use it.&#013;&#010;&gt;Or this is actually a bug. In this case I could offer fixing or someone&#013;&#010;&gt;else does it. Which would be appreciated.&#013;&#010;&gt;&#013;&#010;&gt;Best regards and thanks for your help&#013;&#010;&gt;&#013;&#010;&gt;Frank&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;-- &#013;&#010;&gt;Frank Meyfarth    &#013;&#010;&gt;adesso AG                    T +49 231 7000-2380&#013;&#010;&gt;Stockholmer Allee 20          F +49 231 7000-1000&#013;&#010;&gt;44269 Dortmund                E meyfarth@adesso.de&#013;&#010;&gt;                              www.adesso.de &lt;http://www.adesso.de&gt;&#013;&#010;&gt;                              blog.adesso.de &lt;http://blog.adesso.de&gt;&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;-------------------------------------------------------&#013;&#010;&gt;    &gt;&gt;&gt; business. people. technology. &lt;&lt;&lt;&#013;&#010;&gt;-------------------------------------------------------&#013;&#010;&gt;&#013;&#010;&gt;adesso AG mit Sitz in Dortmund&#013;&#010;&gt;Vorstand: Michael Kenfenheuer (Vors.), Christoph Junge, Andreas Prenneis&#013;&#010;&gt;Vorsitzender des Aufsichtsrates: Prof. Dr. Volker Gruhn&#013;&#010;&gt;Amtsgericht Dortmund HRB 20663&#013;&#010;&gt;&#013;&#010;&gt;https://www.wirmachendasjetzt.de/de/?utm_source=Banner%20&amp;utm_medium=E-Mai&#013;&#010;&gt;l&amp;utm_campaign=DGT&#013;&#010;&gt;&#013;&#010;&gt;&#013;&#010;&gt;   &#013;&#010;&#013;&#010;&#013;&#010;-------------------------------------------------------&#013;&#010;     &gt;&gt;&gt; business. people. technology. &lt;&lt;&lt;&#013;&#010;-------------------------------------------------------&#013;&#010;&#013;&#010;adesso AG mit Sitz in Dortmund&#013;&#010;Vorstand: Michael Kenfenheuer (Vors.), Christoph Junge, Andreas Prenneis&#013;&#010;Vorsitzender des Aufsichtsrates: Prof. Dr. Volker Gruhn&#013;&#010;Amtsgericht Dortmund HRB 20663&#013;&#010;&#013;&#010;https://www.wirmachendasjetzt.de/de/?utm_source=Banner%20&amp;utm_medium=E-Mail&amp;utm_campaign=DGT&#013;&#010;"
93,94,Claus Ibsen,  Re: camel-cmis: sessionhandling not working as expected,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNm-fh3XSF6LXCzwbV%2By1-8%3DWEfzgsqO9%3Deh3jqVZzsryw%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 11:19:29 GMT","Try with newer release as I think we have fixed something in this&#010;component, I kinda recall something about this.&#010;&#010;On Wed, Apr 5, 2017 at 12:43 PM, Meyfarth, Frank &lt;meyfarth@adesso.de&gt; wrote:&#010;&gt; Hi everyone,&#010;&gt;&#010;&gt; Maybe I’m just to dumb to get it, but I believe I have found a bug in&#010;&gt; camel-cmis.&#010;&gt;&#010;&gt; I use the following URI within a CMIS producer to send a query to the CMIS&#010;&gt; system.&#010;&gt;&#010;&gt; cmis:http://rabobank-air-dev01.test-server.ag:8080/alfresco/api/-default-/p&#010;&gt; ublic/cmis/versions/1.1/atom?username=admin&amp;password=admin&amp;repositoryId=-de&#010;&gt; fault-&amp;queryMode=true&#010;&gt;&#010;&gt; As you can see, the server credentials are present as options within the&#010;&gt; URI.&#010;&gt;&#010;&gt; Unfortunately I always get HTTP code 401 Unauthorized. Although the&#010;&gt; credentials are correct and verified, off course.&#010;&gt;&#010;&gt; I already debugged into the component and found the following code in&#010;&gt; org.apache.camel.component.cmis.CMISComponent:&#010;&gt;&#010;&gt; ...&#010;&gt; 00 protected Endpoint createEndpoint(String uri, final String remaining,&#010;&gt; final Map&lt;String, Object&gt; parameters) throws Exception {&#010;&gt; 01     boolean queryMode = removeQueryMode(parameters);&#010;&gt; 02&#010;&gt; 03     CMISSessionFacade sessionFacade = new CMISSessionFacade(remaining);&#010;&gt; 04     setProperties(sessionFacade, parameters);&#010;&gt; 05&#010;&gt; 06     CMISEndpoint endpoint = new CMISEndpoint(uri, this, new&#010;&gt; CMISSessionFacadeFactory() {&#010;&gt; 07         @Override&#010;&gt; 08         public CMISSessionFacade create() throws Exception {&#010;&gt; 09             CMISSessionFacade sessionFacade = new&#010;&gt; CMISSessionFacade(remaining);&#010;&gt; 10             setProperties(sessionFacade, parameters);&#010;&gt; 11&#010;&gt; 12             return sessionFacade;&#010;&gt; 13         }&#010;&gt; 14     });&#010;&gt; 15&#010;&gt; 16     endpoint.setQueryMode(queryMode);&#010;&gt; 17&#010;&gt; 18     return endpoint;&#010;&gt; 19 }&#010;&gt;&#010;&gt; ...&#010;&gt;&#010;&gt; At the beginning of the method all options are still present in the&#010;&gt; „parameters“ map. After the session facade has been created in line 03 of&#010;&gt; the method its parameters get set by calling „setProperties“. This works&#010;&gt; fine for the created session facade. But „setProperties“ removes the&#010;&gt; properties which have been successfully set from the „parameters“ map.&#010;&gt; Therefore parameters „username“ and „password“ are no longer present after&#010;&gt; execution of line 04. Later, when the „create“ method of the anonymous&#010;&gt; CMISEndpoint created in line 06 gets called, these are still not present&#010;&gt; and therefore NULL. And this is what finally leads to the 401 return code.&#010;&gt;&#010;&gt; Either I use the Endpoint in a wrong way. In that case probably someone&#010;&gt; can explain to me how to use it.&#010;&gt; Or this is actually a bug. In this case I could offer fixing or someone&#010;&gt; else does it. Which would be appreciated.&#010;&gt;&#010;&gt; Best regards and thanks for your help&#010;&gt;&#010;&gt; Frank&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Frank Meyfarth&#010;&gt; adesso AG                     T +49 231 7000-2380&#010;&gt; Stockholmer Allee 20          F +49 231 7000-1000&#010;&gt; 44269 Dortmund                E meyfarth@adesso.de&#010;&gt;                               www.adesso.de &lt;http://www.adesso.de&gt;&#010;&gt;                               blog.adesso.de &lt;http://blog.adesso.de&gt;&#010;&gt;&#010;&gt;&#010;&gt; -------------------------------------------------------&#010;&gt;      &gt;&gt;&gt; business. people. technology. &lt;&lt;&lt;&#010;&gt; -------------------------------------------------------&#010;&gt;&#010;&gt; adesso AG mit Sitz in Dortmund&#010;&gt; Vorstand: Michael Kenfenheuer (Vors.), Christoph Junge, Andreas Prenneis&#010;&gt; Vorsitzender des Aufsichtsrates: Prof. Dr. Volker Gruhn&#010;&gt; Amtsgericht Dortmund HRB 20663&#010;&gt;&#010;&gt; https://www.wirmachendasjetzt.de/de/?utm_source=Banner%20&amp;utm_medium=E-Mail&amp;utm_campaign=DGT&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
94,95,,Re: How long do the camel headers live in routes?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNm-fh3XSF6LXCzwbV%2By1-8%3DWEfzgsqO9%3Deh3jqVZzsryw%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 11:19:29 GMT","Try with newer release as I think we have fixed something in this&#010;component, I kinda recall something about this.&#010;&#010;On Wed, Apr 5, 2017 at 12:43 PM, Meyfarth, Frank &lt;meyfarth@adesso.de&gt; wrote:&#010;&gt; Hi everyone,&#010;&gt;&#010;&gt; Maybe I’m just to dumb to get it, but I believe I have found a bug in&#010;&gt; camel-cmis.&#010;&gt;&#010;&gt; I use the following URI within a CMIS producer to send a query to the CMIS&#010;&gt; system.&#010;&gt;&#010;&gt; cmis:http://rabobank-air-dev01.test-server.ag:8080/alfresco/api/-default-/p&#010;&gt; ublic/cmis/versions/1.1/atom?username=admin&amp;password=admin&amp;repositoryId=-de&#010;&gt; fault-&amp;queryMode=true&#010;&gt;&#010;&gt; As you can see, the server credentials are present as options within the&#010;&gt; URI.&#010;&gt;&#010;&gt; Unfortunately I always get HTTP code 401 Unauthorized. Although the&#010;&gt; credentials are correct and verified, off course.&#010;&gt;&#010;&gt; I already debugged into the component and found the following code in&#010;&gt; org.apache.camel.component.cmis.CMISComponent:&#010;&gt;&#010;&gt; ...&#010;&gt; 00 protected Endpoint createEndpoint(String uri, final String remaining,&#010;&gt; final Map&lt;String, Object&gt; parameters) throws Exception {&#010;&gt; 01     boolean queryMode = removeQueryMode(parameters);&#010;&gt; 02&#010;&gt; 03     CMISSessionFacade sessionFacade = new CMISSessionFacade(remaining);&#010;&gt; 04     setProperties(sessionFacade, parameters);&#010;&gt; 05&#010;&gt; 06     CMISEndpoint endpoint = new CMISEndpoint(uri, this, new&#010;&gt; CMISSessionFacadeFactory() {&#010;&gt; 07         @Override&#010;&gt; 08         public CMISSessionFacade create() throws Exception {&#010;&gt; 09             CMISSessionFacade sessionFacade = new&#010;&gt; CMISSessionFacade(remaining);&#010;&gt; 10             setProperties(sessionFacade, parameters);&#010;&gt; 11&#010;&gt; 12             return sessionFacade;&#010;&gt; 13         }&#010;&gt; 14     });&#010;&gt; 15&#010;&gt; 16     endpoint.setQueryMode(queryMode);&#010;&gt; 17&#010;&gt; 18     return endpoint;&#010;&gt; 19 }&#010;&gt;&#010;&gt; ...&#010;&gt;&#010;&gt; At the beginning of the method all options are still present in the&#010;&gt; „parameters“ map. After the session facade has been created in line 03 of&#010;&gt; the method its parameters get set by calling „setProperties“. This works&#010;&gt; fine for the created session facade. But „setProperties“ removes the&#010;&gt; properties which have been successfully set from the „parameters“ map.&#010;&gt; Therefore parameters „username“ and „password“ are no longer present after&#010;&gt; execution of line 04. Later, when the „create“ method of the anonymous&#010;&gt; CMISEndpoint created in line 06 gets called, these are still not present&#010;&gt; and therefore NULL. And this is what finally leads to the 401 return code.&#010;&gt;&#010;&gt; Either I use the Endpoint in a wrong way. In that case probably someone&#010;&gt; can explain to me how to use it.&#010;&gt; Or this is actually a bug. In this case I could offer fixing or someone&#010;&gt; else does it. Which would be appreciated.&#010;&gt;&#010;&gt; Best regards and thanks for your help&#010;&gt;&#010;&gt; Frank&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Frank Meyfarth&#010;&gt; adesso AG                     T +49 231 7000-2380&#010;&gt; Stockholmer Allee 20          F +49 231 7000-1000&#010;&gt; 44269 Dortmund                E meyfarth@adesso.de&#010;&gt;                               www.adesso.de &lt;http://www.adesso.de&gt;&#010;&gt;                               blog.adesso.de &lt;http://blog.adesso.de&gt;&#010;&gt;&#010;&gt;&#010;&gt; -------------------------------------------------------&#010;&gt;      &gt;&gt;&gt; business. people. technology. &lt;&lt;&lt;&#010;&gt; -------------------------------------------------------&#010;&gt;&#010;&gt; adesso AG mit Sitz in Dortmund&#010;&gt; Vorstand: Michael Kenfenheuer (Vors.), Christoph Junge, Andreas Prenneis&#010;&gt; Vorsitzender des Aufsichtsrates: Prof. Dr. Volker Gruhn&#010;&gt; Amtsgericht Dortmund HRB 20663&#010;&gt;&#010;&gt; https://www.wirmachendasjetzt.de/de/?utm_source=Banner%20&amp;utm_medium=E-Mail&amp;utm_campaign=DGT&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
95,96,Amruta Jawlekar,  Re: How long do the camel headers live in routes?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491398506540-5797014.post%40n5.nabble.com%3E,users,"Wed, 05 Apr 2017 13:21:46 GMT","I have similar requirement. I am setting property in the starting route, and&#010;I need to get that property value at the end of the route and compare it&#010;with its value in order to forward to different routes.&#010;&#010;Basically, I have different routes to poll to different folder location, the&#010;middle processing of files is same and end route is different. I need to see&#010;from which route the exchange has come, so as to forward to appropriate&#010;route at the end.&#010;&#010;I tried both -&#010;1)&#010;&lt;camel:setHeader headerName=""routeId""&gt;&#010;&#009;&lt;camel:simple&gt;${in.headers.ROUTE_ID}&lt;/camel:simple&gt;&#010;&lt;/camel:setHeader&gt;&#010;&#010;and then inside choice - &lt;camel:simple&gt;${header.routeId} ==&#010;'value'&lt;/camel:simple&gt;&#010;&#010;&#010;2)&#010;&lt;camel:simple&gt;${property.ROUTE_ID} == 'value' &lt;/camel:simple&gt;&#010;&#010;In both the cases it is not able to retrieve the value, as this condition is&#010;never getting true and the expected route is not getting executed.&#010;&#010;Could you please help?&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/How-long-do-the-camel-headers-live-in-routes-tp474477p5797014.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
96,97,Quinn Stevenson,    Re: How long do the camel headers live in routes?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C631F4427-DCBA-4397-BBC5-3516D7B2E27C%40pronoia-solutions.com%3E,users,"Wed, 05 Apr 2017 14:08:22 GMT","The DSL for 1 looks OK.  The DSL for option 2 should be using exchangeProperty.ROUTE_ID instead&#010;of property.ROUTE_ID if your Camel version is 2.15 or later.&#010;&#010;Can you share routes so we can see the details?&#010;&#010;&#010;&gt; On Apr 5, 2017, at 7:21 AM, Amruta Jawlekar &lt;amruta.j@ignitiv.com&gt; wrote:&#010;&gt; &#010;&gt; I have similar requirement. I am setting property in the starting route, and&#010;&gt; I need to get that property value at the end of the route and compare it&#010;&gt; with its value in order to forward to different routes.&#010;&gt; &#010;&gt; Basically, I have different routes to poll to different folder location, the&#010;&gt; middle processing of files is same and end route is different. I need to see&#010;&gt; from which route the exchange has come, so as to forward to appropriate&#010;&gt; route at the end.&#010;&gt; &#010;&gt; I tried both -&#010;&gt; 1)&#010;&gt; &lt;camel:setHeader headerName=""routeId""&gt;&#010;&gt; &#009;&lt;camel:simple&gt;${in.headers.ROUTE_ID}&lt;/camel:simple&gt;&#010;&gt; &lt;/camel:setHeader&gt;&#010;&gt; &#010;&gt; and then inside choice - &lt;camel:simple&gt;${header.routeId} ==&#010;&gt; 'value'&lt;/camel:simple&gt;&#010;&gt; &#010;&gt; &#010;&gt; 2)&#010;&gt; &lt;camel:simple&gt;${property.ROUTE_ID} == 'value' &lt;/camel:simple&gt;&#010;&gt; &#010;&gt; In both the cases it is not able to retrieve the value, as this condition is&#010;&gt; never getting true and the expected route is not getting executed.&#010;&gt; &#010;&gt; Could you please help?&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/How-long-do-the-camel-headers-live-in-routes-tp474477p5797014.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;"
97,98,Abhishek.Jha09,Updating hystrix configuration at runtime,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491410875656-5797025.post%40n5.nabble.com%3E,users,"Wed, 05 Apr 2017 16:47:55 GMT",Is there a way to update hystrix configuration at runtime? I am using Java&#010;DSL to create route and referring to a hystrix configuration bean in&#010;SimpleRegistry. Nothing seems to change when I modify this bean and then do&#010;camelContext.addRouteDefinition().&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Updating-hystrix-configuration-at-runtime-tp5797025.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
98,99,,Camel Not Sending Objects in Headers to RabbitMQ,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491410875656-5797025.post%40n5.nabble.com%3E,users,"Wed, 05 Apr 2017 16:47:55 GMT",Is there a way to update hystrix configuration at runtime? I am using Java&#010;DSL to create route and referring to a hystrix configuration bean in&#010;SimpleRegistry. Nothing seems to change when I modify this bean and then do&#010;camelContext.addRouteDefinition().&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Updating-hystrix-configuration-at-runtime-tp5797025.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
99,100,Caleb Skidmore,  Camel Not Sending Objects in Headers to RabbitMQ,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C2025742436.608379.1491411602072%40mail.yahoo.com%3E,users,"Wed, 05 Apr 2017 17:00:02 GMT","Hello,&#010;&#010;When I set a header as an object and route it to RabbitMQ, the header does not arrive.  For&#010;instance:&#010;&#010;List&lt;String&gt; testData = new ArrayList&lt;&gt;();&#010;testData.add(""test"");&#010;testData.add(""data"");&#010;exchange.getIn().setHeader(""ObjectHeader"", testData);&#010;exchange.getIn().setHeader(""StringHeader"", testData.toString());&#010;&#010;When I check the headers in RabbitMQ, the StringHeader is there but the ObjectHeader is missing.&#010; Any thoughts on what is happening to the ObjectHeader?&#010;&#010;Thanks,&#010;C&#010;&#010;"
100,101,souciance,    Re: Camel Not Sending Objects in Headers to RabbitMQ,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs2g5yZTFwEUF9prxx7uprXWFPJy3Dw2N-k8h9dRkcnnnw%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 19:02:38 GMT","Hello,&#010;&#010;Looking at the Camel rabbitmq component source you can see here:&#010;https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/main/java/org/apache/camel/component/rabbitmq/RabbitMQMessageConverter.java#L161&#010;and a bit below that only primitive types are supported. Lists or Objects&#010;will be returned as null so I guess that is why the header is not allowed&#010;to pass through.&#010;&#010;Could be a feature request?&#010;&#010;&#010;Best&#010;Souciance&#010;&#010;On Wed, Apr 5, 2017 at 8:44 PM, Caleb Skidmore [via Camel] &lt;&#010;ml-node+s465427n5797027h0@n5.nabble.com&gt; wrote:&#010;&#010;&gt; Hello,&#010;&gt;&#010;&gt; When I set a header as an object and route it to RabbitMQ, the header does&#010;&gt; not arrive.  For instance:&#010;&gt;&#010;&gt; List&lt;String&gt; testData = new ArrayList&lt;&gt;();&#010;&gt; testData.add(""test"");&#010;&gt; testData.add(""data"");&#010;&gt; exchange.getIn().setHeader(""ObjectHeader"", testData);&#010;&gt; exchange.getIn().setHeader(""StringHeader"", testData.toString());&#010;&gt;&#010;&gt; When I check the headers in RabbitMQ, the StringHeader is there but the&#010;&gt; ObjectHeader is missing.  Any thoughts on what is happening to the&#010;&gt; ObjectHeader?&#010;&gt;&#010;&gt; Thanks,&#010;&gt; C&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Camel-Not-Sending-Objects-&#010;&gt; in-Headers-to-RabbitMQ-tp5797027.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-Not-Sending-Objects-in-Headers-to-RabbitMQ-tp5797027p5797028.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
101,102,,Camel not Sending Headers with Objects to RabbitMQ,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs2g5yZTFwEUF9prxx7uprXWFPJy3Dw2N-k8h9dRkcnnnw%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 19:02:38 GMT","Hello,&#010;&#010;Looking at the Camel rabbitmq component source you can see here:&#010;https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/main/java/org/apache/camel/component/rabbitmq/RabbitMQMessageConverter.java#L161&#010;and a bit below that only primitive types are supported. Lists or Objects&#010;will be returned as null so I guess that is why the header is not allowed&#010;to pass through.&#010;&#010;Could be a feature request?&#010;&#010;&#010;Best&#010;Souciance&#010;&#010;On Wed, Apr 5, 2017 at 8:44 PM, Caleb Skidmore [via Camel] &lt;&#010;ml-node+s465427n5797027h0@n5.nabble.com&gt; wrote:&#010;&#010;&gt; Hello,&#010;&gt;&#010;&gt; When I set a header as an object and route it to RabbitMQ, the header does&#010;&gt; not arrive.  For instance:&#010;&gt;&#010;&gt; List&lt;String&gt; testData = new ArrayList&lt;&gt;();&#010;&gt; testData.add(""test"");&#010;&gt; testData.add(""data"");&#010;&gt; exchange.getIn().setHeader(""ObjectHeader"", testData);&#010;&gt; exchange.getIn().setHeader(""StringHeader"", testData.toString());&#010;&gt;&#010;&gt; When I check the headers in RabbitMQ, the StringHeader is there but the&#010;&gt; ObjectHeader is missing.  Any thoughts on what is happening to the&#010;&gt; ObjectHeader?&#010;&gt;&#010;&gt; Thanks,&#010;&gt; C&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Camel-Not-Sending-Objects-&#010;&gt; in-Headers-to-RabbitMQ-tp5797027.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-Not-Sending-Objects-in-Headers-to-RabbitMQ-tp5797027p5797028.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
102,103,Caleb Skidmore,  Camel not Sending Headers with Objects to RabbitMQ,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1571051417.11767359.1491413990773%40mail.yahoo.com%3E,users,"Wed, 05 Apr 2017 17:39:50 GMT","Hello,&#010;&#010;When I set a header as an object and route it to RabbitMQ, the header does not arrive.  For&#010;instance:&#010;&#010;List&lt;String&gt; testData = new ArrayList&lt;&gt;();&#010;testData.add(""test"");&#010;testData.add(""data"");&#010;exchange.getIn().setHeader(""ObjectHeader"", testData);&#010;exchange.getIn().setHeader(""StringHeader"", testData.toString());&#010;&#010;When I check the headers in RabbitMQ, the StringHeader is there but the ObjectHeader is missing. &#010;Any thoughts on what is happening to the ObjectHeader?&#010;&#010;Thanks,&#010;C&#010;&#010;&#010;"
103,104,"Jacobsen, Jasen W.",    Re: Camel not Sending Headers with Objects to RabbitMQ,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CD50BAC35.F916%25jasenj1%40mitre.org%3E,users,"Thu, 06 Apr 2017 12:28:34 GMT","Is the object serializable?&#013;&#010;&#013;&#010;https://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html&#013;&#010;&#013;&#010;- Jasen.&#013;&#010;&#013;&#010;On 4/5/17, 1:39 PM, ""Caleb Skidmore"" &lt;caliskid8888@yahoo.com.INVALID&gt;&#013;&#010;wrote:&#013;&#010;&#013;&#010;&gt;Hello,&#013;&#010;&gt;&#013;&#010;&gt;When I set a header as an object and route it to RabbitMQ, the header&#013;&#010;&gt;does not arrive.  For instance:&#013;&#010;&gt;&#013;&#010;&gt;List&lt;String&gt; testData = new ArrayList&lt;&gt;();&#013;&#010;&gt;testData.add(""test"");&#013;&#010;&gt;testData.add(""data"");&#013;&#010;&gt;exchange.getIn().setHeader(""ObjectHeader"", testData);&#013;&#010;&gt;exchange.getIn().setHeader(""StringHeader"", testData.toString());&#013;&#010;&gt;&#013;&#010;&gt;When I check the headers in RabbitMQ, the StringHeader is there but the&#013;&#010;&gt;ObjectHeader is missing.  Any thoughts on what is happening to the&#013;&#010;&gt;ObjectHeader?&#013;&#010;&gt;&#013;&#010;&gt;Thanks,&#013;&#010;&gt;C&#013;&#010;&gt;&#013;&#010;&#013;&#010;"
104,105,Claus Ibsen,    Re: Camel not Sending Headers with Objects to RabbitMQ,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yN%3DPRvxiCK0Z_r_k%3DjoucDnabgzPpQ28uPA7Vzde29GPFw%40mail.gmail.com%3E,users,"Thu, 06 Apr 2017 20:05:05 GMT","Hi&#010;&#010;You cannot just send any kind of java object as a header.&#010;&#010;Search the rabbitmq documentation what kind of header types it&#010;supports. Currently its set to primitive types and string etc just as&#010;the JMS spec etc do.&#010;&#010;&#010;On Wed, Apr 5, 2017 at 7:39 PM, Caleb Skidmore&#010;&lt;caliskid8888@yahoo.com.invalid&gt; wrote:&#010;&gt; Hello,&#010;&gt;&#010;&gt; When I set a header as an object and route it to RabbitMQ, the header does not arrive.&#010; For instance:&#010;&gt;&#010;&gt; List&lt;String&gt; testData = new ArrayList&lt;&gt;();&#010;&gt; testData.add(""test"");&#010;&gt; testData.add(""data"");&#010;&gt; exchange.getIn().setHeader(""ObjectHeader"", testData);&#010;&gt; exchange.getIn().setHeader(""StringHeader"", testData.toString());&#010;&gt;&#010;&gt; When I check the headers in RabbitMQ, the StringHeader is there but the ObjectHeader&#010;is missing.  Any thoughts on what is happening to the ObjectHeader?&#010;&gt;&#010;&gt; Thanks,&#010;&gt; C&#010;&gt;&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
105,106,Gary,JAXB Marshalling from email route,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491426953340-5797029.post%40n5.nabble.com%3E,users,"Wed, 05 Apr 2017 21:15:53 GMT","hello, I am wondering if anyone has seen this before. &#010;a route that does JAXB unmarshalling. it works fine. it works as it should. &#010;however, if I send the XML file as an attachment and pick the XML attachment&#010;from the email, then process it. I get the following exception:&#010;[com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character 'ï¿½'&#010;(code 65533 / 0xfffd) in prolog; expected '&lt;'&#010;&#010;IF I use the same XML files, place on the file system to be consumed ALSO if&#010;I send it by SFTP/FTP it works fine. If I send the XML as an attachment -&#010;extra characters are introduced. ???&#010;I've tried plain/text, rich Text, html, format of the email on outlook, this&#010;doesn't do anything. &#010;&#010;something with the email sending to route is introducing hidden or special&#010;characters.&#010;&#010;&#010;&#010;&#010;&#010;&#010;-----&#010;Gary Lee Mills&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/JAXB-Marshalling-from-email-route-tp5797029.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
106,107,souciance,  Re: JAXB Marshalling from email route,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs1OZc_jrCHR344a8FzMHfNXJ65GVDSbPZWQVrYqM7zAHg%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 21:28:53 GMT","How you extract the attachment from the e-mail?&#010;&#010;On Wed, Apr 5, 2017 at 11:15 PM, Gary [via Camel] &lt;&#010;ml-node+s465427n5797029h62@n5.nabble.com&gt; wrote:&#010;&#010;&gt; hello, I am wondering if anyone has seen this before.&#010;&gt; a route that does JAXB unmarshalling. it works fine. it works as it&#010;&gt; should.&#010;&gt; however, if I send the XML file as an attachment and pick the XML&#010;&gt; attachment from the email, then process it. I get the following exception:&#010;&gt; [com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character 'ï¿½'&#010;&gt; (code 65533 / 0xfffd) in prolog; expected '&lt;'&#010;&gt;&#010;&gt; IF I use the same XML files, place on the file system to be consumed ALSO&#010;&gt; if I send it by SFTP/FTP it works fine. If I send the XML as an attachment&#010;&gt; - extra characters are introduced. ???&#010;&gt; I've tried plain/text, rich Text, html, format of the email on outlook,&#010;&gt; this doesn't do anything.&#010;&gt;&#010;&gt; something with the email sending to route is introducing hidden or special&#010;&gt; characters.&#010;&gt;&#010;&gt;&#010;&gt; Gary Lee Mills&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/JAXB-Marshalling-from-&#010;&gt; email-route-tp5797029.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/JAXB-Marshalling-from-email-route-tp5797029p5797030.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
107,108,Gary,    Re: JAXB Marshalling from email route,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491430343631-5797032.post%40n5.nabble.com%3E,users,"Wed, 05 Apr 2017 22:12:23 GMT","here is my code for extracting attachments  - thank you - I also use this&#010;with CSV files and it works ok. &#010;&#010;public class EmailProcessor implements Processor {&#010;&#010;&#009;private static final Logger LOG = Logger.getLogger(EmailProcessor.class);&#010;&#010;&#009;private SimpleDateFormat sdf = new SimpleDateFormat(""yyyy-MM-dd-hh-mm-ss"");&#010;&#010;&#009;public void process(Exchange exchange) throws Exception {&#010;&#010;&#009;&#009;LOG.debug(""Entering EmailProcessor..."");&#010;&#010;&#009;&#009;Map&lt;String, DataHandler&gt; attachments = exchange.getIn()&#010;&#009;&#009;&#009;&#009;.getAttachments();&#010;&#010;&#009;&#009;if ((null == attachments) || (attachments.size() &lt; 1)) {&#010;&#009;&#009;&#009;throw new EmailProcessorException(""Null or 0 attachements"");&#010;&#009;&#009;} else {&#010;&#009;&#009;&#009;LOG.debug(""attachments.size = "" + attachments.size());&#010;&#009;&#009;}&#010;&#010;&#009;&#009;Map&lt;String, String&gt; emailAttr = gatherEmailHeaderInformation(exchange);&#010;&#010;&#009;&#009;List&lt;String&gt; attachmentFilenames = new ArrayList&lt;String&gt;();&#010;&#010;&#009;&#009;try {&#010;&#010;&#009;&#009;&#009;List&lt;FilenameAndContents&gt; attachmentArray = new&#010;ArrayList&lt;FilenameAndContents&gt;();&#010;&#010;&#009;&#009;&#009;for (String name : attachments.keySet()) {&#010;&#010;&#009;&#009;&#009;&#009;DataHandler dh = attachments.get(name);&#010;&#010;&#009;&#009;&#009;&#009;// get the file name&#010;&#009;&#009;&#009;&#009;String filename = dh.getName();&#010;&#010;&#009;&#009;&#009;&#009;// convert the input string to a string&#010;&#009;&#009;&#009;&#009;String contents = exchange.getContext().getTypeConverter()&#010;&#009;&#009;&#009;&#009;&#009;&#009;.convertTo(String.class, dh.getInputStream());&#010;&#010;&#009;&#009;&#009;&#009;LOG.info(""filename: "" + filename);&#010;&#010;&#009;&#009;&#009;&#009;attachmentFilenames.add(filename);&#010;&#010;&#009;&#009;&#009;&#009;FilenameAndContents attachmentFile = new FilenameAndContents();&#010;&#009;&#009;&#009;&#009;attachmentFile.setFileContents(contents);&#010;&#009;&#009;&#009;&#009;attachmentFile.setFileName(filename);&#010;&#009;&#009;&#009;&#009;attachmentArray.add(attachmentFile);&#010;&#010;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;exchange.getIn().setBody(attachmentArray);&#010;&#010;&#009;&#009;} catch (org.apache.camel.TypeConversionException tce) {&#010;&#009;&#009;&#009;throw new EmailProcessorException(&#010;&#009;&#009;&#009;&#009;&#009;""Unable to type convert from file to string"", tce);&#010;&#009;&#009;} catch (java.io.IOException ioe) {&#010;&#009;&#009;&#009;throw new EmailProcessorException(&#010;&#009;&#009;&#009;&#009;&#009;""IOException while obtaining Input Stream"", ioe);&#010;&#009;&#009;} catch (java.lang.UnsupportedOperationException uoe) {&#010;&#009;&#009;&#009;throw new EmailProcessorException(&#010;&#009;&#009;&#009;&#009;&#009;""UnsupportedOperationException add operation is not supported by list"",&#010;&#009;&#009;&#009;&#009;&#009;uoe);&#010;&#009;&#009;} catch (java.lang.ClassCastException cce) {&#010;&#009;&#009;&#009;throw new EmailProcessorException(&#010;&#009;&#009;&#009;&#009;&#009;""ClassCastException element prevents it from being added to list"",&#010;&#009;&#009;&#009;&#009;&#009;cce);&#010;&#009;&#009;} catch (java.lang.NullPointerException npe) {&#010;&#009;&#009;&#009;throw new EmailProcessorException(&#010;&#009;&#009;&#009;&#009;&#009;""NullPointerException element is null"", npe);&#010;&#009;&#009;} catch (java.lang.IllegalArgumentException iae) {&#010;&#009;&#009;&#009;throw new EmailProcessorException(&#010;&#009;&#009;&#009;&#009;&#009;""IllegalArgumentException property of element prevents it from being&#010;added to list"",&#010;&#009;&#009;&#009;&#009;&#009;iae);&#010;&#009;&#009;}&#010;&#010;&#009;&#009;archiveEmail(emailAttr, attachmentFilenames, exchange);&#010;&#010;&#009;&#009;LOG.debug(""Exiting EmailProcessor."");&#010;&#009;}&#010;&#010;&#009;private Map&lt;String, String&gt; gatherEmailHeaderInformation(Exchange exchange)&#010;{&#010;&#010;&#009;&#009;final String emailBody = exchange.getIn().getBody(String.class);&#010;&#010;&#009;&#009;final Message mailMessage = exchange.getIn().getBody(&#010;&#009;&#009;&#009;&#009;javax.mail.Message.class);&#010;&#010;&#009;&#009;Map&lt;String, String&gt; attr = new HashMap&lt;String, String&gt;();&#010;&#010;&#009;&#009;try {&#010;&#009;&#009;&#009;if (null != mailMessage) {&#010;&#010;&#009;&#009;&#009;&#009;final Address[] fromArray = mailMessage.getFrom();&#010;&#009;&#009;&#009;&#009;if (null != fromArray) {&#010;&#009;&#009;&#009;&#009;&#009;String fromStr = convertAddressListToString(fromArray);&#010;&#009;&#009;&#009;&#009;&#009;attr.put(""from"", fromStr);&#010;&#009;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;&#009;final Address[] toArray = mailMessage&#010;&#009;&#009;&#009;&#009;&#009;&#009;.getRecipients(javax.mail.Message.RecipientType.TO);&#010;&#009;&#009;&#009;&#009;if (null != toArray) {&#010;&#009;&#009;&#009;&#009;&#009;String toStr = convertAddressListToString(fromArray);&#010;&#009;&#009;&#009;&#009;&#009;attr.put(""to"", toStr);&#010;&#009;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;&#009;final Address[] ccArray = mailMessage&#010;&#009;&#009;&#009;&#009;&#009;&#009;.getRecipients(javax.mail.Message.RecipientType.CC);&#010;&#009;&#009;&#009;&#009;if (null != ccArray) {&#010;&#009;&#009;&#009;&#009;&#009;String ccStr = convertAddressListToString(fromArray);&#010;&#009;&#009;&#009;&#009;&#009;attr.put(""CC"", ccStr);&#010;&#009;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;&#009;final Address[] bccArray = mailMessage&#010;&#009;&#009;&#009;&#009;&#009;&#009;.getRecipients(javax.mail.Message.RecipientType.BCC);&#010;&#009;&#009;&#009;&#009;if (null != bccArray) {&#010;&#009;&#009;&#009;&#009;&#009;String bccStr = convertAddressListToString(fromArray);&#010;&#009;&#009;&#009;&#009;&#009;attr.put(""BCC"", bccStr);&#010;&#009;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;&#009;final String subjectStr = mailMessage.getSubject();&#010;&#009;&#009;&#009;&#009;if (null != subjectStr) {&#010;&#009;&#009;&#009;&#009;&#009;attr.put(""subject"", subjectStr);&#010;&#009;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;&#009;final Date sentDate = mailMessage.getReceivedDate();&#010;&#009;&#009;&#009;&#009;if (null != sentDate) {&#010;&#009;&#009;&#009;&#009;&#009;attr.put(""sentDate"", sdf.format(sentDate));&#010;&#009;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;&#009;final Date receivedDate = mailMessage.getSentDate();&#010;&#009;&#009;&#009;&#009;if (null != receivedDate) {&#010;&#009;&#009;&#009;&#009;&#009;attr.put(""receivedDate"", sdf.format(receivedDate));&#010;&#009;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;&#009;if (null != emailBody) {&#010;&#009;&#009;&#009;&#009;&#009;attr.put(""body"", emailBody);&#010;&#009;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;}&#010;&#009;&#009;} catch (javax.mail.MessagingException me) {&#010;&#009;&#009;&#009;LOG.error(""Unable to gather email header information"");&#010;&#009;&#009;}&#010;&#010;&#009;&#009;return attr;&#010;&#010;&#009;}&#010;&#010;&#009;private void archiveEmail(Map&lt;String, String&gt; attr,&#010;&#009;&#009;&#009;List&lt;String&gt; attachmentFilenames, Exchange exchange) {&#010;&#010;&#009;&#009;final String archivePath = exchange.getIn().getHeader(""emailArchive"",&#010;&#009;&#009;&#009;&#009;String.class);&#010;&#010;&#009;&#009;Path parentP = Paths.get(archivePath);&#010;&#009;&#009;Path fileP;&#010;&#009;&#009;if (null != attr.get(""receivedDate"")) {&#010;&#009;&#009;&#009;fileP = Paths.get(archivePath, exchange.getExchangeId() + "".""&#010;&#009;&#009;&#009;&#009;&#009;+ attr.get(""receivedDate""));&#010;&#009;&#009;} else {&#010;&#009;&#009;&#009;fileP = Paths.get(archivePath, exchange.getExchangeId());&#010;&#009;&#009;}&#010;&#010;&#009;&#009;try {&#010;&#009;&#009;&#009;Files.createDirectories(parentP);&#010;&#009;&#009;} catch (IOException ioe) {&#010;&#009;&#009;&#009;LOG.error(""Unable to create email archive directories"");&#010;&#009;&#009;&#009;ioe.printStackTrace();&#010;&#009;&#009;}&#010;&#010;&#009;&#009;Charset charset = Charset.forName(""utf-8"");&#010;&#010;&#009;&#009;try (BufferedWriter bufferedWriter = Files.newBufferedWriter(fileP,&#010;&#009;&#009;&#009;&#009;charset)) {&#010;&#010;&#009;&#009;&#009;if (null != attr.get(""from"")) {&#010;&#009;&#009;&#009;&#009;bufferedWriter.write(""From:"" + attr.get(""from""));&#010;&#009;&#009;&#009;&#009;bufferedWriter.newLine();&#010;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;if (null != attr.get(""to"")) {&#010;&#009;&#009;&#009;&#009;bufferedWriter.write(""To:"" + attr.get(""to""));&#010;&#009;&#009;&#009;&#009;bufferedWriter.newLine();&#010;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;if (null != attr.get(""CC"")) {&#010;&#009;&#009;&#009;&#009;bufferedWriter.write(""CC:"" + attr.get(""CC""));&#010;&#009;&#009;&#009;&#009;bufferedWriter.newLine();&#010;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;if (null != attr.get(""BCC"")) {&#010;&#009;&#009;&#009;&#009;bufferedWriter.write(""BCC"" + attr.get(""BCC""));&#010;&#009;&#009;&#009;&#009;bufferedWriter.newLine();&#010;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;if (null != attr.get(""subject"")) {&#010;&#009;&#009;&#009;&#009;bufferedWriter.write(""Subject:"" + attr.get(""subject""));&#010;&#009;&#009;&#009;&#009;bufferedWriter.newLine();&#010;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;if (null != attr.get(""sentDate"")) {&#010;&#009;&#009;&#009;&#009;bufferedWriter.write(""Sent Date:"" + attr.get(""sentDate""));&#010;&#009;&#009;&#009;&#009;bufferedWriter.newLine();&#010;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;if (null != attr.get(""receivedDate"")) {&#010;&#009;&#009;&#009;&#009;bufferedWriter.write(""Received Date:""&#010;&#009;&#009;&#009;&#009;&#009;&#009;+ attr.get(""receivedDate""));&#010;&#009;&#009;&#009;&#009;bufferedWriter.newLine();&#010;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;if (null != attr.get(""body"")) {&#010;&#009;&#009;&#009;&#009;bufferedWriter.write(""Body:"" + attr.get(""body""));&#010;&#009;&#009;&#009;&#009;bufferedWriter.newLine();&#010;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;&#009;for (String s : attachmentFilenames) {&#010;&#009;&#009;&#009;&#009;bufferedWriter.write(""Attachment File:"" + s);&#010;&#009;&#009;&#009;&#009;bufferedWriter.newLine();&#010;&#009;&#009;&#009;}&#010;&#010;&#009;&#009;} catch (IOException ioe) {&#010;&#009;&#009;&#009;LOG.error(""Unable to write email archive"");&#010;&#009;&#009;&#009;ioe.printStackTrace();&#010;&#009;&#009;}&#010;&#010;&#009;}&#010;&#010;&#009;private String convertAddressListToString(Address[] adds) {&#010;&#010;&#009;&#009;String returnStr = """";&#010;&#010;&#009;&#009;for (Address adr : adds) {&#010;&#009;&#009;&#009;returnStr = returnStr + adr.toString() + "" "";&#010;&#009;&#009;}&#010;&#010;&#009;&#009;return returnStr;&#010;&#010;&#009;}&#010;}&#010;&#010;&#010;&#010;&#010;-----&#010;Gary Lee Mills&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/JAXB-Marshalling-from-email-route-tp5797029p5797032.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
108,109,souciance,      Re: JAXB Marshalling from email route,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs1m9YYSCRg1G16007xLh-eVqod_hAJUqAkEYDLTru0tEQ%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 22:17:03 GMT","Just a guess but could it be that you are converting the attachment to a&#010;string`? In the documentation it is converted to a byte[] first.&#010;&#010;&#010;On Thu, Apr 6, 2017 at 12:12 AM, Gary [via Camel] &lt;&#010;ml-node+s465427n5797032h55@n5.nabble.com&gt; wrote:&#010;&#010;&gt; here is my code for extracting attachments  - thank you - I also use this&#010;&gt; with CSV files and it works ok.&#010;&gt;&#010;&gt; public class EmailProcessor implements Processor {&#010;&gt;&#010;&gt;         private static final Logger LOG = Logger.getLogger(EmailProcessor.class);&#010;&gt;&#010;&gt;&#010;&gt;         private SimpleDateFormat sdf = new SimpleDateFormat(""yyyy-MM-dd-hh-mm-ss"");&#010;&gt;&#010;&gt;&#010;&gt;         public void process(Exchange exchange) throws Exception {&#010;&gt;&#010;&gt;                 LOG.debug(""Entering EmailProcessor..."");&#010;&gt;&#010;&gt;                 Map&lt;String, DataHandler&gt; attachments = exchange.getIn()&#010;&gt;                                 .getAttachments();&#010;&gt;&#010;&gt;                 if ((null == attachments) || (attachments.size() &lt; 1)) {&#010;&gt;                         throw new EmailProcessorException(""Null or 0&#010;&gt; attachements"");&#010;&gt;                 } else {&#010;&gt;                         LOG.debug(""attachments.size = "" +&#010;&gt; attachments.size());&#010;&gt;                 }&#010;&gt;&#010;&gt;                 Map&lt;String, String&gt; emailAttr =&#010;&gt; gatherEmailHeaderInformation(exchange);&#010;&gt;&#010;&gt;                 List&lt;String&gt; attachmentFilenames = new&#010;&gt; ArrayList&lt;String&gt;();&#010;&gt;&#010;&gt;                 try {&#010;&gt;&#010;&gt;                         List&lt;FilenameAndContents&gt; attachmentArray = new&#010;&gt; ArrayList&lt;FilenameAndContents&gt;();&#010;&gt;&#010;&gt;                         for (String name : attachments.keySet()) {&#010;&gt;&#010;&gt;                                 DataHandler dh = attachments.get(name);&#010;&gt;&#010;&gt;                                 // get the file name&#010;&gt;                                 String filename = dh.getName();&#010;&gt;&#010;&gt;                                 // convert the input string to a string&#010;&gt;                                 String contents = exchange.getContext().getTypeConverter()&#010;&gt;&#010;&gt;                                                 .convertTo(String.class,&#010;&gt; dh.getInputStream());&#010;&gt;&#010;&gt;                                 LOG.info(""filename: "" + filename);&#010;&gt;&#010;&gt;                                 attachmentFilenames.add(filename);&#010;&gt;&#010;&gt;                                 FilenameAndContents attachmentFile = new&#010;&gt; FilenameAndContents();&#010;&gt;                                 attachmentFile.setFileContents(contents);&#010;&gt;                                 attachmentFile.setFileName(filename);&#010;&gt;                                 attachmentArray.add(attachmentFile);&#010;&gt;&#010;&gt;                         }&#010;&gt;&#010;&gt;                         exchange.getIn().setBody(attachmentArray);&#010;&gt;&#010;&gt;                 } catch (org.apache.camel.TypeConversionException tce) {&#010;&gt;                         throw new EmailProcessorException(&#010;&gt;                                         ""Unable to type convert from file&#010;&gt; to string"", tce);&#010;&gt;                 } catch (java.io.IOException ioe) {&#010;&gt;                         throw new EmailProcessorException(&#010;&gt;                                         ""IOException while obtaining Input&#010;&gt; Stream"", ioe);&#010;&gt;                 } catch (java.lang.UnsupportedOperationException uoe) {&#010;&gt;                         throw new EmailProcessorException(&#010;&gt;                                         ""UnsupportedOperationException add&#010;&gt; operation is not supported by list"",&#010;&gt;                                         uoe);&#010;&gt;                 } catch (java.lang.ClassCastException cce) {&#010;&gt;                         throw new EmailProcessorException(&#010;&gt;                                         ""ClassCastException element&#010;&gt; prevents it from being added to list"",&#010;&gt;                                         cce);&#010;&gt;                 } catch (java.lang.NullPointerException npe) {&#010;&gt;                         throw new EmailProcessorException(&#010;&gt;                                         ""NullPointerException element is&#010;&gt; null"", npe);&#010;&gt;                 } catch (java.lang.IllegalArgumentException iae) {&#010;&gt;                         throw new EmailProcessorException(&#010;&gt;                                         ""IllegalArgumentException property&#010;&gt; of element prevents it from being added to list"",&#010;&gt;                                         iae);&#010;&gt;                 }&#010;&gt;&#010;&gt;                 archiveEmail(emailAttr, attachmentFilenames, exchange);&#010;&gt;&#010;&gt;                 LOG.debug(""Exiting EmailProcessor."");&#010;&gt;         }&#010;&gt;&#010;&gt;         private Map&lt;String, String&gt; gatherEmailHeaderInformation(Exchange&#010;&gt; exchange) {&#010;&gt;&#010;&gt;                 final String emailBody = exchange.getIn().getBody(String.class);&#010;&gt;&#010;&gt;&#010;&gt;                 final Message mailMessage = exchange.getIn().getBody(&#010;&gt;                                 javax.mail.Message.class);&#010;&gt;&#010;&gt;                 Map&lt;String, String&gt; attr = new HashMap&lt;String, String&gt;();&#010;&gt;&#010;&gt;                 try {&#010;&gt;                         if (null != mailMessage) {&#010;&gt;&#010;&gt;                                 final Address[] fromArray =&#010;&gt; mailMessage.getFrom();&#010;&gt;                                 if (null != fromArray) {&#010;&gt;                                         String fromStr =&#010;&gt; convertAddressListToString(fromArray);&#010;&gt;                                         attr.put(""from"", fromStr);&#010;&gt;                                 }&#010;&gt;&#010;&gt;                                 final Address[] toArray = mailMessage&#010;&gt;                                                 .getRecipients(javax.mail.&#010;&gt; Message.RecipientType.TO);&#010;&gt;                                 if (null != toArray) {&#010;&gt;                                         String toStr =&#010;&gt; convertAddressListToString(fromArray);&#010;&gt;                                         attr.put(""to"", toStr);&#010;&gt;                                 }&#010;&gt;&#010;&gt;                                 final Address[] ccArray = mailMessage&#010;&gt;                                                 .getRecipients(javax.mail.&#010;&gt; Message.RecipientType.CC);&#010;&gt;                                 if (null != ccArray) {&#010;&gt;                                         String ccStr =&#010;&gt; convertAddressListToString(fromArray);&#010;&gt;                                         attr.put(""CC"", ccStr);&#010;&gt;                                 }&#010;&gt;&#010;&gt;                                 final Address[] bccArray = mailMessage&#010;&gt;                                                 .getRecipients(javax.mail.Message.RecipientType.BCC);&#010;&gt;&#010;&gt;                                 if (null != bccArray) {&#010;&gt;                                         String bccStr =&#010;&gt; convertAddressListToString(fromArray);&#010;&gt;                                         attr.put(""BCC"", bccStr);&#010;&gt;                                 }&#010;&gt;&#010;&gt;                                 final String subjectStr =&#010;&gt; mailMessage.getSubject();&#010;&gt;                                 if (null != subjectStr) {&#010;&gt;                                         attr.put(""subject"", subjectStr);&#010;&gt;                                 }&#010;&gt;&#010;&gt;                                 final Date sentDate =&#010;&gt; mailMessage.getReceivedDate();&#010;&gt;                                 if (null != sentDate) {&#010;&gt;                                         attr.put(""sentDate"",&#010;&gt; sdf.format(sentDate));&#010;&gt;                                 }&#010;&gt;&#010;&gt;                                 final Date receivedDate =&#010;&gt; mailMessage.getSentDate();&#010;&gt;                                 if (null != receivedDate) {&#010;&gt;                                         attr.put(""receivedDate"",&#010;&gt; sdf.format(receivedDate));&#010;&gt;                                 }&#010;&gt;&#010;&gt;                                 if (null != emailBody) {&#010;&gt;                                         attr.put(""body"", emailBody);&#010;&gt;                                 }&#010;&gt;&#010;&gt;                         }&#010;&gt;                 } catch (javax.mail.MessagingException me) {&#010;&gt;                         LOG.error(""Unable to gather email header&#010;&gt; information"");&#010;&gt;                 }&#010;&gt;&#010;&gt;                 return attr;&#010;&gt;&#010;&gt;         }&#010;&gt;&#010;&gt;         private void archiveEmail(Map&lt;String, String&gt; attr,&#010;&gt;                         List&lt;String&gt; attachmentFilenames, Exchange&#010;&gt; exchange) {&#010;&gt;&#010;&gt;                 final String archivePath = exchange.getIn().getHeader(""emailArchive"",&#010;&gt;&#010;&gt;                                 String.class);&#010;&gt;&#010;&gt;                 Path parentP = Paths.get(archivePath);&#010;&gt;                 Path fileP;&#010;&gt;                 if (null != attr.get(""receivedDate"")) {&#010;&gt;                         fileP = Paths.get(archivePath,&#010;&gt; exchange.getExchangeId() + "".""&#010;&gt;                                         + attr.get(""receivedDate""));&#010;&gt;                 } else {&#010;&gt;                         fileP = Paths.get(archivePath,&#010;&gt; exchange.getExchangeId());&#010;&gt;                 }&#010;&gt;&#010;&gt;                 try {&#010;&gt;                         Files.createDirectories(parentP);&#010;&gt;                 } catch (IOException ioe) {&#010;&gt;                         LOG.error(""Unable to create email archive&#010;&gt; directories"");&#010;&gt;                         ioe.printStackTrace();&#010;&gt;                 }&#010;&gt;&#010;&gt;                 Charset charset = Charset.forName(""utf-8"");&#010;&gt;&#010;&gt;                 try (BufferedWriter bufferedWriter =&#010;&gt; Files.newBufferedWriter(fileP,&#010;&gt;                                 charset)) {&#010;&gt;&#010;&gt;                         if (null != attr.get(""from"")) {&#010;&gt;                                 bufferedWriter.write(""From:"" +&#010;&gt; attr.get(""from""));&#010;&gt;                                 bufferedWriter.newLine();&#010;&gt;                         }&#010;&gt;&#010;&gt;                         if (null != attr.get(""to"")) {&#010;&gt;                                 bufferedWriter.write(""To:"" +&#010;&gt; attr.get(""to""));&#010;&gt;                                 bufferedWriter.newLine();&#010;&gt;                         }&#010;&gt;&#010;&gt;                         if (null != attr.get(""CC"")) {&#010;&gt;                                 bufferedWriter.write(""CC:"" +&#010;&gt; attr.get(""CC""));&#010;&gt;                                 bufferedWriter.newLine();&#010;&gt;                         }&#010;&gt;&#010;&gt;                         if (null != attr.get(""BCC"")) {&#010;&gt;                                 bufferedWriter.write(""BCC"" +&#010;&gt; attr.get(""BCC""));&#010;&gt;                                 bufferedWriter.newLine();&#010;&gt;                         }&#010;&gt;&#010;&gt;                         if (null != attr.get(""subject"")) {&#010;&gt;                                 bufferedWriter.write(""Subject:"" +&#010;&gt; attr.get(""subject""));&#010;&gt;                                 bufferedWriter.newLine();&#010;&gt;                         }&#010;&gt;&#010;&gt;                         if (null != attr.get(""sentDate"")) {&#010;&gt;                                 bufferedWriter.write(""Sent Date:"" +&#010;&gt; attr.get(""sentDate""));&#010;&gt;                                 bufferedWriter.newLine();&#010;&gt;                         }&#010;&gt;&#010;&gt;                         if (null != attr.get(""receivedDate"")) {&#010;&gt;                                 bufferedWriter.write(""Received Date:""&#010;&gt;                                                 +&#010;&gt; attr.get(""receivedDate""));&#010;&gt;                                 bufferedWriter.newLine();&#010;&gt;                         }&#010;&gt;&#010;&gt;                         if (null != attr.get(""body"")) {&#010;&gt;                                 bufferedWriter.write(""Body:"" +&#010;&gt; attr.get(""body""));&#010;&gt;                                 bufferedWriter.newLine();&#010;&gt;                         }&#010;&gt;&#010;&gt;                         for (String s : attachmentFilenames) {&#010;&gt;                                 bufferedWriter.write(""Attachment File:"" +&#010;&gt; s);&#010;&gt;                                 bufferedWriter.newLine();&#010;&gt;                         }&#010;&gt;&#010;&gt;                 } catch (IOException ioe) {&#010;&gt;                         LOG.error(""Unable to write email archive"");&#010;&gt;                         ioe.printStackTrace();&#010;&gt;                 }&#010;&gt;&#010;&gt;         }&#010;&gt;&#010;&gt;         private String convertAddressListToString(Address[] adds) {&#010;&gt;&#010;&gt;                 String returnStr = """";&#010;&gt;&#010;&gt;                 for (Address adr : adds) {&#010;&gt;                         returnStr = returnStr + adr.toString() + "" "";&#010;&gt;                 }&#010;&gt;&#010;&gt;                 return returnStr;&#010;&gt;&#010;&gt;         }&#010;&gt; }&#010;&gt; Gary Lee Mills&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/JAXB-Marshalling-from-&#010;&gt; email-route-tp5797029p5797032.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/JAXB-Marshalling-from-email-route-tp5797029p5797033.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
109,110,Gary,        Re: JAXB Marshalling from email route,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491431707799-5797035.post%40n5.nabble.com%3E,users,"Wed, 05 Apr 2017 22:35:07 GMT",":) I think you're on to something - was thinking the same thing. I will try&#010;tomorrow morning and let you know... I greatly appreciate your help, it&#010;helps sometimes having others look over. &#010;&#010;c u tomorrow, and thank you!!!&#010;&#010;&#010;&#010;-----&#010;Gary Lee Mills&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/JAXB-Marshalling-from-email-route-tp5797029p5797035.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
110,111,souciance,          Re: JAXB Marshalling from email route,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs1_C7uABWRtPEb4iRhhdVb0%2BG%2BRVJAuUhXfam4f4Mtsdw%40mail.gmail.com%3E,users,"Wed, 05 Apr 2017 22:37:02 GMT","No problem, hope it solves it!&#010;&#010;On Thu, Apr 6, 2017 at 12:35 AM, Gary [via Camel] &lt;&#010;ml-node+s465427n5797035h48@n5.nabble.com&gt; wrote:&#010;&#010;&gt; :) I think you're on to something - was thinking the same thing. I will&#010;&gt; try tomorrow morning and let you know... I greatly appreciate your help, it&#010;&gt; helps sometimes having others look over.&#010;&gt;&#010;&gt; c u tomorrow, and thank you!!!&#010;&gt; Gary Lee Mills&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/JAXB-Marshalling-from-&#010;&gt; email-route-tp5797029p5797035.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/JAXB-Marshalling-from-email-route-tp5797029p5797036.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
111,112,Gary,          Re: JAXB Marshalling from email route,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491491972786-5797091.post%40n5.nabble.com%3E,users,"Thu, 06 Apr 2017 15:19:32 GMT","sure enough, thanks for everything. again, it was something stupid I&#010;overlooked. you never know real bug or just human error. 9 out 10 human&#010;error. &#010;&#010;I was type converting my attachments content as string. I changed my wrapper&#010;and exchange to byte[] and all is good. &#010;&#010;thanks again!&#010;&#010;&#010;&#010;-----&#010;Gary Lee Mills&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/JAXB-Marshalling-from-email-route-tp5797029p5797091.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
112,113,Gary,      Re: JAXB Marshalling from email route,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491431570982-5797034.post%40n5.nabble.com%3E,users,"Wed, 05 Apr 2017 22:32:50 GMT","interesting...&#010;the XML doc extracted from email as attachment...&#010;��&lt;^@?^@x^@m^@l^@ ^@v^@e^@r^@s^@i^@o^@n^@=^@""^@1^@.^@0^@""^@&#010;^@e^@n^@c^@o^@d^@i^@n^@g^@=^@""^@u^@t^@f^@-^@1^@6^@""^@?^@&gt;^@^M^@&#010;^@&lt;^@T^@r^@a^@n^@s^@f^@e^@r^@D^@a^@t^@a^@H^@e^@a^@d^@e^@r^@&#010;^@x^@m^@l^@n^@s^@:^@i^@=^@""^@h^@t^@t^@p^@:^@/^@/^@w^@w^@w^@.^@w^@3^@.^@o^@r^@g^@/^@2^@0^@0^@1^@/^@X^@M^@L^@S^@c^@h^@e^@m^@a^@-^@i^@n^@s^@t^@a^@n^@c^@e^@""^@&#010;^@x^@m^@l^@n^@s^@=^@""^@h^@t^@t^@p^@:^@/^@/^@s^@m^@a^@r^@t^@s^@i^@g^@n^@a^@l^@.^@c^@o^@m^@""^@&gt;^@^M^@&#010;&#010;the XML sent either by file system or sftp endpoint&#010;&lt;?xml version=""1.0"" encoding=""utf-16""?&gt;&#010;&lt;TransferDataHeader xmlns:i=""http://www.w3.org/2001/XMLSchema-instance""&#010;xmlns=""http://smartsignal.com""&gt;&#010;        &lt;ApplicationId&gt;00000000-0000-0000-0000-000000000000&lt;/ApplicationId&gt;&#010;        &lt;ApplicationName i:nil=""true"" /&gt;&#010;&#010;- something truely is corrupting the document when extracted - type or char&#010;set? &#010;&#010;&#010;&#010;-----&#010;Gary Lee Mills&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/JAXB-Marshalling-from-email-route-tp5797029p5797034.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
113,114,Burkard Stephan,Route and route test in Spring Boot application,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3Ce6245ee69bf341fcbbbf6fd828dc5724%40a0zbrn11.visana.intra%3E,users,"Thu, 06 Apr 2017 07:01:38 GMT","Hi &#013;&#010;&#013;&#010;We are moving our Camel/ActiveMQ services from Karaf bundles with Spring 3 and XML-Config&#010;to Spring-Boot with Spring 4 and Java -Config. &#013;&#010;&#013;&#010;I have built a very small prototype of such a Spring Boot application with a Camel route and&#010;the corresponding route test. I would like to know if this is ""state of the art"" to build&#010;Camel routes and tests in Spring Boot or if this example still could be simplified or contains&#010;old concepts that could be replaced with a successor concept.&#013;&#010;&#013;&#010;We use Spring Boot 1.4.2, Spring 4.3.4 and Camel 2.17.3&#013;&#010;&#013;&#010;I followed http://camel.apache.org/spring-boot.html and http://camel.apache.org/spring-testing.html&#010;to build the example.&#013;&#010;&#013;&#010;Thanks a lot&#013;&#010;Stephan&#013;&#010;&#013;&#010;&#013;&#010;**** Pom.xml dependencies ****&#013;&#010;&lt;!-- camel --&gt;&#013;&#010;&lt;dependency&gt;&#013;&#010;&#009;&lt;groupId&gt;org.apache.camel&lt;/groupId&gt;&#013;&#010;&#009;&lt;artifactId&gt;camel-spring-boot-starter&lt;/artifactId&gt;&#013;&#010;&lt;/dependency&gt;&#013;&#010;&lt;dependency&gt;&#013;&#010;&#009;&lt;groupId&gt;org.apache.camel&lt;/groupId&gt;&#013;&#010;&#009;&lt;artifactId&gt;camel-spring-javaconfig&lt;/artifactId&gt;&#013;&#010;&lt;/dependency&gt;&#013;&#010;&lt;!-- test scope --&gt;&#013;&#010;&lt;dependency&gt;&#013;&#010;&#009;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#013;&#010;&#009;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#013;&#010;&#009;&lt;scope&gt;test&lt;/scope&gt;&#013;&#010;&lt;/dependency&gt;&#013;&#010;&lt;dependency&gt;&#013;&#010;&#009;&lt;groupId&gt;org.apache.camel&lt;/groupId&gt;&#013;&#010;&#009;&lt;artifactId&gt;camel-test-spring&lt;/artifactId&gt;&#013;&#010;&#009;&lt;scope&gt;test&lt;/scope&gt;&#013;&#010;&lt;/dependency&gt;&#013;&#010;&#013;&#010;**** Route class ****&#013;&#010;package prototype;&#013;&#010;@Component&#013;&#010;public class Route extends SpringRouteBuilder {&#013;&#010;    @Autowired&#013;&#010;    private CamelContext camelContext;&#013;&#010;&#013;&#010;    @Override&#013;&#010;    public void configure() {&#013;&#010;        from(""direct:route"")&#013;&#010;                .routeId(""route"")&#013;&#010;                .to(""mock:destination"");&#013;&#010;    }&#013;&#010;}&#013;&#010;&#013;&#010;**** Route test class ****&#013;&#010;package prototype;&#013;&#010;@RunWith(CamelSpringJUnit4ClassRunner.class)&#013;&#010;@BootstrapWith(CamelTestContextBootstrapper.class)&#013;&#010;@ContextConfiguration(classes = { RouteTest.TestConfig.class}, loader = CamelSpringDelegatingTestContextLoader.class)&#013;&#010;public class RouteTest {&#013;&#010;    @Autowired&#013;&#010;    protected CamelContext camelContext;&#013;&#010;&#013;&#010;    @EndpointInject(uri = ""mock:destination"")&#013;&#010;    protected MockEndpoint destination;&#013;&#010;&#013;&#010;    @Produce(uri = ""direct:route"")&#013;&#010;    protected ProducerTemplate producer;&#013;&#010;&#013;&#010;    @Test&#013;&#010;    @DirtiesContext&#013;&#010;    public void testContextStartup() throws Exception {&#013;&#010;        destination.expectedMessageCount(2);&#013;&#010;        destination.expectedBodiesReceived(""test1"", ""test2"");&#013;&#010;&#013;&#010;        producer.sendBody(""test1"");&#013;&#010;        producer.sendBody(""test2"");&#013;&#010;&#013;&#010;        destination.assertIsSatisfied();&#013;&#010;    }&#013;&#010;&#013;&#010;    @Configuration&#013;&#010;    @ComponentScan(""prototype"")&#013;&#010;    public static class TestConfig extends CamelConfiguration {&#013;&#010;    }&#013;&#010;}&#013;&#010;"
114,115,,Re: Best way to poll a database and process in chunks,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3Ce6245ee69bf341fcbbbf6fd828dc5724%40a0zbrn11.visana.intra%3E,users,"Thu, 06 Apr 2017 07:01:38 GMT","Hi &#013;&#010;&#013;&#010;We are moving our Camel/ActiveMQ services from Karaf bundles with Spring 3 and XML-Config&#010;to Spring-Boot with Spring 4 and Java -Config. &#013;&#010;&#013;&#010;I have built a very small prototype of such a Spring Boot application with a Camel route and&#010;the corresponding route test. I would like to know if this is ""state of the art"" to build&#010;Camel routes and tests in Spring Boot or if this example still could be simplified or contains&#010;old concepts that could be replaced with a successor concept.&#013;&#010;&#013;&#010;We use Spring Boot 1.4.2, Spring 4.3.4 and Camel 2.17.3&#013;&#010;&#013;&#010;I followed http://camel.apache.org/spring-boot.html and http://camel.apache.org/spring-testing.html&#010;to build the example.&#013;&#010;&#013;&#010;Thanks a lot&#013;&#010;Stephan&#013;&#010;&#013;&#010;&#013;&#010;**** Pom.xml dependencies ****&#013;&#010;&lt;!-- camel --&gt;&#013;&#010;&lt;dependency&gt;&#013;&#010;&#009;&lt;groupId&gt;org.apache.camel&lt;/groupId&gt;&#013;&#010;&#009;&lt;artifactId&gt;camel-spring-boot-starter&lt;/artifactId&gt;&#013;&#010;&lt;/dependency&gt;&#013;&#010;&lt;dependency&gt;&#013;&#010;&#009;&lt;groupId&gt;org.apache.camel&lt;/groupId&gt;&#013;&#010;&#009;&lt;artifactId&gt;camel-spring-javaconfig&lt;/artifactId&gt;&#013;&#010;&lt;/dependency&gt;&#013;&#010;&lt;!-- test scope --&gt;&#013;&#010;&lt;dependency&gt;&#013;&#010;&#009;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#013;&#010;&#009;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#013;&#010;&#009;&lt;scope&gt;test&lt;/scope&gt;&#013;&#010;&lt;/dependency&gt;&#013;&#010;&lt;dependency&gt;&#013;&#010;&#009;&lt;groupId&gt;org.apache.camel&lt;/groupId&gt;&#013;&#010;&#009;&lt;artifactId&gt;camel-test-spring&lt;/artifactId&gt;&#013;&#010;&#009;&lt;scope&gt;test&lt;/scope&gt;&#013;&#010;&lt;/dependency&gt;&#013;&#010;&#013;&#010;**** Route class ****&#013;&#010;package prototype;&#013;&#010;@Component&#013;&#010;public class Route extends SpringRouteBuilder {&#013;&#010;    @Autowired&#013;&#010;    private CamelContext camelContext;&#013;&#010;&#013;&#010;    @Override&#013;&#010;    public void configure() {&#013;&#010;        from(""direct:route"")&#013;&#010;                .routeId(""route"")&#013;&#010;                .to(""mock:destination"");&#013;&#010;    }&#013;&#010;}&#013;&#010;&#013;&#010;**** Route test class ****&#013;&#010;package prototype;&#013;&#010;@RunWith(CamelSpringJUnit4ClassRunner.class)&#013;&#010;@BootstrapWith(CamelTestContextBootstrapper.class)&#013;&#010;@ContextConfiguration(classes = { RouteTest.TestConfig.class}, loader = CamelSpringDelegatingTestContextLoader.class)&#013;&#010;public class RouteTest {&#013;&#010;    @Autowired&#013;&#010;    protected CamelContext camelContext;&#013;&#010;&#013;&#010;    @EndpointInject(uri = ""mock:destination"")&#013;&#010;    protected MockEndpoint destination;&#013;&#010;&#013;&#010;    @Produce(uri = ""direct:route"")&#013;&#010;    protected ProducerTemplate producer;&#013;&#010;&#013;&#010;    @Test&#013;&#010;    @DirtiesContext&#013;&#010;    public void testContextStartup() throws Exception {&#013;&#010;        destination.expectedMessageCount(2);&#013;&#010;        destination.expectedBodiesReceived(""test1"", ""test2"");&#013;&#010;&#013;&#010;        producer.sendBody(""test1"");&#013;&#010;        producer.sendBody(""test2"");&#013;&#010;&#013;&#010;        destination.assertIsSatisfied();&#013;&#010;    }&#013;&#010;&#013;&#010;    @Configuration&#013;&#010;    @ComponentScan(""prototype"")&#013;&#010;    public static class TestConfig extends CamelConfiguration {&#013;&#010;    }&#013;&#010;}&#013;&#010;"
115,116,dvlato,  Re: Best way to poll a database and process in chunks,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491497968877-5797098.post%40n5.nabble.com%3E,users,"Thu, 06 Apr 2017 16:59:28 GMT","Hello Claus, Ibsen:&#010;&#010; Thank you very much for the thorough responses. We don't really need to use&#010;the JPA component, and I think it makes more sense to use sql/jdbc for the&#010;kind of bulk operations we want to do.&#010;&#010;What I think it would be really useful is to allow for the&#010;""onConsumeBatchComplete"" SQL statement  to use parameters from the  select&#010;query.  I mean, if the sql consumer is performing the query  ""select * from&#010;mytable where status=0"",  I would like to be able to declare  the&#010;""onConsumeBatchComplete"" query like this "" update mytable set status=1 where &#010;idfield in (:idfield)"", where the idfield parameter would be populated with&#010;the results of the select statement.   &#010;&#010; Does my explanation make sense? I want to change the status only for the &#010;rows returned by the select query.  &#010;&#010; Is there another way to do that currently in Camel?  I tried to connect the&#010;output of the SQL component with another SQL component but I think I might&#010;need a bean processor to generate the correct body. In any case, I think&#010;that would be a useful built-in feature, so if you agree I will create a&#010;ticket for that. &#010;&#010;&#010;&#010;&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Best-way-to-poll-a-database-and-process-in-chunks-tp5796094p5797098.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
116,117,Claus Ibsen,    Re: Best way to poll a database and process in chunks,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yN%3D-WzWCLXu6UCL4mYxZqs46246osfVYk9hjp6m4R2_gEg%40mail.gmail.com%3E,users,"Thu, 06 Apr 2017 20:12:00 GMT","Hi&#010;&#010;Maybe you can try and let us see what it goes. I am not so sure we can&#010;make this in a way to make it not complicated. How would you specify&#010;what those IN keys are from a select statement that can return&#010;basically anything.&#010;&#010;&#010;&#010;On Thu, Apr 6, 2017 at 6:59 PM, dvlato &lt;dvlato@gmail.com&gt; wrote:&#010;&gt; Hello Claus, Ibsen:&#010;&gt;&#010;&gt;  Thank you very much for the thorough responses. We don't really need to use&#010;&gt; the JPA component, and I think it makes more sense to use sql/jdbc for the&#010;&gt; kind of bulk operations we want to do.&#010;&gt;&#010;&gt; What I think it would be really useful is to allow for the&#010;&gt; ""onConsumeBatchComplete"" SQL statement  to use parameters from the  select&#010;&gt; query.  I mean, if the sql consumer is performing the query  ""select * from&#010;&gt; mytable where status=0"",  I would like to be able to declare  the&#010;&gt; ""onConsumeBatchComplete"" query like this "" update mytable set status=1 where&#010;&gt; idfield in (:idfield)"", where the idfield parameter would be populated with&#010;&gt; the results of the select statement.&#010;&gt;&#010;&gt;  Does my explanation make sense? I want to change the status only for the&#010;&gt; rows returned by the select query.&#010;&gt;&#010;&gt;  Is there another way to do that currently in Camel?  I tried to connect the&#010;&gt; output of the SQL component with another SQL component but I think I might&#010;&gt; need a bean processor to generate the correct body. In any case, I think&#010;&gt; that would be a useful built-in feature, so if you agree I will create a&#010;&gt; ticket for that.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Best-way-to-poll-a-database-and-process-in-chunks-tp5796094p5797098.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
117,118,Zoran Regvart,    Re: Best way to poll a database and process in chunks,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCABD_Zr-Hh1kZB8Envh2PVRvdfpEAPOyf0hHYO6bVWVHgX8r0MQ%40mail.gmail.com%3E,users,"Thu, 06 Apr 2017 22:43:11 GMT","Hi David,&#010;&#010;I think you will find that binding a bigger number of parameters won't&#010;lead to better performance, both with missing statement cache due to&#010;fluctuating number of parameters and due to not using indexes and&#010;performing full table scans. But you should run SQL explain and gather&#010;statistics for your own use case to see that.&#010;&#010;I also think that you should solve this at the SQL level first. For&#010;instance select first n rows from your table with certain status and&#010;process those as a batch.&#010;&#010;zoran&#010;&#010;On Thu, Apr 6, 2017 at 6:59 PM, dvlato &lt;dvlato@gmail.com&gt; wrote:&#010;&gt; Hello Claus, Ibsen:&#010;&gt;&#010;&gt;  Thank you very much for the thorough responses. We don't really need to use&#010;&gt; the JPA component, and I think it makes more sense to use sql/jdbc for the&#010;&gt; kind of bulk operations we want to do.&#010;&gt;&#010;&gt; What I think it would be really useful is to allow for the&#010;&gt; ""onConsumeBatchComplete"" SQL statement  to use parameters from the  select&#010;&gt; query.  I mean, if the sql consumer is performing the query  ""select * from&#010;&gt; mytable where status=0"",  I would like to be able to declare  the&#010;&gt; ""onConsumeBatchComplete"" query like this "" update mytable set status=1 where&#010;&gt; idfield in (:idfield)"", where the idfield parameter would be populated with&#010;&gt; the results of the select statement.&#010;&gt;&#010;&gt;  Does my explanation make sense? I want to change the status only for the&#010;&gt; rows returned by the select query.&#010;&gt;&#010;&gt;  Is there another way to do that currently in Camel?  I tried to connect the&#010;&gt; output of the SQL component with another SQL component but I think I might&#010;&gt; need a bean processor to generate the correct body. In any case, I think&#010;&gt; that would be a useful built-in feature, so if you agree I will create a&#010;&gt; ticket for that.&#010;&#010;-- &#010;Zoran Regvart&#010;&#010;"
118,119,Fatima Sajjad,how to enable Scala/Groovy route definition in camel web console,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491543433387-5797121.post%40n5.nabble.com%3E,users,"Fri, 07 Apr 2017 05:37:13 GMT",i am using came-web-standalone jars (2.15.4 and 2.15.6) as mentioned here&#010;http://camel.apache.org/web-console.html&#010;when i try to create routes on web console there is only option to create&#010;route in XML. I can't find options for other languages like Groovy and Scala&#010;in the following pages: &#010;http://localhost:8080/routes/route2&#010;http://localhost:8080/routes/create&#010;&#010;How can i enable/edit the route definition in Groovy and Scala ?&#010;&#010;Please reply soon&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/how-to-enable-Scala-Groovy-route-definition-in-camel-web-console-tp5797121.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
119,120,Claus Ibsen,  Re: how to enable Scala/Groovy route definition in camel web console,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNkLiKC9N%2BkQDXuZ2kHQ2z-ENX8DdY8u%2B%2BxBigimUjdYig%40mail.gmail.com%3E,users,"Fri, 07 Apr 2017 07:04:58 GMT","Hi&#010;&#010;This web console is deprecated and removed in newer releases - do not use it.&#010;And it can only edit routes in XML.&#010;&#010;For groovy/scala use your IDE editor such as IDEA or Eclipse.&#010;&#010;On Fri, Apr 7, 2017 at 7:37 AM, Fatima Sajjad &lt;fatimasajjad514@gmail.com&gt; wrote:&#010;&gt; i am using came-web-standalone jars (2.15.4 and 2.15.6) as mentioned here&#010;&gt; http://camel.apache.org/web-console.html&#010;&gt; when i try to create routes on web console there is only option to create&#010;&gt; route in XML. I can't find options for other languages like Groovy and Scala&#010;&gt; in the following pages:&#010;&gt; http://localhost:8080/routes/route2&#010;&gt; http://localhost:8080/routes/create&#010;&gt;&#010;&gt; How can i enable/edit the route definition in Groovy and Scala ?&#010;&gt;&#010;&gt; Please reply soon&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/how-to-enable-Scala-Groovy-route-definition-in-camel-web-console-tp5797121.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
120,121,Fatima Sajjad,    Re: how to enable Scala/Groovy route definition in camel web console,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491550064337-5797125.post%40n5.nabble.com%3E,users,"Fri, 07 Apr 2017 07:27:44 GMT","Thank you for your reply. &#010;Can you please answer one more question? Is there any way to define or add&#010;new routes in camel context without recompiling the project, Like run time&#010;route addition? Does any of the DSLs (Spring, Scala , Groovy or Java)&#010;provide that ? &#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/how-to-enable-Scala-Groovy-route-definition-in-camel-web-console-tp5797121p5797125.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
121,122,Claus Ibsen,      Re: how to enable Scala/Groovy route definition in camel web console,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNnVtafumob_%2B-Gyae8N4jdT9obfxHD_CNpt%2Buv1HQ7KOQ%40mail.gmail.com%3E,users,"Fri, 07 Apr 2017 07:44:50 GMT","You can use the apis on CamelContext to add new routes / remove routes etc.&#010;&#010;However its all standard Java and how you can add dynamic new code to&#010;a running JVM is outside the scope of Apache Camel and you need to&#010;look elsewhere how to do that.&#010;&#010;Groovy allows scripting so you can have it load some .groovy source&#010;code and compile and run that in an existing JVM. Plain Java code is&#010;harder and you likely need some external tooling such as jrebel or&#010;what else is out there. But I dont recommend doing so.&#010;&#010;Try to look at the idea of immutable containers with rolling&#010;upgrades/downgrades to change your running applications.&#010;&#010;&#010;&#010;On Fri, Apr 7, 2017 at 9:27 AM, Fatima Sajjad &lt;fatimasajjad514@gmail.com&gt; wrote:&#010;&gt; Thank you for your reply.&#010;&gt; Can you please answer one more question? Is there any way to define or add&#010;&gt; new routes in camel context without recompiling the project, Like run time&#010;&gt; route addition? Does any of the DSLs (Spring, Scala , Groovy or Java)&#010;&gt; provide that ?&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/how-to-enable-Scala-Groovy-route-definition-in-camel-web-console-tp5797121p5797125.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
122,123,Fatima Sajjad,        Re: how to enable Scala/Groovy route definition in camel web console,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491557333330-5797135.post%40n5.nabble.com%3E,users,"Fri, 07 Apr 2017 09:28:53 GMT","yeah i understand this its harder to do this is java.&#010;&#010;with reference to your following statement which is infact true .is there&#010;any standard camel project /sample having done this thing already ?&#010;""Groovy allows scripting so you can have it load some .groovy source &#010;code and compile and run that in an existing JVM.""&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/how-to-enable-Scala-Groovy-route-definition-in-camel-web-console-tp5797121p5797135.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
123,124,Quinn Stevenson,          Re: how to enable Scala/Groovy route definition in camel web console,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CA9D3FD2E-B910-47D3-8339-94FD1AFD7579%40pronoia-solutions.com%3E,users,"Fri, 07 Apr 2017 13:57:41 GMT","The only was I’ve seen routes added and removed from a Camel context dynamically is using&#010;OGSi and some sort of a service factory - here’s one example ( https://blog.avisi.nl/2014/06/05/creating-camel-routes-on-the-fly-using-osgi/&#010;&lt;https://blog.avisi.nl/2014/06/05/creating-camel-routes-on-the-fly-using-osgi/&gt; )&#010;&#010;&#010;&gt; On Apr 7, 2017, at 3:28 AM, Fatima Sajjad &lt;fatimasajjad514@gmail.com&gt; wrote:&#010;&gt; &#010;&gt; yeah i understand this its harder to do this is java.&#010;&gt; &#010;&gt; with reference to your following statement which is infact true .is there&#010;&gt; any standard camel project /sample having done this thing already ?&#010;&gt; ""Groovy allows scripting so you can have it load some .groovy source &#010;&gt; code and compile and run that in an existing JVM.""&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/how-to-enable-Scala-Groovy-route-definition-in-camel-web-console-tp5797121p5797135.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;"
124,125,partha006,Getting BeanIOConfigurationException when calling osgi service which has beanio implementation,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491569247724-5797149.post%40n5.nabble.com%3E,users,"Fri, 07 Apr 2017 12:47:27 GMT","I am using blueprint DSL and I have osgi service which has beanio&#010;implementation &#010;&#010;In my beanio mapping file , I am referring the class in the different&#010;package or the same package of my interface service class.&#010;&#010;Like &#010;mapping file:&#010;&#010;&lt;beanio xmlns=""http://www.beanio.org/2012/03""&gt;&#010;&#010;&#009;&lt;stream name=""xxx"" format=""fixedlength""&gt;&#010;&#009;&#009;&lt;record name=""yyy"" class=""com.blueprint.map.xxxRecord""&gt;&#010;&#009;&#009;&#009;&lt;field name=""Flag"" length=""1"" /&gt;&#010;&#009;&#009;&#009;&#010;&#009;&#009;&lt;/record&gt;&#010;&#009;&lt;/stream&gt;&#010;&lt;/beanio&gt;&#010;&#010;when I am calling my interface, It is accessing the implementation class&#010;correctly.&#010;&#010;In my implementation class ,I am using beanio functionality which referring&#010;above mapping file. &#010;&#010;but while executing I am getting below errors&#010;&#010;1.org.beanio.BeanIOConfigurationException: Invalid record &#010;2.org.beanio.BeanIOConfigurationException: Invalid bean class&#010;3.java.lang.ClassNotFoundException&#010;&#010;where it is unable to find the class which I am referring in the mapping&#010;file.&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Getting-BeanIOConfigurationException-when-calling-osgi-service-which-has-beanio-implementation-tp5797149.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
125,126,njssferreira,Camel route not working after update from Camel 2.13.0 to 2.17.2,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491582091309-5797156.post%40n5.nabble.com%3E,users,"Fri, 07 Apr 2017 16:21:31 GMT","Hi everyone,&#010;&#010;after upgrading the Java implementation of Camel from 2.13.0 to 2.17.2 (and&#010;cxf-rt-frontend-jaxrs from 2.7.10 to 3.1.5, and spring framework from 3.2.8&#010;to 4.3.2), the webapp that is serving as a proxy stopped working correctly. &#010;&#010;The app is supposed to intercept a webservice request, modify fields that&#010;are defined in a properties file throught the ContextManager class, and&#010;forward the request to the correct endpoint.&#010;&#010;After the upgrade, the app is unable to set the missing fields in the&#010;original request, thus returning the following message:&#010;""REQUEST_MESSAGE_NOT_COMPLIANT_WITH_SCHEMA - Your request message does not&#010;comply to the web service schema"".&#010;&#010;This is of course expected since the missing fields are not being set. &#010;&#010;Any help would be greatly appreciated.&#010;&#010;My Camel route definition is as follows:&#010;&#010;*CreditLimitRequestServiceRoute.class*&#010;&#010;public class CreditLimitRequestServiceRoute extends AbstractEHRoute {&#010;&#010;&#009;@Autowired&#010;&#009;private ContextManager contextManager;&#010;&#009;&#010;&#009;@Override&#010;&#009;public void configure() throws Exception {&#010;&#010;&#009;&#009;Namespaces ns = new Namespaces(""ns1"", ""http://ehsmartlink/commonError"");&#010;&#009;&#009;&#010;&#009;&#009;onException(SoapFault.class)&#010;&#009;&#009;&#010;.to(""consoleflux:message?level=ERROR&amp;text=${exception.message}&amp;content=${exception.detail}"")&#010;&#009;&#009;&#009;.setHeader(""soapFaultDetail"", simple(""${exception.detail}""))&#010;&#009;&#009;&#009;.choice()&#010;&#009;&#009;&#009;&#009;.when(and(header(""soapFaultDetail"").isNotNull(),&#010;xpath(""//ns1:commonError/errorType/text() = 'BusinessError'"", ns,&#010;""soapFaultDetail"")))&#010;&#009;&#009;&#009;&#009;&#009;.to(""consoleflux:finish?ignoreContent=true"")&#010;&#009;&#009;&#009;&#009;.otherwise()&#010;&#009;&#009;&#009;&#009;&#009;.to(""consoleflux:error?ignoreContent=true"");&#010;&#010;&#009;&#009;onException(Exception.class)&#010;&#009;&#009;&#009;.to(""consoleflux:error"");&#010;&#010;&#009;&#010;from(""cxf:bean:creditLimitRequestServiceProxy?dataFormat=PAYLOAD"").routeId(""creditLimitRequestServiceRoute"")&#010;&#009;&#009;&#009;.log(LoggingLevel.INFO, ""Invocation du WS"").streamCaching()&#010;&#009;&#009;&#009;.to(""consoleflux:start?source=SOA&amp;dest=EH&amp;type=CREDIT_LIMIT"")&#010;&#009;&#009;&#009;.to(""consoleflux:message?ignoreContent=true&amp;text=Affectation du Contexte&#010;EH"")&#010;&#009;&#009;&#009;.setHeader(""context"").xpath(""//context"")&#010;&#009;&#009;&#009;.bean(contextManager, ""setContext"")&#010;&#009;&#009;&#009;.to(""consoleflux:message?ignoreContent=true&amp;text=Invocation du WS EH&#010;${headers.operationName}"")&#010;&#009;&#009;&#009;.to(""cxf:bean:creditLimitRequestService?dataFormat=PAYLOAD"")&#010;&#009;&#009;&#009;.to(""consoleflux:finish"");&#010;&#010;&#009;}&#010;&#010;}&#010;*AbstractEHRoute.class*&#010;&#010;public abstract class AbstractEHRoute extends RouteBuilder {&#010;&#009;&#010;&#009;protected XPathBuilder xpath(String text, Namespaces namespaces, String&#010;headerName) {&#010;&#009;&#009;XPathBuilder xpath = XPathBuilder.xpath(text).namespaces(namespaces);&#010;&#009;&#009;xpath.setHeaderName(headerName);&#010;&#009;&#009;return xpath;&#010;&#009;}&#010;&#009;&#010;}&#010;&#010;*ContextManager*&#010;&#010;package com.stef.soa.eh.integration.beans;&#010;&#010;import static com.google.common.base.Objects.firstNonNull;&#010;import static com.google.common.base.Strings.isNullOrEmpty;&#010;&#010;import java.util.Map;&#010;import java.util.UUID;&#010;&#010;import org.apache.camel.Header;&#010;import org.springframework.beans.factory.annotation.Value;&#010;import org.springframework.stereotype.Component;&#010;import org.w3c.dom.Document;&#010;import org.w3c.dom.Element;&#010;import org.w3c.dom.Node;&#010;import org.w3c.dom.NodeList;&#010;&#010;import com.google.common.base.Preconditions;&#010;import com.google.common.collect.Maps;&#010;&#010;@Component&#010;public class ContextManager {&#010;&#010;&#009;private static final String USER_NAME = ""userName"";  &#010;&#009;private static final String USER_PASSWORD = ""userPassword"";&#010;&#009;private static final String LANGUAGE_TEXT_IDENTIFIER =&#010;""languageTextIdentifier"";&#010;&#009;private static final String TRANSACTION_IDENTIFIER =&#010;""transactionIdentifier"";&#010;&#009;private static final String POLICIY_IDENTIFIER = ""policyIdentifier"";&#010;&#009;private static final String POLICY_EXTENSION_IDENTIFIER =&#010;""policyExtensionIdentifier"";&#010;&#009;private static final String POLICY_EHBU_IDENTIFIER =&#010;""policyEHBUIdentifier"";&#010;&#009;private static final String IP_ADRESS = ""ipAdress"";&#010;&#009;&#010;&#009;@Value(""${eh.context.userName}"")&#010;&#009;private String userName;&#010;&#010;&#009;@Value(""${eh.context.userPassword}"")&#010;&#009;private String userPassword;&#010;&#010;&#009;@Value(""${eh.context.languageTextIdentifier}"")&#010;&#009;private String languageTextIdentifier;&#010;&#010;&#009;@Value(""${eh.context.policyIdentifier}"")&#010;&#009;private String policyIdentifier;&#010;&#010;&#009;@Value(""${eh.context.policyExtensionIdentifier}"")&#010;&#009;private String policyExtensionIdentifier;&#010;&#010;&#009;@Value(""${eh.context.policyEHBUIdentifier}"")&#010;&#009;private String policyEHBUIdentifier;&#010;&#010;&#009;@Value(""${eh.context.ipAdress}"")&#010;&#009;private String ipAdress;&#010;&#010;&#009;public void setContext(@Header(""context"") Node context) {&#010;&#009;&#009;&#010;&#009;&#009;Preconditions.checkNotNull(context, ""Le contexte doit être renseigné"");&#010;&#009;&#009;&#010;&#009;&#009;// Suppression des noeuds enfants avec sauvegarde les valeurs courantes&#010;dans une map&#010;&#009;&#009;Map&lt;String, String&gt; currentValues = Maps.newHashMap();&#010;&#009;&#009;NodeList list = context.getChildNodes();&#010;&#009;&#009;for (int i = list.getLength() - 1; i &gt;= 0; i--) {&#010;&#009;&#009;&#009;Node child = list.item(i);&#010;&#009;&#009;&#009;if (child.getNodeType() == Node.ELEMENT_NODE &amp;&amp;&#010;!isNullOrEmpty(child.getTextContent())) {&#010;&#009;&#009;&#009;&#009;currentValues.put(child.getNodeName(), child.getTextContent());&#010;&#009;&#009;&#009;}&#010;&#009;&#009;&#009;context.removeChild(child);&#010;&#009;&#009;}&#010;&#009;&#009;&#010;&#009;&#009;// Ajout des noeuds enfants&#010;&#009;&#009;appendChild(context, USER_NAME, userName, currentValues);&#010;&#009;&#009;appendChild(context, USER_PASSWORD, userPassword, currentValues);&#010;&#009;&#009;appendChild(context, LANGUAGE_TEXT_IDENTIFIER, languageTextIdentifier,&#010;currentValues);&#010;&#009;&#009;appendChild(context, TRANSACTION_IDENTIFIER, UUID.randomUUID().toString(),&#010;currentValues);&#010;&#009;&#009;appendChild(context, POLICIY_IDENTIFIER, policyIdentifier, currentValues);&#010;&#009;&#009;appendChild(context, POLICY_EXTENSION_IDENTIFIER,&#010;policyExtensionIdentifier, currentValues);&#010;&#009;&#009;appendChild(context, POLICY_EHBU_IDENTIFIER, policyEHBUIdentifier,&#010;currentValues);&#010;&#009;&#009;appendChild(context, IP_ADRESS, ipAdress, currentValues);&#010;&#009;}&#010;&#009;&#010;&#009;private void appendChild(Node node, String name, String value, Map&lt;String,&#010;String&gt; currentValues) {&#010;&#009;&#009;Document document = node.getOwnerDocument();&#010;&#009;&#009;Element child = document.createElement(name);&#010;&#009;&#009;child.setTextContent(firstNonNull(currentValues.get(name), value));&#010;&#009;&#009;node.appendChild(child);&#010;&#009;}&#010;&#010;}&#010;&#010;*context.xml*&#010;&#010;&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;&#010;&lt;beans xmlns=""http://www.springframework.org/schema/beans"" &#010;&#009;xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" &#010;&#009;xmlns:context=""http://www.springframework.org/schema/context""&#010;&#009;xsi:schemaLocation=""http://www.springframework.org/schema/beans&#010;             &#009;&#009;http://www.springframework.org/schema/beans/spring-beans.xsd&#010;             &#009;&#009;http://www.springframework.org/schema/context&#010;             &#009;&#010;http://www.springframework.org/schema/context/spring-context.xsd""&gt;&#010;&#010;&#009;&lt;context:property-placeholder location=""classpath:eh.properties,&#010;file:///${eh.home}/conf/eh.properties""&#010;&#009;&#009;ignore-resource-not-found=""true"" system-properties-mode=""OVERRIDE"" /&gt;&#010;&#010;&#009;&lt;context:component-scan base-package=""com.stef.soa.eh"" /&gt;&#010;&#010;&#009;&lt;context:annotation-config /&gt;&#010;&#010;&#009;&lt;import resource=""classpath:META-INF/eh/spring/broker.xml"" /&gt;&#010;&#009;&lt;import resource=""classpath:META-INF/eh/spring/camel.xml"" /&gt;&#010;&#009;&lt;import resource=""classpath:META-INF/eh/spring/cxf.xml"" /&gt;&#010;&#009;&lt;import&#010;resource=""classpath:META-INF/soa-console-flux-client/spring/context.xml""/&gt;&#010;&#010;&lt;/beans&gt;&#010;&#010;*camel.xml*&#010;&#010;&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;&#010;&lt;beans &#010;&#009;xmlns=""http://www.springframework.org/schema/beans"" &#010;&#009;xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" &#010;&#009;xmlns:http=""http://cxf.apache.org/transports/http/configuration""&#010;&#009;xsi:schemaLocation=""&#010;&#009;&#009;http://www.springframework.org/schema/beans&#010;        http://www.springframework.org/schema/beans/spring-beans.xsd&#010;        http://camel.apache.org/schema/spring &#010;   &#009;&#009;http://camel.apache.org/schema/spring/camel-spring.xsd&#010;  &#009;&#009;http://cxf.apache.org/transports/http/configuration&#010;&#009;&#009;http://cxf.apache.org/schemas/configuration/http-conf.xsd"" &gt;&#010;    &#010;&#009;&#010;&#009;&lt;camelContext xmlns=""http://camel.apache.org/schema/spring"" id=""ehContext""&gt;&#010;&#009;&#009;&lt;properties&gt;&#010;&#009;&#009;&#009;&lt;property key=""org.apache.camel.xmlconverter.output.indent"" value=""yes""/&gt;&#010;&#009;&#009;&#009;&lt;property&#010;key=""org.apache.camel.xmlconverter.output.{http://xml.apache.org/xslt}indent-amount""&#010;value=""4""/&gt;&#010;&#009;&#009;&lt;/properties&gt;&#010;&#009;&#009;&lt;package&gt;com.stef.soa.eh.integration&lt;/package&gt;&#010;&#009;&lt;/camelContext&gt;&#010;&#010;&lt;/beans&gt;&#010;&#010;*cxf.xml*&#010;&#010;&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;&#010;&lt;beans &#010;&#009;xmlns=""http://www.springframework.org/schema/beans"" &#010;&#009;xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" &#010;&#009;xmlns:cxf=""http://camel.apache.org/schema/cxf""&#010;&#009;xmlns:http=""http://cxf.apache.org/transports/http/configuration""&#010;&#009;xmlns:sec=""http://cxf.apache.org/configuration/security""&#010;&#009;xsi:schemaLocation=""&#010;&#009;&#009;http://www.springframework.org/schema/beans&#010;        http://www.springframework.org/schema/beans/spring-beans.xsd&#010;  &#009;&#009;http://camel.apache.org/schema/cxf&#010;  &#009;&#009;http://camel.apache.org/schema/cxf/camel-cxf.xsd&#010;  &#009;&#009;http://cxf.apache.org/transports/http/configuration&#010;&#009;&#009;http://cxf.apache.org/schemas/configuration/http-conf.xsd"" &gt;&#010;    &#010;&#009;&#010;&#009;&lt;http:conduit name=""*.http-conduit""&gt;&#010;&#009;&#009;&lt;http:client ProxyServer=""${proxy.host}"" ProxyServerPort=""${proxy.port}"" &#010;&#009;&#009;&#009;ConnectionTimeout=""${http.client.connectionTimeout}""&#010;ReceiveTimeout=""${http.client.receiveTimeout}"" /&gt;&#010;&#009;&#009;&lt;http:proxyAuthorization&gt;&#010;&#009;&#009;&#009;&lt;sec:UserName&gt;${proxy.username}&lt;/sec:UserName&gt;&#010;&#009;&#009;&#009;&lt;sec:Password&gt;${proxy.password}&lt;/sec:Password&gt;&#010;&#009;&#009;&lt;/http:proxyAuthorization&gt;&#010;&#009;&#009;&lt;http:tlsClientParameters&gt;&#010;&#009;&#009;&#009;&lt;sec:keyManagers keyPassword=""${eh.keyStore.password}""&gt;&#010;&#009;&#009;&#009;&#009;&lt;sec:keyStore type=""pkcs12"" password=""${eh.keyStore.password}""&#010;file=""${eh.home}/${eh.keyStore.file}"" /&gt;&#010;&#009;&#009;&#009;&lt;/sec:keyManagers&gt;&#010;&#009;&#009;&lt;/http:tlsClientParameters&gt;&#010;&#009;&lt;/http:conduit&gt;&#010;&#010;&#009;&#010;&#009;&#010;&#009;&lt;cxf:cxfEndpoint &#010;&#009;&#009;id=""creditLimitRequestServiceProxy"" &#010;&#009;&#009;address=""/creditLimitRequestService"" &#010;&#009;&#010;wsdlURL=""META-INF/eh/wsdl/CreditLimitRequestService/EH_SMARTLINK_CreditLimitRequestServiceV4.wsdl""&#010;&#010;&#009;&#009;serviceName=""ns:CreditLimitRequestServiceV4""&#010;&#009;&#009;endpointName=""ns:CreditLimitRequestServiceV4""&#010;&#009;&#009;xmlns:ns=""http://ehsmartlink/CreditLimitRequestService/v4""&#010;&#009;/&gt;&#010;&#010;&#009;&lt;cxf:cxfEndpoint &#010;&#009;&#009;id=""creditLimitRequestService"" &#010;&#009;&#009;address=""${eh.creditLimitRequestService.url}""&#010;&#009;&#010;wsdlURL=""META-INF/eh/wsdl/CreditLimitRequestService/EH_SMARTLINK_CreditLimitRequestServiceV4.wsdl""&#010;&#009;&#009;serviceName=""ns:CreditLimitRequestServiceV4""&#010;&#009;&#009;endpointName=""ns:CreditLimitRequestServiceV4""&#010;&#009;&#009;xmlns:ns=""http://ehsmartlink/CreditLimitRequestService/v4""&#010;&#009;&#009;loggingFeatureEnabled=""true""&#010;&#009;/&gt;&#010;&#010;&#009;&lt;cxf:cxfEndpoint &#010;&#009;&#009;id=""customerListRetrieveServiceProxy"" &#010;&#009;&#009;address=""/customerListRetrieveService"" &#010;&#009;&#010;wsdlURL=""META-INF/eh/wsdl/CustomerListRetrieveService/CustomerListRetrieveV2.wsdl"" &#010;&#009;&#009;serviceName=""ns:CustomerListRetrieveServiceV2""&#010;&#009;&#009;endpointName=""ns:CustomerListRetrieveServiceV2""&#010;&#009;&#009;xmlns:ns=""http://ehsmartlink/CustomerListRetrieve/v2""&#010;&#009;/&gt;&#010;&#010;&#009;&lt;cxf:cxfEndpoint &#010;&#009;&#009;id=""customerListRetrieveService"" &#010;&#009;&#009;address=""${eh.customerListRetrieveService.url}""&#010;&#009;&#010;wsdlURL=""META-INF/eh/wsdl/CustomerListRetrieveService/CustomerListRetrieveV2.wsdl""&#010;&#009;&#009;serviceName=""ns:CustomerListRetrieveServiceV2""&#010;&#009;&#009;endpointName=""ns:CustomerListRetrieveServiceV2""&#010;&#009;&#009;xmlns:ns=""http://ehsmartlink/CustomerListRetrieve/v2""&#010;&#009;&#009;loggingFeatureEnabled=""true""&#010;&#009;/&gt;&#010;&#010;&#009;&lt;cxf:cxfEndpoint &#010;&#009;&#009;id=""firstEuroListRepertoireReadServiceProxy"" &#010;&#009;&#009;address=""/firstEuroListRepertoireReadService"" &#010;&#009;&#010;wsdlURL=""META-INF/eh/wsdl/FirstEuroListRepertoireReadService/EH_SMARTLINK_FirstEuroListRepertoireReadService-v1.wsdl""&#010;&#010;&#009;&#009;serviceName=""ns:FirstEuroListRepertoireReadService-v1""&#010;&#009;&#009;endpointName=""ns:FirstEuroListRepertoireReadServicePort-v1_soap11""&#010;&#009;&#010;xmlns:ns=""http://eulerhermes.com/SMARTLINK/services/FirstEuroListRepertoireReadService/v1""&#010;&#009;/&gt;&#010;&#010;&#009;&lt;cxf:cxfEndpoint &#010;&#009;&#009;id=""firstEuroListRepertoireReadService"" &#010;&#009;&#009;address=""${eh.firstEuroListRepertoireReadService.url}""&#010;&#009;&#010;wsdlURL=""META-INF/eh/wsdl/FirstEuroListRepertoireReadService/EH_SMARTLINK_FirstEuroListRepertoireReadService-v1.wsdl""&#010;&#010;&#009;&#009;serviceName=""ns:FirstEuroListRepertoireReadService-v1""&#010;&#009;&#009;endpointName=""ns:FirstEuroListRepertoireReadServicePort-v1_soap11""&#010;&#009;&#010;xmlns:ns=""http://eulerhermes.com/SMARTLINK/services/FirstEuroListRepertoireReadService/v1""&#010;&#009;&#009;loggingFeatureEnabled=""true""&#010;&#009;/&gt;&#010;&#010;&#009;&lt;cxf:cxfEndpoint &#010;&#009;&#009;id=""firstEuroListRepertoireUpdateServiceProxy"" &#010;&#009;&#009;address=""/firstEuroListRepertoireUpdateService"" &#010;&#009;&#010;wsdlURL=""META-INF/eh/wsdl/FirstEuroListRepertoireUpdateService/EH_SMARTLINK_FirstEuroListRepertoireUpdateService-v1.wsdl""&#010;&#010;&#009;&#009;serviceName=""ns:FirstEuroListRepertoireUpdateService-v1""&#010;&#009;&#009;endpointName=""ns:FirstEuroListRepertoireUpdateServicePort-v1""&#010;&#009;&#010;xmlns:ns=""http://eulerhermes.com/SMARTLINK/services/FirstEuroListRepertoireUpdateService/v1""&#010;&#009;/&gt;&#010;&#010;&#009;&lt;cxf:cxfEndpoint &#010;&#009;&#009;id=""firstEuroListRepertoireUpdateService"" &#010;&#009;&#009;address=""${eh.firstEuroListRepertoireUpdateService.url}""&#010;&#009;&#010;wsdlURL=""META-INF/eh/wsdl/FirstEuroListRepertoireUpdateService/EH_SMARTLINK_FirstEuroListRepertoireUpdateService-v1.wsdl""&#010;&#009;&#009;serviceName=""ns:FirstEuroListRepertoireUpdateService-v1""&#010;&#009;&#009;endpointName=""ns:FirstEuroListRepertoireUpdateServicePort-v1""&#010;&#009;&#010;xmlns:ns=""http://eulerhermes.com/SMARTLINK/services/FirstEuroListRepertoireUpdateService/v1""&#010;&#009;&#009;loggingFeatureEnabled=""true""&#010;&#009; /&gt;&#009;&#010;&#009;&#009;&#009;&#009;&#009;&#010;&#009;&lt;cxf:cxfEndpoint &#010;&#009;&#009;id=""limitDetailReadServiceProxy"" &#010;&#009;&#009;address=""/limitDetailReadService""&#010;&#009;&#010;wsdlURL=""META-INF/eh/wsdl/LimitDetailReadService/EH_SMARTLINK_LimitDetailReadService-v2.wsdl""&#010;&#010;&#009;&#009;serviceName=""ns:LimitDetailReadService-v2""&#010;&#009;&#009;endpointName=""ns:LimitDetailReadServicePort-v2""&#010;&#009;&#010;xmlns:ns=""http://eulerhermes.com/SMARTLINK/services/LimitDetailReadService/v2""&#010;&#009;/&gt;&#010;&#010;&#009;&lt;cxf:cxfEndpoint &#010;&#009;&#009;id=""limitDetailReadService"" &#010;&#009;&#009;address=""${eh.limitDetailReadService.url}""&#010;&#009;&#010;wsdlURL=""META-INF/eh/wsdl/LimitDetailReadService/EH_SMARTLINK_LimitDetailReadService-v2.wsdl""&#010;&#010;&#009;&#009;serviceName=""ns:LimitDetailReadService-v2""&#010;&#009;&#009;endpointName=""ns:LimitDetailReadServicePort-v2""&#010;&#009;&#010;xmlns:ns=""http://eulerhermes.com/SMARTLINK/services/LimitDetailReadService/v2""&#010;&#009;&#009;loggingFeatureEnabled=""true""&#010;&#009;/&gt;&#010;&#010;&lt;/beans&gt;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-route-not-working-after-update-from-Camel-2-13-0-to-2-17-2-tp5797156.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
126,127,njssferreira,  Re: Camel route not working after update from Camel 2.13.0 to 2.17.2,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491817756379-5797302.post%40n5.nabble.com%3E,users,"Mon, 10 Apr 2017 09:49:16 GMT",&#010;UPDATE:&#010;&#010;The problem seems to be coming from the xpath method which in the previous&#010;version returned the correct node where some information needs to be set and&#010;now is returning null.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-route-not-working-after-update-from-Camel-2-13-0-to-2-17-2-tp5797156p5797302.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
127,128,james isaac,Optimizing Camel HTTP4 with KeepAlive,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGjCRh7g7ur%3DEhAyPexOKf8ODRTryb8ZzJ7FEO5Jyp558GzFrQ%40mail.gmail.com%3E,users,"Mon, 10 Apr 2017 07:28:24 GMT","down votefavorite&#010;&lt;http://stackoverflow.com/questions/43276849/optimizing-camel-http4-with-keepalive#&gt;&#010;&#010;I want to be able to POST messages to an HTTPS server using Camel at a&#010;pretty fast rate ( &gt; 1500/sec) using only one connection to the server.&#010;&#010;I tried setting keepAlive to true, but I still cant see any improvement in&#010;speed.&#010;&#010;Took the tcpdump while sending 5 messages, and I find 5 SYN/ACK packets on&#010;wireshark. Possibly the SSL certificate is also being sent on each POST.&#010;(102 packets captured by the tcpdump, but all I am sending are 5&#010;""HelloWorld"" strings)&#010;&#010;Is there any way I can speed things up? This is the code I used:&#010;&#010; CamelContext context = new DefaultCamelContext();&#010;    final HttpComponent http = (HttpComponent) context.getComponent(""https4"");&#010;&#010;    http.setConnectionsPerRoute(1);&#010;    http.setMaxTotalConnections(1);&#010;    HttpConfiguration httpConfiguration = new HttpConfiguration();&#010;    http.setHttpConfiguration(httpConfiguration);;&#010;&#010;    context.addComponent(""fcpHttpComponent"", http);&#010;    template = context.createProducerTemplate();&#010;&#010;    headers.put(Exchange.CONTENT_TYPE, ""application/json"");&#010;    headers.put(Exchange.HTTP_METHOD, HttpMethods.POST);&#010;    final String endpoint = ""https://xxx.xxx.xxx.xxx:4443"";&#010;&#010;    try {&#010;        httpEndpoint = new HttpEndpoint(endpoint, http, new URI(endpoint));&#010;        httpEndpoint.configureProperties(headers);&#010;        PoolingHttpClientConnectionManager clientConnectionManager =&#010;new PoolingHttpClientConnectionManager();&#010;        SocketConfig socketConfig = SocketConfig.custom()&#010;                .setSoKeepAlive(true)&#010;                .setSoReuseAddress(true)&#010;                .setTcpNoDelay(true)&#010;                .setSndBufSize(10)&#010;                .build();&#010;        clientConnectionManager.setDefaultSocketConfig(socketConfig);&#010;&#010;        HttpClientBuilder clientBuilder = HttpClientBuilder.create();&#010;        clientBuilder.setMaxConnPerRoute(1);&#010;        clientBuilder.setConnectionManager(clientConnectionManager);&#010;        clientBuilder.build();&#010;        ConnectionKeepAliveStrategy keepAliveStrategy = new&#010;DefaultConnectionKeepAliveStrategy();&#010;        clientBuilder.setKeepAliveStrategy(keepAliveStrategy );&#010;        httpEndpoint.setClientBuilder(clientBuilder);&#010;&#010;        httpEndpoint.setClientConnectionManager(clientConnectionManager);&#010;&#010;        template.start();&#010;        context.start();&#010;    } catch (final Exception e) {&#010;        LOG.error(""Exception while starting Camel context "", e);&#010;    }&#010;&#010;    //Call this method 5 times&#010;    template.asyncRequestBodyAndHeaders(httpEndpoint, message, headers);&#010;&#010;&#010;The SSL certificate details are given as JVM arguments. I am able to POST&#010;data but the speed is something I need to improve.&#010;&#010;[Posted this on stackoverflow, too :&#010;http://stackoverflow.com/questions/43276849/optimizing-camel-http4-with-keepalive&#010;]&#010;&#010;"
128,129,raulsperoni,Testing Jpa Consumer Route.,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491831585275-5797310.post%40n5.nabble.com%3E,users,"Mon, 10 Apr 2017 13:39:45 GMT","Hi, i'm having problems with testing a Jpaconsumer route, i'm trying to&#010;replace the jpa endpoint with direct: using replacefromwith but i'm getting:&#010;No consumers available on endpoint.What am i doing wrong?Thank you.*Test&#010;def*public class RutaArchivarItemsTest extends CamelTestSupport {   &#010;@Produce(uri = ""direct:producer"")    protected ProducerTemplate template;   &#010;@EndpointInject(uri = ""direct:lala"")    protected DirectEndpoint&#010;directEndpoint;    @EndpointInject(uri = ""mock:borrarEventoPieza"")   &#010;protected MockEndpoint borrarEventoPieza;    @EndpointInject(uri =&#010;""mock:archivoArchivoPieza"")    protected MockEndpoint archivoArchivoPieza;   &#010;private String id_prefix = RutaArchivarItems.class.getSimpleName();   &#010;@Override    protected RouteBuilder createRouteBuilder() throws Exception {       &#010;return new RutaArchivarItems();    }    @Override    public boolean&#010;isUseAdviceWith() {        return true;    }    public void adviceRoutes()&#010;throws Exception {       &#010;context.getRouteDefinitions().get(0).adviceWith(context, new&#010;AdviceWithRouteBuilder() {            @Override            public void&#010;configure() throws Exception {               &#010;replaceFromWith(directEndpoint);                weaveById(id_prefix +&#010;""guardarArchivo"").replace().to(archivoArchivoPieza);               &#010;weaveById(id_prefix + ""buscarEventoPieza"").remove();               &#010;weaveById(id_prefix + ""borrarEventoPieza"").replace().to(borrarEventoPieza);              &#010;&#010;weaveById(id_prefix + ""buscarConfiguracion"").replace().process(new&#010;Processor() {                    @Override                    public void&#010;process(Exchange exchange) throws Exception {                       &#010;exchange.getIn().setHeader((String) exchange.getIn().getHeader(""key""), ""3"");             &#010;     &#010;}                });            }        });    }    @Test    public void&#010;testEventoSeArchiva() throws Exception {        adviceRoutes();       &#010;context.start();        Date fechaPieza =&#010;DateTime.now().plusHours(-4).toDate();        EventoPieza eventoPieza = new&#010;EventoPieza();        eventoPieza.setIntentos(3);       &#010;eventoPieza.setUltimaFechaEnvio(fechaPieza);       &#010;template.sendBody(directEndpoint,eventoPieza);        assertEquals(1,&#010;borrarEventoPieza.getReceivedCounter());        assertEquals(1,&#010;archivoArchivoPieza.getReceivedCounter());        context.stop();   &#010;}}*Route def:*public class RutaArchivarItems extends RutaBase {    protected&#010;int offset_hours;    protected boolean habilitado;    JpaEndpoint&#010;jpaEventoPieza = new JpaEndpoint();    JpaEndpoint jpaArchivo = new&#010;JpaEndpoint();    @PostConstruct    public void intialize() {        String&#010;delay = cf.find(Configuracion.class,&#010;Configuracion.GENERAL_CONSUMER_DELAY).getValue();        int&#010;backoff_multiplier = Integer.valueOf(cf.find(Configuracion.class,&#010;Configuracion.GENERAL_CONSUMER_BACKOFF_MULTIPLIER).getValue());        int&#010;backoff_threshold = Integer.valueOf(cf.find(Configuracion.class,&#010;Configuracion.GENERAL_CONSUMER_BACKOFF_THRESHOLD).getValue());       &#010;//EventoPieza        jpaEventoPieza.setCamelContext(getContext());       &#010;jpaEventoPieza.setEntityType(EventoPieza.class);       &#010;jpaEventoPieza.setEntityManagerFactory(entityManagerFactory);       &#010;jpaEventoPieza.setTransactionManager(transactionManager);       &#010;jpaEventoPieza.setEndpointUriIfNotSpecified(""jpa://archivoEventoPieza"");       &#010;//Consumer        jpaEventoPieza.setConsumeDelete(false);        Map&lt;String,&#010;Object&gt; prop = new HashMap&lt;&gt;();        prop.put(""delay"", delay);       &#010;prop.put(""namedQuery"", ""pieza.paraArchivar"");       &#010;jpaEventoPieza.setConsumerProperties(prop);       &#010;jpaEventoPieza.setBackoffMultiplier(backoff_multiplier);       &#010;jpaEventoPieza.setBackoffIdleThreshold(backoff_threshold);       &#010;jpaEventoPieza.setMaximumResults(1000);        //Producer       &#010;jpaArchivo.setCamelContext(getContext());       &#010;jpaArchivo.setEntityType(ArchivoEventos.class);       &#010;jpaArchivo.setEntityManagerFactory(entityManagerFactory);       &#010;jpaArchivo.setTransactionManager(transactionManager);       &#010;jpaArchivo.setFlushOnSend(true);       &#010;jpaArchivo.setEndpointUriIfNotSpecified(""jpa://archivoArchivoPieza"");       &#010;offset_hours = Integer.valueOf(cf.find(Configuracion.class,&#010;Configuracion.GENERAL_ARCHIVO_OFFSET).getValue());        habilitado =&#010;Boolean.valueOf(cf.find(Configuracion.class,&#010;Configuracion.GENERAL_ARCHIVO_ENABLED).getValue());    }    @Override   &#010;public void configure() throws Exception {       &#010;from(jpaEventoPieza).routeId(""A_"" + id_prefix).autoStartup(isHabilitado())               &#010;.setHeader(""key"", constant(Configuracion.GENERAL_ARCHIVO_OFFSET))               &#010;.to(""buscarConfiguracion"").id(id_prefix + ""buscarConfiguracion"")               &#010;.filter().method(BDUtils.class, ""piezaListaParaArchivar"")               &#010;.process(new Processor() {                    @Override                   &#010;public void process(Exchange exchange) throws Exception {                       &#010;Message in = exchange.getIn();                        EventoPieza item =&#010;(EventoPieza) in.getBody();                        ArchivoEventos&#010;archivoEventos = new ArchivoEventos(item);                       &#010;in.setBody(archivoEventos);                        in.setHeader(""itemId"",&#010;item.getItemId());                        in.setHeader(""event"",&#010;item.getEvent());                        in.setHeader(""version"",&#010;item.getVersion());                    }                })               &#010;.to(jpaArchivo).id(id_prefix + ""guardarArchivo"")               &#010;.log(LoggingLevel.INFO, ""Archivar: "" + body().toString())               &#010;.to(""buscarEventoPieza"").id(id_prefix + ""buscarEventoPieza"")               &#010;.to(""borrarEventoPieza"").id(id_prefix + ""borrarEventoPieza"")               &#010;.log(LoggingLevel.INFO, ""Borrar: "" + body().toString());    }    public&#010;boolean isHabilitado() {        return habilitado;    }}&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Testing-Jpa-Consumer-Route-tp5797310.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
129,130,raulsperoni,Test JpaConsumer route.,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2BrFw4tgbFNRJdt0mxvWhziMsW216ZDQ4m%3DJNJ0SveSxr4XUUQ%40mail.gmail.com%3E,users,"Mon, 10 Apr 2017 13:51:20 GMT","Hi, I'm having problems while replacing jpaEndpoint with direct in the&#010;test. Error is ""No consumers available on endpoint"".&#010;&#010;Thanks in advance!&#010;&#010;Here is test definition:&#010;&#010; public class RutaArchivarItemsTest extends CamelTestSupport {&#010;&#010;&#010;    @Produce(uri = ""direct:producer"")&#010;    protected ProducerTemplate template;&#010;&#010;    @EndpointInject(uri = ""direct:lala"")&#010;    protected DirectEndpoint directEndpoint;&#010;&#010;    @EndpointInject(uri = ""mock:borrarEventoPieza"")&#010;    protected MockEndpoint borrarEventoPieza;&#010;&#010;    @EndpointInject(uri = ""mock:archivoArchivoPieza"")&#010;    protected MockEndpoint archivoArchivoPieza;&#010;&#010;    private String id_prefix = RutaArchivarItems.class.getSimpleName();&#010;&#010;    @Override&#010;    protected RouteBuilder createRouteBuilder() throws Exception {&#010;        return new RutaArchivarItems();&#010;    }&#010;&#010;    @Override&#010;    public boolean isUseAdviceWith() {&#010;        return true;&#010;    }&#010;&#010;    public void adviceRoutes() throws Exception {&#010;        context.getRouteDefinitions().get(0).adviceWith(context, new&#010;AdviceWithRouteBuilder() {&#010;            @Override&#010;            public void configure() throws Exception {&#010;                replaceFromWith(directEndpoint);&#010;                weaveById(id_prefix +&#010;""guardarArchivo"").replace().to(archivoArchivoPieza);&#010;                weaveById(id_prefix + ""buscarEventoPieza"").remove();&#010;                weaveById(id_prefix +&#010;""borrarEventoPieza"").replace().to(borrarEventoPieza);&#010;                weaveById(id_prefix +&#010;""buscarConfiguracion"").replace().process(new Processor() {&#010;                    @Override&#010;                    public void process(Exchange exchange) throws Exception {&#010;                        exchange.getIn().setHeader((String)&#010;exchange.getIn().getHeader(""key""), ""3"");&#010;                    }&#010;                });&#010;            }&#010;        });&#010;    }&#010;&#010;    @Test&#010;    public void testEventoSeArchiva() throws Exception {&#010;        adviceRoutes();&#010;        context.start();&#010;        Date fechaPieza = DateTime.now().plusHours(-4).toDate();&#010;        EventoPieza eventoPieza = new EventoPieza();&#010;        eventoPieza.setIntentos(3);&#010;        eventoPieza.setUltimaFechaEnvio(fechaPieza);&#010;        template.sendBody(directEndpoint,eventoPieza);&#010;        assertEquals(1, borrarEventoPieza.getReceivedCounter());&#010;        assertEquals(1, archivoArchivoPieza.getReceivedCounter());&#010;        context.stop();&#010;    }&#010;&#010;}&#010;&#010;&#010;And route definition:&#010;&#010;@ContextName(""cdi-context"")&#010;public class RutaArchivarItems extends RutaBase {&#010;&#010;    protected int offset_hours;&#010;    protected boolean habilitado;&#010;&#010;    JpaEndpoint jpaEventoPieza = new JpaEndpoint();&#010;    JpaEndpoint jpaArchivo = new JpaEndpoint();&#010;&#010;    @PostConstruct&#010;    public void intialize() {&#010;&#010;        String delay = cf.find(Configuracion.class,&#010;Configuracion.GENERAL_CONSUMER_DELAY).getValue();&#010;        int backoff_multiplier =&#010;Integer.valueOf(cf.find(Configuracion.class,&#010;Configuracion.GENERAL_CONSUMER_BACKOFF_MULTIPLIER).getValue());&#010;        int backoff_threshold =&#010;Integer.valueOf(cf.find(Configuracion.class,&#010;Configuracion.GENERAL_CONSUMER_BACKOFF_THRESHOLD).getValue());&#010;&#010;        //EventoPieza&#010;        jpaEventoPieza.setCamelContext(getContext());&#010;        jpaEventoPieza.setEntityType(EventoPieza.class);&#010;        jpaEventoPieza.setEntityManagerFactory(entityManagerFactory);&#010;        jpaEventoPieza.setTransactionManager(transactionManager);&#010;        jpaEventoPieza.setEndpointUriIfNotSpecified(""jpa://archivoEventoPieza"");&#010;&#010;        //Consumer&#010;        jpaEventoPieza.setConsumeDelete(false);&#010;        Map&lt;String, Object&gt; prop = new HashMap&lt;&gt;();&#010;        prop.put(""delay"", delay);&#010;        prop.put(""namedQuery"", ""pieza.paraArchivar"");&#010;        jpaEventoPieza.setConsumerProperties(prop);&#010;        jpaEventoPieza.setBackoffMultiplier(backoff_multiplier);&#010;        jpaEventoPieza.setBackoffIdleThreshold(backoff_threshold);&#010;        jpaEventoPieza.setMaximumResults(1000);&#010;&#010;&#010;        //Producer&#010;        jpaArchivo.setCamelContext(getContext());&#010;        jpaArchivo.setEntityType(ArchivoEventos.class);&#010;        jpaArchivo.setEntityManagerFactory(entityManagerFactory);&#010;        jpaArchivo.setTransactionManager(transactionManager);&#010;        jpaArchivo.setFlushOnSend(true);&#010;        jpaArchivo.setEndpointUriIfNotSpecified(""jpa://archivoArchivoPieza"");&#010;&#010;        offset_hours = Integer.valueOf(cf.find(Configuracion.class,&#010;Configuracion.GENERAL_ARCHIVO_OFFSET).getValue());&#010;        habilitado = Boolean.valueOf(cf.find(Configuracion.class,&#010;Configuracion.GENERAL_ARCHIVO_ENABLED).getValue());&#010;&#010;&#010;    }&#010;&#010;    @Override&#010;    public void configure() throws Exception {&#010;&#010;&#010;        from(jpaEventoPieza).routeId(""A_"" +&#010;id_prefix).autoStartup(isHabilitado())&#010;                .setHeader(""key"",&#010;constant(Configuracion.GENERAL_ARCHIVO_OFFSET))&#010;                .to(""buscarConfiguracion"").id(id_prefix + ""buscarConfiguracion"")&#010;                .filter().method(BDUtils.class, ""piezaListaParaArchivar"")&#010;                .process(new Processor() {&#010;                    @Override&#010;                    public void process(Exchange exchange) throws Exception {&#010;                        Message in = exchange.getIn();&#010;                        EventoPieza item = (EventoPieza) in.getBody();&#010;                        ArchivoEventos archivoEventos = new&#010;ArchivoEventos(item);&#010;                        in.setBody(archivoEventos);&#010;                        in.setHeader(""itemId"", item.getItemId());&#010;                        in.setHeader(""event"", item.getEvent());&#010;                        in.setHeader(""version"", item.getVersion());&#010;                    }&#010;                })&#010;                .to(jpaArchivo).id(id_prefix + ""guardarArchivo"")&#010;                .log(LoggingLevel.INFO, ""Archivar: "" + body().toString())&#010;                .to(""buscarEventoPieza"").id(id_prefix + ""buscarEventoPieza"")&#010;                .to(""borrarEventoPieza"").id(id_prefix + ""borrarEventoPieza"")&#010;                .log(LoggingLevel.INFO, ""Borrar: "" + body().toString());&#010;&#010;    }&#010;&#010;    public boolean isHabilitado() {&#010;        return habilitado;&#010;    }&#010;&#010;}&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Test-JpaConsumer-route-tp5797313.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
130,131,sathwik,Camel-cassandra component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491835439183-5797319.post%40n5.nabble.com%3E,users,"Mon, 10 Apr 2017 14:43:59 GMT","Hi,&#010;&#010;I am trying to query Cassandra Db from camel-context. &#010;&#010;Below is the route:&#010;&#010;&lt;route=&amp;quot;test&amp;quot;&gt;&#010;    &lt;to uri=""cql://127.0.0.1:9042/empdetails?cql=select * from&#010;employee;&amp;amp;consistencyLevel=quorum""/&gt;&#010;&lt;/route&gt;&#010;&#010;I have included below dependencies:&#010;&#010;&lt;dependency&gt;&#010;    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;&#010;    &lt;artifactId&gt;camel-cassandraql&lt;/artifactId&gt;&#010;    &lt;version&gt;2.17.1&lt;/version&gt;&#010;&#009;&lt;/dependency&gt;&#010;&#009;&lt;dependency&gt;&#010;  &lt;groupId&gt;com.datastax.cassandra&lt;/groupId&gt;&#010;  &lt;artifactId&gt;cassandra-driver-core&lt;/artifactId&gt;&#010;  &lt;version&gt;3.0.0-alpha1&lt;/version&gt;&#010;&lt;/dependency&gt;&#010;&#010;I am facing below exceptions:&#010;&#010;by: java.lang.IllegalArgumentException: Prepared statement has only 0&#010;variables, 1 values provided at&#010;com.datastax.driver.core.BoundStatement.bind(BoundStatement.‌​java:140)[556:com.da‌​tastax.driver.core:2‌​.1.5]&#010;&#010;Therefore i changed the my route as below:&#010; &lt;to uri=""cql:127.0.0.1:9042/empdetails?cql=select * from employee where&#010;id=2""/&gt;&#010;&#010;I am facing below exceptions:&#010;com.datastax.driver.core.exceptions.InvalidQueryException: Invalid amount of&#010;bind variables&#010;    at&#010;com.datastax.driver.core.exceptions.InvalidQueryException.copy(InvalidQueryException.java&#010;&#010;Please let me know the cause for this issue.&#010;&#010;Thanks,&#010;sathwik&#010;&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-cassandra-component-tp5797319.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
131,132,Tomohisa Igarashi,  Re: Camel-cassandra component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C605defa4-f35a-9856-2ef5-c8319123d9ca%40gmail.com%3E,users,"Tue, 11 Apr 2017 05:14:31 GMT","Hi,&#010;&#010;According to the doc and code message body is used as query parameters in camel-cassandrasql&#010;http://camel.apache.org/cassandra.html&#010;https://github.com/apache/camel/blob/master/components/camel-cassandraql/src/main/java/org/apache/camel/component/cassandra/CassandraProducer.java#L75&#010;&#010;So you may need to send a null/empty body when using static cql.&#010;&#010;Thanks,&#010;Tomo&#010;&#010;&#010;On 04/10/2017 11:43 PM, sathwik wrote:&#010;&gt; Hi,&#010;&gt;&#010;&gt; I am trying to query Cassandra Db from camel-context.&#010;&gt;&#010;&gt; Below is the route:&#010;&gt;&#010;&gt; &lt;route=&amp;quot;test&amp;quot;&gt;&#010;&gt;     &lt;to uri=""cql://127.0.0.1:9042/empdetails?cql=select * from&#010;&gt; employee;&amp;amp;consistencyLevel=quorum""/&gt;&#010;&gt; &lt;/route&gt;&#010;&gt;&#010;&gt; I have included below dependencies:&#010;&gt;&#010;&gt; &lt;dependency&gt;&#010;&gt;     &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;&#010;&gt;     &lt;artifactId&gt;camel-cassandraql&lt;/artifactId&gt;&#010;&gt;     &lt;version&gt;2.17.1&lt;/version&gt;&#010;&gt; &#009;&lt;/dependency&gt;&#010;&gt; &#009;&lt;dependency&gt;&#010;&gt;   &lt;groupId&gt;com.datastax.cassandra&lt;/groupId&gt;&#010;&gt;   &lt;artifactId&gt;cassandra-driver-core&lt;/artifactId&gt;&#010;&gt;   &lt;version&gt;3.0.0-alpha1&lt;/version&gt;&#010;&gt; &lt;/dependency&gt;&#010;&gt;&#010;&gt; I am facing below exceptions:&#010;&gt;&#010;&gt; by: java.lang.IllegalArgumentException: Prepared statement has only 0&#010;&gt; variables, 1 values provided at&#010;&gt; com.datastax.driver.core.BoundStatement.bind(BoundStatement.‌​java:140)[556:com.da‌​tastax.driver.core:2‌​.1.5]&#010;&gt;&#010;&gt; Therefore i changed the my route as below:&#010;&gt;  &lt;to uri=""cql:127.0.0.1:9042/empdetails?cql=select * from employee where&#010;&gt; id=2""/&gt;&#010;&gt;&#010;&gt; I am facing below exceptions:&#010;&gt; com.datastax.driver.core.exceptions.InvalidQueryException: Invalid amount of&#010;&gt; bind variables&#010;&gt;     at&#010;&gt; com.datastax.driver.core.exceptions.InvalidQueryException.copy(InvalidQueryException.java&#010;&gt;&#010;&gt; Please let me know the cause for this issue.&#010;&gt;&#010;&gt; Thanks,&#010;&gt; sathwik&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Camel-cassandra-component-tp5797319.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&#010;"
132,133,sugavanan,Blueprint equivalent of Camel instanceof Predicate,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491905278778-5797333.post%40n5.nabble.com%3E,users,"Tue, 11 Apr 2017 10:07:58 GMT","How do I convert the below line in Java DSL into an equivalent Blueprint XML&#010;version:&#010;&#010;from(""seda:input?concurrentConsumers=2"").filter(body().isInstanceOf(String.class))&#010;&#010;I am particularly willing to know how to use the filter to access the&#010;exchange's body and check if one of the messages is of type ""String"".&#010;&#010;I am aware of creating a predicate class and referencing it. But is there&#010;any other way to do it directly in XML itself with the help of tags.&#010;&#010;Thanks.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Blueprint-equivalent-of-Camel-instanceof-Predicate-tp5797333.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
133,134,Claus Ibsen,  Re: Blueprint equivalent of Camel instanceof Predicate,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNkWuqYnGXb0nxNMdzV0x%3D7ECytKM4mL0umkp2%3D5Q%3DtsmA%40mail.gmail.com%3E,users,"Tue, 11 Apr 2017 11:29:49 GMT","See the simple language which has some built in function and also for&#010;checking a type&#010;http://camel.apache.org/simple&#010;&#010;On Tue, Apr 11, 2017 at 12:07 PM, sugavanan &lt;sugavanan.v@gmail.com&gt; wrote:&#010;&gt; How do I convert the below line in Java DSL into an equivalent Blueprint XML&#010;&gt; version:&#010;&gt;&#010;&gt; from(""seda:input?concurrentConsumers=2"").filter(body().isInstanceOf(String.class))&#010;&gt;&#010;&gt; I am particularly willing to know how to use the filter to access the&#010;&gt; exchange's body and check if one of the messages is of type ""String"".&#010;&gt;&#010;&gt; I am aware of creating a predicate class and referencing it. But is there&#010;&gt; any other way to do it directly in XML itself with the help of tags.&#010;&gt;&#010;&gt; Thanks.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Blueprint-equivalent-of-Camel-instanceof-Predicate-tp5797333.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
134,135,Fatima Sajjad,Camel olingo2 component serviceUri exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491907488851-5797334.post%40n5.nabble.com%3E,users,"Tue, 11 Apr 2017 10:44:48 GMT"," I'm trying to use camel-olingo2 componet but my routes fail with exception&#010;from(""direct:start"")&#010;   .to(""olingo2://read/Products"");&#010;&#010;Even if I configure the route as this&#010;from(""direct:start"")&#010;  &#010;.to(""olingo2://read/Products?serviceUri=http://services.odata.org/OData/OData.svc/"");&#010;&#009;&#010;Please tell me how to set ServiceUri i routes or how to use&#010;Olingo2Configuration class for solving this issue.&#010;&#010;&#010;Following is the exception stack trace.&#010;15:41:12.099 INFO  c.s.poc.app.EnterpriseIntegration - Camel Route STOPPED!&#010;Exception in thread ""main"" org.apache.camel.FailedToCreateRouteException:&#010;Failed to create route route3 at: &gt;&gt;&gt;&#010;To[olingo2://read?serviceUri=http://services.odata.org/OData/OData.svc/] &lt;&lt;&lt;&#010;in route: Route(route3)[[From[direct:start]] -&gt; [To[olingo2://read?ser...&#010;because of Failed to resolve endpoint:&#010;olingo2://read?serviceUri=http%3A%2F%2Fservices.odata.org%2FOData%2FOData.svc%2F&#010;due to: serviceUri&#010;&#009;at&#010;org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1071)&#010;&#009;at&#010;org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:196)&#010;&#009;at&#010;org.apache.camel.impl.DefaultCamelContext.startRoute(DefaultCamelContext.java:984)&#010;&#009;at&#010;org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:3401)&#010;&#009;at&#010;org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:3132)&#010;&#009;at&#010;org.apache.camel.impl.DefaultCamelContext.access$000(DefaultCamelContext.java:183)&#010;&#009;at&#010;org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2961)&#010;&#009;at&#010;org.apache.camel.impl.DefaultCamelContext$2.call(DefaultCamelContext.java:2957)&#010;&#009;at&#010;org.apache.camel.impl.DefaultCamelContext.doWithDefinedClassLoader(DefaultCamelContext.java:2980)&#010;&#009;at&#010;org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:2957)&#010;&#009;at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:61)&#010;&#009;at&#010;org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:2924)&#010;&#009;at&#010;com.sensys.poc.app.EnterpriseIntegration.main(EnterpriseIntegration.java:33)&#010;Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to&#010;resolve endpoint:&#010;olingo2://read?serviceUri=http%3A%2F%2Fservices.odata.org%2FOData%2FOData.svc%2F&#010;due to: serviceUri&#010;&#009;at&#010;org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:623)&#010;&#009;at&#010;org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:79)&#010;&#009;at&#010;org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:211)&#010;&#009;at&#010;org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:108)&#010;&#009;at&#010;org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:114)&#010;&#009;at&#010;org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:62)&#010;&#009;at&#010;org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:56)&#010;&#009;at&#010;org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:545)&#010;&#009;at&#010;org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:506)&#010;&#009;at&#010;org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:222)&#010;&#009;at&#010;org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1068)&#010;&#009;... 12 more&#010;Caused by: java.lang.IllegalArgumentException: serviceUri&#010;&#009;at&#010;org.apache.camel.component.olingo2.api.impl.Olingo2AppImpl.setServiceUri(Olingo2AppImpl.java:174)&#010;&#009;at&#010;org.apache.camel.component.olingo2.api.impl.Olingo2AppImpl.&lt;init&gt;(Olingo2AppImpl.java:142)&#010;&#009;at&#010;org.apache.camel.component.olingo2.Olingo2Component.createOlingo2App(Olingo2Component.java:161)&#010;&#009;at&#010;org.apache.camel.component.olingo2.Olingo2Component.createApiProxy(Olingo2Component.java:121)&#010;&#009;at&#010;org.apache.camel.component.olingo2.Olingo2Endpoint.createProxy(Olingo2Endpoint.java:186)&#010;&#009;at&#010;org.apache.camel.component.olingo2.Olingo2Endpoint.afterConfigureProperties(Olingo2Endpoint.java:120)&#010;&#009;at&#010;org.apache.camel.util.component.AbstractApiEndpoint.configureProperties(AbstractApiEndpoint.java:114)&#010;&#009;at&#010;org.apache.camel.component.olingo2.Olingo2Endpoint.configureProperties(Olingo2Endpoint.java:110)&#010;&#009;at&#010;org.apache.camel.component.olingo2.Olingo2Component.createEndpoint(Olingo2Component.java:82)&#010;&#009;at&#010;org.apache.camel.impl.DefaultComponent.createEndpoint(DefaultComponent.java:112)&#010;&#009;at&#010;org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:603)&#010;&#009;... 22 more&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-olingo2-component-serviceUri-exception-tp5797334.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
135,136,Artur Jablonski,"Camel + Spring + Spring Boot, waiting for the routes to start",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCADUzpe6%2B%2Bx_B5Uz2VTatz9PM7%3DwH%2BbL1aJiOdBYJkLarQiMsoA%40mail.gmail.com%3E,users,"Tue, 11 Apr 2017 11:30:54 GMT","Hello,&#010;&#010;I have the Camel + Spring + SpringBoot combo working&#010;&#010;&#010;I have my RouteBilder Spring Component that's being pickup up and started&#010;during Spring startup.&#010;The route starts fine as I can see SpringCamelContext output in the logs.&#010;&#010;What I am trying to do is to send a message to direct endpoint using&#010;injected ProducerTemplate but if I do it like this&#010;&#010;@Produce(uri = ""direct:myQueue"")&#010;private ProducerTemplate producerTemplate;&#010;&#010;@EventListener(ContextRefreshedEvent.class)&#010;public void send()&#010;    throws Exception&#010;{&#010;    producerTemplate.start();&#010;    producerTemplate.sendBody(""hello"");&#010;}&#010;&#010;&#010;I am getting&#010;&#010; No consumers available on endpoint: direct://myQueue&#010;&#010;because the route has not started yet and if I try blocking parameter on&#010;uri like this:&#010;&#010;@Produce(uri = ""direct:myQueue?block=true"")&#010;&#010;then the whole thing freezes for 30 secs (default timeout) and then blows&#010;up with the same exception&#010;&#010;I also tried to call the producerTemplate.sendBody() form @PostConstruct&#010;annotaded method with the same effect.&#010;&#010;&#010;How do I wait for the CamelContext to be fully started in this context????&#010;&#010;&#010;Cheerio&#010;Arur&#010;&#010;"
136,137,Artur Jablonski,"  Re: Camel + Spring + Spring Boot, waiting for the routes to start",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCADUzpe59_GeTwLRppnH376ziOimEtDcQuqfhuudy8_wwL9YqqA%40mail.gmail.com%3E,users,"Tue, 11 Apr 2017 13:27:27 GMT","Sure enough, when I try to do pretty much the same thing from a JUnit test,&#010;it works:&#010;&#010;&#010;@RunWith(SpringJUnit4ClassRunner.class)&#010;@SpringBootTest(classes = { Application.class })&#010;public class CamelTest&#010;{&#010;    @Produce(uri = ""direct:myQueue"")&#010;    protected ProducerTemplate template;&#010;&#010;    @Test&#010;    public void sendMessage()&#010;    {&#010;        template.sendBody(attachment);&#010;    }&#010;}&#010;&#010;&#010;so... what's the deal? If firing a message is a part of my application&#010;logic... what's the recommended way of handling this?&#010;&#010;Cheerio&#010;Artur&#010;&#010;&#010;&#010;&#010;On Tue, Apr 11, 2017 at 1:30 PM, Artur Jablonski &lt;ajablonski@ravenpack.com&gt;&#010;wrote:&#010;&#010;&gt; Hello,&#010;&gt;&#010;&gt; I have the Camel + Spring + SpringBoot combo working&#010;&gt;&#010;&gt;&#010;&gt; I have my RouteBilder Spring Component that's being pickup up and started&#010;&gt; during Spring startup.&#010;&gt; The route starts fine as I can see SpringCamelContext output in the logs.&#010;&gt;&#010;&gt; What I am trying to do is to send a message to direct endpoint using&#010;&gt; injected ProducerTemplate but if I do it like this&#010;&gt;&#010;&gt; @Produce(uri = ""direct:myQueue"")&#010;&gt; private ProducerTemplate producerTemplate;&#010;&gt;&#010;&gt; @EventListener(ContextRefreshedEvent.class)&#010;&gt; public void send()&#010;&gt;     throws Exception&#010;&gt; {&#010;&gt;     producerTemplate.start();&#010;&gt;     producerTemplate.sendBody(""hello"");&#010;&gt; }&#010;&gt;&#010;&gt;&#010;&gt; I am getting&#010;&gt;&#010;&gt;  No consumers available on endpoint: direct://myQueue&#010;&gt;&#010;&gt; because the route has not started yet and if I try blocking parameter on&#010;&gt; uri like this:&#010;&gt;&#010;&gt; @Produce(uri = ""direct:myQueue?block=true"")&#010;&gt;&#010;&gt; then the whole thing freezes for 30 secs (default timeout) and then blows&#010;&gt; up with the same exception&#010;&gt;&#010;&gt; I also tried to call the producerTemplate.sendBody() form @PostConstruct&#010;&gt; annotaded method with the same effect.&#010;&gt;&#010;&gt;&#010;&gt; How do I wait for the CamelContext to be fully started in this context????&#010;&gt;&#010;&gt;&#010;&gt; Cheerio&#010;&gt; Arur&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&#010;"
137,138,Claus Ibsen,"  Re: Camel + Spring + Spring Boot, waiting for the routes to start",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNn0HMjvwdt4-OYXzhiMwnP2N_scgvq4%2BsMWy_wssXspAg%40mail.gmail.com%3E,users,"Tue, 11 Apr 2017 13:34:30 GMT","Dont use the event listener to do code that may block&#010;@EventListener(ContextRefreshedEvent.class)&#010;&#010;You are basically hi-jacking the spring thread that signals this&#010;event. You can create a new thread to send the message from the event&#010;listener so you dont block it.&#010;&#010;&#010;&#010;&#010;On Tue, Apr 11, 2017 at 1:30 PM, Artur Jablonski&#010;&lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt; Hello,&#010;&gt;&#010;&gt; I have the Camel + Spring + SpringBoot combo working&#010;&gt;&#010;&gt;&#010;&gt; I have my RouteBilder Spring Component that's being pickup up and started&#010;&gt; during Spring startup.&#010;&gt; The route starts fine as I can see SpringCamelContext output in the logs.&#010;&gt;&#010;&gt; What I am trying to do is to send a message to direct endpoint using&#010;&gt; injected ProducerTemplate but if I do it like this&#010;&gt;&#010;&gt; @Produce(uri = ""direct:myQueue"")&#010;&gt; private ProducerTemplate producerTemplate;&#010;&gt;&#010;&gt; @EventListener(ContextRefreshedEvent.class)&#010;&gt; public void send()&#010;&gt;     throws Exception&#010;&gt; {&#010;&gt;     producerTemplate.start();&#010;&gt;     producerTemplate.sendBody(""hello"");&#010;&gt; }&#010;&gt;&#010;&gt;&#010;&gt; I am getting&#010;&gt;&#010;&gt;  No consumers available on endpoint: direct://myQueue&#010;&gt;&#010;&gt; because the route has not started yet and if I try blocking parameter on&#010;&gt; uri like this:&#010;&gt;&#010;&gt; @Produce(uri = ""direct:myQueue?block=true"")&#010;&gt;&#010;&gt; then the whole thing freezes for 30 secs (default timeout) and then blows&#010;&gt; up with the same exception&#010;&gt;&#010;&gt; I also tried to call the producerTemplate.sendBody() form @PostConstruct&#010;&gt; annotaded method with the same effect.&#010;&gt;&#010;&gt;&#010;&gt; How do I wait for the CamelContext to be fully started in this context????&#010;&gt;&#010;&gt;&#010;&gt; Cheerio&#010;&gt; Arur&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
138,139,Artur Jablonski,"    Re: Camel + Spring + Spring Boot, waiting for the routes to start",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCADUzpe4AVPkps3bZn8rFXtBDu%3DMMRuQ5o1ss8%2B3ryYjCjm4hvA%40mail.gmail.com%3E,users,"Tue, 11 Apr 2017 14:55:04 GMT","Hello Claus&#010;&#010;Right, so&#010;&#010;1. I cannot send a message without blocking because the event calback seems&#010;to be triggered BEFORE the CamelContext is fully up and running.&#010;That's kind of counter intuitive. I would imagine that when Spring's&#010;ApplicationContext has been fully initialized all the beans are fully&#010;initialized and ready to go... including CamelContext and all the routes....&#010;2. I cannot block in that method not to deadlock the whole Spring machinery.&#010;Fair enough.&#010;&#010;So I need to spawn a new thread that I assume needs to poke the&#010;CamelContext about whether it's state is 'started'....ok, can do that, but&#010;perhaps it's not the most elegant solution. Any reason why Camel cannot be&#010;fully up and running before Spring?&#010;&#010;Cheerio&#010;Artur&#010;&#010;&#010;On Tue, Apr 11, 2017 at 3:34 PM, Claus Ibsen &lt;claus.ibsen@gmail.com&gt; wrote:&#010;&#010;&gt; Dont use the event listener to do code that may block&#010;&gt; @EventListener(ContextRefreshedEvent.class)&#010;&gt;&#010;&gt; You are basically hi-jacking the spring thread that signals this&#010;&gt; event. You can create a new thread to send the message from the event&#010;&gt; listener so you dont block it.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; On Tue, Apr 11, 2017 at 1:30 PM, Artur Jablonski&#010;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt; &gt; Hello,&#010;&gt; &gt;&#010;&gt; &gt; I have the Camel + Spring + SpringBoot combo working&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; I have my RouteBilder Spring Component that's being pickup up and started&#010;&gt; &gt; during Spring startup.&#010;&gt; &gt; The route starts fine as I can see SpringCamelContext output in the logs.&#010;&gt; &gt;&#010;&gt; &gt; What I am trying to do is to send a message to direct endpoint using&#010;&gt; &gt; injected ProducerTemplate but if I do it like this&#010;&gt; &gt;&#010;&gt; &gt; @Produce(uri = ""direct:myQueue"")&#010;&gt; &gt; private ProducerTemplate producerTemplate;&#010;&gt; &gt;&#010;&gt; &gt; @EventListener(ContextRefreshedEvent.class)&#010;&gt; &gt; public void send()&#010;&gt; &gt;     throws Exception&#010;&gt; &gt; {&#010;&gt; &gt;     producerTemplate.start();&#010;&gt; &gt;     producerTemplate.sendBody(""hello"");&#010;&gt; &gt; }&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; I am getting&#010;&gt; &gt;&#010;&gt; &gt;  No consumers available on endpoint: direct://myQueue&#010;&gt; &gt;&#010;&gt; &gt; because the route has not started yet and if I try blocking parameter on&#010;&gt; &gt; uri like this:&#010;&gt; &gt;&#010;&gt; &gt; @Produce(uri = ""direct:myQueue?block=true"")&#010;&gt; &gt;&#010;&gt; &gt; then the whole thing freezes for 30 secs (default timeout) and then blows&#010;&gt; &gt; up with the same exception&#010;&gt; &gt;&#010;&gt; &gt; I also tried to call the producerTemplate.sendBody() form @PostConstruct&#010;&gt; &gt; annotaded method with the same effect.&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; How do I wait for the CamelContext to be fully started in this&#010;&gt; context????&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; Cheerio&#010;&gt; &gt; Arur&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&#010;"
139,140,Claus Ibsen,"      Re: Camel + Spring + Spring Boot, waiting for the routes to start",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yN%3DBAT2j6tTeLKMBwA%2B9ujBDkv8WF3gPdzPMYgcTieMdqQ%40mail.gmail.com%3E,users,"Tue, 11 Apr 2017 15:02:42 GMT","Camel has its own EventNotifier where you get callbacks on when its&#010;started / stopped etc&#010;http://camel.apache.org/advanced-configuration-of-camelcontext-using-spring.html&#010;&#010;In your code you can still block but only if you do it from a separte&#010;thread, eg new Thread() ...&#010;&#010;On Tue, Apr 11, 2017 at 4:55 PM, Artur Jablonski&#010;&lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt; Hello Claus&#010;&gt;&#010;&gt; Right, so&#010;&gt;&#010;&gt; 1. I cannot send a message without blocking because the event calback seems&#010;&gt; to be triggered BEFORE the CamelContext is fully up and running.&#010;&gt; That's kind of counter intuitive. I would imagine that when Spring's&#010;&gt; ApplicationContext has been fully initialized all the beans are fully&#010;&gt; initialized and ready to go... including CamelContext and all the routes....&#010;&gt; 2. I cannot block in that method not to deadlock the whole Spring machinery.&#010;&gt; Fair enough.&#010;&gt;&#010;&gt; So I need to spawn a new thread that I assume needs to poke the&#010;&gt; CamelContext about whether it's state is 'started'....ok, can do that, but&#010;&gt; perhaps it's not the most elegant solution. Any reason why Camel cannot be&#010;&gt; fully up and running before Spring?&#010;&gt;&#010;&gt; Cheerio&#010;&gt; Artur&#010;&gt;&#010;&gt;&#010;&gt; On Tue, Apr 11, 2017 at 3:34 PM, Claus Ibsen &lt;claus.ibsen@gmail.com&gt; wrote:&#010;&gt;&#010;&gt;&gt; Dont use the event listener to do code that may block&#010;&gt;&gt; @EventListener(ContextRefreshedEvent.class)&#010;&gt;&gt;&#010;&gt;&gt; You are basically hi-jacking the spring thread that signals this&#010;&gt;&gt; event. You can create a new thread to send the message from the event&#010;&gt;&gt; listener so you dont block it.&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; On Tue, Apr 11, 2017 at 1:30 PM, Artur Jablonski&#010;&gt;&gt; &lt;ajablonski@ravenpack.com&gt; wrote:&#010;&gt;&gt; &gt; Hello,&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; I have the Camel + Spring + SpringBoot combo working&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; I have my RouteBilder Spring Component that's being pickup up and started&#010;&gt;&gt; &gt; during Spring startup.&#010;&gt;&gt; &gt; The route starts fine as I can see SpringCamelContext output in the logs.&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; What I am trying to do is to send a message to direct endpoint using&#010;&gt;&gt; &gt; injected ProducerTemplate but if I do it like this&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; @Produce(uri = ""direct:myQueue"")&#010;&gt;&gt; &gt; private ProducerTemplate producerTemplate;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; @EventListener(ContextRefreshedEvent.class)&#010;&gt;&gt; &gt; public void send()&#010;&gt;&gt; &gt;     throws Exception&#010;&gt;&gt; &gt; {&#010;&gt;&gt; &gt;     producerTemplate.start();&#010;&gt;&gt; &gt;     producerTemplate.sendBody(""hello"");&#010;&gt;&gt; &gt; }&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; I am getting&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;  No consumers available on endpoint: direct://myQueue&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; because the route has not started yet and if I try blocking parameter on&#010;&gt;&gt; &gt; uri like this:&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; @Produce(uri = ""direct:myQueue?block=true"")&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; then the whole thing freezes for 30 secs (default timeout) and then blows&#010;&gt;&gt; &gt; up with the same exception&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; I also tried to call the producerTemplate.sendBody() form @PostConstruct&#010;&gt;&gt; &gt; annotaded method with the same effect.&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; How do I wait for the CamelContext to be fully started in this&#010;&gt;&gt; context????&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; Cheerio&#010;&gt;&gt; &gt; Arur&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; --&#010;&gt;&gt; Claus Ibsen&#010;&gt;&gt; -----------------&#010;&gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt;&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
140,141,urwithsumit,Camel SSH - dynamic values,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491946402202-5797435.post%40n5.nabble.com%3E,users,"Tue, 11 Apr 2017 21:33:22 GMT","I am trying to use Camel ssh component as a producer. I am passing username&#010;and password as a dynamic parameter. With camel Version 2.18.2, my uri looks&#010;like below:&#010; &#010;.to(""ssh://localhost?username=${header.USERNAME}&amp;password=${header.PASSWORD}&amp;pollCommand=features:hostname%0A"")&#010;&#010;With this uri, I keep getting error: Caused by:&#010;org.apache.camel.RuntimeCamelException: Failed to authenticate username&#010;${header.USERNAME}&#010;&#010;The above uri works if i hard code the username and password value. &#010;This makes me wonder if supplying the values for username &amp; password&#010;dynamically is supported by this component or not?.&#010;&#010;If not, than what alternative approach i can take to achieve the same&#010;objective.&#010;&#010;Regards&#010;Sumit&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-SSH-dynamic-values-tp5797435.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
141,142,urwithsumit,  Re: Camel SSH - dynamic values,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491947506452-5797436.post%40n5.nabble.com%3E,users,"Tue, 11 Apr 2017 21:51:46 GMT","Well, I was immediately able to figure out the alternate approach for it.&#010;&#010;Map&lt;String, String&gt; map = exchange.getIn().getBody(HashMap.class);&#010;&#009;&#009;&#009;&#009;&#009;&#010;exchange.getIn().setHeader(""USERNAME"", map.get(HeaderConstant.USER_NAME));&#010;exchange.getIn().setHeader(""PASSWORD"", map.get(HeaderConstant.PASSCODE));&#010;&#010;getContext().createProducerTemplate().requestBody(""ssh://localhost?username=""+map.get(HeaderConstant.USER_NAME)+""&amp;password=""+map.get(HeaderConstant.PASSCODE)+""&amp;pollCommand=features:hostname%0A"",&#010;map);&#010;&#010;I have another question though, with user id and password it works fine. How&#010;to make it work against a randomly generated RSA token?&#010;&#010;Most of the example i see are with ssh keys but i dont have this scenario&#010;applicable. Any pointers?&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-SSH-dynamic-values-tp5797435p5797436.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
142,143,Claus Ibsen,  Re: Camel SSH - dynamic values,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNkQt%3Du9BnL6p6C2JOA%3DLnSxciVUrELPceHfv0XHG4ZSfA%40mail.gmail.com%3E,users,"Wed, 12 Apr 2017 07:22:19 GMT","See this FAQ&#010;http://camel.apache.org/how-to-use-a-dynamic-uri-in-to.html&#010;&#010;On Tue, Apr 11, 2017 at 11:33 PM, urwithsumit &lt;sumit.kushwaha@gmail.com&gt; wrote:&#010;&gt; I am trying to use Camel ssh component as a producer. I am passing username&#010;&gt; and password as a dynamic parameter. With camel Version 2.18.2, my uri looks&#010;&gt; like below:&#010;&gt;&#010;&gt; .to(""ssh://localhost?username=${header.USERNAME}&amp;password=${header.PASSWORD}&amp;pollCommand=features:hostname%0A"")&#010;&gt;&#010;&gt; With this uri, I keep getting error: Caused by:&#010;&gt; org.apache.camel.RuntimeCamelException: Failed to authenticate username&#010;&gt; ${header.USERNAME}&#010;&gt;&#010;&gt; The above uri works if i hard code the username and password value.&#010;&gt; This makes me wonder if supplying the values for username &amp; password&#010;&gt; dynamically is supported by this component or not?.&#010;&gt;&#010;&gt; If not, than what alternative approach i can take to achieve the same&#010;&gt; objective.&#010;&gt;&#010;&gt; Regards&#010;&gt; Sumit&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Camel-SSH-dynamic-values-tp5797435.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
143,144,urwithsumit,    Re: Camel SSH - dynamic values,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492018475571-5797512.post%40n5.nabble.com%3E,users,"Wed, 12 Apr 2017 17:34:35 GMT","&#010;Thanks Claus for this pointer. I will try this approach today.&#010;&#010;Any advice on how i can make a SSH login with username and a RSA Token ex:&#010;87632345?&#010;&#010;Regards,&#010;Sumit&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-SSH-dynamic-values-tp5797435p5797512.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
144,145,Zoran Regvart,      Re: Camel SSH - dynamic values,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCABD_Zr9jDv_59vTnTk60F40BF8VC8foMLmWi%3DXTLheknPDJ1HA%40mail.gmail.com%3E,users,"Wed, 12 Apr 2017 20:47:42 GMT","Hi Sumit,&#010;not sure if you'll shoot yourself in the foot, but you could do change&#010;component's configuration from a processor, like:&#010;&#010;    from(""direct:s"").process((exchange) -&gt; exchange.getContext()&#010;        .getComponent(""ssh"", SshComponent.class)&#010;        .getConfiguration()&#010;        .setPassword(""...""))&#010;    .to(""ssh:..."");&#010;&#010;zoran&#010;&#010;On Wed, Apr 12, 2017 at 7:34 PM, urwithsumit &lt;sumit.kushwaha@gmail.com&gt; wrote:&#010;&gt; Any advice on how i can make a SSH login with username and a RSA Token ex:&#010;&gt; 87632345?&#010;&#010;&#010;&#010;&#010;-- &#010;Zoran Regvart&#010;&#010;"
145,146,urwithsumit,        Re: Camel SSH - dynamic values,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492047617162-5797545.post%40n5.nabble.com%3E,users,"Thu, 13 Apr 2017 01:40:17 GMT","@Claus, toD() did worked for user id and password. &#010;&#010;@Zoran, the approach gives a null pointer exception for user id,  RSA token&#010;combination. I did not tried though with the password. For dynamic value i&#010;thus will go with toD()&#010;&#010;&#010;Still struggling to get it work with RSA token code. &#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-SSH-dynamic-values-tp5797435p5797545.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
146,147,Claus Ibsen,          Re: Camel SSH - dynamic values,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yN%3DsvdKvndZbWOCDESCMTj6qHqcHe%3DcpCAznnbj_aY9LMA%40mail.gmail.com%3E,users,"Sun, 16 Apr 2017 07:31:43 GMT","Hi&#010;&#010;I logged a ticket so we can support username/password headers in the future&#010;https://issues.apache.org/jira/browse/CAMEL-11152&#010;&#010;Contributions is welcome&#010;&#010;On Thu, Apr 13, 2017 at 3:40 AM, urwithsumit &lt;sumit.kushwaha@gmail.com&gt; wrote:&#010;&gt; @Claus, toD() did worked for user id and password.&#010;&gt;&#010;&gt; @Zoran, the approach gives a null pointer exception for user id,  RSA token&#010;&gt; combination. I did not tried though with the password. For dynamic value i&#010;&gt; thus will go with toD()&#010;&gt;&#010;&gt;&#010;&gt; Still struggling to get it work with RSA token code.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Camel-SSH-dynamic-values-tp5797435p5797545.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
147,148,davide_cavestro,Remapping exception from DSL,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1491982101343-5797442.post%40n5.nabble.com%3E,users,"Wed, 12 Apr 2017 07:28:21 GMT","I need to remap exceptions under certain route portions, in such a way that&#010;the obtained ones are handled by the custom errorHandler set at context&#010;level.&#010;I'd like to do it from DSL for readability, avoiding to split routes into&#010;too many sub-routes.&#010;&#010;I've tried using /doTry///doCatch///throwException/ constructs, but the&#010;/doCatch/ implementation uses a dedicated errorHandler, that in turns&#010;delegates the handling of the thrown exception to a fallback that is not&#010;configurable.&#010;&#010;In the following example /BarException/ is not handled by /myErrorHandler/.&#010;&#010;&#010;&#010;*Question*: would it be worth providing a way to set the fallback error&#010;handler at the /doCatch/ level?&#010;i.e. write something like &#010;This ideally wouldn't imply supporting nested catches nor dealing with&#010;exception loops.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Remapping-exception-from-DSL-tp5797442.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
148,149,Jonathan Schoreels,JdbcAggregationRepository doesn't preserve properties : Feature/Bug ?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2BD-ZCSXWCuQsjYPfdG9oELezUQxQ3n6eay5BZ%2BUDvM3Tp3%3Diw%40mail.gmail.com%3E,users,"Wed, 12 Apr 2017 11:19:43 GMT","Hello,&#010;&#010;I've been using JdbcAggregationRepository recently and discovered that it&#010;won't save the property in the table and thus, losing them at each&#010;aggregation step.&#010;&#010;I know property are meant to be inner-route variable, and headers metadata&#010;for protocol/outer-scope, and that by definition, a&#010;JdbcAggregationRepository is an outer service. However, at the same time,&#010;it's an abstraction inside the route, and it's still very unsetting to have&#010;property that dissapear in the same camel route.&#010;&#010;Do you see it as a Bug or a Feature ?&#010;&#010;PS : I'm still asking myself why there is no user guide to use&#010;JdbcAggregationRepository in the book (Hawt example) or a ""pretty-doc"" in&#010;http://camel.apache.org/aggregator.html. Or maybe there is other more&#010;standard way to aggregate in a persistent repository that I don't know yet ?&#010;&#010;Thank you,&#010;&#010;Jonathan Schoreels&#010;&#010;"
149,150,Claus Ibsen,  Re: JdbcAggregationRepository doesn't preserve properties : Feature/Bug ?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNkvRDfGzAUQ%3DSP9tZe4vTfhWVNC_dD6SPvtNrHkFumqkg%40mail.gmail.com%3E,users,"Wed, 12 Apr 2017 11:31:54 GMT","Yes only body + headers is stored that is by design&#010;&#010;On Wed, Apr 12, 2017 at 1:19 PM, Jonathan Schoreels&#010;&lt;jonathan.schoreels@gmail.com&gt; wrote:&#010;&gt; Hello,&#010;&gt;&#010;&gt; I've been using JdbcAggregationRepository recently and discovered that it&#010;&gt; won't save the property in the table and thus, losing them at each&#010;&gt; aggregation step.&#010;&gt;&#010;&gt; I know property are meant to be inner-route variable, and headers metadata&#010;&gt; for protocol/outer-scope, and that by definition, a&#010;&gt; JdbcAggregationRepository is an outer service. However, at the same time,&#010;&gt; it's an abstraction inside the route, and it's still very unsetting to have&#010;&gt; property that dissapear in the same camel route.&#010;&gt;&#010;&gt; Do you see it as a Bug or a Feature ?&#010;&gt;&#010;&gt; PS : I'm still asking myself why there is no user guide to use&#010;&gt; JdbcAggregationRepository in the book (Hawt example) or a ""pretty-doc"" in&#010;&gt; http://camel.apache.org/aggregator.html. Or maybe there is other more&#010;&gt; standard way to aggregate in a persistent repository that I don't know yet ?&#010;&gt;&#010;&gt; Thank you,&#010;&gt;&#010;&gt; Jonathan Schoreels&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
150,151,Jonathan Schoreels,    Re: JdbcAggregationRepository doesn't preserve properties : Feature/Bug ?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C8e5ea789-606e-05df-0557-7e5ce082e508%40gmail.com%3E,users,"Wed, 12 Apr 2017 11:34:30 GMT","Is it allowed to open pull request just to add java doc, or would you &#010;prefer to do it yourself ?&#010;&#010;On 2017-04-12 13:31, Claus Ibsen wrote:&#010;&gt; Yes only body + headers is stored that is by design&#010;&gt;&#010;&gt; On Wed, Apr 12, 2017 at 1:19 PM, Jonathan Schoreels&#010;&gt; &lt;jonathan.schoreels@gmail.com&gt; wrote:&#010;&gt;&gt; Hello,&#010;&gt;&gt;&#010;&gt;&gt; I've been using JdbcAggregationRepository recently and discovered that it&#010;&gt;&gt; won't save the property in the table and thus, losing them at each&#010;&gt;&gt; aggregation step.&#010;&gt;&gt;&#010;&gt;&gt; I know property are meant to be inner-route variable, and headers metadata&#010;&gt;&gt; for protocol/outer-scope, and that by definition, a&#010;&gt;&gt; JdbcAggregationRepository is an outer service. However, at the same time,&#010;&gt;&gt; it's an abstraction inside the route, and it's still very unsetting to have&#010;&gt;&gt; property that dissapear in the same camel route.&#010;&gt;&gt;&#010;&gt;&gt; Do you see it as a Bug or a Feature ?&#010;&gt;&gt;&#010;&gt;&gt; PS : I'm still asking myself why there is no user guide to use&#010;&gt;&gt; JdbcAggregationRepository in the book (Hawt example) or a ""pretty-doc"" in&#010;&gt;&gt; http://camel.apache.org/aggregator.html. Or maybe there is other more&#010;&gt;&gt; standard way to aggregate in a persistent repository that I don't know yet ?&#010;&gt;&gt;&#010;&gt;&gt; Thank you,&#010;&gt;&gt;&#010;&gt;&gt; Jonathan Schoreels&#010;&gt;&#010;&gt;&#010;&#010;&#010;"
151,152,Claus Ibsen,      Re: JdbcAggregationRepository doesn't preserve properties : Feature/Bug ?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNmbr%2B_QHY0yzGcuB%2BWvesPSVLR3mBeHZGC9Hfy3YBWy3w%40mail.gmail.com%3E,users,"Wed, 12 Apr 2017 11:40:03 GMT","Hi&#010;&#010;Yeah sure we love contributions, and you are welcome to provide a PR&#010;with improved javadoc&#010;http://camel.apache.org/contributing&#010;&#010;Github PR is the easiest&#010;https://github.com/apache/camel/&#010;&#010;On Wed, Apr 12, 2017 at 1:34 PM, Jonathan Schoreels&#010;&lt;jonathan.schoreels@gmail.com&gt; wrote:&#010;&gt; Is it allowed to open pull request just to add java doc, or would you prefer&#010;&gt; to do it yourself ?&#010;&gt;&#010;&gt;&#010;&gt; On 2017-04-12 13:31, Claus Ibsen wrote:&#010;&gt;&gt;&#010;&gt;&gt; Yes only body + headers is stored that is by design&#010;&gt;&gt;&#010;&gt;&gt; On Wed, Apr 12, 2017 at 1:19 PM, Jonathan Schoreels&#010;&gt;&gt; &lt;jonathan.schoreels@gmail.com&gt; wrote:&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; Hello,&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; I've been using JdbcAggregationRepository recently and discovered that it&#010;&gt;&gt;&gt; won't save the property in the table and thus, losing them at each&#010;&gt;&gt;&gt; aggregation step.&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; I know property are meant to be inner-route variable, and headers&#010;&gt;&gt;&gt; metadata&#010;&gt;&gt;&gt; for protocol/outer-scope, and that by definition, a&#010;&gt;&gt;&gt; JdbcAggregationRepository is an outer service. However, at the same time,&#010;&gt;&gt;&gt; it's an abstraction inside the route, and it's still very unsetting to&#010;&gt;&gt;&gt; have&#010;&gt;&gt;&gt; property that dissapear in the same camel route.&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; Do you see it as a Bug or a Feature ?&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; PS : I'm still asking myself why there is no user guide to use&#010;&gt;&gt;&gt; JdbcAggregationRepository in the book (Hawt example) or a ""pretty-doc"" in&#010;&gt;&gt;&gt; http://camel.apache.org/aggregator.html. Or maybe there is other more&#010;&gt;&gt;&gt; standard way to aggregate in a persistent repository that I don't know&#010;&gt;&gt;&gt; yet ?&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; Thank you,&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; Jonathan Schoreels&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
152,153,Claus Ibsen,      Re: JdbcAggregationRepository doesn't preserve properties : Feature/Bug ?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yN%3D3dLdO2UNGNtpLWRUk-J%3DSTtF-2049M1kyhLxN-bGQGw%40mail.gmail.com%3E,users,"Sun, 23 Apr 2017 08:04:42 GMT","Hi Jonathan&#010;&#010;Did you get a chance to do this? Its good to help the project if users&#010;can get involved and provide fixes/improvments. And a small javadoc&#010;contribution is a great place to start.&#010;&#010;On Wed, Apr 12, 2017 at 1:34 PM, Jonathan Schoreels&#010;&lt;jonathan.schoreels@gmail.com&gt; wrote:&#010;&gt; Is it allowed to open pull request just to add java doc, or would you prefer&#010;&gt; to do it yourself ?&#010;&gt;&#010;&gt;&#010;&gt; On 2017-04-12 13:31, Claus Ibsen wrote:&#010;&gt;&gt;&#010;&gt;&gt; Yes only body + headers is stored that is by design&#010;&gt;&gt;&#010;&gt;&gt; On Wed, Apr 12, 2017 at 1:19 PM, Jonathan Schoreels&#010;&gt;&gt; &lt;jonathan.schoreels@gmail.com&gt; wrote:&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; Hello,&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; I've been using JdbcAggregationRepository recently and discovered that it&#010;&gt;&gt;&gt; won't save the property in the table and thus, losing them at each&#010;&gt;&gt;&gt; aggregation step.&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; I know property are meant to be inner-route variable, and headers&#010;&gt;&gt;&gt; metadata&#010;&gt;&gt;&gt; for protocol/outer-scope, and that by definition, a&#010;&gt;&gt;&gt; JdbcAggregationRepository is an outer service. However, at the same time,&#010;&gt;&gt;&gt; it's an abstraction inside the route, and it's still very unsetting to&#010;&gt;&gt;&gt; have&#010;&gt;&gt;&gt; property that dissapear in the same camel route.&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; Do you see it as a Bug or a Feature ?&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; PS : I'm still asking myself why there is no user guide to use&#010;&gt;&gt;&gt; JdbcAggregationRepository in the book (Hawt example) or a ""pretty-doc"" in&#010;&gt;&gt;&gt; http://camel.apache.org/aggregator.html. Or maybe there is other more&#010;&gt;&gt;&gt; standard way to aggregate in a persistent repository that I don't know&#010;&gt;&gt;&gt; yet ?&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; Thank you,&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; Jonathan Schoreels&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
153,154,Jonathan Schoreels,        Re: JdbcAggregationRepository doesn't preserve properties : Feature/Bug ?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2BD-ZCSr4VYH6z27DYfWDi_vUBi3F_mmGhEh2wpkJm%3DP%3DKD0jQ%40mail.gmail.com%3E,users,"Sun, 23 Apr 2017 14:13:57 GMT","Hi Claus,&#010;&#010;Thank you for the reminder, I had some other test with the repository and&#010;found it another feature that seems to be normal : if the deadletter route&#010;throws an exception, it will be send again to DLQ again, and again. I say&#010;it's normal since a test seems to cover it&#010;: JdbcAggregateRecoverDeadLetterChannelFailedTest.&#010;&#010;I however did not find if it's a behaviour that should be implemented in&#010;ALL RecoverableAggregationRepository or only some of them. I've just added&#010;javadoc for the JDBC's one, in doubt.&#010;&#010;Jonathan&#010;&#010;2017-04-23 10:04 GMT+02:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&#010;&gt; Hi Jonathan&#010;&gt;&#010;&gt; Did you get a chance to do this? Its good to help the project if users&#010;&gt; can get involved and provide fixes/improvments. And a small javadoc&#010;&gt; contribution is a great place to start.&#010;&gt;&#010;&gt; On Wed, Apr 12, 2017 at 1:34 PM, Jonathan Schoreels&#010;&gt; &lt;jonathan.schoreels@gmail.com&gt; wrote:&#010;&gt; &gt; Is it allowed to open pull request just to add java doc, or would you&#010;&gt; prefer&#010;&gt; &gt; to do it yourself ?&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; On 2017-04-12 13:31, Claus Ibsen wrote:&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Yes only body + headers is stored that is by design&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; On Wed, Apr 12, 2017 at 1:19 PM, Jonathan Schoreels&#010;&gt; &gt;&gt; &lt;jonathan.schoreels@gmail.com&gt; wrote:&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt; Hello,&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt; I've been using JdbcAggregationRepository recently and discovered that&#010;&gt; it&#010;&gt; &gt;&gt;&gt; won't save the property in the table and thus, losing them at each&#010;&gt; &gt;&gt;&gt; aggregation step.&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt; I know property are meant to be inner-route variable, and headers&#010;&gt; &gt;&gt;&gt; metadata&#010;&gt; &gt;&gt;&gt; for protocol/outer-scope, and that by definition, a&#010;&gt; &gt;&gt;&gt; JdbcAggregationRepository is an outer service. However, at the same&#010;&gt; time,&#010;&gt; &gt;&gt;&gt; it's an abstraction inside the route, and it's still very unsetting to&#010;&gt; &gt;&gt;&gt; have&#010;&gt; &gt;&gt;&gt; property that dissapear in the same camel route.&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt; Do you see it as a Bug or a Feature ?&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt; PS : I'm still asking myself why there is no user guide to use&#010;&gt; &gt;&gt;&gt; JdbcAggregationRepository in the book (Hawt example) or a ""pretty-doc""&#010;&gt; in&#010;&gt; &gt;&gt;&gt; http://camel.apache.org/aggregator.html. Or maybe there is other more&#010;&gt; &gt;&gt;&gt; standard way to aggregate in a persistent repository that I don't know&#010;&gt; &gt;&gt;&gt; yet ?&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt; Thank you,&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt; Jonathan Schoreels&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&#010;"
154,155,Jonathan Schoreels,          Re: JdbcAggregationRepository doesn't preserve properties : Feature/Bug ?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2BD-ZCS5svwTikhUFPrSKX%3DNxu%3Dsxgud1i4dBa6kiHDi49ccug%40mail.gmail.com%3E,users,"Sun, 23 Apr 2017 14:14:23 GMT","(The pull request has been made : https://github.com/apache/camel/pull/1654)&#010;&#010;Jonathan&#010;&#010;2017-04-23 16:13 GMT+02:00 Jonathan Schoreels &lt;jonathan.schoreels@gmail.com&gt;&#010;:&#010;&#010;&gt; Hi Claus,&#010;&gt;&#010;&gt; Thank you for the reminder, I had some other test with the repository and&#010;&gt; found it another feature that seems to be normal : if the deadletter route&#010;&gt; throws an exception, it will be send again to DLQ again, and again. I say&#010;&gt; it's normal since a test seems to cover it :&#010;&gt; JdbcAggregateRecoverDeadLetterChannelFailedTest.&#010;&gt;&#010;&gt; I however did not find if it's a behaviour that should be implemented in&#010;&gt; ALL RecoverableAggregationRepository or only some of them. I've just&#010;&gt; added javadoc for the JDBC's one, in doubt.&#010;&gt;&#010;&gt; Jonathan&#010;&gt;&#010;&gt; 2017-04-23 10:04 GMT+02:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt;&#010;&gt;&gt; Hi Jonathan&#010;&gt;&gt;&#010;&gt;&gt; Did you get a chance to do this? Its good to help the project if users&#010;&gt;&gt; can get involved and provide fixes/improvments. And a small javadoc&#010;&gt;&gt; contribution is a great place to start.&#010;&gt;&gt;&#010;&gt;&gt; On Wed, Apr 12, 2017 at 1:34 PM, Jonathan Schoreels&#010;&gt;&gt; &lt;jonathan.schoreels@gmail.com&gt; wrote:&#010;&gt;&gt; &gt; Is it allowed to open pull request just to add java doc, or would you&#010;&gt;&gt; prefer&#010;&gt;&gt; &gt; to do it yourself ?&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; On 2017-04-12 13:31, Claus Ibsen wrote:&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; Yes only body + headers is stored that is by design&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; On Wed, Apr 12, 2017 at 1:19 PM, Jonathan Schoreels&#010;&gt;&gt; &gt;&gt; &lt;jonathan.schoreels@gmail.com&gt; wrote:&#010;&gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; Hello,&#010;&gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; I've been using JdbcAggregationRepository recently and discovered&#010;&gt;&gt; that it&#010;&gt;&gt; &gt;&gt;&gt; won't save the property in the table and thus, losing them at each&#010;&gt;&gt; &gt;&gt;&gt; aggregation step.&#010;&gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; I know property are meant to be inner-route variable, and headers&#010;&gt;&gt; &gt;&gt;&gt; metadata&#010;&gt;&gt; &gt;&gt;&gt; for protocol/outer-scope, and that by definition, a&#010;&gt;&gt; &gt;&gt;&gt; JdbcAggregationRepository is an outer service. However, at the same&#010;&gt;&gt; time,&#010;&gt;&gt; &gt;&gt;&gt; it's an abstraction inside the route, and it's still very unsetting&#010;to&#010;&gt;&gt; &gt;&gt;&gt; have&#010;&gt;&gt; &gt;&gt;&gt; property that dissapear in the same camel route.&#010;&gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; Do you see it as a Bug or a Feature ?&#010;&gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; PS : I'm still asking myself why there is no user guide to use&#010;&gt;&gt; &gt;&gt;&gt; JdbcAggregationRepository in the book (Hawt example) or a&#010;&gt;&gt; ""pretty-doc"" in&#010;&gt;&gt; &gt;&gt;&gt; http://camel.apache.org/aggregator.html. Or maybe there is other more&#010;&gt;&gt; &gt;&gt;&gt; standard way to aggregate in a persistent repository that I don't know&#010;&gt;&gt; &gt;&gt;&gt; yet ?&#010;&gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; Thank you,&#010;&gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; Jonathan Schoreels&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; --&#010;&gt;&gt; Claus Ibsen&#010;&gt;&gt; -----------------&#010;&gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt;&#010;&gt;&#010;&gt;&#010;&#010;"
155,156,Shutao,"Camel-netty client problem, only one connection is allowed by the server",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492003419907-5797503.post%40n5.nabble.com%3E,users,"Wed, 12 Apr 2017 13:23:39 GMT","Only one connection is allowed by the server.&#010;How can I use the camel-netty to write a client side which there is a lot of&#010;concurrent jobs ?&#010;(I want to use the producerPoolEnabled=false, but the document said Don't&#010;turn it off)&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-netty-client-problem-only-one-connection-is-allowed-by-the-server-tp5797503.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
156,157,Shutao,"  Re: Camel-netty client problem, only one connection is allowed by the server",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492003732852-5797504.post%40n5.nabble.com%3E,users,"Wed, 12 Apr 2017 13:28:52 GMT",I'm using Camel 1.15 with netty 3.9.9 now.&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-netty-client-problem-only-one-connection-is-allowed-by-the-server-tp5797503p5797504.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
157,158,Shutao,"    Re: Camel-netty client problem, only one connection is allowed by the server",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492004223375-5797506.post%40n5.nabble.com%3E,users,"Wed, 12 Apr 2017 13:37:03 GMT","The main problem is.&#010;if I set the producerPoolMaxActive = 1, all the requests will queue one by&#010;one. The performance is low.&#010;if I set the producerPoolEnabled = false, seems got concurrency issue&#010;according to the&#010;http://camel.465427.n5.nabble.com/Concurrency-problem-with-Netty-and-producerPoolEnabled-false-td5739679.html#a5739683&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-netty-client-problem-only-one-connection-is-allowed-by-the-server-tp5797503p5797506.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
158,159,andcrow,Using Split with JSON File,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492005997292-5797508.post%40n5.nabble.com%3E,users,"Wed, 12 Apr 2017 14:06:37 GMT","Hello,&#010;&#010;I have a route that triggers a SELECT in a database and creates a JSON file&#010;in a folder (this file which on average generates something around 100k to&#010;150k of records).&#010;&#010;Then another route that sends the data of this file to an endpoint using the&#010;HTTP4 component and performing a POST and REST API (the endpoint is already&#010;prepared to perform batch processing).&#010;&#010;I noticed something curious, that in certain cases Camel sends the data, Web&#010;Services is processing correctly, but after a few seconds Camel returns me a&#010;DeadLetterChannel, with some exceptions:&#010;&#010; - ""org.apache.http.wire"" ""http-outgoing-5"" ""end of stream""&#010;&#010; - ""org.apache.http.nohttpresponseexception"" ""failed to respond""&#010;&#010; - ""h.i.c.DefaultManagedHttpClientConnection"" ""http-outgoing-5"" ""Close&#010;connection""&#010;&#010; - ""h.i.c.DefaultManagedHttpClientConnection"" ""http-outgoing-5"" ""Shutdown&#010;connection""&#010;&#010; - ""o.a.http.impl.execchain.MainClientExec"" ""Connection discarded""&#010;""Connection released""&#010;&#010;But the process continues normally, it tries to resend again, but gives the&#010;error again, but in AWS web services it is processing normally and I have&#010;verified that it returns the normal status codes.&#010;&#010;Searching the Camel documentation and found httpClient. I made the&#010;configuration by increasing the timeout, but nothing worked, it seems that&#010;it ignores these settings (httpClient.socketTimeout = 300000).&#010;&#010;I'm thinking of splitting the JSON file, with some rule like every 1000&#010;records generating 1 JSON file. So I will have several smaller files that&#010;will be processed faster and thus get the response from the server, avoiding&#010;this error.&#010;&#010;My actual route thats find all records in database and create a json file&#010;is:&#010;&#010;from(""timer://query?fixedRate=true&amp;delay=5s&amp;period=10800s"")&#010;    .routeId(""route-product"")&#010;    .setBody(constant(new ProductQuery().getProductSelect()))&#010;.to(""jdbc:myDataSource"")&#010;    .marshal()&#010;        .json(JsonLibrary.Gson)&#010;        .setHeader(Exchange.CONTENT_TYPE, constant(""application/json""))&#010;        .setHeader(Exchange.HTTP_CHARACTER_ENCODING, constant(""UTF-8""))&#010;        .setHeader(""CamelFileName"", constant(""products.json""))&#010;.to(""file:products"");&#010;&#010;However, searching the documentation, I was able to perform the split:&#010;&#010;from(""timer://query?fixedRate=true&amp;delay=5s&amp;period=10800s"")&#010;    .routeId(""route-product"")&#010;    .setBody(constant(new ProductQuery().getProductSelect()))&#010;.to(""jdbc:myDataSource?outputType=StreamList"")&#010;    .split(body()).streaming()&#010;    .marshal()&#010;        .json(JsonLibrary.Gson)&#010;        .setHeader(Exchange.CONTENT_TYPE, constant(""application/json""))&#010;        .setHeader(""CamelFileName"", simple(""${id}.json""))&#010;.to(""file:product"");&#010;&#010;In this way each record creates a JSON file, but my case, I want to group&#010;these records, again in the documentation is suggested as follows:&#010;&#010;.split().tokenize(""\n"", 1000).streaming()&#010;&#010;But in this way the output of the log shows only 1 file with the following&#010;content:&#010;&#010;""org.apache.camel.component.jdbc.ResultSetIterator@7be7d81f""&#010;&#010;If I remove the option ?outputType=StreamList from the JDBC component's URI,&#010;then the following exception is thrown:&#010;&#010;No converter found capable of converting from type [java.util.ArrayList&lt;?&gt;]&#010;to type [java.lang.String]&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-Split-with-JSON-File-tp5797508.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
159,160,andcrow,  Re: Using Split with JSON File,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492447513299-5797770.post%40n5.nabble.com%3E,users,"Mon, 17 Apr 2017 16:45:13 GMT","Still in the battle with this case ..... hehehehe&#010;&#010;Viewing the documentation I found the component SQL Component:&#010;&#010;In the options:&#010;&#010;maxMessagesPerPoll: Camel 2.11: SQL consumer only: An integer value to&#010;define the maximum number of messages to gather per poll. By default, no&#010;maximum is set.&#010;&#010;But also with this component he ignores this option:&#010;&#010;from(""timer://query?fixedRate=true&amp;delay=5s&amp;period=10800s"") &#010;    .routeId(""route-product"") &#010;    .setBody(constant(new ProductQuery().getProductSelect())) &#010;to(""sql:"" + new ProductQuery().getProductSelect() +&#010;""?maxMessagesPerPoll=1000&amp;dataSource=myDataSource"")&#010;    .marshal() &#010;        .json(JsonLibrary.Gson) &#010;        .setHeader(Exchange.CONTENT_TYPE, constant(""application/json"")) &#010;        .setHeader(""CamelFileName"", simple(""${id}.json"")) &#010;.to(""file:product""); &#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-Split-with-JSON-File-tp5797508p5797770.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
160,161,souciance,    Re: Using Split with JSON File,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs1zLBw0E657fkB3o%3DgHHVPmxSu9ozauK0nbPg%3DBG4t89A%40mail.gmail.com%3E,users,"Mon, 17 Apr 2017 17:40:41 GMT","Couldn't you split the resultset from the database and for each split&#010;produce a json and send that batch to your web service?&#010;&#010;On Mon, Apr 17, 2017 at 6:45 PM, andcrow [via Camel] &lt;&#010;ml-node+s465427n5797770h33@n5.nabble.com&gt; wrote:&#010;&#010;&gt; Still in the battle with this case ..... hehehehe&#010;&gt;&#010;&gt; Viewing the documentation I found the component SQL Component:&#010;&gt;&#010;&gt; In the options:&#010;&gt;&#010;&gt; maxMessagesPerPoll: Camel 2.11: SQL consumer only: An integer value to&#010;&gt; define the maximum number of messages to gather per poll. By default, no&#010;&gt; maximum is set.&#010;&gt;&#010;&gt; But also with this component he ignores this option:&#010;&gt;&#010;&gt; from(""timer://query?fixedRate=true&amp;delay=5s&amp;period=10800s"")&#010;&gt;     .routeId(""route-product"")&#010;&gt;     .setBody(constant(new ProductQuery().getProductSelect()))&#010;&gt; to(""sql:"" + new ProductQuery().getProductSelect() +&#010;&gt; ""?maxMessagesPerPoll=1000&amp;dataSource=myDataSource"")&#010;&gt;     .marshal()&#010;&gt;         .json(JsonLibrary.Gson)&#010;&gt;         .setHeader(Exchange.CONTENT_TYPE, constant(""application/json""))&#010;&gt;         .setHeader(""CamelFileName"", simple(""${id}.json""))&#010;&gt; .to(""file:product"");&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Using-Split-with-JSON-&#010;&gt; File-tp5797508p5797770.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-Split-with-JSON-File-tp5797508p5797771.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
161,162,andcrow,      Re: Using Split with JSON File,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492451365998-5797772.post%40n5.nabble.com%3E,users,"Mon, 17 Apr 2017 17:49:25 GMT",Did not work using maxMessagesPerPoll.&#010;&#010;Does not group every 1000 records.&#010;&#010;Creates 1 JSON file for each record.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-Split-with-JSON-File-tp5797508p5797772.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
162,163,souciance,        Re: Using Split with JSON File,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs2xS%3DLT%2BAy9dzbV%2BqRd76WTPbtZ049x6CNUCX05e5G8aA%40mail.gmail.com%3E,users,"Mon, 17 Apr 2017 18:21:25 GMT","I would suggest get the whole resultset and save the data on a queue or&#010;even as a file. Then you can parse it as a stream or every x number of rows&#010;and split.&#010;&#010;On Mon, Apr 17, 2017 at 7:49 PM, andcrow [via Camel] &lt;&#010;ml-node+s465427n5797772h95@n5.nabble.com&gt; wrote:&#010;&#010;&gt; Did not work using maxMessagesPerPoll.&#010;&gt;&#010;&gt; Does not group every 1000 records.&#010;&gt;&#010;&gt; Creates 1 JSON file for each record.&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Using-Split-with-JSON-&#010;&gt; File-tp5797508p5797772.html&#010;&gt; To start a new topic under Camel - Users, email&#010;&gt; ml-node+s465427n465428h31@n5.nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-Split-with-JSON-File-tp5797508p5797773.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
163,164,andcrow,          Re: Using Split with JSON File,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492453944657-5797774.post%40n5.nabble.com%3E,users,"Mon, 17 Apr 2017 18:32:24 GMT",I'll try&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-Split-with-JSON-File-tp5797508p5797774.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
164,165,andcrow,          Re: Using Split with JSON File,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493129986428-5798258.post%40n5.nabble.com%3E,users,"Tue, 25 Apr 2017 14:19:46 GMT",Does Apache Camel have any component that can perform auditing on a database?&#010;Or audit records that will be sent to a web service using a JSON file?&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Using-Split-with-JSON-File-tp5797508p5798258.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
165,166,Bernard Ligny,Camel-CDI in a multi-module project,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492014502773-5797510.post%40n5.nabble.com%3E,users,"Wed, 12 Apr 2017 16:28:22 GMT","I am currently refactoring a monolithic webapp using a more&#010;modular/micro-services approach.&#010;I'm busy with splitting the numerous existing Camel RouteBuilders into&#010;separate module.&#010;&#010;The target situation is explained here:&#010;&#010;&#010;And the resulting war has the following structure&#010;&#010;&#010;Each module contains the following Camel stuff:&#010;&#010;&#010;When deployed on my app-server, I notice the following behaviour (with Camel&#010;2.18.1).&#010;&#010;1) As long as this Camel stuff remains in the embedded jars, Camel does&#010;*NOT* see them. So Camel is not starting at all...&#010;&#010;2) If I move the various context producers into the webapp module&#010;(=&gt;ContextFactory class now in WEB-INF/classes instead of&#010;/WEB-INF/lib/module-i.jar), then Camel is starting... Great ! But the&#010;started contexts do not detect my routes. So all contexts are empty :-(&#010;&#010;So my conclusion is that Camel-CDI (classloader) expects that everything&#010;(=context producers as well as route definitions) should be located in&#010;WEB-INF/classes.&#010;Is this assumption right ?&#010;What are the solutions to make it work ?&#010;&#010;PS: I'm deploying to Wildfly 10.1.0. &#010;&#010;&#010;&#010;&#010;&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-CDI-in-a-multi-module-project-tp5797510.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
166,167,Antonin Stefanutti,  Re: Camel-CDI in a multi-module project,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CF686B54E-F33B-4732-BD7E-2DC5317AC1F3%40stefanutti.fr%3E,users,"Thu, 13 Apr 2017 08:05:52 GMT","Hi,&#010;&#010;&gt; On 12 Apr 2017, at 18:28, Bernard Ligny &lt;bernard.ligny@gmail.com&gt; wrote:&#010;&gt; &#010;&gt; I am currently refactoring a monolithic webapp using a more&#010;&gt; modular/micro-services approach.&#010;&gt; I'm busy with splitting the numerous existing Camel RouteBuilders into&#010;&gt; separate module.&#010;&gt; &#010;&gt; The target situation is explained here:&#010;&gt; &#010;&gt; &#010;&gt; And the resulting war has the following structure&#010;&gt; &#010;&gt; &#010;&gt; Each module contains the following Camel stuff:&#010;&gt; &#010;&gt; &#010;&gt; When deployed on my app-server, I notice the following behaviour (with Camel&#010;&gt; 2.18.1).&#010;&gt; &#010;&gt; 1) As long as this Camel stuff remains in the embedded jars, Camel does&#010;&gt; *NOT* see them. So Camel is not starting at all...&#010;&gt; &#010;&gt; 2) If I move the various context producers into the webapp module&#010;&gt; (=&gt;ContextFactory class now in WEB-INF/classes instead of&#010;&gt; /WEB-INF/lib/module-i.jar), then Camel is starting... Great ! But the&#010;&gt; started contexts do not detect my routes. So all contexts are empty :-(&#010;&gt; &#010;&gt; So my conclusion is that Camel-CDI (classloader) expects that everything&#010;&gt; (=context producers as well as route definitions) should be located in&#010;&gt; WEB-INF/classes.&#010;&gt; Is this assumption right ?&#010;&#010;Camel CDI is basically a CDI extension so it does not affect the way beans archives are being&#010;discovered and deployed by the container nor classes are being loaded. It solely up to the&#010;container, in your case WildFly.&#010;&#010;&gt; What are the solutions to make it work ?&#010;&#010;I would expect the library JARs packaged within you WAR to be deployed as beans archives as&#010;long as they have a beans.xml file in module&lt;X&gt;.jar/META-INF directory. Is this the&#010;case?&#010;&#010;There may be some classloading issues but then you should turn to WildFly team...&#010;&#010;&gt; PS: I'm deploying to Wildfly 10.1.0. &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Camel-CDI-in-a-multi-module-project-tp5797510.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;"
167,168,Bernard Ligny,    Re: Camel-CDI in a multi-module project,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492155231573-5797691.post%40n5.nabble.com%3E,users,"Fri, 14 Apr 2017 07:33:51 GMT","Hi Antonin&#010;&#010;&#010;astefanutti wrote&#010;&gt; as long as they have a beans.xml file in module&#010;&gt; &lt;X&gt;&#010;&gt; .jar/META-INF directory. Is this the case? &#010;&#010;No it was not the case - shame on me !&#010;I naively thought that putting a *single* ""beans.xml"" on the webapp level&#010;was sufficient to activate the bean discovery for the *whole* application. I&#010;did not know a separate file on *each* module was necessary...&#010;&#010;So, this was not a Camel nor Wildfly issue.&#010;Let's say is was rather a  PEBCAK &lt;https://en.wiktionary.org/wiki/PEBCAK&gt;  &#010;;-)&#010;&#010;Everything is working fine now.&#010;Thank you very much for your precious help.&#010;&#010;Regards,&#010;&#010;Bernard.&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-CDI-in-a-multi-module-project-tp5797510p5797691.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
168,169,Antonin Stefanutti,      Re: Camel-CDI in a multi-module project,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CEDF45260-E16C-4FD5-A72C-8214114DDE6D%40stefanutti.fr%3E,users,"Fri, 14 Apr 2017 09:57:32 GMT","Hi Bernard,&#013;&#010;&#013;&#010;&gt; On 14 Apr 2017, at 09:33, Bernard Ligny &lt;bernard.ligny@gmail.com&gt; wrote:&#013;&#010;&gt; &#013;&#010;&gt; Hi Antonin&#013;&#010;&gt; &#013;&#010;&gt; &#013;&#010;&gt; astefanutti wrote&#013;&#010;&gt;&gt; as long as they have a beans.xml file in module&#013;&#010;&gt;&gt; &lt;X&gt;&#013;&#010;&gt;&gt; .jar/META-INF directory. Is this the case? &#013;&#010;&gt; &#013;&#010;&gt; No it was not the case - shame on me !&#013;&#010;&gt; I naively thought that putting a *single* ""beans.xml"" on the webapp level&#013;&#010;&gt; was sufficient to activate the bean discovery for the *whole* application. I&#013;&#010;&gt; did not know a separate file on *each* module was necessary...&#013;&#010;&gt; &#013;&#010;&gt; So, this was not a Camel nor Wildfly issue.&#013;&#010;&gt; Let's say is was rather a  PEBCAK &lt;https://en.wiktionary.org/wiki/PEBCAK&gt;  &#013;&#010;&gt; ;-)&#013;&#010;&#013;&#010;These are hard to spot, but generally easy to fix ;)&#013;&#010;&#013;&#010;&gt; Everything is working fine now.&#013;&#010;&gt; Thank you very much for your precious help.&#013;&#010;&#013;&#010;Iâ€™m glad it works!&#013;&#010;&#013;&#010;&gt; Regards,&#013;&#010;&gt; &#013;&#010;&gt; Bernard.&#013;&#010;&gt; &#013;&#010;&gt; &#013;&#010;&gt; &#013;&#010;&gt; &#013;&#010;&gt; --&#013;&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Camel-CDI-in-a-multi-module-project-tp5797510p5797691.html&#013;&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#013;&#010;&#013;&#010;"
169,170,,Re: Apache Camel - ftp component - need to use absolute path,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CEDF45260-E16C-4FD5-A72C-8214114DDE6D%40stefanutti.fr%3E,users,"Fri, 14 Apr 2017 09:57:32 GMT","Hi Bernard,&#013;&#010;&#013;&#010;&gt; On 14 Apr 2017, at 09:33, Bernard Ligny &lt;bernard.ligny@gmail.com&gt; wrote:&#013;&#010;&gt; &#013;&#010;&gt; Hi Antonin&#013;&#010;&gt; &#013;&#010;&gt; &#013;&#010;&gt; astefanutti wrote&#013;&#010;&gt;&gt; as long as they have a beans.xml file in module&#013;&#010;&gt;&gt; &lt;X&gt;&#013;&#010;&gt;&gt; .jar/META-INF directory. Is this the case? &#013;&#010;&gt; &#013;&#010;&gt; No it was not the case - shame on me !&#013;&#010;&gt; I naively thought that putting a *single* ""beans.xml"" on the webapp level&#013;&#010;&gt; was sufficient to activate the bean discovery for the *whole* application. I&#013;&#010;&gt; did not know a separate file on *each* module was necessary...&#013;&#010;&gt; &#013;&#010;&gt; So, this was not a Camel nor Wildfly issue.&#013;&#010;&gt; Let's say is was rather a  PEBCAK &lt;https://en.wiktionary.org/wiki/PEBCAK&gt;  &#013;&#010;&gt; ;-)&#013;&#010;&#013;&#010;These are hard to spot, but generally easy to fix ;)&#013;&#010;&#013;&#010;&gt; Everything is working fine now.&#013;&#010;&gt; Thank you very much for your precious help.&#013;&#010;&#013;&#010;Iâ€™m glad it works!&#013;&#010;&#013;&#010;&gt; Regards,&#013;&#010;&gt; &#013;&#010;&gt; Bernard.&#013;&#010;&gt; &#013;&#010;&gt; &#013;&#010;&gt; &#013;&#010;&gt; &#013;&#010;&gt; --&#013;&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Camel-CDI-in-a-multi-module-project-tp5797510p5797691.html&#013;&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#013;&#010;&#013;&#010;"
170,171,paul529,  Re: Apache Camel - ftp component - need to use absolute path,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492098862759-5797644.post%40n5.nabble.com%3E,users,"Thu, 13 Apr 2017 15:54:22 GMT","Hi Zoran,&#010;&#010;I have been unable to find any detailed description of why absolute paths&#010;cannot be supported in the ftp component.&#010;&#010;I am trying to use the ftp component to retrieve files from a remote host. &#010;I use an idempotent repository with the noop=true setting for the consumer. &#010;In this way the remote host is only accessed in a read-only manner.  &#010;&#010;Does the issue with absolute paths have to do with renaming files after&#010;processing on the remote host?  Is so, my use case would not require this&#010;and would be able to support absolute paths.&#010;&#010;Would it be possible to support absolute paths using a property of the the&#010;component URI?  Possibly if noop=true is set?&#010;&#010;Thanks,&#010;Paul&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Apache-Camel-ftp-component-need-to-use-absolute-path-tp5796693p5797644.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
171,172,paul529,  Re: Apache Camel - ftp component - need to use absolute path,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492098990171-5797645.post%40n5.nabble.com%3E,users,"Thu, 13 Apr 2017 15:56:30 GMT","Hi Zoran, &#010;&#010;I have been unable to find any detailed description of why absolute paths&#010;cannot be supported in the ftp component. &#010;&#010;I am trying to use the ftp component to retrieve files from a remote host. &#010;I use an idempotent repository with the noop=true setting for the consumer. &#010;In this way the remote host is only accessed in a read-only manner.   &#010;&#010;Does the issue with absolute paths have to do with renaming files after&#010;processing on the remote host?  Is so, my use case would not require this&#010;and would be able to support absolute paths. &#010;&#010;Would it be possible to support absolute paths using a property of the the&#010;component URI?  Possibly if noop=true is set? &#010;&#010;Thanks, &#010;Paul&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Apache-Camel-ftp-component-need-to-use-absolute-path-tp5796693p5797645.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
172,173,paul529,  Re: Apache Camel - ftp component - need to use absolute path,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492099255592-5797646.post%40n5.nabble.com%3E,users,"Thu, 13 Apr 2017 16:00:55 GMT","Hi Zoran, &#010;&#010;I have been unable to find any detailed description of why absolute paths&#010;cannot be supported in the ftp component. &#010;&#010;I am trying to use the ftp component to retrieve files from a remote host. &#010;I use an idempotent repository with the noop=true setting for the consumer. &#010;In this way the remote host is only accessed in a read-only manner.   &#010;&#010;Does the issue with absolute paths have to do with renaming files after&#010;processing on the remote host?  Is so, my use case would not require this&#010;and would be able to support absolute paths. &#010;&#010;Would it be possible to support absolute paths using a property of the the&#010;component URI?  Possibly if noop=true is set? &#010;&#010;Thanks, &#010;Paul&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Apache-Camel-ftp-component-need-to-use-absolute-path-tp5796693p5797646.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
173,174,Zoran Regvart,    Re: Apache Camel - ftp component - need to use absolute path,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCABD_Zr-mxzanHGdAreu74eJ%2BEc0cSXrOgWJ-n-dZZnDSW-SeqA%40mail.gmail.com%3E,users,"Thu, 13 Apr 2017 17:35:40 GMT","Hi Ceyhan,&#010;&#010;On Thu, Apr 13, 2017 at 6:00 PM, paul529 &lt;paul529@icloud.com&gt; wrote:&#010;&gt; I have been unable to find any detailed description of why absolute paths&#010;&gt; cannot be supported in the ftp component.&#010;&#010;did you see the issues I've linked to?&#010;&#010;https://issues.apache.org/jira/browse/CAMEL-8828&#010;https://issues.apache.org/jira/browse/CAMEL-8844&#010;&#010;I agree they are not detailed, but they illustrate some of the issues&#010;users were facing with absolute paths&#010;&#010;&gt; I am trying to use the ftp component to retrieve files from a remote host.&#010;&gt; I use an idempotent repository with the noop=true setting for the consumer.&#010;&gt; In this way the remote host is only accessed in a read-only manner.&#010;&gt;&#010;&gt; Does the issue with absolute paths have to do with renaming files after&#010;&gt; processing on the remote host?  Is so, my use case would not require this&#010;&gt; and would be able to support absolute paths.&#010;&#010;that was one of the issues&#010;&#010;&gt; Would it be possible to support absolute paths using a property of the the&#010;&gt; component URI?  Possibly if noop=true is set?&#010;&#010;I think that ship has sailed with 2.16, I was not around for the&#010;discussion on it, perhaps one of the committers from that period could&#010;shade more light.&#010;&#010;But I believe that the stance not to support absolute paths will&#010;remain in the future, from what I gather these were just one of many&#010;issues that in the end resulted in not supporting absolute paths.&#010;&#010;zoran&#010;-- &#010;Zoran Regvart&#010;&#010;"
174,175,sameekbhau...@yahoo.co.in,Need Help: Using ServiceCall EIP and camel-ribbon component to discover service from Netflix Eureka Server,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492100685739-5797647.post%40n5.nabble.com%3E,users,"Thu, 13 Apr 2017 16:24:45 GMT","Dear All,&#010;&#010;I am trying to discover a service (localhost:9999) registered in a Eureka&#010;Server running at localhost:8080 using ServiceCall EIP and camel-ribbon&#010;component checked out from Github master branch i.e. 2.19.0-SNAPSHOT&#010;version.&#010;&#010;Following is my eureka-service properties used while registering the&#010;service:&#010;&#010;eureka.name=vertxHttp&#010;eureka.vipAddress=http.vertx.net&#010;eureka.port=9999&#010;&#010;Now, my route to lookup the registered service is:&#010;&#010;        StaticServiceDiscovery servers = new StaticServiceDiscovery();&#010;        servers.addServer(""localhost"", 8080);&#010;&#010;        RibbonConfiguration configuration = new RibbonConfiguration();&#010;        RibbonLoadBalancer loadBalancer = new&#010;RibbonLoadBalancer(configuration);&#010;&#010;        // configure camel service call&#010;        ServiceCallConfigurationDefinition config = new&#010;ServiceCallConfigurationDefinition();&#010;        config.setLoadBalancer(loadBalancer);&#010;        config.setServiceDiscovery(servers);&#010;&#010;        // register configuration&#010;        getContext().setServiceCallConfiguration(config);&#010;        &#010;        from(""direct:start"")&#010;        .serviceCall(""vertxHttp"",""http:vertxHttp.host:vertxHttp.port"")&#010;        .process(new Processor() {&#010;&#009;&#009;&#009;&#010;&#009;&#009;&#009;@Override&#010;&#009;&#009;&#009;public void process(Exchange exchange) throws Exception {&#010;&#009;&#009;&#009;&#009;// TODO Auto-generated method stub&#010;&#009;&#009;&#009;&#009;System.out.println(""From Route-&gt;""+exchange);&#010;&#009;&#009;&#009;}&#010;&#009;&#009;})&#010;        .to(""mock:result"");&#010;&#010;&#010;While running the above route in debug mode, the control is not going into&#010;Processor.process, so I am unable to check the contents of exchange to see&#010;whether ServiceCall is working as expected.&#010;&#010;Couple of questions:&#010;1) Can I use ServiceCall EIP and camel-ribbon component to discover a&#010;service registered in Netflix Eureka Server?&#010;&#010;2) If yes, pls help me in getting it working.&#010;&#010;Thanks in advance.&#010;&#010;Regards,&#010;Sameek Bhaumik&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Need-Help-Using-ServiceCall-EIP-and-camel-ribbon-component-to-discover-service-from-Netflix-Eureka-Sr-tp5797647.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
175,176,erevkub1,Multiple from end points traversing to different routes,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492106505122-5797650.post%40n5.nabble.com%3E,users,"Thu, 13 Apr 2017 18:01:45 GMT","Hi All,&#010;&#010;Please suggest me on how to implement the below scenario. The requirement is&#010;to monitor multiple endpoint(like ftp, http) to fetch xml content. Assume&#010;there are 7 such input endpoint and those sources has to be monitored once a&#010;day and each for each input content, functionality is different. Only way to&#010;identify the different sources are the input endpoint url which is also&#010;dynamic.&#010;&#010;Please let me know if any suggestion for this implementation. This has to be&#010;done in Apache camel in java.&#010;&#010;Regards,&#010;Revathy&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Multiple-from-end-points-traversing-to-different-routes-tp5797650.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
176,177,Jonathan Schoreels,  Re: Multiple from end points traversing to different routes,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2BD-ZCQOvarsj9s7V0SRPXu7f6rmrxdEVpuqLeoVYHrOvfKvDA%40mail.gmail.com%3E,users,"Fri, 14 Apr 2017 08:37:15 GMT","You could use pollEnrich in the 7 route to be triggered by a multicasted&#010;scheduler.&#010;&#010;Something like :&#010;from(""quartz://groupName/timerName?cron=0+0/5+12-18+?+*+MON-FRI&amp;trigger.timeZone=Europe/Stockholm"")&#010;    .multicast()&#010;        .multicast().parallelProcessing().to(""direct:httpConsumer"",&#010;""direct:ftpConsumer"", ""direct:fileConsumer"");&#010;&#010;and for each consumer :&#010;&#010;from(""direct:httpConsumer"")&#010;    .pollEnrich(""http://service/"")&#010;    ... the processing&#010;&#010;Just an idea, I don't pretend it's the best one, but it centralize the&#010;scheduling at one place. Or you could just put the scheduler in a property,&#010;like {{scheduler.uri}}, and just do the&#010;from(""{{scheduler.uri}}"").pollEnrich in each route, but multicast allows a&#010;bit more in synchronizing your consumers (for example, stopOnFailure, etc..)&#010;&#010;Resources :&#010;http://camel.apache.org/quartz.html&#010;http://camel.apache.org/content-enricher.html&#010;http://camel.apache.org/multicast.html&#010;&#010;&#010;2017-04-13 20:01 GMT+02:00 erevkub1 &lt;revathykuberan@gmail.com&gt;:&#010;&#010;&gt; Hi All,&#010;&gt;&#010;&gt; Please suggest me on how to implement the below scenario. The requirement&#010;&gt; is&#010;&gt; to monitor multiple endpoint(like ftp, http) to fetch xml content. Assume&#010;&gt; there are 7 such input endpoint and those sources has to be monitored once&#010;&gt; a&#010;&gt; day and each for each input content, functionality is different. Only way&#010;&gt; to&#010;&gt; identify the different sources are the input endpoint url which is also&#010;&gt; dynamic.&#010;&gt;&#010;&gt; Please let me know if any suggestion for this implementation. This has to&#010;&gt; be&#010;&gt; done in Apache camel in java.&#010;&gt;&#010;&gt; Regards,&#010;&gt; Revathy&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; com/Multiple-from-end-points-traversing-to-different-routes-tp5797650.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&#010;"
177,178,erevkub1,    Re: Multiple from end points traversing to different routes,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492190123294-5797757.post%40n5.nabble.com%3E,users,"Fri, 14 Apr 2017 17:15:23 GMT",Thanks for your quick response. I also tried using  multiple routebuilder and&#010;tried a small POC and it worked. Please let em know if this is a good&#010;option?&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Multiple-from-end-points-traversing-to-different-routes-tp5797650p5797757.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
178,179,DariusX,Transformation options,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492202353675-5797759.post%40n5.nabble.com%3E,users,"Fri, 14 Apr 2017 20:39:13 GMT","The ""Camel in Action"" book says ""Prefer to use beans over processors"" (pg 112&#010;in 2nd Edition), because they're not dependent on the Camel API. &#010;&#010;This leads me to a follow-up question: &#010;- if we need to tranform between 2 custom formats (i.e. annot use an&#010;existing Dataformat);and,&#010;- also do not need the Exchange, but can transform the body&#010;&#010;With those assumptions, should we also prefer to use Beans over a&#010;Custom-Dataformat or Camel Transformer? Or, are their situations where those&#010;two are useful even if one does not need anything but the body()  ?&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Transformation-options-tp5797759.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
179,180,Claus Ibsen,  Re: Transformation options,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNn27z64jcBOZuPJy%3D7E79eZgLF7E6%3DUs71nK-XkMK2nNw%40mail.gmail.com%3E,users,"Sun, 16 Apr 2017 07:27:20 GMT","Hi&#010;&#010;Try to think how you would write the java api for the message&#010;transformation without Camel. What would the input and output's be&#010;etc.&#010;&#010;Then try to write unit test for these transformation that dont use&#010;Camel if possible.&#010;&#010;When using beans the return type is the message body, and as such if&#010;you need to enrich with message headers as well, you can bind the&#010;@Headers Map as parameter and add your headers on this.&#010;&#010;But if you are comfortable with the Camel API on Exchange then a&#010;processor is fine as well. It just has a direct dependency on Camel&#010;and is more low level, eg you need to know about IN vs OUT message&#010;etc. And from the code you cannot see what is the expected input and&#010;output java/data types etc.&#010;&#010;A processor however is faster at runtime as its just a direct method&#010;call, where as a bean is called using a bit of reflection to find the&#010;relevant method and then bean bindings etc. For people whom care about&#010;CPU cycles. But the overhead is negligible.&#010;&#010;&#010;&#010;On Fri, Apr 14, 2017 at 10:39 PM, DariusX &lt;dariuscooper@gmail.com&gt; wrote:&#010;&gt; The ""Camel in Action"" book says ""Prefer to use beans over processors"" (pg 112&#010;&gt; in 2nd Edition), because they're not dependent on the Camel API.&#010;&gt;&#010;&gt; This leads me to a follow-up question:&#010;&gt; - if we need to tranform between 2 custom formats (i.e. annot use an&#010;&gt; existing Dataformat);and,&#010;&gt; - also do not need the Exchange, but can transform the body&#010;&gt;&#010;&gt; With those assumptions, should we also prefer to use Beans over a&#010;&gt; Custom-Dataformat or Camel Transformer? Or, are their situations where those&#010;&gt; two are useful even if one does not need anything but the body()  ?&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Transformation-options-tp5797759.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
180,181,contactreji,Camel Websocket // Binding error,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492314558425-5797760.post%40n5.nabble.com%3E,users,"Sun, 16 Apr 2017 03:49:18 GMT","Hello guys&#010;&#010;I am doing a POC on camel websockets. I have some data being pushed from UI&#010;layer over websockets&#010;&#010;from(""websocket://0.0.0.0:9293/hotelsearch"")&#010;                .log(LoggingLevel.INFO,""TestServices"",""Received Search&#010;Request data ${body}"")&#010;                .removeHeaders(""*"")&#010;                .to(""direct:Authenticate"")...... and so On...&#010;&#010;This deploys perfectly fine as long as I have no other modules deployed on&#010;the same server. ( Deployed as a springboot application). Another project is&#010;running on same server which binds to 9292 for its websocket consumer&#010;endpoint . And for the above module I changed it to 9293  to avoid port&#010;conflict. &#010;&#010;But surprisingly, when i start this app, it tries to bind port *9292*&#010;instead of *9293* and as a result, I get port binding error.&#010;&#010;*Will not consumer endpoint like from(websocket://0.0.0.0:9293/hotelsearch)&#010;bind to 9293? Why is it trying to bind to 9292? Could this be a bug in&#010;Websocket Component?&#010;*&#010;Cheers&#010;Reji&#010;&#010;&#010;&#010;&#010;&#010;-----&#010;Reji Mathews&#010;Sr. Developer - Middleware Integration / SOA ( Open Source - Apache Camel &amp; Jboss Fuse&#010;ESB | Mule ESB )&#010;LinkedIn - http://in.linkedin.com/pub/reji-mathews/31/9a2/40a&#010;Twitter - reji_mathews&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-Websocket-Binding-error-tp5797760.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
181,182,Claus Ibsen,  Re: Camel Websocket // Binding error,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNnHqnw1uMwUAdXDpQzi372xVMBxWpBWfWConVFEG1E4ww%40mail.gmail.com%3E,users,"Sun, 16 Apr 2017 07:27:52 GMT","Hi&#010;&#010;Maybe there is some old code with 9292 or and old java / jvm process&#010;running that take up the old port, or something.&#010;&#010;On Sun, Apr 16, 2017 at 5:49 AM, contactreji &lt;contactreji@gmail.com&gt; wrote:&#010;&gt; Hello guys&#010;&gt;&#010;&gt; I am doing a POC on camel websockets. I have some data being pushed from UI&#010;&gt; layer over websockets&#010;&gt;&#010;&gt; from(""websocket://0.0.0.0:9293/hotelsearch"")&#010;&gt;                 .log(LoggingLevel.INFO,""TestServices"",""Received Search&#010;&gt; Request data ${body}"")&#010;&gt;                 .removeHeaders(""*"")&#010;&gt;                 .to(""direct:Authenticate"")...... and so On...&#010;&gt;&#010;&gt; This deploys perfectly fine as long as I have no other modules deployed on&#010;&gt; the same server. ( Deployed as a springboot application). Another project is&#010;&gt; running on same server which binds to 9292 for its websocket consumer&#010;&gt; endpoint . And for the above module I changed it to 9293  to avoid port&#010;&gt; conflict.&#010;&gt;&#010;&gt; But surprisingly, when i start this app, it tries to bind port *9292*&#010;&gt; instead of *9293* and as a result, I get port binding error.&#010;&gt;&#010;&gt; *Will not consumer endpoint like from(websocket://0.0.0.0:9293/hotelsearch)&#010;&gt; bind to 9293? Why is it trying to bind to 9292? Could this be a bug in&#010;&gt; Websocket Component?&#010;&gt; *&#010;&gt; Cheers&#010;&gt; Reji&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; -----&#010;&gt; Reji Mathews&#010;&gt; Sr. Developer - Middleware Integration / SOA ( Open Source - Apache Camel &amp; Jboss&#010;Fuse ESB | Mule ESB )&#010;&gt; LinkedIn - http://in.linkedin.com/pub/reji-mathews/31/9a2/40a&#010;&gt; Twitter - reji_mathews&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Camel-Websocket-Binding-error-tp5797760.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
182,183,Claus Ibsen,Apache Camel reviews,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNmmyxHaQg1vVfq%3DNH7KD_H3dUjyi5S2yhdjYGqrn2TGWw%40mail.gmail.com%3E,users,"Sun, 16 Apr 2017 07:22:58 GMT","Hi&#010;&#010;Recently I stumbled on a tweet about an Apache Camel review and&#010;therefore I was intrigued.&#010;&#010;It was a review from a site I have not head about before - trustradius.&#010;&#010;You can read the text for a minute or two before I asks for login so I&#010;was skeptic at first.&#010;&#010;Well this morning I logged in using linkedin and there was 11 reviews,&#010;which provides good insight for Camel developers like myself to get&#010;feedback from real users. Surprisingly those reviews are fairly new&#010;from late 2016 and up till today. So they seem more relevant than eg&#010;reviews from 2009 etc.&#010;&#010;The reviews are at (mind you need to login via linkedin or signup)&#010;https://www.trustradius.com/products/apache-camel/reviews&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
183,184,Priyanka Gopinath,How to dynamically inject hystrix properties?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAOFZOdXeJgWtpDdNrU%2BX0-w3kt-GQOXAOdY-5q8MQ3A47jNJkA%40mail.gmail.com%3E,users,"Sun, 16 Apr 2017 22:46:11 GMT","I have this special usecase where I want to change the threadpool size and&#010;thread pool key based upon the endpoint that is getting called. All of&#010;these values are available in the configuration on the exchange.&#010;&#010;For eg :&#010;&#010;Endpoint A =&gt; Threadpool(5) =&gt; Threadpool key(A)&#010;Endpoint B =&gt; Threadpool(10) =&gt; Threadpool key(Z)&#010;Endpoint C =&gt; Threadpool(5) =&gt; Threadpool Key(A)&#010;&#010;However, in my hystrix route, all of the params for Hystrix EIP are strings&#010;and I aven't been able to figure the a way to evaluate the same.&#010;&#010;from(""direct:something"")&#010;.hystrix()&#010;.threadPoolkey(hystrix.???? How to inject this value)&#010;.end()&#010;.to(""direct:http-endpoint"");&#010;&#010;I also tried creating a HystrixThreadpoolDefinition and tried setting it&#010;as .hystrix().hystrixConfiguration(configuration). But it comes back to the&#010;same question of how to pass in this configuration. Method calls return&#010;ValueBuilders and I could not cast them to the strings/configDefinitions.&#010;&#010;Please suggest the correct way of doing it.&#010;&#010;"
184,185,Claus Ibsen,  Re: How to dynamically inject hystrix properties?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNnAjdPk%2BhtrYF3zGJqVy9NqT%2BZcZBEhfMm6mG3uhZGMdQ%40mail.gmail.com%3E,users,"Tue, 18 Apr 2017 10:44:12 GMT","Maybe create 3 different routes where each hystrix is using A, B or C&#010;keys and then call the appropiate route.&#010;&#010;On Mon, Apr 17, 2017 at 12:46 AM, Priyanka Gopinath &lt;priyanka@karnam.net&gt; wrote:&#010;&gt; I have this special usecase where I want to change the threadpool size and&#010;&gt; thread pool key based upon the endpoint that is getting called. All of&#010;&gt; these values are available in the configuration on the exchange.&#010;&gt;&#010;&gt; For eg :&#010;&gt;&#010;&gt; Endpoint A =&gt; Threadpool(5) =&gt; Threadpool key(A)&#010;&gt; Endpoint B =&gt; Threadpool(10) =&gt; Threadpool key(Z)&#010;&gt; Endpoint C =&gt; Threadpool(5) =&gt; Threadpool Key(A)&#010;&gt;&#010;&gt; However, in my hystrix route, all of the params for Hystrix EIP are strings&#010;&gt; and I aven't been able to figure the a way to evaluate the same.&#010;&gt;&#010;&gt; from(""direct:something"")&#010;&gt; .hystrix()&#010;&gt; .threadPoolkey(hystrix.???? How to inject this value)&#010;&gt; .end()&#010;&gt; .to(""direct:http-endpoint"");&#010;&gt;&#010;&gt; I also tried creating a HystrixThreadpoolDefinition and tried setting it&#010;&gt; as .hystrix().hystrixConfiguration(configuration). But it comes back to the&#010;&gt; same question of how to pass in this configuration. Method calls return&#010;&gt; ValueBuilders and I could not cast them to the strings/configDefinitions.&#010;&gt;&#010;&gt; Please suggest the correct way of doing it.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
185,186,Priyanka Gopinath,    Re: How to dynamically inject hystrix properties?,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAOFZOdX95ZDiMMqDtR5cKE6WPKWYXzsNbLmupJCKRMFwZvp3gg%40mail.gmail.com%3E,users,"Wed, 19 Apr 2017 03:40:13 GMT","Thank you for the response. I was able to inject values dynamically after&#010;creating a new hystrix route per endpoint.&#010;&#010;On Tue, Apr 18, 2017 at 3:44 AM, Claus Ibsen &lt;claus.ibsen@gmail.com&gt; wrote:&#010;&#010;&gt; Maybe create 3 different routes where each hystrix is using A, B or C&#010;&gt; keys and then call the appropiate route.&#010;&gt;&#010;&gt; On Mon, Apr 17, 2017 at 12:46 AM, Priyanka Gopinath &lt;priyanka@karnam.net&gt;&#010;&gt; wrote:&#010;&gt; &gt; I have this special usecase where I want to change the threadpool size&#010;&gt; and&#010;&gt; &gt; thread pool key based upon the endpoint that is getting called. All of&#010;&gt; &gt; these values are available in the configuration on the exchange.&#010;&gt; &gt;&#010;&gt; &gt; For eg :&#010;&gt; &gt;&#010;&gt; &gt; Endpoint A =&gt; Threadpool(5) =&gt; Threadpool key(A)&#010;&gt; &gt; Endpoint B =&gt; Threadpool(10) =&gt; Threadpool key(Z)&#010;&gt; &gt; Endpoint C =&gt; Threadpool(5) =&gt; Threadpool Key(A)&#010;&gt; &gt;&#010;&gt; &gt; However, in my hystrix route, all of the params for Hystrix EIP are&#010;&gt; strings&#010;&gt; &gt; and I aven't been able to figure the a way to evaluate the same.&#010;&gt; &gt;&#010;&gt; &gt; from(""direct:something"")&#010;&gt; &gt; .hystrix()&#010;&gt; &gt; .threadPoolkey(hystrix.???? How to inject this value)&#010;&gt; &gt; .end()&#010;&gt; &gt; .to(""direct:http-endpoint"");&#010;&gt; &gt;&#010;&gt; &gt; I also tried creating a HystrixThreadpoolDefinition and tried setting it&#010;&gt; &gt; as .hystrix().hystrixConfiguration(configuration). But it comes back to&#010;&gt; the&#010;&gt; &gt; same question of how to pass in this configuration. Method calls return&#010;&gt; &gt; ValueBuilders and I could not cast them to the strings/configDefinitions.&#010;&gt; &gt;&#010;&gt; &gt; Please suggest the correct way of doing it.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&#010;"
186,187,chandangowda,Camel not able to delete files Outside .camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492423716313-5797768.post%40n5.nabble.com%3E,users,"Mon, 17 Apr 2017 10:08:36 GMT","&gt;From one route Iâ€™m reading ZIP files after successful completion of reading&#010;of files,camel not able to delete those files i.e. after moving files inside&#010;.camel from outside .camel and throughing following exception.This issue&#010;happened only for  first 21 records  out of 1000 records.Please replay ASAP.&#010;&#010;Stack trace &#010;&#010;org.apache.camel.component.file.GenericFileOperationFailedException: Cannot&#010;store file: E:\XX\XX\XXXX\XXXXX-000001-XXXX.zip&#010;&#009;at&#010;org.apache.camel.component.file.FileOperations.storeFile(FileOperations.java:269)&#010;&#009;at&#010;org.apache.camel.component.file.GenericFileProducer.writeFile(GenericFileProducer.java:278)&#010;&#009;at&#010;org.apache.camel.component.file.GenericFileProducer.processExchange(GenericFileProducer.java:166)&#010;&#009;at&#010;org.apache.camel.component.file.GenericFileProducer.process(GenericFileProducer.java:80)&#010;&#009;at&#010;org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)&#010;&#009;at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:110)&#010;&#009;at&#010;org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:72)&#010;&#009;at&#010;org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:398)&#010;&#009;at&#010;org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:191)&#010;&#009;at&#010;org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:191)&#010;&#009;at&#010;org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:401)&#010;&#009;at&#010;org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:201)&#010;&#009;at&#010;org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:165)&#010;&#009;at&#010;org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:187)&#010;&#009;at&#010;org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:114)&#010;&#009;at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)&#010;&#009;at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:304)&#010;&#009;at&#010;java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)&#010;&#009;at&#010;java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)&#010;&#009;at&#010;java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&#010;&#009;at&#010;java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)&#010;&#009;at java.lang.Thread.run(Thread.java:745)&#010;Caused by: java.io.FileNotFoundException: E:\XXX\XXXX\XX\XXXX-000001-XXX.zip&#010;(Access is denied)&#010;&#009;at java.io.FileOutputStream.open(Native Method)&#010;&#009;at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:221)&#010;&#009;at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:171)&#010;&#009;at&#010;org.apache.camel.component.file.FileOperations.prepareOutputFileChannel(FileOperations.java:430)&#010;&#009;at&#010;org.apache.camel.component.file.FileOperations.writeFileByFile(FileOperations.java:353)&#010;&#009;at&#010;org.apache.camel.component.file.FileOperations.storeFile(FileOperations.java:242)&#010;&#009;... 21 more&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-not-able-to-delete-files-Outside-camel-tp5797768.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
187,188,"Siano, Stephan",  RE: Camel not able to delete files Outside .camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C06958692acac4954991dfa4ddee55a45%40sap.com%3E,users,"Tue, 18 Apr 2017 07:25:40 GMT","Hi,&#013;&#010;&#013;&#010;Caused by: java.io.FileNotFoundException: E:\XXX\XXXX\XX\XXXX-000001-XXX.zip&#013;&#010;(Access is denied)&#013;&#010;&#013;&#010;This looks as if the process running your camel route does not have access to the directory&#010;containing the file (it would need execution rights on the directory).&#013;&#010;&#013;&#010;Best regards&#013;&#010;Stephan&#013;&#010;&#013;&#010;-----Original Message-----&#013;&#010;From: chandangowda [mailto:cgowda299@gmail.com] &#013;&#010;Sent: Montag, 17. April 2017 12:09&#013;&#010;To: users@camel.apache.org&#013;&#010;Subject: Camel not able to delete files Outside .camel&#013;&#010;&#013;&#010;From one route Iâ€™m reading ZIP files after successful completion of reading&#013;&#010;of files,camel not able to delete those files i.e. after moving files inside&#013;&#010;.camel from outside .camel and throughing following exception.This issue&#013;&#010;happened only for  first 21 records  out of 1000 records.Please replay ASAP.&#013;&#010;&#013;&#010;Stack trace &#013;&#010;&#013;&#010;org.apache.camel.component.file.GenericFileOperationFailedException: Cannot&#013;&#010;store file: E:\XX\XX\XXXX\XXXXX-000001-XXXX.zip&#013;&#010;&#009;at&#013;&#010;org.apache.camel.component.file.FileOperations.storeFile(FileOperations.java:269)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.component.file.GenericFileProducer.writeFile(GenericFileProducer.java:278)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.component.file.GenericFileProducer.processExchange(GenericFileProducer.java:166)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.component.file.GenericFileProducer.process(GenericFileProducer.java:80)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)&#013;&#010;&#009;at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:110)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:72)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:398)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:191)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:191)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:401)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:201)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:165)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:187)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:114)&#013;&#010;&#009;at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)&#013;&#010;&#009;at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:304)&#013;&#010;&#009;at&#013;&#010;java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)&#013;&#010;&#009;at&#013;&#010;java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)&#013;&#010;&#009;at&#013;&#010;java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&#013;&#010;&#009;at&#013;&#010;java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)&#013;&#010;&#009;at java.lang.Thread.run(Thread.java:745)&#013;&#010;Caused by: java.io.FileNotFoundException: E:\XXX\XXXX\XX\XXXX-000001-XXX.zip&#013;&#010;(Access is denied)&#013;&#010;&#009;at java.io.FileOutputStream.open(Native Method)&#013;&#010;&#009;at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:221)&#013;&#010;&#009;at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:171)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.component.file.FileOperations.prepareOutputFileChannel(FileOperations.java:430)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.component.file.FileOperations.writeFileByFile(FileOperations.java:353)&#013;&#010;&#009;at&#013;&#010;org.apache.camel.component.file.FileOperations.storeFile(FileOperations.java:242)&#013;&#010;&#009;... 21 more&#013;&#010;&#013;&#010;&#013;&#010;&#013;&#010;--&#013;&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-not-able-to-delete-files-Outside-camel-tp5797768.html&#013;&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#013;&#010;"
188,189,Karthick K R,File Encoding falls back to default encoding while grouping after split using tokenize,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492444573134-5797769.post%40n5.nabble.com%3E,users,"Mon, 17 Apr 2017 15:56:13 GMT","I am quite new to Apache Camel. But after using it for a month now, I really&#010;feel it is a great Integration framework which makes solving various&#010;enterprise problems very effectively with minimal effort.&#010;&#010;Coming to the issue, I had been working on splitting a huge csv using the&#010;splitter with tokenize &amp; grouping N lines approach and ran into encoding&#010;issues with the grouped content. &#010;A similar issue had been raised in StackOverflow:  Camel: UTF-8 Encoding is&#010;lost after using Group&#010;&lt;http://stackoverflow.com/questions/36075063/camel-utf-8-encoding-is-lost-after-using-group&gt;&#010; &#010;&#010;I had also commented on the same issue with my usecase and observations&#010;made. Including the same text here:&#010;&#010;Sample csv file: (with Delimiter - '|')&#010;CandidateNumber|CandidateLastName|CandidateFirstName|EducationLevel&#010;&#010;CAND123C001|Wells|Jimmy|Bachelor's Degree (±16 years)&#010;&#010;CAND123C002|Wells|Tom|Bachelor's Degree (±16 years)&#010;&#010;CAND123C003|Wells|James|Bachelor's Degree (±16 years)&#010;&#010;CAND123C004|Wells|Tim|Bachelor's Degree (±16 years)&#010;&#010;The ± character is corrupted after tokenize with grouping. I was initially&#010;under the assumption that the problem was with not setting the proper File&#010;Encoding for split, but the exchange seems to have the right value for&#010;property CamelCharsetName=ISO-8859-1.&#010;&#010;from(""file://&lt;dir with csv files&gt;?noop=true&amp;charset=ISO-8859-1"")&#010;.split(body().tokenize(""\n"",2,true)).streaming()&#010;.log(""body: ${body}"");&#010;&#010;The same works fine with dont use grouping.&#010;&#010;from(""file://&lt;dir with csv files&gt;?noop=true&amp;charset=ISO-8859-1"")&#010;.split(body().tokenize(""\n"")).streaming()&#010;.log(""body: ${body}"");&#010;&#010;Looking at  GroupTokenIterator&#010;&lt;https://github.com/apache/camel/blob/master/camel-core/src/main/java/org/apache/camel/util/GroupTokenIterator.java&gt;&#010; &#010;in camel code base the problem seems to be with the way TypeConverter is&#010;used to convert String to InputStream&#010;&#010;// convert to input stream&#010;InputStream is =&#010;camelContext.getTypeConverter().mandatoryConvertTo(InputStream.class, data);&#010;...&#010;Note: the mandatoryConvertTo() has an overloaded method with exchange&#010;&#010;&lt;T&gt; T mandatoryConvertTo(Class&lt;T&gt; type, Exchange exchange, Object value)&#010;As the exchange is not passed as argument it always falls back to default&#010;charset set using system property ""org.apache.camel.default.charset""&#010;&#010;Potential Fix:&#010;&#010;// convert to input stream&#010;InputStream is =&#010;camelContext.getTypeConverter().mandatoryConvertTo(InputStream.class,&#010;exchange, data);&#010;...&#010;As this fix is in the camel-core, another potential option is to use split&#010;without grouping and use AgrregateStrategy with completionSize() and&#010;completionTimeout().&#010;&#010;Although it would be great to get this fixed in camel-core.&#010;&#010;Kindly let me know your thoughts and as to whether this can be handled in a&#010;different way.&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/File-Encoding-falls-back-to-default-encoding-while-grouping-after-split-using-tokenize-tp5797769.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
189,190,KhajaNawas14,Camel Route - File name,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492488688966-5797776.post%40n5.nabble.com%3E,users,"Tue, 18 Apr 2017 04:11:28 GMT","Hi All,&#010;&#010;currently my query is like any file that comes to this folder will be&#010;processed to next stage. However I would like to add the file name also my&#010;camel route so that i can re-use the same folder for multiple files.&#010;&#010;sample folder cd-erpdata-csv&#010;sample file name us-ddmmyy.csv and uk-ddmmyy.csv&#010;&#010;&lt;camel:from&#010;uri=""file:messaging/cd-erpdata-csv?preMove=inprogress&amp;amp;move=.done""/&gt;&#010;&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-Route-File-name-tp5797776.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
190,191,KhajaNawas14,  Re: Camel Route - File name,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492488836335-5797777.post%40n5.nabble.com%3E,users,"Tue, 18 Apr 2017 04:13:56 GMT",Note:- I am a beginner to camel route.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-Route-File-name-tp5797776p5797777.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
191,192,"Siano, Stephan",    RE: Camel Route - File name,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3Ca386bde03ab947529067523c0d2bc4c6%40sap.com%3E,users,"Tue, 18 Apr 2017 07:29:15 GMT","Hi,&#010;&#010;see http://camel.apache.org/file2.html &#010;&#010;you should especially have a look into the fileName option which will likely do what you want.&#010;&#010;Best regards&#010;Stephan&#010;&#010;-----Original Message-----&#010;From: KhajaNawas14 [mailto:khaja.nawas@me.com] &#010;Sent: Dienstag, 18. April 2017 06:14&#010;To: users@camel.apache.org&#010;Subject: Re: Camel Route - File name&#010;&#010;Note:- I am a beginner to camel route.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-Route-File-name-tp5797776p5797777.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
192,193,KhajaNawas14,      RE: Camel Route - File name,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492588658550-5797874.post%40n5.nabble.com%3E,users,"Wed, 19 Apr 2017 07:57:38 GMT","Thanks, I tried to do it based on the suggested link however I am&#010;encountering the below issue&#010;&#010;Tried with the below&#010;${file:name.noext}.org? &#010;&#010;Error&#010;&#010;Dynamic expressions with ${ } placeholders is not allowed. Use the fileName&#010;option to set the dynamic expression.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-Route-File-name-tp5797776p5797874.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
193,194,Claus Ibsen,  Re: Camel Route - File name,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yN%3DEpzH-Nmzr4ttW5B8_M6wbdoQXCn-F7dxqBMZFnM9SQg%40mail.gmail.com%3E,users,"Wed, 19 Apr 2017 08:00:23 GMT","You need to use a fileFilter to dynamic chose which files to consume.&#010;There is more details on that file component doc page&#010;&#010;On Tue, Apr 18, 2017 at 6:11 AM, KhajaNawas14 &lt;khaja.nawas@me.com&gt; wrote:&#010;&gt; Hi All,&#010;&gt;&#010;&gt; currently my query is like any file that comes to this folder will be&#010;&gt; processed to next stage. However I would like to add the file name also my&#010;&gt; camel route so that i can re-use the same folder for multiple files.&#010;&gt;&#010;&gt; sample folder cd-erpdata-csv&#010;&gt; sample file name us-ddmmyy.csv and uk-ddmmyy.csv&#010;&gt;&#010;&gt; &lt;camel:from&#010;&gt; uri=""file:messaging/cd-erpdata-csv?preMove=inprogress&amp;amp;move=.done""/&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Camel-Route-File-name-tp5797776.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
194,195,Ancil hameed,Active MQ; Put Soap Request in Active MQ and get back SOAP response,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492520014899-5797816.post%40n5.nabble.com%3E,users,"Tue, 18 Apr 2017 12:53:34 GMT","I working on JBoss Fuse, I want to put my SOAP request in Active MQ Queue.&#010;After putting SOAP request in Queue I want a response sent back to my SOAP&#010;request.&#010;&#010;Sample Code snippet: Below is my camel context, i have replace &lt; &gt; with ( )&#010;&#010;(cxf:cxfEndpoint    address=""http://localhost:8181/cxf/hello""&#010;id=""SOAPInput"" serviceClass=""com.ws.demo.HelloWorld""/)&#010;(bean class=""com.ws.demo.SoapResProcessor"" id=""soapResProcessor""/) &#010;(camelContext id=""camelContext"" &#010;xmlns=""http://camel.apache.org/schema/spring"")&#010;(route id=""route1"" streamCache=""true"")&#010;(from id=""sampleFrom"" uri=""cxf:bean:SOAPInput?&#010;dataFormat=PAYLOAD&amp;amp;exchangePattern=InOut""/)&#010;(when id=""whenBatch"")&#010;(xpath)starts-with(substring-after((/v1:processMessageRequest/name/text()), &#010;'DEST_NAME='), ""Sample"")(/xpath)`enter code here`&#010;(to id=""toSampleQ"" uri=""activemq:queue:SAMPLEQ?jmsMessageType=Text""/)&#010;(process id=""soapResProcess"" ref=""soapResProcessor""/)&#010;(/when)&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Active-MQ-Put-Soap-Request-in-Active-MQ-and-get-back-SOAP-response-tp5797816.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
195,196,Joseph Kampf,  Re: Active MQ; Put Soap Request in Active MQ and get back SOAP response,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C2BE9C562-16C8-4AAB-991D-1AD36765EA6D%40gmail.com%3E,users,"Thu, 20 Apr 2017 19:17:55 GMT","When sending the message to the Queue you must change your exchange pattern to InOnly.  Once&#010;you do that, the message will go onto the queue and the next step in your route will be executed.&#010; Your Exchange pattern below is InOut, so your route is waiting for a reply from JMS before&#010;continuing to the next step in the route.&#010;&#010;Joe&#010;&#010;&#010;On 4/18/17, 8:53 AM, ""Ancil hameed"" &lt;ancil.hameed@gmail.com&gt; wrote:&#010;&#010;    I working on JBoss Fuse, I want to put my SOAP request in Active MQ Queue.&#010;    After putting SOAP request in Queue I want a response sent back to my SOAP&#010;    request.&#010;    &#010;    Sample Code snippet: Below is my camel context, i have replace &lt; &gt; with ( )&#010;    &#010;    (cxf:cxfEndpoint    address=""http://localhost:8181/cxf/hello""&#010;    id=""SOAPInput"" serviceClass=""com.ws.demo.HelloWorld""/)&#010;    (bean class=""com.ws.demo.SoapResProcessor"" id=""soapResProcessor""/) &#010;    (camelContext id=""camelContext"" &#010;    xmlns=""http://camel.apache.org/schema/spring"")&#010;    (route id=""route1"" streamCache=""true"")&#010;    (from id=""sampleFrom"" uri=""cxf:bean:SOAPInput?&#010;    dataFormat=PAYLOAD&amp;amp;exchangePattern=InOut""/)&#010;    (when id=""whenBatch"")&#010;    (xpath)starts-with(substring-after((/v1:processMessageRequest/name/text()), &#010;    'DEST_NAME='), ""Sample"")(/xpath)`enter code here`&#010;    (to id=""toSampleQ"" uri=""activemq:queue:SAMPLEQ?jmsMessageType=Text""/)&#010;    (process id=""soapResProcess"" ref=""soapResProcessor""/)&#010;    (/when)&#010;    &#010;    &#010;    &#010;    &#010;    --&#010;    View this message in context: http://camel.465427.n5.nabble.com/Active-MQ-Put-Soap-Request-in-Active-MQ-and-get-back-SOAP-response-tp5797816.html&#010;    Sent from the Camel - Users mailing list archive at Nabble.com.&#010;    &#010;&#010;&#010;&#010;"
196,197,akpcnu,Camel-SQL more than one IN clauses in SQL throws Exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492523259121-5797818.post%40n5.nabble.com%3E,users,"Tue, 18 Apr 2017 13:47:39 GMT","I am using CAMEL 2.17.3 and having two IN clauses in SQL query causes below&#010;exception:&#010;&#010;org.springframework.jdbc.UncategorizedSQLException:&#010;PreparedStatementCallback; uncategorized SQLException for SQL []; SQL state&#010;[null]; error code [0]; Number of parameters mismatch. Expected: 4, was: 8;&#010;nested exception is java.sql.SQLException: Number of parameters mismatch.&#010;Expected: 4, was: 8&#010;&#010;If I have one IN clause query is working fine. Is this known bug or&#010;behavior? if yes, any alternative? &#010;&#010;ex:&#010;&#010;SELECT column1, column2... &#010;FROM &lt;&#010;&gt;&#010;WHERE column1 IN (:#in:&lt;&lt;dynamically build&gt;&gt;)&#010;column2 IN (:#in:&lt;&lt;dynamically build&gt;&gt;)&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-SQL-more-than-one-IN-clauses-in-SQL-throws-Exception-tp5797818.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
197,198,Claus Ibsen,  Re: Camel-SQL more than one IN clauses in SQL throws Exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNm54tvOqwQ%2BmHihvU1kwQYmheFB12Z7rwLGHiEd5yfAdQ%40mail.gmail.com%3E,users,"Tue, 18 Apr 2017 14:05:59 GMT","Try newer Camel version&#010;&#010;On Tue, Apr 18, 2017 at 3:47 PM, akpcnu &lt;srinivas@live.com&gt; wrote:&#010;&gt; I am using CAMEL 2.17.3 and having two IN clauses in SQL query causes below&#010;&gt; exception:&#010;&gt;&#010;&gt; org.springframework.jdbc.UncategorizedSQLException:&#010;&gt; PreparedStatementCallback; uncategorized SQLException for SQL []; SQL state&#010;&gt; [null]; error code [0]; Number of parameters mismatch. Expected: 4, was: 8;&#010;&gt; nested exception is java.sql.SQLException: Number of parameters mismatch.&#010;&gt; Expected: 4, was: 8&#010;&gt;&#010;&gt; If I have one IN clause query is working fine. Is this known bug or&#010;&gt; behavior? if yes, any alternative?&#010;&gt;&#010;&gt; ex:&#010;&gt;&#010;&gt; SELECT column1, column2...&#010;&gt; FROM &lt;&#010;&gt;&gt;&#010;&gt; WHERE column1 IN (:#in:&lt;&lt;dynamically build&gt;&gt;)&#010;&gt; column2 IN (:#in:&lt;&lt;dynamically build&gt;&gt;)&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Camel-SQL-more-than-one-IN-clauses-in-SQL-throws-Exception-tp5797818.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
198,199,akpcnu,    Re: Camel-SQL more than one IN clauses in SQL throws Exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492529869830-5797826.post%40n5.nabble.com%3E,users,"Tue, 18 Apr 2017 15:37:49 GMT","Thanks Clause, It worked on 2.18.3&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-SQL-more-than-one-IN-clauses-in-SQL-throws-Exception-tp5797818p5797826.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
199,200,Claus Ibsen,      Re: Camel-SQL more than one IN clauses in SQL throws Exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNn7DCpuvFgG-CeEZd7V63QiRNRi2AJiOHFbU6SAnWN4kg%40mail.gmail.com%3E,users,"Wed, 19 Apr 2017 07:07:12 GMT","It might also work on the latest 2.17.x release in case you want to&#010;stay on that release branch.&#010;&#010;On Tue, Apr 18, 2017 at 5:37 PM, akpcnu &lt;srinivas@live.com&gt; wrote:&#010;&gt; Thanks Clause, It worked on 2.18.3&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Camel-SQL-more-than-one-IN-clauses-in-SQL-throws-Exception-tp5797818p5797826.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
200,201,"Andathodan Tiringoli, Ancil Hameed",Re: How to use request reply in JMS,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C88aeb3caabab4192b8106b90b04fc672%40SW933EXP001.visa.com%3E,users,"Tue, 18 Apr 2017 15:20:06 GMT","Hi Claus Ibsen, can you please help on below&#010;I working on JBoss Fuse, I want to put my SOAP request in Active MQ Queue. After putting SOAP&#010;request in Queue I want a response sent back to my SOAP request.&#010;Sample Code snippet: Below is my camel context&#010;&lt;cxf:cxfEndpoint    address=""http://localhost:8181/cxf/hello""&#010;id=""SOAPInput"" serviceClass=""com.ws.demo.HelloWorld""/&gt;&#010;&lt;bean class=""com.ws.demo.SoapResProcessor"" id=""soapResProcessor""/&gt;&#010;&lt;camelContext id=""camelContext""&#010;xmlns=""http://camel.apache.org/schema/spring""&gt;&#010;&lt;route id=""route1"" streamCache=""true""&gt;&#010;&lt;from id=""sampleFrom"" uri=""cxf:bean:SOAPInput?&#010;dataFormat=PAYLOAD&amp;amp;exchangePattern=InOut""/&gt;&#010;&lt;when id=""whenBatch""&gt;&#010;&lt;xpath&gt;starts-with(substring-after((/v1:processMessageRequest/name/text()),&#010;'DEST_NAME='), ""Sample"")&lt;/xpath&gt;`enter code here`&#010;&lt;to id=""toSampleQ"" uri=""activemq:queue:SAMPLEQ?jmsMessageType=Text""/&gt;&#010;&lt;process id=""soapResProcess"" ref=""soapResProcessor""/&gt;&#010;&lt;/when&gt;&#010;&#010;&#010;"
201,202,sadiq,Parsing issue with unmarshal and bindy.csv with double quotes and commas in a single field,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492578616894-5797871.post%40n5.nabble.com%3E,users,"Wed, 19 Apr 2017 05:10:16 GMT","I'm experiencing a parsing issue using Bindy to unmarshal a CSV file into a&#010;List of POJOs (my POJO class is annotated with @CsvRecord).&#010;&#010;The CSV file contains the following:&#010;&#010;partNumber,longDescription,status&#010;123,""1970-84 Windshield Washer Jar, Multi Application"",Available&#010;234,""1967-75 6 Cyl/ Small Block 9"""" Clutch Bellcrank Assembly"",Available&#010;345,""1971-79 Fan Blade 19-1/2"""", 7 Blade"",Available&#010;&#010;It's the fourth line that is causing an issue:&#010;java.lang.IllegalArgumentException: No position 4 defined for the field:&#010;Available, line: 3 must be specified (it says line 3, but I believe that's&#010;because my CsvRecord class has the skipFirstLine=true)&#010;&#010;The CSV parsing seems to be handling commas within a field surrounded by&#010;double quotes since the 2nd line is okay. It's also handling escaping double&#010;quotes correctly within fields since the 3rd line is fine too.&#010;&#010;But the issue is when commas are present after an escaped double quote&#010;within a field that is surrounded by double quotes -- it seems to want to&#010;separate each comma into a new field when it should just be treating it as a&#010;single field.&#010;&#010;I'm using the latest version of Camel 2.18.3 and still observing this issue.&#010;&#010;My route is:&#010;&#010;from(""sftp://me@myhost.com?sortBy=file:modified&amp;antInclude=*.csv&amp;password=xxxx"")&#010;&#009;.unmarshal()&#010;&#009;.bindy(BindyType.Csv, ProductDeltaCsvDataModel.class) //throwing exception&#010;here&#010;&#009;.to(""direct:processCsv"");&#010;&#010;This is my CsvRecord POJO class:&#010;&#010;@CsvRecord(separator = "","", skipFirstLine = true, quote = ""\"""", quoting =&#010;true)&#010;public class ProductDeltaCsvDataModel {&#010;&#010;&#009;@DataField(pos = 1, required = true)&#010;&#009;private String partNumber;&#010;&#009;&#010;&#009;@DataField(pos = 2)&#010;&#009;private String longDescription;&#010;&#009;&#010;&#009;@DataField(pos = 3)&#010;&#009;private String status;&#010;&#010;&#009;//setters and getters&#010;&#009;...&#010;}&#010;&#010;I believe this to be a bug unless there is some configuration I need to set?&#010;&#010;Can someone confirm that this is a bug and how I go about logging this bug?&#010;&#010;Thanks!&#010;Sadiq&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Parsing-issue-with-unmarshal-and-bindy-csv-with-double-quotes-and-commas-in-a-single-field-tp5797871.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
202,203,Onder SEZGIN,  Re: Parsing issue with unmarshal and bindy.csv with double quotes and commas in a single field,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAE9ARBTZ-WAR_%2B5N%2B9ZR8PVQ6Cz%2BjESR9k_UtMpVGE_JTJmnDg%40mail.gmail.com%3E,users,"Wed, 19 Apr 2017 17:45:22 GMT","this is not a bug. as you have comma as separator, in the line you have&#010;exception you have too many fields already. so illegal argument exception&#010;seems correct in the given case.&#010;&#010;&#010;On Wed, 19 Apr 2017 at 08:10, sadiq &lt;sadiq.manji@sap.com&gt; wrote:&#010;&#010;&gt; I'm experiencing a parsing issue using Bindy to unmarshal a CSV file into a&#010;&gt; List of POJOs (my POJO class is annotated with @CsvRecord).&#010;&gt;&#010;&gt; The CSV file contains the following:&#010;&gt;&#010;&gt; partNumber,longDescription,status&#010;&gt; 123,""1970-84 Windshield Washer Jar, Multi Application"",Available&#010;&gt; 234,""1967-75 6 Cyl/ Small Block 9"""" Clutch Bellcrank Assembly"",Available&#010;&gt; 345,""1971-79 Fan Blade 19-1/2"""", 7 Blade"",Available&#010;&gt;&#010;&gt; It's the fourth line that is causing an issue:&#010;&gt; java.lang.IllegalArgumentException: No position 4 defined for the field:&#010;&gt; Available, line: 3 must be specified (it says line 3, but I believe that's&#010;&gt; because my CsvRecord class has the skipFirstLine=true)&#010;&gt;&#010;&gt; The CSV parsing seems to be handling commas within a field surrounded by&#010;&gt; double quotes since the 2nd line is okay. It's also handling escaping&#010;&gt; double&#010;&gt; quotes correctly within fields since the 3rd line is fine too.&#010;&gt;&#010;&gt; But the issue is when commas are present after an escaped double quote&#010;&gt; within a field that is surrounded by double quotes -- it seems to want to&#010;&gt; separate each comma into a new field when it should just be treating it as&#010;&gt; a&#010;&gt; single field.&#010;&gt;&#010;&gt; I'm using the latest version of Camel 2.18.3 and still observing this&#010;&gt; issue.&#010;&gt;&#010;&gt; My route is:&#010;&gt;&#010;&gt; from(""sftp://&#010;&gt; me@myhost.com?sortBy=file:modified&amp;antInclude=*.csv&amp;password=xxxx"")&#010;&gt;         .unmarshal()&#010;&gt;         .bindy(BindyType.Csv, ProductDeltaCsvDataModel.class) //throwing&#010;&gt; exception&#010;&gt; here&#010;&gt;         .to(""direct:processCsv"");&#010;&gt;&#010;&gt; This is my CsvRecord POJO class:&#010;&gt;&#010;&gt; @CsvRecord(separator = "","", skipFirstLine = true, quote = ""\"""", quoting =&#010;&gt; true)&#010;&gt; public class ProductDeltaCsvDataModel {&#010;&gt;&#010;&gt;         @DataField(pos = 1, required = true)&#010;&gt;         private String partNumber;&#010;&gt;&#010;&gt;         @DataField(pos = 2)&#010;&gt;         private String longDescription;&#010;&gt;&#010;&gt;         @DataField(pos = 3)&#010;&gt;         private String status;&#010;&gt;&#010;&gt;         //setters and getters&#010;&gt;         ...&#010;&gt; }&#010;&gt;&#010;&gt; I believe this to be a bug unless there is some configuration I need to&#010;&gt; set?&#010;&gt;&#010;&gt; Can someone confirm that this is a bug and how I go about logging this bug?&#010;&gt;&#010;&gt; Thanks!&#010;&gt; Sadiq&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context:&#010;&gt; http://camel.465427.n5.nabble.com/Parsing-issue-with-unmarshal-and-bindy-csv-with-double-quotes-and-commas-in-a-single-field-tp5797871.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;-- &#010;Sent from my iPhone&#010;&#010;"
203,204,souciance,  Re: Parsing issue with unmarshal and bindy.csv with double quotes and commas in a single field,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs09A4uxitoqjZPEYfUyVOwPJLMSm69ivi3DOkFd-kiYGA%40mail.gmail.com%3E,users,"Wed, 19 Apr 2017 19:14:08 GMT","You have four fields in the fourth row hence the error.&#010;&#010;On Wed, Apr 19, 2017 at 7:10 AM, sadiq [via Camel] &lt;&#010;ml+s465427n5797871h64@n5.nabble.com&gt; wrote:&#010;&#010;&gt; I'm experiencing a parsing issue using Bindy to unmarshal a CSV file into&#010;&gt; a List of POJOs (my POJO class is annotated with @CsvRecord).&#010;&gt;&#010;&gt; The CSV file contains the following:&#010;&gt;&#010;&gt; partNumber,longDescription,status&#010;&gt; 123,""1970-84 Windshield Washer Jar, Multi Application"",Available&#010;&gt; 234,""1967-75 6 Cyl/ Small Block 9"""" Clutch Bellcrank Assembly"",Available&#010;&gt; 345,""1971-79 Fan Blade 19-1/2"""", 7 Blade"",Available&#010;&gt;&#010;&gt; It's the fourth line that is causing an issue: java.lang.IllegalArgumentException:&#010;&gt; No position 4 defined for the field: Available, line: 3 must be specified&#010;&gt; (it says line 3, but I believe that's because my CsvRecord class has the&#010;&gt; skipFirstLine=true)&#010;&gt;&#010;&gt; The CSV parsing seems to be handling commas within a field surrounded by&#010;&gt; double quotes since the 2nd line is okay. It's also handling escaping&#010;&gt; double quotes correctly within fields since the 3rd line is fine too.&#010;&gt;&#010;&gt; But the issue is when commas are present after an escaped double quote&#010;&gt; within a field that is surrounded by double quotes -- it seems to want to&#010;&gt; separate each comma into a new field when it should just be treating it as&#010;&gt; a single field.&#010;&gt;&#010;&gt; I'm using the latest version of Camel 2.18.3 and still observing this&#010;&gt; issue.&#010;&gt;&#010;&gt; My route is:&#010;&gt;&#010;&gt; from(""sftp://me@myhost.com?sortBy=file:modified&amp;&#010;&gt; antInclude=*.csv&amp;password=xxxx"")&#010;&gt;         .unmarshal()&#010;&gt;         .bindy(BindyType.Csv, ProductDeltaCsvDataModel.class) //throwing&#010;&gt; exception here&#010;&gt;         .to(""direct:processCsv"");&#010;&gt;&#010;&gt; This is my CsvRecord POJO class:&#010;&gt;&#010;&gt; @CsvRecord(separator = "","", skipFirstLine = true, quote = ""\"""", quoting =&#010;&gt; true)&#010;&gt; public class ProductDeltaCsvDataModel {&#010;&gt;&#010;&gt;         @DataField(pos = 1, required = true)&#010;&gt;         private String partNumber;&#010;&gt;&#010;&gt;         @DataField(pos = 2)&#010;&gt;         private String longDescription;&#010;&gt;&#010;&gt;         @DataField(pos = 3)&#010;&gt;         private String status;&#010;&gt;&#010;&gt;         //setters and getters&#010;&gt;         ...&#010;&gt; }&#010;&gt;&#010;&gt; I believe this to be a bug unless there is some configuration I need to&#010;&gt; set?&#010;&gt;&#010;&gt; Can someone confirm that this is a bug and how I go about logging this&#010;&gt; bug?&#010;&gt;&#010;&gt; Thanks!&#010;&gt; Sadiq&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Parsing-issue-with-&#010;&gt; unmarshal-and-bindy-csv-with-double-quotes-and-commas-in-a-&#010;&gt; single-field-tp5797871.html&#010;&gt; To start a new topic under Camel - Users, email ml+s465427n465428h31@n5.&#010;&gt; nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Parsing-issue-with-unmarshal-and-bindy-csv-with-double-quotes-and-commas-in-a-single-field-tp5797871p5797940.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
204,205,sadiq,    Re: Parsing issue with unmarshal and bindy.csv with double quotes and commas in a single field,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493049895912-5798199.post%40n5.nabble.com%3E,users,"Mon, 24 Apr 2017 16:04:55 GMT","Hi souciance and Onder,&#010;&#010;Thanks for your reply.&#010;&#010;In a CSV, a field can be encapsulated by double quotes in case there are&#010;commas within the field that should not split the field.&#010;&#010;So the following should be just 3 fields:&#010;345,""1971-79 Fan Blade 19-1/2, 7 Blade"",Available&#010;&#010;And Bindy handles this scenario.&#010;&#010;The issue is that the second field also has a double quote (to represent&#010;inches) that needs to be escaped (escaping a double quote in CSV requires 2&#010;double quotes) in order to be stored as a double quote:&#010;345,""1971-79 Fan Blade 19-1/2"""""",Available&#010;&#010;Bindy also handles this scenario.&#010;&#010;However, when both an escaped double quote and a comma are present within a&#010;double quote wrapped field, this is when the parsing breaks:&#010;345,""1971-79 Fan Blade 19-1/2"""", 7 Blade"",Available&#010;&#010;This is what I believe to be a bug.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Parsing-issue-with-unmarshal-and-bindy-csv-with-double-quotes-and-commas-in-a-single-field-tp5797871p5798199.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
205,206,Gregor Zurowski,      Re: Parsing issue with unmarshal and bindy.csv with double quotes and commas in a single field,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCADL1oArVc1GFYuZL%2BHx%2B7BkB%2BPz2Rj_pQBqB0LpvZ1mcjbDM7g%40mail.gmail.com%3E,users,"Tue, 25 Apr 2017 19:59:03 GMT","Hi Sadiq,&#010;&#010;I also believe this is a bug.  I ran into the exact same issue&#010;recently, but did not have the time to further look into this.  It&#010;would be great if you could file a bug in JIRA&#010;(https://issues.apache.org/jira/browse/CAMEL) and attach a failing&#010;unit test with your use case.&#010;&#010;As a temporary alternative, you can use the Camel CSV component&#010;(http://camel.apache.org/csv.html) which should work with your data.&#010;&#010;Thanks,&#010;Gregor&#010;&#010;On Mon, Apr 24, 2017 at 6:04 PM, sadiq &lt;sadiq.manji@sap.com&gt; wrote:&#010;&gt; Hi souciance and Onder,&#010;&gt;&#010;&gt; Thanks for your reply.&#010;&gt;&#010;&gt; In a CSV, a field can be encapsulated by double quotes in case there are&#010;&gt; commas within the field that should not split the field.&#010;&gt;&#010;&gt; So the following should be just 3 fields:&#010;&gt; 345,""1971-79 Fan Blade 19-1/2, 7 Blade"",Available&#010;&gt;&#010;&gt; And Bindy handles this scenario.&#010;&gt;&#010;&gt; The issue is that the second field also has a double quote (to represent&#010;&gt; inches) that needs to be escaped (escaping a double quote in CSV requires 2&#010;&gt; double quotes) in order to be stored as a double quote:&#010;&gt; 345,""1971-79 Fan Blade 19-1/2"""""",Available&#010;&gt;&#010;&gt; Bindy also handles this scenario.&#010;&gt;&#010;&gt; However, when both an escaped double quote and a comma are present within a&#010;&gt; double quote wrapped field, this is when the parsing breaks:&#010;&gt; 345,""1971-79 Fan Blade 19-1/2"""", 7 Blade"",Available&#010;&gt;&#010;&gt; This is what I believe to be a bug.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Parsing-issue-with-unmarshal-and-bindy-csv-with-double-quotes-and-commas-in-a-single-field-tp5797871p5798199.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
206,207,sadiq,        Re: Parsing issue with unmarshal and bindy.csv with double quotes and commas in a single field,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493167275299-5798278.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 00:41:15 GMT","Hi Gregor,&#010;&#010;I'd be happy to do so; however, I have not created a unit test before in&#010;order to be able to attach one.&#010;&#010;Can you share an example and I can try to create it?&#010;&#010;Thanks!&#010;Sadiq&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Parsing-issue-with-unmarshal-and-bindy-csv-with-double-quotes-and-commas-in-a-single-field-tp5797871p5798278.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
207,208,Gregor Zurowski,          Re: Parsing issue with unmarshal and bindy.csv with double quotes and commas in a single field,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCADL1oAr5OHO9a7%2BPnEoH%2BR5Uj2TfN2wk11va8uUB%2Bwyi%3DN6M1g%40mail.gmail.com%3E,users,"Wed, 26 Apr 2017 07:06:04 GMT","Hi Sadiq,&#010;&#010;A unit test would be ideal, so it can be included in the test suite&#010;when the issue is addressed.  Take a look at the other tests that&#010;already exist for camel-bindy:&#010;https://github.com/apache/camel/tree/master/components/camel-bindy/src/test&#010;&#010;If you have problems with coming up with a formal unit test, attaching&#010;some code that demonstrates the issue should be sufficient.&#010;&#010;Thanks,&#010;Gregor&#010;&#010;&#010;On Wed, Apr 26, 2017 at 2:41 AM, sadiq &lt;sadiq.manji@sap.com&gt; wrote:&#010;&gt; Hi Gregor,&#010;&gt;&#010;&gt; I'd be happy to do so; however, I have not created a unit test before in&#010;&gt; order to be able to attach one.&#010;&gt;&#010;&gt; Can you share an example and I can try to create it?&#010;&gt;&#010;&gt; Thanks!&#010;&gt; Sadiq&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Parsing-issue-with-unmarshal-and-bindy-csv-with-double-quotes-and-commas-in-a-single-field-tp5797871p5798278.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
208,209,Nico159,How to check after startup if folder exists,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492591369447-5797895.post%40n5.nabble.com%3E,users,"Wed, 19 Apr 2017 08:42:49 GMT","Hi everyone,&#010;&#010;I'm looking for a way to check, if a folder exists, after the route is&#010;started.&#010;&#010;While startup I usually use auteCreate for the inbound folder, so there is&#010;no problem if my inbound is not there yet, but if somebody (or something)&#010;delete this created inbound folder (while route is running), the route will&#010;check forever a non-existing folder (deadlock). &#010;&#010;I've tried to use auteCreate=false and startingDirectoryMustExist=true&#010;(while not having my input folder), therefore I get an error, but just at&#010;the start of my route. &#010;&#010;Is there any way to check periodically if the input folder is there and&#010;re-autocreate it if necessary (or throw an error?)&#010;&#010;Thx in advance for any kind of help&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/How-to-check-after-startup-if-folder-exists-tp5797895.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
209,210,Claus Ibsen,  Re: How to check after startup if folder exists,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNmDgycu91-DSKM6pKx%2BWq62JM3-TTZ7J%3DPy2KRb8q49aw%40mail.gmail.com%3E,users,"Wed, 19 Apr 2017 09:05:02 GMT","No but you can write some code yourself to do that.&#010;&#010;On Wed, Apr 19, 2017 at 10:42 AM, Nico159 &lt;nicolas.gehling@adesso.de&gt; wrote:&#010;&gt; Hi everyone,&#010;&gt;&#010;&gt; I'm looking for a way to check, if a folder exists, after the route is&#010;&gt; started.&#010;&gt;&#010;&gt; While startup I usually use auteCreate for the inbound folder, so there is&#010;&gt; no problem if my inbound is not there yet, but if somebody (or something)&#010;&gt; delete this created inbound folder (while route is running), the route will&#010;&gt; check forever a non-existing folder (deadlock).&#010;&gt;&#010;&gt; I've tried to use auteCreate=false and startingDirectoryMustExist=true&#010;&gt; (while not having my input folder), therefore I get an error, but just at&#010;&gt; the start of my route.&#010;&gt;&#010;&gt; Is there any way to check periodically if the input folder is there and&#010;&gt; re-autocreate it if necessary (or throw an error?)&#010;&gt;&#010;&gt; Thx in advance for any kind of help&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/How-to-check-after-startup-if-folder-exists-tp5797895.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
210,211,Nico159,    Re: How to check after startup if folder exists,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492605024646-5797922.post%40n5.nabble.com%3E,users,"Wed, 19 Apr 2017 12:30:24 GMT",Thank you for the fast confirmation.&#010;&#010;I'll try to use a timer and a bean to solve the problem.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/How-to-check-after-startup-if-folder-exists-tp5797895p5797922.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
211,212,Thomas Weinschenk,Spring Boot > 1.5 fails when camel-swagger-java in place,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492604855885-5797920.post%40n5.nabble.com%3E,users,"Wed, 19 Apr 2017 12:27:35 GMT","Hi,&#010;&#010;I tried to update the spring boot web service example to 1.5.2.RELEASE but&#010;it fails when camel-swagger-java is in place.&#010;&#010;...&#010;Caused by: org.springframework.beans.BeanInstantiationException: Failed to&#010;instantiate [javax.validation.Validator]: Factory method 'jsr303Validator'&#010;threw exception; nested exception is java.lang.NoClassDefFoundError: Could&#010;not initialize class&#010;org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&#009;at&#010;org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)&#010;&#009;... 38 more&#010;Caused by: java.lang.NoClassDefFoundError: Could not initialize class&#010;org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&#009;at&#010;org.hibernate.validator.HibernateValidator.createGenericConfiguration(HibernateValidator.java:33)&#010;&#009;at&#010;javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:276)&#010;&#009;at&#010;org.springframework.boot.validation.MessageInterpolatorFactory.getObject(MessageInterpolatorFactory.java:53)&#010;...&#010;&#010;If I exclude the camel-swagger-java dependency it works.&#010;&#010;It seems that camel-swagger-java includes some jsr303 validation that causes&#010;the problem.&#010;Spring boot uses the hibernate-validator 5.3.4.Final (JSR 349).&#010;This might cause the failure but I am not an expert on Bean Validation.&#010;&#010;Any idea how to solve this issue?&#010;&#010;Regards,&#010;Thomas&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Spring-Boot-1-5-fails-when-camel-swagger-java-in-place-tp5797920.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
212,213,Claus Ibsen,  Re: Spring Boot > 1.5 fails when camel-swagger-java in place,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNmRaOEs3y%2BoEja9V_OAM3pzPZVz2cV1NB6t-sip1oJdxg%40mail.gmail.com%3E,users,"Wed, 19 Apr 2017 12:29:00 GMT","What Camel version do you use?&#010;&#010;On Wed, Apr 19, 2017 at 2:27 PM, Thomas Weinschenk&#010;&lt;thomas.weinschenk@infoserve.endress.com&gt; wrote:&#010;&gt; Hi,&#010;&gt;&#010;&gt; I tried to update the spring boot web service example to 1.5.2.RELEASE but&#010;&gt; it fails when camel-swagger-java is in place.&#010;&gt;&#010;&gt; ...&#010;&gt; Caused by: org.springframework.beans.BeanInstantiationException: Failed to&#010;&gt; instantiate [javax.validation.Validator]: Factory method 'jsr303Validator'&#010;&gt; threw exception; nested exception is java.lang.NoClassDefFoundError: Could&#010;&gt; not initialize class&#010;&gt; org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&gt;         at&#010;&gt; org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)&#010;&gt;         at&#010;&gt; org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)&#010;&gt;         ... 38 more&#010;&gt; Caused by: java.lang.NoClassDefFoundError: Could not initialize class&#010;&gt; org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&gt;         at&#010;&gt; org.hibernate.validator.HibernateValidator.createGenericConfiguration(HibernateValidator.java:33)&#010;&gt;         at&#010;&gt; javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:276)&#010;&gt;         at&#010;&gt; org.springframework.boot.validation.MessageInterpolatorFactory.getObject(MessageInterpolatorFactory.java:53)&#010;&gt; ...&#010;&gt;&#010;&gt; If I exclude the camel-swagger-java dependency it works.&#010;&gt;&#010;&gt; It seems that camel-swagger-java includes some jsr303 validation that causes&#010;&gt; the problem.&#010;&gt; Spring boot uses the hibernate-validator 5.3.4.Final (JSR 349).&#010;&gt; This might cause the failure but I am not an expert on Bean Validation.&#010;&gt;&#010;&gt; Any idea how to solve this issue?&#010;&gt;&#010;&gt; Regards,&#010;&gt; Thomas&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Spring-Boot-1-5-fails-when-camel-swagger-java-in-place-tp5797920.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
213,214,Thomas Weinschenk,    Re: Spring Boot > 1.5 fails when camel-swagger-java in place,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492605059042-5797923.post%40n5.nabble.com%3E,users,"Wed, 19 Apr 2017 12:30:59 GMT",You are right I forgot to mention the version...&#010;&#010;2.18.3&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Spring-Boot-1-5-fails-when-camel-swagger-java-in-place-tp5797920p5797923.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
214,215,Claus Ibsen,      Re: Spring Boot > 1.5 fails when camel-swagger-java in place,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yN%3DYijbdMGNv1tL1YhCpoQn4aE9QyahmsEdzcFy02C1r%2Bg%40mail.gmail.com%3E,users,"Wed, 19 Apr 2017 13:27:36 GMT","There is this ticket related&#010;https://issues.apache.org/jira/browse/CAMEL-10373&#010;&#010;the swagger-java-starter do have the hibernate-validate as dependency&#010;https://github.com/apache/camel/blob/master/platforms/spring-boot/components-starter/camel-swagger-java-starter/pom.xml#L49&#010;&#010;And so does 2.18.x&#010;https://github.com/apache/camel/blob/camel-2.18.x/components-starter/camel-swagger-java-starter/pom.xml#L48&#010;&#010;So do we need some additional dependency besides hibernate-validator?&#010;&#010;&#010;On Wed, Apr 19, 2017 at 2:30 PM, Thomas Weinschenk&#010;&lt;thomas.weinschenk@solutions.endress.com&gt; wrote:&#010;&gt; You are right I forgot to mention the version...&#010;&gt;&#010;&gt; 2.18.3&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Spring-Boot-1-5-fails-when-camel-swagger-java-in-place-tp5797920p5797923.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
215,216,Claus Ibsen,        Re: Spring Boot > 1.5 fails when camel-swagger-java in place,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNkXSEm_-BGq1%3DxBsjZ%2BD3JNQ8t3mwQg8jHyJwztqwstyg%40mail.gmail.com%3E,users,"Wed, 19 Apr 2017 13:30:12 GMT","Hi&#010;&#010;I logged a ticket to create a new example at Apache Camel&#010;https://issues.apache.org/jira/browse/CAMEL-11169&#010;&#010;This can help ourselves to see this problem and make sure running&#010;Camel on spring boot ""just works"".&#010;&#010;On Wed, Apr 19, 2017 at 3:27 PM, Claus Ibsen &lt;claus.ibsen@gmail.com&gt; wrote:&#010;&gt; There is this ticket related&#010;&gt; https://issues.apache.org/jira/browse/CAMEL-10373&#010;&gt;&#010;&gt; the swagger-java-starter do have the hibernate-validate as dependency&#010;&gt; https://github.com/apache/camel/blob/master/platforms/spring-boot/components-starter/camel-swagger-java-starter/pom.xml#L49&#010;&gt;&#010;&gt; And so does 2.18.x&#010;&gt; https://github.com/apache/camel/blob/camel-2.18.x/components-starter/camel-swagger-java-starter/pom.xml#L48&#010;&gt;&#010;&gt; So do we need some additional dependency besides hibernate-validator?&#010;&gt;&#010;&gt;&#010;&gt; On Wed, Apr 19, 2017 at 2:30 PM, Thomas Weinschenk&#010;&gt; &lt;thomas.weinschenk@solutions.endress.com&gt; wrote:&#010;&gt;&gt; You are right I forgot to mention the version...&#010;&gt;&gt;&#010;&gt;&gt; 2.18.3&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; --&#010;&gt;&gt; View this message in context: http://camel.465427.n5.nabble.com/Spring-Boot-1-5-fails-when-camel-swagger-java-in-place-tp5797920p5797923.html&#010;&gt;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
216,217,Zoran Regvart,  Re: Spring Boot > 1.5 fails when camel-swagger-java in place,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCABD_Zr8C3y7Zn_kGomKOJimCpfTjj24HJyPGqR3pZ87MjH1tnA%40mail.gmail.com%3E,users,"Wed, 19 Apr 2017 12:35:40 GMT","Hi Thomas,&#010;the exception you quoted is a NoClassDefFoundError can you look in the&#010;logs for the first exception you that might be related to this,&#010;perhaps a ClassNotFoundException preceeding it? If you don't need JSR&#010;303 validations you can turn them off by setting&#010;`javax.persistence.validation.mode` to `none`,&#010;&#010;&#010;zoran&#010;&#010;On Wed, Apr 19, 2017 at 2:27 PM, Thomas Weinschenk&#010;&lt;thomas.weinschenk@infoserve.endress.com&gt; wrote:&#010;&gt; Hi,&#010;&gt;&#010;&gt; I tried to update the spring boot web service example to 1.5.2.RELEASE but&#010;&gt; it fails when camel-swagger-java is in place.&#010;&gt;&#010;&gt; ...&#010;&gt; Caused by: org.springframework.beans.BeanInstantiationException: Failed to&#010;&gt; instantiate [javax.validation.Validator]: Factory method 'jsr303Validator'&#010;&gt; threw exception; nested exception is java.lang.NoClassDefFoundError: Could&#010;&gt; not initialize class&#010;&gt; org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&gt;         at&#010;&gt; org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)&#010;&gt;         at&#010;&gt; org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)&#010;&gt;         ... 38 more&#010;&gt; Caused by: java.lang.NoClassDefFoundError: Could not initialize class&#010;&gt; org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&gt;         at&#010;&gt; org.hibernate.validator.HibernateValidator.createGenericConfiguration(HibernateValidator.java:33)&#010;&gt;         at&#010;&gt; javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:276)&#010;&gt;         at&#010;&gt; org.springframework.boot.validation.MessageInterpolatorFactory.getObject(MessageInterpolatorFactory.java:53)&#010;&gt; ...&#010;&gt;&#010;&gt; If I exclude the camel-swagger-java dependency it works.&#010;&gt;&#010;&gt; It seems that camel-swagger-java includes some jsr303 validation that causes&#010;&gt; the problem.&#010;&gt; Spring boot uses the hibernate-validator 5.3.4.Final (JSR 349).&#010;&gt; This might cause the failure but I am not an expert on Bean Validation.&#010;&gt;&#010;&gt; Any idea how to solve this issue?&#010;&gt;&#010;&gt; Regards,&#010;&gt; Thomas&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Spring-Boot-1-5-fails-when-camel-swagger-java-in-place-tp5797920.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Zoran Regvart&#010;&#010;"
217,218,Thomas Weinschenk,    Re: Spring Boot > 1.5 fails when camel-swagger-java in place,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492607304155-5797927.post%40n5.nabble.com%3E,users,"Wed, 19 Apr 2017 13:08:24 GMT","Hi Zoran,&#010;&#010;where do I have to put the validation mode setting, property of the pom,&#010;application.yml or as an environment variable? I tried all three but I still&#010;get the same error.&#010;&#010;The log ouptut related to the failure is:&#010;&#010;Exception encountered during context initialization - cancelling refresh&#010;attempt: org.springframework.beans.factory.UnsatisfiedDependencyException:&#010;Error creating bean with name 'methodValidationPostProcessor' defined in&#010;class path resource&#010;[org/springframework/boot/autoconfigure/validation/ValidationAutoConfiguration.class]:&#010;Unsatisfied dependency expressed through method&#010;'methodValidationPostProcessor' parameter 0; nested exception is&#010;org.springframework.beans.factory.BeanCreationException: Error creating bean&#010;with name 'jsr303Validator' defined in class path resource&#010;[org/springframework/boot/autoconfigure/validation/ValidationAutoConfiguration.class]:&#010;Bean instantiation via factory method failed; nested exception is&#010;org.springframework.beans.BeanInstantiationException: Failed to instantiate&#010;[javax.validation.Validator]: Factory method 'jsr303Validator' threw&#010;exception; nested exception is java.lang.NoClassDefFoundError: Could not&#010;initialize class org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&#010;&#010;And to be really verbose...the complete stack trace...&#010;&#010;2017-04-19 15:02:49.179  INFO 222576 --- [           main]&#010;ationConfigEmbeddedWebApplicationContext : Refreshing&#010;org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@6e083721:&#010;startup date [Wed Apr 19 15:02:49 CEST 2017]; root of context hierarchy&#010;2017-04-19 15:02:51.425  WARN 222576 --- [           main]&#010;ationConfigEmbeddedWebApplicationContext : Exception encountered during&#010;context initialization - cancelling refresh attempt:&#010;org.springframework.beans.factory.UnsatisfiedDependencyException: Error&#010;creating bean with name 'methodValidationPostProcessor' defined in class&#010;path resource&#010;[org/springframework/boot/autoconfigure/validation/ValidationAutoConfiguration.class]:&#010;Unsatisfied dependency expressed through method&#010;'methodValidationPostProcessor' parameter 0; nested exception is&#010;org.springframework.beans.factory.BeanCreationException: Error creating bean&#010;with name 'jsr303Validator' defined in class path resource&#010;[org/springframework/boot/autoconfigure/validation/ValidationAutoConfiguration.class]:&#010;Bean instantiation via factory method failed; nested exception is&#010;org.springframework.beans.BeanInstantiationException: Failed to instantiate&#010;[javax.validation.Validator]: Factory method 'jsr303Validator' threw&#010;exception; nested exception is java.lang.NoClassDefFoundError: Could not&#010;initialize class org.hibernate.validator.internal.engine.ConfigurationImpl&#010;2017-04-19 15:02:51.441 ERROR 222576 --- [           main]&#010;o.s.b.f.s.DefaultListableBeanFactory     : Destroy method on bean with name&#010;'org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor'&#010;threw an exception&#010;&#010;java.lang.IllegalStateException: ApplicationEventMulticaster not initialized&#010;- call 'refresh' before multicasting events via the context:&#010;org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@6e083721:&#010;startup date [Wed Apr 19 15:02:49 CEST 2017]; root of context hierarchy&#010;&#009;at&#010;org.springframework.context.support.AbstractApplicationContext.getApplicationEventMulticaster(AbstractApplicationContext.java:404)&#010;[spring-context-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.context.support.ApplicationListenerDetector.postProcessBeforeDestruction(ApplicationListenerDetector.java:97)&#010;~[spring-context-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:253)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:578)&#010;[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:554)&#010;[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:961)&#010;[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:523)&#010;[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:968)&#010;[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1033)&#010;[spring-context-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:555)&#010;[spring-context-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.run(SpringApplication.java:314)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.run(SpringApplication.java:1162)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.run(SpringApplication.java:1151)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at sample.camel.Application.main(Application.java:19) [classes/:na]&#010;&#009;at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#010;~[na:1.8.0_112]&#010;&#009;at&#010;sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&#010;~[na:1.8.0_112]&#010;&#009;at&#010;sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&#010;~[na:1.8.0_112]&#010;&#009;at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_112]&#010;&#009;at&#010;org.springframework.boot.maven.AbstractRunMojo$LaunchRunner.run(AbstractRunMojo.java:527)&#010;[spring-boot-maven-plugin-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at java.lang.Thread.run(Thread.java:745) [na:1.8.0_112]&#010;&#010;2017-04-19 15:02:51.442 ERROR 222576 --- [           main]&#010;o.s.b.f.s.DefaultListableBeanFactory     : Destroy method on bean with name&#010;'org.springframework.boot.autoconfigure.internalCachingMetadataReaderFactory'&#010;threw an exception&#010;&#010;java.lang.IllegalStateException: ApplicationEventMulticaster not initialized&#010;- call 'refresh' before multicasting events via the context:&#010;org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@6e083721:&#010;startup date [Wed Apr 19 15:02:49 CEST 2017]; root of context hierarchy&#010;&#009;at&#010;org.springframework.context.support.AbstractApplicationContext.getApplicationEventMulticaster(AbstractApplicationContext.java:404)&#010;[spring-context-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.context.support.ApplicationListenerDetector.postProcessBeforeDestruction(ApplicationListenerDetector.java:97)&#010;~[spring-context-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:253)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:578)&#010;[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:554)&#010;[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:961)&#010;[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:523)&#010;[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:968)&#010;[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1033)&#010;[spring-context-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:555)&#010;[spring-context-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.run(SpringApplication.java:314)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.run(SpringApplication.java:1162)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.run(SpringApplication.java:1151)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at sample.camel.Application.main(Application.java:19) [classes/:na]&#010;&#009;at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#010;~[na:1.8.0_112]&#010;&#009;at&#010;sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&#010;~[na:1.8.0_112]&#010;&#009;at&#010;sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&#010;~[na:1.8.0_112]&#010;&#009;at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_112]&#010;&#009;at&#010;org.springframework.boot.maven.AbstractRunMojo$LaunchRunner.run(AbstractRunMojo.java:527)&#010;[spring-boot-maven-plugin-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at java.lang.Thread.run(Thread.java:745) [na:1.8.0_112]&#010;&#010;2017-04-19 15:02:51.455 ERROR 222576 --- [           main]&#010;o.s.boot.SpringApplication               : Application startup failed&#010;&#010;org.springframework.beans.factory.UnsatisfiedDependencyException: Error&#010;creating bean with name 'methodValidationPostProcessor' defined in class&#010;path resource&#010;[org/springframework/boot/autoconfigure/validation/ValidationAutoConfiguration.class]:&#010;Unsatisfied dependency expressed through method&#010;'methodValidationPostProcessor' parameter 0; nested exception is&#010;org.springframework.beans.factory.BeanCreationException: Error creating bean&#010;with name 'jsr303Validator' defined in class path resource&#010;[org/springframework/boot/autoconfigure/validation/ValidationAutoConfiguration.class]:&#010;Bean instantiation via factory method failed; nested exception is&#010;org.springframework.beans.BeanInstantiationException: Failed to instantiate&#010;[javax.validation.Validator]: Factory method 'jsr303Validator' threw&#010;exception; nested exception is java.lang.NoClassDefFoundError: Could not&#010;initialize class org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:749)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:467)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1173)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1067)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.context.support.PostProcessorRegistrationDelegate.registerBeanPostProcessors(PostProcessorRegistrationDelegate.java:223)&#010;~[spring-context-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:702)&#010;~[spring-context-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:527)&#010;~[spring-context-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)&#010;~[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.run(SpringApplication.java:314)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.run(SpringApplication.java:1162)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.SpringApplication.run(SpringApplication.java:1151)&#010;[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at sample.camel.Application.main(Application.java:19) [classes/:na]&#010;&#009;at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#010;~[na:1.8.0_112]&#010;&#009;at&#010;sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&#010;~[na:1.8.0_112]&#010;&#009;at&#010;sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&#010;~[na:1.8.0_112]&#010;&#009;at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_112]&#010;&#009;at&#010;org.springframework.boot.maven.AbstractRunMojo$LaunchRunner.run(AbstractRunMojo.java:527)&#010;[spring-boot-maven-plugin-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at java.lang.Thread.run(Thread.java:745) [na:1.8.0_112]&#010;Caused by: org.springframework.beans.factory.BeanCreationException: Error&#010;creating bean with name 'jsr303Validator' defined in class path resource&#010;[org/springframework/boot/autoconfigure/validation/ValidationAutoConfiguration.class]:&#010;Bean instantiation via factory method failed; nested exception is&#010;org.springframework.beans.BeanInstantiationException: Failed to instantiate&#010;[javax.validation.Validator]: Factory method 'jsr303Validator' threw&#010;exception; nested exception is java.lang.NoClassDefFoundError: Could not&#010;initialize class org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:599)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1173)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1067)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:208)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1138)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1066)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:835)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:741)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;... 25 common frames omitted&#010;Caused by: org.springframework.beans.BeanInstantiationException: Failed to&#010;instantiate [javax.validation.Validator]: Factory method 'jsr303Validator'&#010;threw exception; nested exception is java.lang.NoClassDefFoundError: Could&#010;not initialize class&#010;org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&#009;at&#010;org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;... 38 common frames omitted&#010;Caused by: java.lang.NoClassDefFoundError: Could not initialize class&#010;org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&#009;at&#010;org.hibernate.validator.HibernateValidator.createGenericConfiguration(HibernateValidator.java:33)&#010;~[hibernate-validator-5.3.4.Final.jar:5.3.4.Final]&#010;&#009;at&#010;javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:276)&#010;~[validation-api-1.1.0.Final.jar:na]&#010;&#009;at&#010;org.springframework.boot.validation.MessageInterpolatorFactory.getObject(MessageInterpolatorFactory.java:53)&#010;~[spring-boot-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at&#010;org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration.jsr303Validator(ValidationAutoConfiguration.java:52)&#010;~[spring-boot-autoconfigure-1.5.2.RELEASE.jar:1.5.2.RELEASE]&#010;&#009;at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#010;~[na:1.8.0_112]&#010;&#009;at&#010;sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&#010;~[na:1.8.0_112]&#010;&#009;at&#010;sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&#010;~[na:1.8.0_112]&#010;&#009;at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_112]&#010;&#009;at&#010;org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)&#010;~[spring-beans-4.3.7.RELEASE.jar:4.3.7.RELEASE]&#010;&#009;... 39 common frames omitted&#010;&#010;[WARNING] &#010;java.lang.reflect.InvocationTargetException&#010;&#009;at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#010;&#009;at&#010;sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&#010;&#009;at&#010;sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&#010;&#009;at java.lang.reflect.Method.invoke(Method.java:498)&#010;&#009;at&#010;org.springframework.boot.maven.AbstractRunMojo$LaunchRunner.run(AbstractRunMojo.java:527)&#010;&#009;at java.lang.Thread.run(Thread.java:745)&#010;Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException:&#010;Error creating bean with name 'methodValidationPostProcessor' defined in&#010;class path resource&#010;[org/springframework/boot/autoconfigure/validation/ValidationAutoConfiguration.class]:&#010;Unsatisfied dependency expressed through method&#010;'methodValidationPostProcessor' parameter 0; nested exception is&#010;org.springframework.beans.factory.BeanCreationException: Error creating bean&#010;with name 'jsr303Validator' defined in class path resource&#010;[org/springframework/boot/autoconfigure/validation/ValidationAutoConfiguration.class]:&#010;Bean instantiation via factory method failed; nested exception is&#010;org.springframework.beans.BeanInstantiationException: Failed to instantiate&#010;[javax.validation.Validator]: Factory method 'jsr303Validator' threw&#010;exception; nested exception is java.lang.NoClassDefFoundError: Could not&#010;initialize class org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:749)&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:467)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1173)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1067)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)&#010;&#009;at&#010;org.springframework.context.support.PostProcessorRegistrationDelegate.registerBeanPostProcessors(PostProcessorRegistrationDelegate.java:223)&#010;&#009;at&#010;org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:702)&#010;&#009;at&#010;org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:527)&#010;&#009;at&#010;org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)&#010;&#009;at&#010;org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737)&#010;&#009;at&#010;org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370)&#010;&#009;at&#010;org.springframework.boot.SpringApplication.run(SpringApplication.java:314)&#010;&#009;at&#010;org.springframework.boot.SpringApplication.run(SpringApplication.java:1162)&#010;&#009;at&#010;org.springframework.boot.SpringApplication.run(SpringApplication.java:1151)&#010;&#009;at sample.camel.Application.main(Application.java:19)&#010;&#009;... 6 more&#010;Caused by: org.springframework.beans.factory.BeanCreationException: Error&#010;creating bean with name 'jsr303Validator' defined in class path resource&#010;[org/springframework/boot/autoconfigure/validation/ValidationAutoConfiguration.class]:&#010;Bean instantiation via factory method failed; nested exception is&#010;org.springframework.beans.BeanInstantiationException: Failed to instantiate&#010;[javax.validation.Validator]: Factory method 'jsr303Validator' threw&#010;exception; nested exception is java.lang.NoClassDefFoundError: Could not&#010;initialize class org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:599)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1173)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1067)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)&#010;&#009;at&#010;org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)&#010;&#009;at&#010;org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:208)&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1138)&#010;&#009;at&#010;org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1066)&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:835)&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:741)&#010;&#009;... 25 more&#010;Caused by: org.springframework.beans.BeanInstantiationException: Failed to&#010;instantiate [javax.validation.Validator]: Factory method 'jsr303Validator'&#010;threw exception; nested exception is java.lang.NoClassDefFoundError: Could&#010;not initialize class&#010;org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&#009;at&#010;org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)&#010;&#009;at&#010;org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)&#010;&#009;... 38 more&#010;Caused by: java.lang.NoClassDefFoundError: Could not initialize class&#010;org.hibernate.validator.internal.engine.ConfigurationImpl&#010;&#009;at&#010;org.hibernate.validator.HibernateValidator.createGenericConfiguration(HibernateValidator.java:33)&#010;&#009;at&#010;javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:276)&#010;&#009;at&#010;org.springframework.boot.validation.MessageInterpolatorFactory.getObject(MessageInterpolatorFactory.java:53)&#010;&#009;at&#010;org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration.jsr303Validator(ValidationAutoConfiguration.java:52)&#010;&#009;at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#010;&#009;at&#010;sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&#010;&#009;at&#010;sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&#010;&#009;at java.lang.reflect.Method.invoke(Method.java:498)&#010;&#009;at&#010;org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)&#010;&#009;... 39 more&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Spring-Boot-1-5-fails-when-camel-swagger-java-in-place-tp5797920p5797927.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
218,219,Zoran Regvart,      Re: Spring Boot > 1.5 fails when camel-swagger-java in place,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCABD_Zr8NyHPwXk4wdhROLyYVp2qxJn%3DkrTi2DRWkdMjEdt90sg%40mail.gmail.com%3E,users,"Wed, 19 Apr 2017 13:33:52 GMT","Hi Thomas&#010;&#010;On Wed, Apr 19, 2017 at 3:08 PM, Thomas Weinschenk&#010;&lt;thomas.weinschenk@solutions.endress.com&gt; wrote:&#010;&gt; where do I have to put the validation mode setting, property of the pom,&#010;&gt; application.yml or as an environment variable? I tried all three but I still&#010;&gt; get the same error.&#010;&#010;in Spring Boot that setting needs to be prefixed with&#010;`spring.jpa.properties`[1], so try setting&#010;`spring.jpa.properties.javax.persistence.validation.mode` to `none`&#010;&#010;&gt; The log ouptut related to the failure is:&#010;&gt;&#010;&gt; Exception encountered during context initialization - cancelling refresh&#010;&gt; [snip]&#010;&#010;I'm sure you have a exception preceding that one, that shows the&#010;actual cause of the failure to initialize&#010;`org.hibernate.validator.internal.engine.ConfigurationImpl`, you see&#010;`NoClassDefFoundError`s occur after the fact when the class can't be&#010;loaded, usually due to `ClassNotFoundException`,&#010;&#010;zoran&#010;&#010;[1] https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-configure-jpa-properties&#010;-- &#010;Zoran Regvart&#010;&#010;"
219,220,teikitel,JPA consumer component is not handling multiple server concurrent polling,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492621380630-5797937.post%40n5.nabble.com%3E,users,"Wed, 19 Apr 2017 17:03:00 GMT","Hi,&#010;&#010;I am running the same Camel application on four different servers and JPA&#010;camel component is not properly managing exclusive locks on polled rows.&#010;This is how we configured our route :&#010;&#010;@Override&#010;    public void configure() throws Exception {&#010;        // @formatter:off&#010;&#009;&#009;from(""jpa://Toto?lockModeType=PESSIMISTIC_READ""&#010;&#009;&#009;        + ""&amp;consumeDelete=false""&#010;&#009;&#009;&#009;&#009;+ ""&amp;consumeLockEntity=true""&#010;&#009;&#009;&#009;&#009;+ ""&amp;consumer.SkipLockedEntity=true""&#010;&#009;&#009;&#009;&#009;+ ""&amp;maximumResults=10""&#010;&#009;&#009;&#009;&#009;+ ""&amp;sharedEntityManager=true""&#010;&#009;&#009;&#009;&#009;+ ""&amp;joinTransaction=false""&#010;&#009;&#009;&#009;&#009;+ ""&amp;delay=200""&#010;&#009;&#009;&#009;&#009;+ ""&amp;consumer.query=select t from Toto t where t.consumed = 0"")&#010;&#009;&#009;    .bean(totoAction, ""consumeToto"")&#010;&#009;&#009;    .process(exchange-&gt; System.out.println(exchange.getIn().getBody()));&#010;&#009;&#009;// @formatter:on&#010;    }&#010;&#010;Inserting 20 rows at the same time while 2 servers are running the app&#010;causes some entities to be processed by both servers.&#010;&#010;Do you know a nice work around to fix my problem ?&#010;&#010;I can easily share you my sources if you need to reproduce it.&#010;&#010;Thanks for this great framework,&#010;&#010;Loic&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/JPA-consumer-component-is-not-handling-multiple-server-concurrent-polling-tp5797937.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
220,221,,Throttle and threads together,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492621380630-5797937.post%40n5.nabble.com%3E,users,"Wed, 19 Apr 2017 17:03:00 GMT","Hi,&#010;&#010;I am running the same Camel application on four different servers and JPA&#010;camel component is not properly managing exclusive locks on polled rows.&#010;This is how we configured our route :&#010;&#010;@Override&#010;    public void configure() throws Exception {&#010;        // @formatter:off&#010;&#009;&#009;from(""jpa://Toto?lockModeType=PESSIMISTIC_READ""&#010;&#009;&#009;        + ""&amp;consumeDelete=false""&#010;&#009;&#009;&#009;&#009;+ ""&amp;consumeLockEntity=true""&#010;&#009;&#009;&#009;&#009;+ ""&amp;consumer.SkipLockedEntity=true""&#010;&#009;&#009;&#009;&#009;+ ""&amp;maximumResults=10""&#010;&#009;&#009;&#009;&#009;+ ""&amp;sharedEntityManager=true""&#010;&#009;&#009;&#009;&#009;+ ""&amp;joinTransaction=false""&#010;&#009;&#009;&#009;&#009;+ ""&amp;delay=200""&#010;&#009;&#009;&#009;&#009;+ ""&amp;consumer.query=select t from Toto t where t.consumed = 0"")&#010;&#009;&#009;    .bean(totoAction, ""consumeToto"")&#010;&#009;&#009;    .process(exchange-&gt; System.out.println(exchange.getIn().getBody()));&#010;&#009;&#009;// @formatter:on&#010;    }&#010;&#010;Inserting 20 rows at the same time while 2 servers are running the app&#010;causes some entities to be processed by both servers.&#010;&#010;Do you know a nice work around to fix my problem ?&#010;&#010;I can easily share you my sources if you need to reproduce it.&#010;&#010;Thanks for this great framework,&#010;&#010;Loic&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/JPA-consumer-component-is-not-handling-multiple-server-concurrent-polling-tp5797937.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
221,222,Robson Vargas Farias,  Throttle and threads together,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCALjbH96rAG52ZZ-96VkMHUTkW94Q5hQHJGEDYKdUkoTp6ujobg%40mail.gmail.com%3E,users,"Wed, 19 Apr 2017 22:11:51 GMT","Hi, I'm working with a camel route and I'd like to understand the mix&#010;between throttle and threads:&#010;&#010;&#010;&#010;If I introduce on the &lt;camel:throttle configuration a value for the&#010;executorServiceRef, will it execute the same way as wrapped by the&#010;&lt;camel:threads tag?&#010;&#010;&#010;&#010;        &lt;camel:route id=""my_route""&gt;&#010;&#010;                                           &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&#010;                                           &lt;camel:throttle&#010;timePeriodMillis=""1000"" asyncDelayed=""true"" executorServiceRef=""my_thread_&#010;pool_profile""&gt;&#010;&#010;                                                          &lt;camel:to&#010;ref=""processor_handler_endpoint"" /&gt;&#010;&#010;                                                          ..&#010;&#010;&#010;&#010;is the same as:&#010;&#010;&#010;&#010;                             &lt;camel:route id=""my_route""&gt;&#010;&#010;                                           &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&#010;                                           &lt;camel:throttle&#010;timePeriodMillis=""1000""&gt;&#010;&#010;                                                          &lt;camel:simple&gt;10&#010;&#010;                                                          &lt;/camel:simple&gt;&#010;&#010;                                                          &lt;camel:threads&#010;executorServiceRef=""my_thread_pool_profile""&gt;&#010;&#010;&#010;&lt;camel:to ref=""processor_handler_endpoint"" /&gt;&#010;&#010;                                                                        ..&#010;&#010;&#010;&#010;?&#010;&#010;&#010;&#010;Thanks,&#010;&#010;&#010;&#010;Robson&#010;&#010;"
222,223,Claus Ibsen,    Re: Throttle and threads together,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNke_PdL9BXO9_TjyP5DhYkJHR%2ByKb9ttpxNeksNYBbKqQ%40mail.gmail.com%3E,users,"Thu, 20 Apr 2017 09:35:11 GMT","If you use both throttle and threads then they each process the&#010;message using a thread pool. It may not make as much sense to use both&#010;of them.&#010;&#010;If using both you also may end up with the throttler and the threads&#010;not keeping the same pace when processing messages, and you end up&#010;with pending messages waiting in the thread pool queue list.&#010;&#010;&#010;&#010;On Thu, Apr 20, 2017 at 12:11 AM, Robson Vargas Farias&#010;&lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; Hi, I'm working with a camel route and I'd like to understand the mix&#010;&gt; between throttle and threads:&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; If I introduce on the &lt;camel:throttle configuration a value for the&#010;&gt; executorServiceRef, will it execute the same way as wrapped by the&#010;&gt; &lt;camel:threads tag?&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;         &lt;camel:route id=""my_route""&gt;&#010;&gt;&#010;&gt;                                            &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&gt;&#010;&gt;                                            &lt;camel:throttle&#010;&gt; timePeriodMillis=""1000"" asyncDelayed=""true"" executorServiceRef=""my_thread_&#010;&gt; pool_profile""&gt;&#010;&gt;&#010;&gt;                                                           &lt;camel:to&#010;&gt; ref=""processor_handler_endpoint"" /&gt;&#010;&gt;&#010;&gt;                                                           ..&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; is the same as:&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;                              &lt;camel:route id=""my_route""&gt;&#010;&gt;&#010;&gt;                                            &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&gt;&#010;&gt;                                            &lt;camel:throttle&#010;&gt; timePeriodMillis=""1000""&gt;&#010;&gt;&#010;&gt;                                                           &lt;camel:simple&gt;10&#010;&gt;&#010;&gt;                                                           &lt;/camel:simple&gt;&#010;&gt;&#010;&gt;                                                           &lt;camel:threads&#010;&gt; executorServiceRef=""my_thread_pool_profile""&gt;&#010;&gt;&#010;&gt;&#010;&gt; &lt;camel:to ref=""processor_handler_endpoint"" /&gt;&#010;&gt;&#010;&gt;                                                                         ..&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; ?&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; Thanks,&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; Robson&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
223,224,Robson Vargas Farias,      Re: Throttle and threads together,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCALjbH94WbCF8VzZUO0Hc9BFpAhjX7PhnPk024P_2%2BC96945%2BgQ%40mail.gmail.com%3E,users,"Thu, 20 Apr 2017 12:42:58 GMT","Hi Claus, thanks for your answer. Sure, it make sense.&#010;&#010;&#010;2017-04-20 6:35 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&#010;&gt; If you use both throttle and threads then they each process the&#010;&gt; message using a thread pool. It may not make as much sense to use both&#010;&gt; of them.&#010;&gt;&#010;&gt; If using both you also may end up with the throttler and the threads&#010;&gt; not keeping the same pace when processing messages, and you end up&#010;&gt; with pending messages waiting in the thread pool queue list.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; On Thu, Apr 20, 2017 at 12:11 AM, Robson Vargas Farias&#010;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; &gt; Hi, I'm working with a camel route and I'd like to understand the mix&#010;&gt; &gt; between throttle and threads:&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; If I introduce on the &lt;camel:throttle configuration a value for the&#010;&gt; &gt; executorServiceRef, will it execute the same way as wrapped by the&#010;&gt; &gt; &lt;camel:threads tag?&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;         &lt;camel:route id=""my_route""&gt;&#010;&gt; &gt;&#010;&gt; &gt;                                            &lt;camel:from ref=""mq_endpoint""&#010;&gt; /&gt;&#010;&gt; &gt;&#010;&gt; &gt;                                            &lt;camel:throttle&#010;&gt; &gt; timePeriodMillis=""1000"" asyncDelayed=""true""&#010;&gt; executorServiceRef=""my_thread_&#010;&gt; &gt; pool_profile""&gt;&#010;&gt; &gt;&#010;&gt; &gt;                                                           &lt;camel:to&#010;&gt; &gt; ref=""processor_handler_endpoint"" /&gt;&#010;&gt; &gt;&#010;&gt; &gt;                                                           ..&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; is the same as:&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;                              &lt;camel:route id=""my_route""&gt;&#010;&gt; &gt;&#010;&gt; &gt;                                            &lt;camel:from ref=""mq_endpoint""&#010;&gt; /&gt;&#010;&gt; &gt;&#010;&gt; &gt;                                            &lt;camel:throttle&#010;&gt; &gt; timePeriodMillis=""1000""&gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt;  &lt;camel:simple&gt;10&#010;&gt; &gt;&#010;&gt; &gt;                                                           &lt;/camel:simple&gt;&#010;&gt; &gt;&#010;&gt; &gt;                                                           &lt;camel:threads&#010;&gt; &gt; executorServiceRef=""my_thread_pool_profile""&gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; &lt;camel:to ref=""processor_handler_endpoint"" /&gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt;  ..&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; ?&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; Thanks,&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; Robson&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&#010;"
224,225,Burkard Stephan,Extensible Camel routes,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3Cc8ae2b0f7c62430ea04a7fce955a0b30%40a0zbrn11.visana.intra%3E,users,"Thu, 20 Apr 2017 09:04:32 GMT","Hi Camel users&#013;&#010;&#013;&#010;Let's say I have this generic file to JMS route I would like to put in a library.&#013;&#010;&#013;&#010;from(directory?options...)&#013;&#010;   .routeId(""basicFileToJmsRoute"")&#013;&#010;   .log(LoggingLevel.INFO, ""[FILEREADER], file: ${in.header.CamelFileName}"")&#013;&#010;   .to(queueEndpointUri);&#013;&#010;&#013;&#010;&#013;&#010;Then I would like to build multiple modules who use the route where each module has its own&#010;configuration (directory, queue etc). &#013;&#010;&#013;&#010;But some of them have also additional requirements, for example split large XML files: &#013;&#010;&#013;&#010;from(directory?options...)&#013;&#010;   .routeId(""basicFileToJmsRoute"")&#013;&#010;   .log(LoggingLevel.INFO, ""[FILEREADER], file: ${in.header.CamelFileName}"")&#013;&#010;=&gt;   .split().tokenizeXML(SPLITTER_ELEMENT_NAME).streaming()&#013;&#010;   .to(queueEndpointUri);&#013;&#010;&#013;&#010;&#013;&#010;Is there a best practice approach to extend a basic route like this in another module?&#013;&#010;&#013;&#010;Thanks&#013;&#010;Stephan&#013;&#010;&#013;&#010;"
225,226,Claus Ibsen,  Re: Extensible Camel routes,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNk9wrbGv2M3mi2%2B-oxK2wy129HDZWLokxDXQ3CZ6O76sg%40mail.gmail.com%3E,users,"Thu, 20 Apr 2017 09:25:21 GMT","Hi&#010;&#010;A RouteBuilder is essentially just java, so you can create base&#010;classes / abstract classes and have getter/setter (or what you prefer)&#010;for configuration.&#010;&#010;You can also use java's if .. else .. etc to add parts to the route if&#010;you need. You can then put the routes together using the model classes&#010;(the xxxDefinition).&#010;&#010;But try to not make this to complex / confusing to maintain. You may&#010;want to have special routes for splitter vs non splitter etc.&#010;&#010;&#010;On Thu, Apr 20, 2017 at 11:04 AM, Burkard Stephan&#010;&lt;Stephan.Burkard@visana.ch&gt; wrote:&#010;&gt; Hi Camel users&#010;&gt;&#010;&gt; Let's say I have this generic file to JMS route I would like to put in a library.&#010;&gt;&#010;&gt; from(directory?options...)&#010;&gt;    .routeId(""basicFileToJmsRoute"")&#010;&gt;    .log(LoggingLevel.INFO, ""[FILEREADER], file: ${in.header.CamelFileName}"")&#010;&gt;    .to(queueEndpointUri);&#010;&gt;&#010;&gt;&#010;&gt; Then I would like to build multiple modules who use the route where each module has its&#010;own configuration (directory, queue etc).&#010;&gt;&#010;&gt; But some of them have also additional requirements, for example split large XML files:&#010;&gt;&#010;&gt; from(directory?options...)&#010;&gt;    .routeId(""basicFileToJmsRoute"")&#010;&gt;    .log(LoggingLevel.INFO, ""[FILEREADER], file: ${in.header.CamelFileName}"")&#010;&gt; =&gt;   .split().tokenizeXML(SPLITTER_ELEMENT_NAME).streaming()&#010;&gt;    .to(queueEndpointUri);&#010;&gt;&#010;&gt;&#010;&gt; Is there a best practice approach to extend a basic route like this in another module?&#010;&gt;&#010;&gt; Thanks&#010;&gt; Stephan&#010;&gt;&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
226,227,Quinn Stevenson,    Re: Extensible Camel routes,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C4CF5F56D-61A8-479C-80A4-8732E952603C%40pronoia-solutions.com%3E,users,"Thu, 20 Apr 2017 13:59:29 GMT","This isn’t quite you’re use case since I don’t extend routes, but I have RouteBuilders&#010;that I deploy hundreds of times with different configurations using either camel-blueprint,&#010;camel-scr and Blueprint namespace handlers.&#010;&#010;I allow minor variations the routes based on the configuration of the RouteBuilder, so if&#010;I were going to try your example, the configure method would look something like this:&#010;&#010;public void configure() throws Exception {&#010;  ProcessorDefinition&lt;?&gt; routeDef =&#010;      from(""file://"").routeId(routeId)&#010;          .log(LoggingLevel.INFO, ""[FILEREADER], file: ${in.header.CamelFileName}"");&#010;&#010;  if (SPLITTER_ELEMENT_NAME != null &amp;&amp; !SPLITTER_ELEMENT_NAME.isEmpty()) {&#010;    routeDef = routeDef.split().tokenizeXML(SPLITTER_ELEMENT_NAME).streaming()&#010;  }&#010;&#010;  routeDef.to(queueEndpointUri);&#010;}&#010;Notice that If the SPLITTER_ELEMENT_NAME property is set, then the route will include the&#010;“split”.&#010;&#010;I’ve used this technique quite a bit, and I’ll reiterate the comment Claus made about&#010;complexity - be careful with this.  MINOR variations of the route are supportable, but too&#010;many allowed variations can make the RouteBuilder very difficult to support.&#010;&#010;HTH&#010;&#010;&#010;&#010;&#010;&gt; On Apr 20, 2017, at 3:25 AM, Claus Ibsen &lt;claus.ibsen@gmail.com&gt; wrote:&#010;&gt; &#010;&gt; Hi&#010;&gt; &#010;&gt; A RouteBuilder is essentially just java, so you can create base&#010;&gt; classes / abstract classes and have getter/setter (or what you prefer)&#010;&gt; for configuration.&#010;&gt; &#010;&gt; You can also use java's if .. else .. etc to add parts to the route if&#010;&gt; you need. You can then put the routes together using the model classes&#010;&gt; (the xxxDefinition).&#010;&gt; &#010;&gt; But try to not make this to complex / confusing to maintain. You may&#010;&gt; want to have special routes for splitter vs non splitter etc.&#010;&gt; &#010;&gt; &#010;&gt; On Thu, Apr 20, 2017 at 11:04 AM, Burkard Stephan&#010;&gt; &lt;Stephan.Burkard@visana.ch&gt; wrote:&#010;&gt;&gt; Hi Camel users&#010;&gt;&gt; &#010;&gt;&gt; Let's say I have this generic file to JMS route I would like to put in a library.&#010;&gt;&gt; &#010;&gt;&gt; from(directory?options...)&#010;&gt;&gt;   .routeId(""basicFileToJmsRoute"")&#010;&gt;&gt;   .log(LoggingLevel.INFO, ""[FILEREADER], file: ${in.header.CamelFileName}"")&#010;&gt;&gt;   .to(queueEndpointUri);&#010;&gt;&gt; &#010;&gt;&gt; &#010;&gt;&gt; Then I would like to build multiple modules who use the route where each module has&#010;its own configuration (directory, queue etc).&#010;&gt;&gt; &#010;&gt;&gt; But some of them have also additional requirements, for example split large XML files:&#010;&gt;&gt; &#010;&gt;&gt; from(directory?options...)&#010;&gt;&gt;   .routeId(""basicFileToJmsRoute"")&#010;&gt;&gt;   .log(LoggingLevel.INFO, ""[FILEREADER], file: ${in.header.CamelFileName}"")&#010;&gt;&gt; =&gt;   .split().tokenizeXML(SPLITTER_ELEMENT_NAME).streaming()&#010;&gt;&gt;   .to(queueEndpointUri);&#010;&gt;&gt; &#010;&gt;&gt; &#010;&gt;&gt; Is there a best practice approach to extend a basic route like this in another module?&#010;&gt;&gt; &#010;&gt;&gt; Thanks&#010;&gt;&gt; Stephan&#010;&gt;&gt; &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; -- &#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;&#010;"
227,228,Robson Vargas Farias,throttle executorServiceRef not recognizing threadPool but only threadPoolProfile,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCALjbH97LOtziPdYqVx%3DdK-nRXbv3eunYoUipD4pdFqbEV%2BPUzQ%40mail.gmail.com%3E,users,"Thu, 20 Apr 2017 13:29:29 GMT","Hi,&#010;&#010;Can you help me where is my miss?&#010;&#010;I've a camel context configured with a route containing a throttle which is&#010;pointing (ref) to a threadPool:&#010;&#010;&lt;camel:camelContext id=""camel-server"" useMDCLogging=""true""&#010;allowUseOriginalMessage=""false""&gt;&#010;&#010;&#010;&lt;!-- thread pools --&gt;&#010;&#010;&lt;camel:threadPool id=""my_thread_pool""&#010;poolSize=""1""&#010;maxPoolSize=""4""&#010;maxQueueSize=""100""&#010;threadName=""my_thread_pool"" keepAliveTime=""0""&#010;rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS"" /&gt;&#010;&#010;..&#010;&#010;&#010;&lt;camel:route id=""my_route""&gt;&#010;&lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&lt;camel:throttle timePeriodMillis=""1000"" executorServiceRef=""my_thread_pool""&gt;&#010;..&#010;&#010;&#010;but, when I start my application I got below error:&#010;&#010;Caused By: java.lang.IllegalArgumentException: ExecutorServiceRef&#010;my_thread_pool not found in registry or as a thread pool profile.&#010;&#010;&#010;&#010;If I change the throttle from a threadPool to a threadPoolProfile it works.&#010;So, why it is not working with a threadPool?&#010;&#010;Thanks.&#010;&#010;"
228,229,Claus Ibsen,  Re: throttle executorServiceRef not recognizing threadPool but only threadPoolProfile,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNkUBH1gsPwBPaDXS%2BcecoRSx4UGfBTwnbOrpnmfoNNyVw%40mail.gmail.com%3E,users,"Thu, 20 Apr 2017 13:33:10 GMT","What version of Camel do you use, and have you tried with a newer version&#010;&#010;On Thu, Apr 20, 2017 at 3:29 PM, Robson Vargas Farias&#010;&lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; Hi,&#010;&gt;&#010;&gt; Can you help me where is my miss?&#010;&gt;&#010;&gt; I've a camel context configured with a route containing a throttle which is&#010;&gt; pointing (ref) to a threadPool:&#010;&gt;&#010;&gt; &lt;camel:camelContext id=""camel-server"" useMDCLogging=""true""&#010;&gt; allowUseOriginalMessage=""false""&gt;&#010;&gt;&#010;&gt;&#010;&gt; &lt;!-- thread pools --&gt;&#010;&gt;&#010;&gt; &lt;camel:threadPool id=""my_thread_pool""&#010;&gt; poolSize=""1""&#010;&gt; maxPoolSize=""4""&#010;&gt; maxQueueSize=""100""&#010;&gt; threadName=""my_thread_pool"" keepAliveTime=""0""&#010;&gt; rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS"" /&gt;&#010;&gt;&#010;&gt; ..&#010;&gt;&#010;&gt;&#010;&gt; &lt;camel:route id=""my_route""&gt;&#010;&gt; &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&gt; &lt;camel:throttle timePeriodMillis=""1000"" executorServiceRef=""my_thread_pool""&gt;&#010;&gt; ..&#010;&gt;&#010;&gt;&#010;&gt; but, when I start my application I got below error:&#010;&gt;&#010;&gt; Caused By: java.lang.IllegalArgumentException: ExecutorServiceRef&#010;&gt; my_thread_pool not found in registry or as a thread pool profile.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; If I change the throttle from a threadPool to a threadPoolProfile it works.&#010;&gt; So, why it is not working with a threadPool?&#010;&gt;&#010;&gt; Thanks.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
229,230,Robson Vargas Farias,    Re: throttle executorServiceRef not recognizing threadPool but only threadPoolProfile,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCALjbH96HCTF3ohOALf7qEB5UG2A%2BzGtaJJLQBTn0vEA%3D%3DECndg%40mail.gmail.com%3E,users,"Thu, 20 Apr 2017 13:37:41 GMT","Hi Claus, currently using 2.13.2 - and no, did not try other version.&#010;&#010;2017-04-20 10:33 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&#010;&gt; What version of Camel do you use, and have you tried with a newer version&#010;&gt;&#010;&gt; On Thu, Apr 20, 2017 at 3:29 PM, Robson Vargas Farias&#010;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; &gt; Hi,&#010;&gt; &gt;&#010;&gt; &gt; Can you help me where is my miss?&#010;&gt; &gt;&#010;&gt; &gt; I've a camel context configured with a route containing a throttle which&#010;&gt; is&#010;&gt; &gt; pointing (ref) to a threadPool:&#010;&gt; &gt;&#010;&gt; &gt; &lt;camel:camelContext id=""camel-server"" useMDCLogging=""true""&#010;&gt; &gt; allowUseOriginalMessage=""false""&gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; &lt;!-- thread pools --&gt;&#010;&gt; &gt;&#010;&gt; &gt; &lt;camel:threadPool id=""my_thread_pool""&#010;&gt; &gt; poolSize=""1""&#010;&gt; &gt; maxPoolSize=""4""&#010;&gt; &gt; maxQueueSize=""100""&#010;&gt; &gt; threadName=""my_thread_pool"" keepAliveTime=""0""&#010;&gt; &gt; rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS"" /&gt;&#010;&gt; &gt;&#010;&gt; &gt; ..&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; &lt;camel:route id=""my_route""&gt;&#010;&gt; &gt; &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&gt; &gt; &lt;camel:throttle timePeriodMillis=""1000"" executorServiceRef=""my_thread_&#010;&gt; pool""&gt;&#010;&gt; &gt; ..&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; but, when I start my application I got below error:&#010;&gt; &gt;&#010;&gt; &gt; Caused By: java.lang.IllegalArgumentException: ExecutorServiceRef&#010;&gt; &gt; my_thread_pool not found in registry or as a thread pool profile.&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; If I change the throttle from a threadPool to a threadPoolProfile it&#010;&gt; works.&#010;&gt; &gt; So, why it is not working with a threadPool?&#010;&gt; &gt;&#010;&gt; &gt; Thanks.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&#010;"
230,231,Claus Ibsen,      Re: throttle executorServiceRef not recognizing threadPool but only threadPoolProfile,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNn0n_KdD9qk6M65z1FY1owz4C%3DR0NNy%2BZUee%2B%3D3uYLZ6g%40mail.gmail.com%3E,users,"Thu, 20 Apr 2017 13:44:14 GMT","That is very old, its likely/possible fixed on newer version. So I&#010;suggest to try upgrading or build a new sample project using latest&#010;release and see if it works there.&#010;&#010;Knowing something is still not working in latest release brings&#010;attention to us. Otherwise we dont have the time to look into this&#010;ourselves first when users are using very old versions of Camel.&#010;&#010;On Thu, Apr 20, 2017 at 3:37 PM, Robson Vargas Farias&#010;&lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; Hi Claus, currently using 2.13.2 - and no, did not try other version.&#010;&gt;&#010;&gt; 2017-04-20 10:33 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt;&#010;&gt;&gt; What version of Camel do you use, and have you tried with a newer version&#010;&gt;&gt;&#010;&gt;&gt; On Thu, Apr 20, 2017 at 3:29 PM, Robson Vargas Farias&#010;&gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt;&gt; &gt; Hi,&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; Can you help me where is my miss?&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; I've a camel context configured with a route containing a throttle which&#010;&gt;&gt; is&#010;&gt;&gt; &gt; pointing (ref) to a threadPool:&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; &lt;camel:camelContext id=""camel-server"" useMDCLogging=""true""&#010;&gt;&gt; &gt; allowUseOriginalMessage=""false""&gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; &lt;!-- thread pools --&gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; &lt;camel:threadPool id=""my_thread_pool""&#010;&gt;&gt; &gt; poolSize=""1""&#010;&gt;&gt; &gt; maxPoolSize=""4""&#010;&gt;&gt; &gt; maxQueueSize=""100""&#010;&gt;&gt; &gt; threadName=""my_thread_pool"" keepAliveTime=""0""&#010;&gt;&gt; &gt; rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS"" /&gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; ..&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; &lt;camel:route id=""my_route""&gt;&#010;&gt;&gt; &gt; &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&gt;&gt; &gt; &lt;camel:throttle timePeriodMillis=""1000"" executorServiceRef=""my_thread_&#010;&gt;&gt; pool""&gt;&#010;&gt;&gt; &gt; ..&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; but, when I start my application I got below error:&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; Caused By: java.lang.IllegalArgumentException: ExecutorServiceRef&#010;&gt;&gt; &gt; my_thread_pool not found in registry or as a thread pool profile.&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; If I change the throttle from a threadPool to a threadPoolProfile it&#010;&gt;&gt; works.&#010;&gt;&gt; &gt; So, why it is not working with a threadPool?&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; Thanks.&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; --&#010;&gt;&gt; Claus Ibsen&#010;&gt;&gt; -----------------&#010;&gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt;&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
231,232,Robson Vargas Farias,        Re: throttle executorServiceRef not recognizing threadPool but only threadPoolProfile,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCALjbH96smHWc9GKiax%2BCsx1uTP0XX3wBLVbUtdc_P_M%2BYSbDFg%40mail.gmail.com%3E,users,"Thu, 20 Apr 2017 19:09:23 GMT","I've updated to the latest camel-x version which is 2.18.3 and the error&#010;still persists.&#010;&#010;Should the threadPool be declared in other place than into the camelContext&#010;?&#010;&#010;""..because of ExecutorServiceRef my_thread_pool not found in registry or as&#010;a thread pool profile.""&#010;&#010;2017-04-20 10:44 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&#010;&gt; That is very old, its likely/possible fixed on newer version. So I&#010;&gt; suggest to try upgrading or build a new sample project using latest&#010;&gt; release and see if it works there.&#010;&gt;&#010;&gt; Knowing something is still not working in latest release brings&#010;&gt; attention to us. Otherwise we dont have the time to look into this&#010;&gt; ourselves first when users are using very old versions of Camel.&#010;&gt;&#010;&gt; On Thu, Apr 20, 2017 at 3:37 PM, Robson Vargas Farias&#010;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; &gt; Hi Claus, currently using 2.13.2 - and no, did not try other version.&#010;&gt; &gt;&#010;&gt; &gt; 2017-04-20 10:33 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt; &gt;&#010;&gt; &gt;&gt; What version of Camel do you use, and have you tried with a newer&#010;&gt; version&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; On Thu, Apr 20, 2017 at 3:29 PM, Robson Vargas Farias&#010;&gt; &gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; &gt;&gt; &gt; Hi,&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; Can you help me where is my miss?&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; I've a camel context configured with a route containing a throttle&#010;&gt; which&#010;&gt; &gt;&gt; is&#010;&gt; &gt;&gt; &gt; pointing (ref) to a threadPool:&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; &lt;camel:camelContext id=""camel-server"" useMDCLogging=""true""&#010;&gt; &gt;&gt; &gt; allowUseOriginalMessage=""false""&gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; &lt;!-- thread pools --&gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; &lt;camel:threadPool id=""my_thread_pool""&#010;&gt; &gt;&gt; &gt; poolSize=""1""&#010;&gt; &gt;&gt; &gt; maxPoolSize=""4""&#010;&gt; &gt;&gt; &gt; maxQueueSize=""100""&#010;&gt; &gt;&gt; &gt; threadName=""my_thread_pool"" keepAliveTime=""0""&#010;&gt; &gt;&gt; &gt; rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS"" /&gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; ..&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; &lt;camel:route id=""my_route""&gt;&#010;&gt; &gt;&gt; &gt; &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&gt; &gt;&gt; &gt; &lt;camel:throttle timePeriodMillis=""1000"" executorServiceRef=""my_thread_&#010;&gt; &gt;&gt; pool""&gt;&#010;&gt; &gt;&gt; &gt; ..&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; but, when I start my application I got below error:&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; Caused By: java.lang.IllegalArgumentException: ExecutorServiceRef&#010;&gt; &gt;&gt; &gt; my_thread_pool not found in registry or as a thread pool profile.&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; If I change the throttle from a threadPool to a threadPoolProfile it&#010;&gt; &gt;&gt; works.&#010;&gt; &gt;&gt; &gt; So, why it is not working with a threadPool?&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; Thanks.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; --&#010;&gt; &gt;&gt; Claus Ibsen&#010;&gt; &gt;&gt; -----------------&#010;&gt; &gt;&gt; http://davsclaus.com @davsclaus&#010;&gt; &gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt; &gt;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&#010;"
232,233,Claus Ibsen,          Re: throttle executorServiceRef not recognizing threadPool but only threadPoolProfile,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNnS7ycE-ZDV%2BO3sqA1QDPX2PiuZZ3hgC05-si1ObQ_PEw%40mail.gmail.com%3E,users,"Fri, 21 Apr 2017 08:36:21 GMT","It ought to work as its using the same code the other EIPs would do,&#010;can you provide a very small sample project that reproduces this.&#010;&#010;&#010;&#010;&#010;On Thu, Apr 20, 2017 at 9:09 PM, Robson Vargas Farias&#010;&lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; I've updated to the latest camel-x version which is 2.18.3 and the error&#010;&gt; still persists.&#010;&gt;&#010;&gt; Should the threadPool be declared in other place than into the camelContext&#010;&gt; ?&#010;&gt;&#010;&gt; ""..because of ExecutorServiceRef my_thread_pool not found in registry or as&#010;&gt; a thread pool profile.""&#010;&gt;&#010;&gt; 2017-04-20 10:44 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt;&#010;&gt;&gt; That is very old, its likely/possible fixed on newer version. So I&#010;&gt;&gt; suggest to try upgrading or build a new sample project using latest&#010;&gt;&gt; release and see if it works there.&#010;&gt;&gt;&#010;&gt;&gt; Knowing something is still not working in latest release brings&#010;&gt;&gt; attention to us. Otherwise we dont have the time to look into this&#010;&gt;&gt; ourselves first when users are using very old versions of Camel.&#010;&gt;&gt;&#010;&gt;&gt; On Thu, Apr 20, 2017 at 3:37 PM, Robson Vargas Farias&#010;&gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt;&gt; &gt; Hi Claus, currently using 2.13.2 - and no, did not try other version.&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; 2017-04-20 10:33 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; What version of Camel do you use, and have you tried with a newer&#010;&gt;&gt; version&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; On Thu, Apr 20, 2017 at 3:29 PM, Robson Vargas Farias&#010;&gt;&gt; &gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt;&gt; &gt;&gt; &gt; Hi,&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; Can you help me where is my miss?&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; I've a camel context configured with a route containing a throttle&#010;&gt;&gt; which&#010;&gt;&gt; &gt;&gt; is&#010;&gt;&gt; &gt;&gt; &gt; pointing (ref) to a threadPool:&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; &lt;camel:camelContext id=""camel-server"" useMDCLogging=""true""&#010;&gt;&gt; &gt;&gt; &gt; allowUseOriginalMessage=""false""&gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; &lt;!-- thread pools --&gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; &lt;camel:threadPool id=""my_thread_pool""&#010;&gt;&gt; &gt;&gt; &gt; poolSize=""1""&#010;&gt;&gt; &gt;&gt; &gt; maxPoolSize=""4""&#010;&gt;&gt; &gt;&gt; &gt; maxQueueSize=""100""&#010;&gt;&gt; &gt;&gt; &gt; threadName=""my_thread_pool"" keepAliveTime=""0""&#010;&gt;&gt; &gt;&gt; &gt; rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS"" /&gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; ..&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; &lt;camel:route id=""my_route""&gt;&#010;&gt;&gt; &gt;&gt; &gt; &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&gt;&gt; &gt;&gt; &gt; &lt;camel:throttle timePeriodMillis=""1000"" executorServiceRef=""my_thread_&#010;&gt;&gt; &gt;&gt; pool""&gt;&#010;&gt;&gt; &gt;&gt; &gt; ..&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; but, when I start my application I got below error:&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; Caused By: java.lang.IllegalArgumentException: ExecutorServiceRef&#010;&gt;&gt; &gt;&gt; &gt; my_thread_pool not found in registry or as a thread pool profile.&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; If I change the throttle from a threadPool to a threadPoolProfile it&#010;&gt;&gt; &gt;&gt; works.&#010;&gt;&gt; &gt;&gt; &gt; So, why it is not working with a threadPool?&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; Thanks.&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; --&#010;&gt;&gt; &gt;&gt; Claus Ibsen&#010;&gt;&gt; &gt;&gt; -----------------&#010;&gt;&gt; &gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; &gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; --&#010;&gt;&gt; Claus Ibsen&#010;&gt;&gt; -----------------&#010;&gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt;&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
233,234,Claus Ibsen,            Re: throttle executorServiceRef not recognizing threadPool but only threadPoolProfile,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNnns6NBLq3ekFz_zpEhpS5tFKDuyN-1pLDQa7Cozky%2BzQ%40mail.gmail.com%3E,users,"Fri, 21 Apr 2017 08:53:35 GMT","I created an unit test that cannot reproduce the problem you have&#010;https://github.com/apache/camel/commit/9b3e7ebe58ae3e569d3869c476642937c09d0a0c&#010;&#010;On Fri, Apr 21, 2017 at 10:36 AM, Claus Ibsen &lt;claus.ibsen@gmail.com&gt; wrote:&#010;&gt; It ought to work as its using the same code the other EIPs would do,&#010;&gt; can you provide a very small sample project that reproduces this.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; On Thu, Apr 20, 2017 at 9:09 PM, Robson Vargas Farias&#010;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt;&gt; I've updated to the latest camel-x version which is 2.18.3 and the error&#010;&gt;&gt; still persists.&#010;&gt;&gt;&#010;&gt;&gt; Should the threadPool be declared in other place than into the camelContext&#010;&gt;&gt; ?&#010;&gt;&gt;&#010;&gt;&gt; ""..because of ExecutorServiceRef my_thread_pool not found in registry or as&#010;&gt;&gt; a thread pool profile.""&#010;&gt;&gt;&#010;&gt;&gt; 2017-04-20 10:44 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt;&gt;&#010;&gt;&gt;&gt; That is very old, its likely/possible fixed on newer version. So I&#010;&gt;&gt;&gt; suggest to try upgrading or build a new sample project using latest&#010;&gt;&gt;&gt; release and see if it works there.&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; Knowing something is still not working in latest release brings&#010;&gt;&gt;&gt; attention to us. Otherwise we dont have the time to look into this&#010;&gt;&gt;&gt; ourselves first when users are using very old versions of Camel.&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; On Thu, Apr 20, 2017 at 3:37 PM, Robson Vargas Farias&#010;&gt;&gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt;&gt;&gt; &gt; Hi Claus, currently using 2.13.2 - and no, did not try other version.&#010;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt; 2017-04-20 10:33 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt;&gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; What version of Camel do you use, and have you tried with a newer&#010;&gt;&gt;&gt; version&#010;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt; &gt;&gt; On Thu, Apr 20, 2017 at 3:29 PM, Robson Vargas Farias&#010;&gt;&gt;&gt; &gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt;&gt;&gt; &gt;&gt; &gt; Hi,&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; Can you help me where is my miss?&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; I've a camel context configured with a route containing a throttle&#010;&gt;&gt;&gt; which&#010;&gt;&gt;&gt; &gt;&gt; is&#010;&gt;&gt;&gt; &gt;&gt; &gt; pointing (ref) to a threadPool:&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:camelContext id=""camel-server"" useMDCLogging=""true""&#010;&gt;&gt;&gt; &gt;&gt; &gt; allowUseOriginalMessage=""false""&gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; &lt;!-- thread pools --&gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:threadPool id=""my_thread_pool""&#010;&gt;&gt;&gt; &gt;&gt; &gt; poolSize=""1""&#010;&gt;&gt;&gt; &gt;&gt; &gt; maxPoolSize=""4""&#010;&gt;&gt;&gt; &gt;&gt; &gt; maxQueueSize=""100""&#010;&gt;&gt;&gt; &gt;&gt; &gt; threadName=""my_thread_pool"" keepAliveTime=""0""&#010;&gt;&gt;&gt; &gt;&gt; &gt; rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS"" /&gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; ..&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:route id=""my_route""&gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:throttle timePeriodMillis=""1000"" executorServiceRef=""my_thread_&#010;&gt;&gt;&gt; &gt;&gt; pool""&gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; ..&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; but, when I start my application I got below error:&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; Caused By: java.lang.IllegalArgumentException: ExecutorServiceRef&#010;&gt;&gt;&gt; &gt;&gt; &gt; my_thread_pool not found in registry or as a thread pool profile.&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; If I change the throttle from a threadPool to a threadPoolProfile&#010;it&#010;&gt;&gt;&gt; &gt;&gt; works.&#010;&gt;&gt;&gt; &gt;&gt; &gt; So, why it is not working with a threadPool?&#010;&gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt;&gt; &gt;&gt; &gt; Thanks.&#010;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt; &gt;&gt; --&#010;&gt;&gt;&gt; &gt;&gt; Claus Ibsen&#010;&gt;&gt;&gt; &gt;&gt; -----------------&#010;&gt;&gt;&gt; &gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt;&gt; &gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt;&#010;&gt;&gt;&gt; --&#010;&gt;&gt;&gt; Claus Ibsen&#010;&gt;&gt;&gt; -----------------&#010;&gt;&gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
234,235,Robson Vargas Farias,              Re: throttle executorServiceRef not recognizing threadPool but only threadPoolProfile,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCALjbH94vJWg-o2yDoP%2BRwwb7CSWzcBL8E4Qx9%3D1B16Z_8T5muw%40mail.gmail.com%3E,users,"Fri, 21 Apr 2017 13:50:09 GMT","Hi Claus, thanks for the support. So, actually as I mentioned, my query is:&#010;""Why the throttle works only with ThreadPoolProfile and not with a&#010;ThreadPool"", in your sample, you used a threadpoolprofile and itÂ´s fine, it&#010;works for me too. But, try to run that test with a threadpool:&#010;&#010;&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;&#010;&lt;!-- Licensed to the Apache Software Foundation (ASF) under one or more&#010;contributor&#010;license agreements. See the NOTICE file distributed with this work for&#010;additional&#010;information regarding copyright ownership. The ASF licenses this file to&#010;You under the Apache License, Version 2.0 (the ""License""); you may not use&#010;this file except in compliance with the License. You may obtain a copy of&#010;the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required&#010;by applicable law or agreed to in writing, software distributed under the&#010;License is distributed on an ""AS IS"" BASIS, WITHOUT WARRANTIES OR&#010;CONDITIONS&#010;OF ANY KIND, either express or implied. See the License for the specific&#010;language governing permissions and limitations under the License. --&gt;&#010;&lt;beans xmlns=""http://www.springframework.org/schema/beans""&#010;xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""&#010;xsi:schemaLocation=""&#010;       http://www.springframework.org/schema/beans&#010;http://www.springframework.org/schema/beans/spring-beans.xsd&#010;       http://camel.apache.org/schema/spring&#010;http://camel.apache.org/schema/spring/camel-spring.xsd&#010;    ""&gt;&#010;&#010;&lt;camelContext xmlns=""http://camel.apache.org/schema/spring""&gt;&#010;&#010;&lt;threadPool id=""my_thread_pool"" poolSize=""1"" maxPoolSize=""4""&#010;maxQueueSize=""100"" threadName=""my_thread_pool"" keepAliveTime=""0""&#010;rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS"" /&gt;&#010;&#010;&lt;route&gt;&#010;&lt;from uri=""direct:start"" /&gt;&#010;&lt;throttle executorServiceRef=""my_thread_pool""&gt;&#010;&lt;constant&gt;2&lt;/constant&gt;&#010;&lt;to uri=""mock:result"" /&gt;&#010;&lt;/throttle&gt;&#010;&lt;/route&gt;&#010;&#010;&lt;/camelContext&gt;&#010;&#010;&lt;/beans&gt;&#010;&#010;&#010;2017-04-21 5:53 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&#010;&gt; I created an unit test that cannot reproduce the problem you have&#010;&gt; https://github.com/apache/camel/commit/9b3e7ebe58ae3e569d3869c4766429&#010;&gt; 37c09d0a0c&#010;&gt;&#010;&gt; On Fri, Apr 21, 2017 at 10:36 AM, Claus Ibsen &lt;claus.ibsen@gmail.com&gt;&#010;&gt; wrote:&#010;&gt; &gt; It ought to work as its using the same code the other EIPs would do,&#010;&gt; &gt; can you provide a very small sample project that reproduces this.&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; On Thu, Apr 20, 2017 at 9:09 PM, Robson Vargas Farias&#010;&gt; &gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; &gt;&gt; I've updated to the latest camel-x version which is 2.18.3 and the error&#010;&gt; &gt;&gt; still persists.&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; Should the threadPool be declared in other place than into the&#010;&gt; camelContext&#010;&gt; &gt;&gt; ?&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; ""..because of ExecutorServiceRef my_thread_pool not found in registry&#010;&gt; or as&#010;&gt; &gt;&gt; a thread pool profile.""&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; 2017-04-20 10:44 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt; That is very old, its likely/possible fixed on newer version. So I&#010;&gt; &gt;&gt;&gt; suggest to try upgrading or build a new sample project using latest&#010;&gt; &gt;&gt;&gt; release and see if it works there.&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt; Knowing something is still not working in latest release brings&#010;&gt; &gt;&gt;&gt; attention to us. Otherwise we dont have the time to look into this&#010;&gt; &gt;&gt;&gt; ourselves first when users are using very old versions of Camel.&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt; On Thu, Apr 20, 2017 at 3:37 PM, Robson Vargas Farias&#010;&gt; &gt;&gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; &gt;&gt;&gt; &gt; Hi Claus, currently using 2.13.2 - and no, did not try other version.&#010;&gt; &gt;&gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt; 2017-04-20 10:33 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt; &gt;&gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; What version of Camel do you use, and have you tried with a newer&#010;&gt; &gt;&gt;&gt; version&#010;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; On Thu, Apr 20, 2017 at 3:29 PM, Robson Vargas Farias&#010;&gt; &gt;&gt;&gt; &gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Hi,&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Can you help me where is my miss?&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; I've a camel context configured with a route containing a&#010;throttle&#010;&gt; &gt;&gt;&gt; which&#010;&gt; &gt;&gt;&gt; &gt;&gt; is&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; pointing (ref) to a threadPool:&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:camelContext id=""camel-server"" useMDCLogging=""true""&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; allowUseOriginalMessage=""false""&gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;!-- thread pools --&gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:threadPool id=""my_thread_pool""&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; poolSize=""1""&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; maxPoolSize=""4""&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; maxQueueSize=""100""&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; threadName=""my_thread_pool"" keepAliveTime=""0""&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS"" /&gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; ..&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:route id=""my_route""&gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:throttle timePeriodMillis=""1000""&#010;&gt; executorServiceRef=""my_thread_&#010;&gt; &gt;&gt;&gt; &gt;&gt; pool""&gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; ..&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; but, when I start my application I got below error:&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Caused By: java.lang.IllegalArgumentException: ExecutorServiceRef&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; my_thread_pool not found in registry or as a thread pool profile.&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; If I change the throttle from a threadPool to a threadPoolProfile&#010;&gt; it&#010;&gt; &gt;&gt;&gt; &gt;&gt; works.&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; So, why it is not working with a threadPool?&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Thanks.&#010;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt; &gt;&gt; --&#010;&gt; &gt;&gt;&gt; &gt;&gt; Claus Ibsen&#010;&gt; &gt;&gt;&gt; &gt;&gt; -----------------&#010;&gt; &gt;&gt;&gt; &gt;&gt; http://davsclaus.com @davsclaus&#010;&gt; &gt;&gt;&gt; &gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt;&gt; --&#010;&gt; &gt;&gt;&gt; Claus Ibsen&#010;&gt; &gt;&gt;&gt; -----------------&#010;&gt; &gt;&gt;&gt; http://davsclaus.com @davsclaus&#010;&gt; &gt;&gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; --&#010;&gt; &gt; Claus Ibsen&#010;&gt; &gt; -----------------&#010;&gt; &gt; http://davsclaus.com @davsclaus&#010;&gt; &gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&#010;"
235,236,Claus Ibsen,                Re: throttle executorServiceRef not recognizing threadPool but only threadPoolProfile,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yN%3DPF6EReQpkbxgfU13q0tFvux4ABdYCCR8iRHru-RJH%2BA%40mail.gmail.com%3E,users,"Fri, 21 Apr 2017 13:51:30 GMT","The thread pool must be a scheduled thread pool and not a regular pool&#010;&#010;On Fri, Apr 21, 2017 at 3:50 PM, Robson Vargas Farias&#010;&lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; Hi Claus, thanks for the support. So, actually as I mentioned, my query is:&#010;&gt; ""Why the throttle works only with ThreadPoolProfile and not with a&#010;&gt; ThreadPool"", in your sample, you used a threadpoolprofile and itÂ´s fine, it&#010;&gt; works for me too. But, try to run that test with a threadpool:&#010;&gt;&#010;&gt; &lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;&#010;&gt; &lt;!-- Licensed to the Apache Software Foundation (ASF) under one or more&#010;&gt; contributor&#010;&gt; license agreements. See the NOTICE file distributed with this work for&#010;&gt; additional&#010;&gt; information regarding copyright ownership. The ASF licenses this file to&#010;&gt; You under the Apache License, Version 2.0 (the ""License""); you may not use&#010;&gt; this file except in compliance with the License. You may obtain a copy of&#010;&gt; the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required&#010;&gt; by applicable law or agreed to in writing, software distributed under the&#010;&gt; License is distributed on an ""AS IS"" BASIS, WITHOUT WARRANTIES OR&#010;&gt; CONDITIONS&#010;&gt; OF ANY KIND, either express or implied. See the License for the specific&#010;&gt; language governing permissions and limitations under the License. --&gt;&#010;&gt; &lt;beans xmlns=""http://www.springframework.org/schema/beans""&#010;&gt; xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""&#010;&gt; xsi:schemaLocation=""&#010;&gt;        http://www.springframework.org/schema/beans&#010;&gt; http://www.springframework.org/schema/beans/spring-beans.xsd&#010;&gt;        http://camel.apache.org/schema/spring&#010;&gt; http://camel.apache.org/schema/spring/camel-spring.xsd&#010;&gt;     ""&gt;&#010;&gt;&#010;&gt; &lt;camelContext xmlns=""http://camel.apache.org/schema/spring""&gt;&#010;&gt;&#010;&gt; &lt;threadPool id=""my_thread_pool"" poolSize=""1"" maxPoolSize=""4""&#010;&gt; maxQueueSize=""100"" threadName=""my_thread_pool"" keepAliveTime=""0""&#010;&gt; rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS"" /&gt;&#010;&gt;&#010;&gt; &lt;route&gt;&#010;&gt; &lt;from uri=""direct:start"" /&gt;&#010;&gt; &lt;throttle executorServiceRef=""my_thread_pool""&gt;&#010;&gt; &lt;constant&gt;2&lt;/constant&gt;&#010;&gt; &lt;to uri=""mock:result"" /&gt;&#010;&gt; &lt;/throttle&gt;&#010;&gt; &lt;/route&gt;&#010;&gt;&#010;&gt; &lt;/camelContext&gt;&#010;&gt;&#010;&gt; &lt;/beans&gt;&#010;&gt;&#010;&gt;&#010;&gt; 2017-04-21 5:53 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt;&#010;&gt;&gt; I created an unit test that cannot reproduce the problem you have&#010;&gt;&gt; https://github.com/apache/camel/commit/9b3e7ebe58ae3e569d3869c4766429&#010;&gt;&gt; 37c09d0a0c&#010;&gt;&gt;&#010;&gt;&gt; On Fri, Apr 21, 2017 at 10:36 AM, Claus Ibsen &lt;claus.ibsen@gmail.com&gt;&#010;&gt;&gt; wrote:&#010;&gt;&gt; &gt; It ought to work as its using the same code the other EIPs would do,&#010;&gt;&gt; &gt; can you provide a very small sample project that reproduces this.&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; On Thu, Apr 20, 2017 at 9:09 PM, Robson Vargas Farias&#010;&gt;&gt; &gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt;&gt; &gt;&gt; I've updated to the latest camel-x version which is 2.18.3 and the error&#010;&gt;&gt; &gt;&gt; still persists.&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; Should the threadPool be declared in other place than into the&#010;&gt;&gt; camelContext&#010;&gt;&gt; &gt;&gt; ?&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; ""..because of ExecutorServiceRef my_thread_pool not found in registry&#010;&gt;&gt; or as&#010;&gt;&gt; &gt;&gt; a thread pool profile.""&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; 2017-04-20 10:44 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; That is very old, its likely/possible fixed on newer version. So I&#010;&gt;&gt; &gt;&gt;&gt; suggest to try upgrading or build a new sample project using latest&#010;&gt;&gt; &gt;&gt;&gt; release and see if it works there.&#010;&gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; Knowing something is still not working in latest release brings&#010;&gt;&gt; &gt;&gt;&gt; attention to us. Otherwise we dont have the time to look into this&#010;&gt;&gt; &gt;&gt;&gt; ourselves first when users are using very old versions of Camel.&#010;&gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; On Thu, Apr 20, 2017 at 3:37 PM, Robson Vargas Farias&#010;&gt;&gt; &gt;&gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt;&gt; &gt;&gt;&gt; &gt; Hi Claus, currently using 2.13.2 - and no, did not try other version.&#010;&gt;&gt; &gt;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt; 2017-04-20 10:33 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt;&gt; &gt;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; What version of Camel do you use, and have you tried with a&#010;newer&#010;&gt;&gt; &gt;&gt;&gt; version&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; On Thu, Apr 20, 2017 at 3:29 PM, Robson Vargas Farias&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Hi,&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Can you help me where is my miss?&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; I've a camel context configured with a route containing&#010;a throttle&#010;&gt;&gt; &gt;&gt;&gt; which&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; is&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; pointing (ref) to a threadPool:&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:camelContext id=""camel-server"" useMDCLogging=""true""&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; allowUseOriginalMessage=""false""&gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;!-- thread pools --&gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:threadPool id=""my_thread_pool""&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; poolSize=""1""&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; maxPoolSize=""4""&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; maxQueueSize=""100""&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; threadName=""my_thread_pool"" keepAliveTime=""0""&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS"" /&gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; ..&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:route id=""my_route""&gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:throttle timePeriodMillis=""1000""&#010;&gt;&gt; executorServiceRef=""my_thread_&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; pool""&gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; ..&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; but, when I start my application I got below error:&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Caused By: java.lang.IllegalArgumentException: ExecutorServiceRef&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; my_thread_pool not found in registry or as a thread pool&#010;profile.&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; If I change the throttle from a threadPool to a threadPoolProfile&#010;&gt;&gt; it&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; works.&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; So, why it is not working with a threadPool?&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Thanks.&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; --&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; Claus Ibsen&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; -----------------&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt;&gt; --&#010;&gt;&gt; &gt;&gt;&gt; Claus Ibsen&#010;&gt;&gt; &gt;&gt;&gt; -----------------&#010;&gt;&gt; &gt;&gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; &gt;&gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; --&#010;&gt;&gt; &gt; Claus Ibsen&#010;&gt;&gt; &gt; -----------------&#010;&gt;&gt; &gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; &gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; --&#010;&gt;&gt; Claus Ibsen&#010;&gt;&gt; -----------------&#010;&gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt;&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
236,237,Robson Vargas Farias,                  Re: throttle executorServiceRef not recognizing threadPool but only threadPoolProfile,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCALjbH97xzDCU%3DF3gwqkjnb_YurXzuKHM4Z%3DQR49JWDrJPLPZAQ%40mail.gmail.com%3E,users,"Fri, 21 Apr 2017 14:03:24 GMT","Right, but I still don't understood the point, sorry I'm kindly newer in&#010;Camel. as per I read on Camel documentation, the regular threadPool kind of&#010;""extend"" from a threadPoolProfile""&#010;&#010;""Create custom thread pool You can also use the &lt;threadPool/&gt; tag in Spring&#010;XML to create a specific thread pool (eg ExecutorService). Notice that any&#010;options you do not explicit define, will have Camel to use the default&#010;thread pool profile as fallback. For example if you omit setting the&#010;maxQueueSize then Camel will fallback and use the value from the default&#010;thread pool profiles, which by default is 1000."" -&#010;http://camel.apache.org/threading-model.html&#010;&#010;so, what exactly is the difference when you mean ""ThreadPoolProfile"" is&#010;scheduled and ""ThreadPool"" isn´t ?&#010;&#010;2017-04-21 10:51 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&#010;&gt; The thread pool must be a scheduled thread pool and not a regular pool&#010;&gt;&#010;&gt; On Fri, Apr 21, 2017 at 3:50 PM, Robson Vargas Farias&#010;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; &gt; Hi Claus, thanks for the support. So, actually as I mentioned, my query&#010;&gt; is:&#010;&gt; &gt; ""Why the throttle works only with ThreadPoolProfile and not with a&#010;&gt; &gt; ThreadPool"", in your sample, you used a threadpoolprofile and it´s fine,&#010;&gt; it&#010;&gt; &gt; works for me too. But, try to run that test with a threadpool:&#010;&gt; &gt;&#010;&gt; &gt; &lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;&#010;&gt; &gt; &lt;!-- Licensed to the Apache Software Foundation (ASF) under one or more&#010;&gt; &gt; contributor&#010;&gt; &gt; license agreements. See the NOTICE file distributed with this work for&#010;&gt; &gt; additional&#010;&gt; &gt; information regarding copyright ownership. The ASF licenses this file to&#010;&gt; &gt; You under the Apache License, Version 2.0 (the ""License""); you may not&#010;&gt; use&#010;&gt; &gt; this file except in compliance with the License. You may obtain a copy of&#010;&gt; &gt; the License at http://www.apache.org/licenses/LICENSE-2.0 Unless&#010;&gt; required&#010;&gt; &gt; by applicable law or agreed to in writing, software distributed under the&#010;&gt; &gt; License is distributed on an ""AS IS"" BASIS, WITHOUT WARRANTIES OR&#010;&gt; &gt; CONDITIONS&#010;&gt; &gt; OF ANY KIND, either express or implied. See the License for the specific&#010;&gt; &gt; language governing permissions and limitations under the License. --&gt;&#010;&gt; &gt; &lt;beans xmlns=""http://www.springframework.org/schema/beans""&#010;&gt; &gt; xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""&#010;&gt; &gt; xsi:schemaLocation=""&#010;&gt; &gt;        http://www.springframework.org/schema/beans&#010;&gt; &gt; http://www.springframework.org/schema/beans/spring-beans.xsd&#010;&gt; &gt;        http://camel.apache.org/schema/spring&#010;&gt; &gt; http://camel.apache.org/schema/spring/camel-spring.xsd&#010;&gt; &gt;     ""&gt;&#010;&gt; &gt;&#010;&gt; &gt; &lt;camelContext xmlns=""http://camel.apache.org/schema/spring""&gt;&#010;&gt; &gt;&#010;&gt; &gt; &lt;threadPool id=""my_thread_pool"" poolSize=""1"" maxPoolSize=""4""&#010;&gt; &gt; maxQueueSize=""100"" threadName=""my_thread_pool"" keepAliveTime=""0""&#010;&gt; &gt; rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS"" /&gt;&#010;&gt; &gt;&#010;&gt; &gt; &lt;route&gt;&#010;&gt; &gt; &lt;from uri=""direct:start"" /&gt;&#010;&gt; &gt; &lt;throttle executorServiceRef=""my_thread_pool""&gt;&#010;&gt; &gt; &lt;constant&gt;2&lt;/constant&gt;&#010;&gt; &gt; &lt;to uri=""mock:result"" /&gt;&#010;&gt; &gt; &lt;/throttle&gt;&#010;&gt; &gt; &lt;/route&gt;&#010;&gt; &gt;&#010;&gt; &gt; &lt;/camelContext&gt;&#010;&gt; &gt;&#010;&gt; &gt; &lt;/beans&gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; 2017-04-21 5:53 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt; &gt;&#010;&gt; &gt;&gt; I created an unit test that cannot reproduce the problem you have&#010;&gt; &gt;&gt; https://github.com/apache/camel/commit/9b3e7ebe58ae3e569d3869c4766429&#010;&gt; &gt;&gt; 37c09d0a0c&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; On Fri, Apr 21, 2017 at 10:36 AM, Claus Ibsen &lt;claus.ibsen@gmail.com&gt;&#010;&gt; &gt;&gt; wrote:&#010;&gt; &gt;&gt; &gt; It ought to work as its using the same code the other EIPs would do,&#010;&gt; &gt;&gt; &gt; can you provide a very small sample project that reproduces this.&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; On Thu, Apr 20, 2017 at 9:09 PM, Robson Vargas Farias&#010;&gt; &gt;&gt; &gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; &gt;&gt; &gt;&gt; I've updated to the latest camel-x version which is 2.18.3 and the&#010;&gt; error&#010;&gt; &gt;&gt; &gt;&gt; still persists.&#010;&gt; &gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt; Should the threadPool be declared in other place than into the&#010;&gt; &gt;&gt; camelContext&#010;&gt; &gt;&gt; &gt;&gt; ?&#010;&gt; &gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt; ""..because of ExecutorServiceRef my_thread_pool not found in registry&#010;&gt; &gt;&gt; or as&#010;&gt; &gt;&gt; &gt;&gt; a thread pool profile.""&#010;&gt; &gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt; 2017-04-20 10:44 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt; &gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; That is very old, its likely/possible fixed on newer version. So&#010;I&#010;&gt; &gt;&gt; &gt;&gt;&gt; suggest to try upgrading or build a new sample project using latest&#010;&gt; &gt;&gt; &gt;&gt;&gt; release and see if it works there.&#010;&gt; &gt;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; Knowing something is still not working in latest release brings&#010;&gt; &gt;&gt; &gt;&gt;&gt; attention to us. Otherwise we dont have the time to look into this&#010;&gt; &gt;&gt; &gt;&gt;&gt; ourselves first when users are using very old versions of Camel.&#010;&gt; &gt;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; On Thu, Apr 20, 2017 at 3:37 PM, Robson Vargas Farias&#010;&gt; &gt;&gt; &gt;&gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt; Hi Claus, currently using 2.13.2 - and no, did not try other&#010;&gt; version.&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt; 2017-04-20 10:33 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; What version of Camel do you use, and have you tried with&#010;a newer&#010;&gt; &gt;&gt; &gt;&gt;&gt; version&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; On Thu, Apr 20, 2017 at 3:29 PM, Robson Vargas Farias&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Hi,&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Can you help me where is my miss?&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; I've a camel context configured with a route containing&#010;a&#010;&gt; throttle&#010;&gt; &gt;&gt; &gt;&gt;&gt; which&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; is&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; pointing (ref) to a threadPool:&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:camelContext id=""camel-server"" useMDCLogging=""true""&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; allowUseOriginalMessage=""false""&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;!-- thread pools --&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:threadPool id=""my_thread_pool""&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; poolSize=""1""&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; maxPoolSize=""4""&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; maxQueueSize=""100""&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; threadName=""my_thread_pool"" keepAliveTime=""0""&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS""&#010;/&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; ..&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:route id=""my_route""&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:throttle timePeriodMillis=""1000""&#010;&gt; &gt;&gt; executorServiceRef=""my_thread_&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; pool""&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; ..&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; but, when I start my application I got below error:&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Caused By: java.lang.IllegalArgumentException:&#010;&gt; ExecutorServiceRef&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; my_thread_pool not found in registry or as a thread&#010;pool&#010;&gt; profile.&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; If I change the throttle from a threadPool to a&#010;&gt; threadPoolProfile&#010;&gt; &gt;&gt; it&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; works.&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; So, why it is not working with a threadPool?&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Thanks.&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; --&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; Claus Ibsen&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; -----------------&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; http://davsclaus.com @davsclaus&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt; &gt;&gt;&gt; --&#010;&gt; &gt;&gt; &gt;&gt;&gt; Claus Ibsen&#010;&gt; &gt;&gt; &gt;&gt;&gt; -----------------&#010;&gt; &gt;&gt; &gt;&gt;&gt; http://davsclaus.com @davsclaus&#010;&gt; &gt;&gt; &gt;&gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt; &gt;&gt; &gt;&gt;&gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt;&#010;&gt; &gt;&gt; &gt; --&#010;&gt; &gt;&gt; &gt; Claus Ibsen&#010;&gt; &gt;&gt; &gt; -----------------&#010;&gt; &gt;&gt; &gt; http://davsclaus.com @davsclaus&#010;&gt; &gt;&gt; &gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt;&#010;&gt; &gt;&gt; --&#010;&gt; &gt;&gt; Claus Ibsen&#010;&gt; &gt;&gt; -----------------&#010;&gt; &gt;&gt; http://davsclaus.com @davsclaus&#010;&gt; &gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt; &gt;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&#010;"
237,238,Claus Ibsen,                    Re: throttle executorServiceRef not recognizing threadPool but only threadPoolProfile,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNkcMDtwRhqn7SVEi72Fe3Qzex0KRL_64fD8xUdDTCS7rg%40mail.gmail.com%3E,users,"Fri, 21 Apr 2017 14:47:41 GMT","Set scheduled=""true"" on the &lt;threadPool&gt;&#010;&#010;On Fri, Apr 21, 2017 at 4:03 PM, Robson Vargas Farias&#010;&lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt; Right, but I still don't understood the point, sorry I'm kindly newer in&#010;&gt; Camel. as per I read on Camel documentation, the regular threadPool kind of&#010;&gt; ""extend"" from a threadPoolProfile""&#010;&gt;&#010;&gt; ""Create custom thread pool You can also use the &lt;threadPool/&gt; tag in Spring&#010;&gt; XML to create a specific thread pool (eg ExecutorService). Notice that any&#010;&gt; options you do not explicit define, will have Camel to use the default&#010;&gt; thread pool profile as fallback. For example if you omit setting the&#010;&gt; maxQueueSize then Camel will fallback and use the value from the default&#010;&gt; thread pool profiles, which by default is 1000."" -&#010;&gt; http://camel.apache.org/threading-model.html&#010;&gt;&#010;&gt; so, what exactly is the difference when you mean ""ThreadPoolProfile"" is&#010;&gt; scheduled and ""ThreadPool"" isn´t ?&#010;&gt;&#010;&gt; 2017-04-21 10:51 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt;&#010;&gt;&gt; The thread pool must be a scheduled thread pool and not a regular pool&#010;&gt;&gt;&#010;&gt;&gt; On Fri, Apr 21, 2017 at 3:50 PM, Robson Vargas Farias&#010;&gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt;&gt; &gt; Hi Claus, thanks for the support. So, actually as I mentioned, my query&#010;&gt;&gt; is:&#010;&gt;&gt; &gt; ""Why the throttle works only with ThreadPoolProfile and not with a&#010;&gt;&gt; &gt; ThreadPool"", in your sample, you used a threadpoolprofile and it´s fine,&#010;&gt;&gt; it&#010;&gt;&gt; &gt; works for me too. But, try to run that test with a threadpool:&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; &lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;&#010;&gt;&gt; &gt; &lt;!-- Licensed to the Apache Software Foundation (ASF) under one or more&#010;&gt;&gt; &gt; contributor&#010;&gt;&gt; &gt; license agreements. See the NOTICE file distributed with this work for&#010;&gt;&gt; &gt; additional&#010;&gt;&gt; &gt; information regarding copyright ownership. The ASF licenses this file to&#010;&gt;&gt; &gt; You under the Apache License, Version 2.0 (the ""License""); you may not&#010;&gt;&gt; use&#010;&gt;&gt; &gt; this file except in compliance with the License. You may obtain a copy of&#010;&gt;&gt; &gt; the License at http://www.apache.org/licenses/LICENSE-2.0 Unless&#010;&gt;&gt; required&#010;&gt;&gt; &gt; by applicable law or agreed to in writing, software distributed under the&#010;&gt;&gt; &gt; License is distributed on an ""AS IS"" BASIS, WITHOUT WARRANTIES OR&#010;&gt;&gt; &gt; CONDITIONS&#010;&gt;&gt; &gt; OF ANY KIND, either express or implied. See the License for the specific&#010;&gt;&gt; &gt; language governing permissions and limitations under the License. --&gt;&#010;&gt;&gt; &gt; &lt;beans xmlns=""http://www.springframework.org/schema/beans""&#010;&gt;&gt; &gt; xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""&#010;&gt;&gt; &gt; xsi:schemaLocation=""&#010;&gt;&gt; &gt;        http://www.springframework.org/schema/beans&#010;&gt;&gt; &gt; http://www.springframework.org/schema/beans/spring-beans.xsd&#010;&gt;&gt; &gt;        http://camel.apache.org/schema/spring&#010;&gt;&gt; &gt; http://camel.apache.org/schema/spring/camel-spring.xsd&#010;&gt;&gt; &gt;     ""&gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; &lt;camelContext xmlns=""http://camel.apache.org/schema/spring""&gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; &lt;threadPool id=""my_thread_pool"" poolSize=""1"" maxPoolSize=""4""&#010;&gt;&gt; &gt; maxQueueSize=""100"" threadName=""my_thread_pool"" keepAliveTime=""0""&#010;&gt;&gt; &gt; rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS"" /&gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; &lt;route&gt;&#010;&gt;&gt; &gt; &lt;from uri=""direct:start"" /&gt;&#010;&gt;&gt; &gt; &lt;throttle executorServiceRef=""my_thread_pool""&gt;&#010;&gt;&gt; &gt; &lt;constant&gt;2&lt;/constant&gt;&#010;&gt;&gt; &gt; &lt;to uri=""mock:result"" /&gt;&#010;&gt;&gt; &gt; &lt;/throttle&gt;&#010;&gt;&gt; &gt; &lt;/route&gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; &lt;/camelContext&gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; &lt;/beans&gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt; 2017-04-21 5:53 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; I created an unit test that cannot reproduce the problem you have&#010;&gt;&gt; &gt;&gt; https://github.com/apache/camel/commit/9b3e7ebe58ae3e569d3869c4766429&#010;&gt;&gt; &gt;&gt; 37c09d0a0c&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; On Fri, Apr 21, 2017 at 10:36 AM, Claus Ibsen &lt;claus.ibsen@gmail.com&gt;&#010;&gt;&gt; &gt;&gt; wrote:&#010;&gt;&gt; &gt;&gt; &gt; It ought to work as its using the same code the other EIPs would do,&#010;&gt;&gt; &gt;&gt; &gt; can you provide a very small sample project that reproduces this.&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; On Thu, Apr 20, 2017 at 9:09 PM, Robson Vargas Farias&#010;&gt;&gt; &gt;&gt; &gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt;&gt; &gt;&gt; &gt;&gt; I've updated to the latest camel-x version which is 2.18.3 and&#010;the&#010;&gt;&gt; error&#010;&gt;&gt; &gt;&gt; &gt;&gt; still persists.&#010;&gt;&gt; &gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt; Should the threadPool be declared in other place than into the&#010;&gt;&gt; &gt;&gt; camelContext&#010;&gt;&gt; &gt;&gt; &gt;&gt; ?&#010;&gt;&gt; &gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt; ""..because of ExecutorServiceRef my_thread_pool not found in registry&#010;&gt;&gt; &gt;&gt; or as&#010;&gt;&gt; &gt;&gt; &gt;&gt; a thread pool profile.""&#010;&gt;&gt; &gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt; 2017-04-20 10:44 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt;&gt; &gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; That is very old, its likely/possible fixed on newer version.&#010;So I&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; suggest to try upgrading or build a new sample project using&#010;latest&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; release and see if it works there.&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; Knowing something is still not working in latest release brings&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; attention to us. Otherwise we dont have the time to look into&#010;this&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; ourselves first when users are using very old versions of Camel.&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; On Thu, Apr 20, 2017 at 3:37 PM, Robson Vargas Farias&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt; Hi Claus, currently using 2.13.2 - and no, did not try&#010;other&#010;&gt;&gt; version.&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt; 2017-04-20 10:33 GMT-03:00 Claus Ibsen &lt;claus.ibsen@gmail.com&gt;:&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; What version of Camel do you use, and have you tried&#010;with a newer&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; version&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; On Thu, Apr 20, 2017 at 3:29 PM, Robson Vargas Farias&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &lt;robsonvargasfarias@gmail.com&gt; wrote:&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Hi,&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Can you help me where is my miss?&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; I've a camel context configured with a route&#010;containing a&#010;&gt;&gt; throttle&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; which&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; is&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; pointing (ref) to a threadPool:&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:camelContext id=""camel-server"" useMDCLogging=""true""&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; allowUseOriginalMessage=""false""&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;!-- thread pools --&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:threadPool id=""my_thread_pool""&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; poolSize=""1""&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; maxPoolSize=""4""&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; maxQueueSize=""100""&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; threadName=""my_thread_pool"" keepAliveTime=""0""&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; rejectedPolicy=""DiscardOldest"" timeUnit=""SECONDS""&#010;/&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; ..&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:route id=""my_route""&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:from ref=""mq_endpoint"" /&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; &lt;camel:throttle timePeriodMillis=""1000""&#010;&gt;&gt; &gt;&gt; executorServiceRef=""my_thread_&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; pool""&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; ..&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; but, when I start my application I got below&#010;error:&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Caused By: java.lang.IllegalArgumentException:&#010;&gt;&gt; ExecutorServiceRef&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; my_thread_pool not found in registry or as a&#010;thread pool&#010;&gt;&gt; profile.&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; If I change the throttle from a threadPool to&#010;a&#010;&gt;&gt; threadPoolProfile&#010;&gt;&gt; &gt;&gt; it&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; works.&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; So, why it is not working with a threadPool?&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; &gt; Thanks.&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; --&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; Claus Ibsen&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; -----------------&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; --&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; Claus Ibsen&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; -----------------&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt; &gt;&gt; &gt;&gt;&gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt;&#010;&gt;&gt; &gt;&gt; &gt; --&#010;&gt;&gt; &gt;&gt; &gt; Claus Ibsen&#010;&gt;&gt; &gt;&gt; &gt; -----------------&#010;&gt;&gt; &gt;&gt; &gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; &gt;&gt; &gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt; &gt;&gt; --&#010;&gt;&gt; &gt;&gt; Claus Ibsen&#010;&gt;&gt; &gt;&gt; -----------------&#010;&gt;&gt; &gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; &gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt; &gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; --&#010;&gt;&gt; Claus Ibsen&#010;&gt;&gt; -----------------&#010;&gt;&gt; http://davsclaus.com @davsclaus&#010;&gt;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&gt;&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
238,239,Karel Bernolet,JAXBException while parsing camel-spring files,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAOuGT5pdxQh5SOAE-8F%3DfR5TRsfbYnUEVM-OynozHan2OHWFHQ%40mail.gmail.com%3E,users,"Thu, 20 Apr 2017 18:03:42 GMT","Hi,&#010;&#010;While upgrading a legacy application to camel 2.18.3, spring 4, ... we&#010;stumbled upon an issue while trying to parse camel routes in spring xml&#010;DSL. The stacktrace can be found below. I believe this is due to CAMEL-9521&#010;&lt;https://issues.apache.org/jira/browse/CAMEL-9521&gt;.&#010;By removing the class org.apache.camel.osgi.CamelNameSpaceHandler&#010;&lt;https://fisheye.apache.org/changelog/camel-git?cs=20a85773b751ebe726664b4be866423fb18463cc&gt;,&#010;the&#010;import packages on *org.apache.camel.model.config* etc got removed from the&#010;Manifest.&#010;As the *SpringModelJAXBContextFactory* extends from the&#010;*DefaultModelJAXBContextFactory*, it looks for an ObjectFactory or&#010;jaxb.index in packages it does no longer include.&#010;Is the behaviour expected after removal of spring-dm?&#010;What is the recommended behaviour or workaround?&#010;The application runs in a apache-felix OSGI environment.&#010;&#010;Regards,&#010;Karel&#010;&#010;&#010;2017-04-20T18:55:32,921+0200 [EclipseGeminiBlueprintExtenderThread-1] DEBUG&#010;&gt; NamespacePlugins - Trying to resolving namespace handler for&#010;&gt; http://camel.apache.org/schema/spring - User= - Batch= - trace-id=&#010;&gt;&#010;&gt; 2017-04-20T18:55:32,936+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt; DEBUG NamespacePlugins - Namespace handler for http://camel.apache.org/&#010;&gt; schema/spring found inside bundle camel-spring (org.apache.camel.camel-spring)&#010;&gt; - User= - Batch= - trace-id=&#010;&gt;&#010;&gt; 2017-04-20T18:55:32,976+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt; DEBUG OsgiBundleXmlApplicationContext - Pre refresh error - User= -&#010;&gt; Batch= - trace-id=&#010;&gt;&#010;&gt; org.springframework.beans.factory.parsing.BeanDefinitionParsingException:&#010;&gt; Configuration problem: Failed to import bean definitions from relative&#010;&gt; location [useradmin-external-service-siebel-routes.xml]&#010;&gt;&#010;&gt; Offending resource: URL [bundle://40.0:0/OSGI-INF/&#010;&gt; blueprint/useradmin-external-service-siebel-context.xml]; nested&#010;&gt; exception is org.springframework.beans.factory.BeanDefinitionStoreException:&#010;&gt; Failed to create the JAXB binder; nested exception is&#010;&gt; javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory&#010;&gt; could not be instantiated: javax.xml.bind.JAXBException:&#010;&gt; ""org.apache.camel.model.config"" doesnt contain ObjectFactory.class or&#010;&gt; jaxb.index&#010;&gt;&#010;&gt; - with linked exception:&#010;&gt;&#010;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.parsing.&#010;&gt; FailFastProblemReporter.error(FailFastProblemReporter.java:70)&#010;&gt;&#010;&gt;                 at org.springframework.beans.&#010;&gt; factory.parsing.ReaderContext.error(ReaderContext.java:85)&#010;&gt;&#010;&gt;                 at org.springframework.beans.&#010;&gt; factory.parsing.ReaderContext.error(ReaderContext.java:76)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:255)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.parseDefaultElement(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:180)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:165)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:138)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:94)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.registerBeanDefinitions(&#010;&gt; XmlBeanDefinitionReader.java:508)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.doLoadBeanDefinitions(&#010;&gt; XmlBeanDefinitionReader.java:392)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt; 336)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt; 304)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.support.&#010;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt; AbstractBeanDefinitionReader.java:181)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.support.&#010;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt; AbstractBeanDefinitionReader.java:217)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.support.&#010;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt; AbstractBeanDefinitionReader.java:188)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; OsgiBundleXmlApplicationContext.loadBeanDefinitions(&#010;&gt; OsgiBundleXmlApplicationContext.java:170)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; OsgiBundleXmlApplicationContext.loadBeanDefinitions(&#010;&gt; OsgiBundleXmlApplicationContext.java:140)&#010;&gt;&#010;&gt;                 at org.springframework.context.support.&#010;&gt; AbstractRefreshableApplicationContext.refreshBeanFactory(&#010;&gt; AbstractRefreshableApplicationContext.java:129)&#010;&gt;&#010;&gt;                 at org.springframework.context.support.&#010;&gt; AbstractApplicationContext.obtainFreshBeanFactory(&#010;&gt; AbstractApplicationContext.java:609)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; AbstractDelegatedExecutionApplicationContext.access$800(&#010;&gt; AbstractDelegatedExecutionApplicationContext.java:60)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; AbstractDelegatedExecutionApplicationContext$3.run(&#010;&gt; AbstractDelegatedExecutionApplicationContext.java:242)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.&#010;&gt; util.internal.PrivilegedUtils.executeWithCustomTCCL(&#010;&gt; PrivilegedUtils.java:85)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; AbstractDelegatedExecutionApplicationContext.startRefresh(&#010;&gt; AbstractDelegatedExecutionApplicationContext.java:220)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.extender.internal.&#010;&gt; dependencies.startup.DependencyWaiterApplicationContextExecutor.stageOne(&#010;&gt; DependencyWaiterApplicationContextExecutor.java:224)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.extender.internal.&#010;&gt; dependencies.startup.DependencyWaiterApplicationContextExecutor.refresh(&#010;&gt; DependencyWaiterApplicationContextExecutor.java:177)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; AbstractDelegatedExecutionApplicationContext.refresh(&#010;&gt; AbstractDelegatedExecutionApplicationContext.java:157)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.&#010;&gt; extender.internal.activator.LifecycleManager$1.run(&#010;&gt; LifecycleManager.java:207)&#010;&gt;&#010;&gt;                 at java.util.concurrent.ThreadPoolExecutor.runWorker(&#010;&gt; ThreadPoolExecutor.java:1142)&#010;&gt;&#010;&gt;                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(&#010;&gt; ThreadPoolExecutor.java:617)&#010;&gt;&#010;&gt;                 at java.lang.Thread.run(Thread.java:745)&#010;&gt;&#010;&gt; Caused by: org.springframework.beans.factory.BeanDefinitionStoreException:&#010;&gt; Failed to create the JAXB binder; nested exception is&#010;&gt; javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory&#010;&gt; could not be instantiated: javax.xml.bind.JAXBException:&#010;&gt; ""org.apache.camel.model.config"" doesnt contain ObjectFactory.class or&#010;&gt; jaxb.index&#010;&gt;&#010;&gt; - with linked exception:&#010;&gt;&#010;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&#010;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler$&#010;&gt; RouteContextDefinitionParser.doParse(CamelNamespaceHandler.java:281)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; AbstractSingleBeanDefinitionParser.parseInternal(&#010;&gt; AbstractSingleBeanDefinitionParser.java:85)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; AbstractBeanDefinitionParser.parse(AbstractBeanDefinitionParser.java:61)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:74)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; BeanDefinitionParserDelegate.parseCustomElement(&#010;&gt; BeanDefinitionParserDelegate.java:1411)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; BeanDefinitionParserDelegate.parseCustomElement(&#010;&gt; BeanDefinitionParserDelegate.java:1401)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:168)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:138)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:94)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.registerBeanDefinitions(&#010;&gt; XmlBeanDefinitionReader.java:508)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.doLoadBeanDefinitions(&#010;&gt; XmlBeanDefinitionReader.java:392)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt; 336)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt; 304)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:239)&#010;&gt;&#010;&gt;                 ... 26 more&#010;&gt;&#010;&gt; Caused by: javax.xml.bind.JAXBException: Provider&#010;&gt; com.sun.xml.internal.bind.v2.ContextFactory could not be instantiated:&#010;&gt; javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt; contain ObjectFactory.class or jaxb.index&#010;&gt;&#010;&gt; - with linked exception:&#010;&gt;&#010;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&#010;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt; java:146)&#010;&gt;&#010;&gt;                 at javax.xml.bind.ContextFinder.&#010;&gt; find(ContextFinder.java:356)&#010;&gt;&#010;&gt;                 at javax.xml.bind.JAXBContext.&#010;&gt; newInstance(JAXBContext.java:431)&#010;&gt;&#010;&gt;                 at javax.xml.bind.JAXBContext.&#010;&gt; newInstance(JAXBContext.java:394)&#010;&gt;&#010;&gt;                 at org.apache.camel.impl.DefaultModelJAXBContextFactory&#010;&gt; .newJAXBContext(DefaultModelJAXBContextFactory.java:31)&#010;&gt;&#010;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler.&#010;&gt; getJaxbContext(CamelNamespaceHandler.java:217)&#010;&gt;&#010;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler$&#010;&gt; RouteContextDefinitionParser.doParse(CamelNamespaceHandler.java:279)&#010;&gt;&#010;&gt;                 ... 39 more&#010;&gt;&#010;&gt; Caused by: javax.xml.bind.JAXBException: ""org.apache.camel.model.config""&#010;&gt; doesnt contain ObjectFactory.class or jaxb.index&#010;&gt;&#010;&gt;                 at com.sun.xml.internal.bind.v2.&#010;&gt; ContextFactory.createContext(ContextFactory.java:266)&#010;&gt;&#010;&gt;                 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native&#010;&gt; Method)&#010;&gt;&#010;&gt;                 at sun.reflect.NativeMethodAccessorImpl.invoke(&#010;&gt; NativeMethodAccessorImpl.java:62)&#010;&gt;&#010;&gt;                 at sun.reflect.DelegatingMethodAccessorImpl.invoke(&#010;&gt; DelegatingMethodAccessorImpl.java:43)&#010;&gt;&#010;&gt;                 at java.lang.reflect.Method.invoke(Method.java:498)&#010;&gt;&#010;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt; java:171)&#010;&gt;&#010;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt; java:131)&#010;&gt;&#010;&gt;                 ... 45 more&#010;&gt;&#010;&gt; 2017-04-20T18:55:32,981+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt; ERROR ExtenderConfiguration - Application context refresh failed (&#010;&gt; OsgiBundleXmlApplicationContext(bundle=be.isabel.useradmin-external-service-siebel,&#010;&gt; config=OSGI-INF/blueprint/useradmin-external-service-&#010;&gt; siebel-beans.xml,OSGI-INF/blueprint/useradmin-external-&#010;&gt; service-siebel-context.xml,OSGI-INF/blueprint/useradmin-&#010;&gt; external-service-siebel-osgi-context.xml,OSGI-INF/&#010;&gt; blueprint/useradmin-external-service-siebel-routes.xml)) - User= - Batch=&#010;&gt; - trace-id=&#010;&gt;&#010;&gt; org.springframework.beans.factory.parsing.BeanDefinitionParsingException:&#010;&gt; Configuration problem: Failed to import bean definitions from relative&#010;&gt; location [useradmin-external-service-siebel-routes.xml]&#010;&gt;&#010;&gt; Offending resource: URL [bundle://40.0:0/OSGI-INF/&#010;&gt; blueprint/useradmin-external-service-siebel-context.xml]; nested&#010;&gt; exception is org.springframework.beans.factory.BeanDefinitionStoreException:&#010;&gt; Failed to create the JAXB binder; nested exception is&#010;&gt; javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory&#010;&gt; could not be instantiated: javax.xml.bind.JAXBException:&#010;&gt; ""org.apache.camel.model.config"" doesnt contain ObjectFactory.class or&#010;&gt; jaxb.index&#010;&gt;&#010;&gt; - with linked exception:&#010;&gt;&#010;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.parsing.&#010;&gt; FailFastProblemReporter.error(FailFastProblemReporter.java:70)&#010;&gt;&#010;&gt;                 at org.springframework.beans.&#010;&gt; factory.parsing.ReaderContext.error(ReaderContext.java:85)&#010;&gt;&#010;&gt;                 at org.springframework.beans.&#010;&gt; factory.parsing.ReaderContext.error(ReaderContext.java:76)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:255)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.parseDefaultElement(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:180)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:165)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:138)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:94)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.registerBeanDefinitions(&#010;&gt; XmlBeanDefinitionReader.java:508)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.doLoadBeanDefinitions(&#010;&gt; XmlBeanDefinitionReader.java:392)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt; 336)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt; 304)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.support.&#010;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt; AbstractBeanDefinitionReader.java:181)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.support.&#010;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt; AbstractBeanDefinitionReader.java:217)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.support.&#010;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt; AbstractBeanDefinitionReader.java:188)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; OsgiBundleXmlApplicationContext.loadBeanDefinitions(&#010;&gt; OsgiBundleXmlApplicationContext.java:170)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; OsgiBundleXmlApplicationContext.loadBeanDefinitions(&#010;&gt; OsgiBundleXmlApplicationContext.java:140)&#010;&gt;&#010;&gt;                 at org.springframework.context.support.&#010;&gt; AbstractRefreshableApplicationContext.refreshBeanFactory(&#010;&gt; AbstractRefreshableApplicationContext.java:129)&#010;&gt;&#010;&gt;                 at org.springframework.context.support.&#010;&gt; AbstractApplicationContext.obtainFreshBeanFactory(&#010;&gt; AbstractApplicationContext.java:609)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; AbstractDelegatedExecutionApplicationContext.access$800(&#010;&gt; AbstractDelegatedExecutionApplicationContext.java:60)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; AbstractDelegatedExecutionApplicationContext$3.run(&#010;&gt; AbstractDelegatedExecutionApplicationContext.java:242)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.&#010;&gt; util.internal.PrivilegedUtils.executeWithCustomTCCL(&#010;&gt; PrivilegedUtils.java:85)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; AbstractDelegatedExecutionApplicationContext.startRefresh(&#010;&gt; AbstractDelegatedExecutionApplicationContext.java:220)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.extender.internal.&#010;&gt; dependencies.startup.DependencyWaiterApplicationContextExecutor.stageOne(&#010;&gt; DependencyWaiterApplicationContextExecutor.java:224)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.extender.internal.&#010;&gt; dependencies.startup.DependencyWaiterApplicationContextExecutor.refresh(&#010;&gt; DependencyWaiterApplicationContextExecutor.java:177)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; AbstractDelegatedExecutionApplicationContext.refresh(&#010;&gt; AbstractDelegatedExecutionApplicationContext.java:157)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.&#010;&gt; extender.internal.activator.LifecycleManager$1.run(&#010;&gt; LifecycleManager.java:207)&#010;&gt;&#010;&gt;                 at java.util.concurrent.ThreadPoolExecutor.runWorker(&#010;&gt; ThreadPoolExecutor.java:1142)&#010;&gt;&#010;&gt;                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(&#010;&gt; ThreadPoolExecutor.java:617)&#010;&gt;&#010;&gt;                 at java.lang.Thread.run(Thread.java:745)&#010;&gt;&#010;&gt; Caused by: org.springframework.beans.factory.BeanDefinitionStoreException:&#010;&gt; Failed to create the JAXB binder; nested exception is&#010;&gt; javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory&#010;&gt; could not be instantiated: javax.xml.bind.JAXBException:&#010;&gt; ""org.apache.camel.model.config"" doesnt contain ObjectFactory.class or&#010;&gt; jaxb.index&#010;&gt;&#010;&gt; - with linked exception:&#010;&gt;&#010;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&#010;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler$&#010;&gt; RouteContextDefinitionParser.doParse(CamelNamespaceHandler.java:281)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; AbstractSingleBeanDefinitionParser.parseInternal(&#010;&gt; AbstractSingleBeanDefinitionParser.java:85)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; AbstractBeanDefinitionParser.parse(AbstractBeanDefinitionParser.java:61)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:74)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; BeanDefinitionParserDelegate.parseCustomElement(&#010;&gt; BeanDefinitionParserDelegate.java:1411)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; BeanDefinitionParserDelegate.parseCustomElement(&#010;&gt; BeanDefinitionParserDelegate.java:1401)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:168)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:138)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:94)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.registerBeanDefinitions(&#010;&gt; XmlBeanDefinitionReader.java:508)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.doLoadBeanDefinitions(&#010;&gt; XmlBeanDefinitionReader.java:392)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt; 336)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt; 304)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:239)&#010;&gt;&#010;&gt;                 ... 26 more&#010;&gt;&#010;&gt; Caused by: javax.xml.bind.JAXBException: Provider&#010;&gt; com.sun.xml.internal.bind.v2.ContextFactory could not be instantiated:&#010;&gt; javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt; contain ObjectFactory.class or jaxb.index&#010;&gt;&#010;&gt; - with linked exception:&#010;&gt;&#010;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&#010;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt; java:146)&#010;&gt;&#010;&gt;                 at javax.xml.bind.ContextFinder.&#010;&gt; find(ContextFinder.java:356)&#010;&gt;&#010;&gt;                 at javax.xml.bind.JAXBContext.&#010;&gt; newInstance(JAXBContext.java:431)&#010;&gt;&#010;&gt;                 at javax.xml.bind.JAXBContext.&#010;&gt; newInstance(JAXBContext.java:394)&#010;&gt;&#010;&gt;                 at org.apache.camel.impl.DefaultModelJAXBContextFactory&#010;&gt; .newJAXBContext(DefaultModelJAXBContextFactory.java:31)&#010;&gt;&#010;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler.&#010;&gt; getJaxbContext(CamelNamespaceHandler.java:217)&#010;&gt;&#010;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler$&#010;&gt; RouteContextDefinitionParser.doParse(CamelNamespaceHandler.java:279)&#010;&gt;&#010;&gt;                 ... 39 more&#010;&gt;&#010;&gt; Caused by: javax.xml.bind.JAXBException: ""org.apache.camel.model.config""&#010;&gt; doesnt contain ObjectFactory.class or jaxb.index&#010;&gt;&#010;&gt;                 at com.sun.xml.internal.bind.v2.&#010;&gt; ContextFactory.createContext(ContextFactory.java:266)&#010;&gt;&#010;&gt;                 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native&#010;&gt; Method)&#010;&gt;&#010;&gt;                 at sun.reflect.NativeMethodAccessorImpl.invoke(&#010;&gt; NativeMethodAccessorImpl.java:62)&#010;&gt;&#010;&gt;                 at sun.reflect.DelegatingMethodAccessorImpl.invoke(&#010;&gt; DelegatingMethodAccessorImpl.java:43)&#010;&gt;&#010;&gt;                 at java.lang.reflect.Method.invoke(Method.java:498)&#010;&gt;&#010;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt; java:171)&#010;&gt;&#010;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt; java:131)&#010;&gt;&#010;&gt;                 ... 45 more&#010;&gt;&#010;&gt; 2017-04-20T18:55:32,983+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt; DEBUG DependencyWaiterApplicationContextExecutor - Cancelled dependency&#010;&gt; watchdog... - User= - Batch= - trace-id=&#010;&gt;&#010;&gt; 2017-04-20T18:55:32,983+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt; DEBUG DependencyWaiterApplicationContextExecutor - Closing appCtx for&#010;&gt; OsgiBundleXmlApplicationContext(bundle=be.isabel.useradmin-external-service-siebel,&#010;&gt; config=OSGI-INF/blueprint/useradmin-external-service-&#010;&gt; siebel-beans.xml,OSGI-INF/blueprint/useradmin-external-&#010;&gt; service-siebel-context.xml,OSGI-INF/blueprint/useradmin-&#010;&gt; external-service-siebel-osgi-context.xml,OSGI-INF/&#010;&gt; blueprint/useradmin-external-service-siebel-routes.xml) - User= - Batch=&#010;&gt; - trace-id=&#010;&gt;&#010;&gt; 2017-04-20T18:55:32,983+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt; DEBUG DependencyWaiterApplicationContextExecutor - Cleaning up appCtx&#010;&gt; OsgiBundleXmlApplicationContext(bundle=be.isabel.useradmin-external-service-siebel,&#010;&gt; config=OSGI-INF/blueprint/useradmin-external-service-&#010;&gt; siebel-beans.xml,OSGI-INF/blueprint/useradmin-external-&#010;&gt; service-siebel-context.xml,OSGI-INF/blueprint/useradmin-&#010;&gt; external-service-siebel-osgi-context.xml,OSGI-INF/&#010;&gt; blueprint/useradmin-external-service-siebel-routes.xml) - User= - Batch=&#010;&gt; - trace-id=&#010;&gt;&#010;&gt; 2017-04-20T18:55:32,984+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt; ERROR DependencyWaiterApplicationContextExecutor - Unable to create&#010;&gt; application context for [be.isabel.useradmin-external-service-siebel],&#010;&gt; unsatisfied dependencies: none - User= - Batch= - trace-id=&#010;&gt;&#010;&gt; org.springframework.beans.factory.parsing.BeanDefinitionParsingException:&#010;&gt; Configuration problem: Failed to import bean definitions from relative&#010;&gt; location [useradmin-external-service-siebel-routes.xml]&#010;&gt;&#010;&gt; Offending resource: URL [bundle://40.0:0/OSGI-INF/&#010;&gt; blueprint/useradmin-external-service-siebel-context.xml]; nested&#010;&gt; exception is org.springframework.beans.factory.BeanDefinitionStoreException:&#010;&gt; Failed to create the JAXB binder; nested exception is&#010;&gt; javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory&#010;&gt; could not be instantiated: javax.xml.bind.JAXBException:&#010;&gt; ""org.apache.camel.model.config"" doesnt contain ObjectFactory.class or&#010;&gt; jaxb.index&#010;&gt;&#010;&gt; - with linked exception:&#010;&gt;&#010;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.parsing.&#010;&gt; FailFastProblemReporter.error(FailFastProblemReporter.java:70)&#010;&gt;&#010;&gt;                 at org.springframework.beans.&#010;&gt; factory.parsing.ReaderContext.error(ReaderContext.java:85)&#010;&gt;&#010;&gt;                 at org.springframework.beans.&#010;&gt; factory.parsing.ReaderContext.error(ReaderContext.java:76)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:255)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.parseDefaultElement(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:180)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:165)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:138)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:94)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.registerBeanDefinitions(&#010;&gt; XmlBeanDefinitionReader.java:508)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.doLoadBeanDefinitions(&#010;&gt; XmlBeanDefinitionReader.java:392)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt; 336)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt; 304)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.support.&#010;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt; AbstractBeanDefinitionReader.java:181)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.support.&#010;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt; AbstractBeanDefinitionReader.java:217)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.support.&#010;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt; AbstractBeanDefinitionReader.java:188)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; OsgiBundleXmlApplicationContext.loadBeanDefinitions(&#010;&gt; OsgiBundleXmlApplicationContext.java:170)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; OsgiBundleXmlApplicationContext.loadBeanDefinitions(&#010;&gt; OsgiBundleXmlApplicationContext.java:140)&#010;&gt;&#010;&gt;                 at org.springframework.context.support.&#010;&gt; AbstractRefreshableApplicationContext.refreshBeanFactory(&#010;&gt; AbstractRefreshableApplicationContext.java:129)&#010;&gt;&#010;&gt;                 at org.springframework.context.support.&#010;&gt; AbstractApplicationContext.obtainFreshBeanFactory(&#010;&gt; AbstractApplicationContext.java:609)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; AbstractDelegatedExecutionApplicationContext.access$800(&#010;&gt; AbstractDelegatedExecutionApplicationContext.java:60)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; AbstractDelegatedExecutionApplicationContext$3.run(&#010;&gt; AbstractDelegatedExecutionApplicationContext.java:242)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.&#010;&gt; util.internal.PrivilegedUtils.executeWithCustomTCCL(&#010;&gt; PrivilegedUtils.java:85)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; AbstractDelegatedExecutionApplicationContext.startRefresh(&#010;&gt; AbstractDelegatedExecutionApplicationContext.java:220)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.extender.internal.&#010;&gt; dependencies.startup.DependencyWaiterApplicationContextExecutor.stageOne(&#010;&gt; DependencyWaiterApplicationContextExecutor.java:224)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.extender.internal.&#010;&gt; dependencies.startup.DependencyWaiterApplicationContextExecutor.refresh(&#010;&gt; DependencyWaiterApplicationContextExecutor.java:177)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt; AbstractDelegatedExecutionApplicationContext.refresh(&#010;&gt; AbstractDelegatedExecutionApplicationContext.java:157)&#010;&gt;&#010;&gt;                 at org.eclipse.gemini.blueprint.&#010;&gt; extender.internal.activator.LifecycleManager$1.run(&#010;&gt; LifecycleManager.java:207)&#010;&gt;&#010;&gt;                 at java.util.concurrent.ThreadPoolExecutor.runWorker(&#010;&gt; ThreadPoolExecutor.java:1142)&#010;&gt;&#010;&gt;                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(&#010;&gt; ThreadPoolExecutor.java:617)&#010;&gt;&#010;&gt;                 at java.lang.Thread.run(Thread.java:745)&#010;&gt;&#010;&gt; Caused by: org.springframework.beans.factory.BeanDefinitionStoreException:&#010;&gt; Failed to create the JAXB binder; nested exception is&#010;&gt; javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory&#010;&gt; could not be instantiated: javax.xml.bind.JAXBException:&#010;&gt; ""org.apache.camel.model.config"" doesnt contain ObjectFactory.class or&#010;&gt; jaxb.index&#010;&gt;&#010;&gt; - with linked exception:&#010;&gt;&#010;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&#010;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler$&#010;&gt; RouteContextDefinitionParser.doParse(CamelNamespaceHandler.java:281)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; AbstractSingleBeanDefinitionParser.parseInternal(&#010;&gt; AbstractSingleBeanDefinitionParser.java:85)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; AbstractBeanDefinitionParser.parse(AbstractBeanDefinitionParser.java:61)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:74)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; BeanDefinitionParserDelegate.parseCustomElement(&#010;&gt; BeanDefinitionParserDelegate.java:1411)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; BeanDefinitionParserDelegate.parseCustomElement(&#010;&gt; BeanDefinitionParserDelegate.java:1401)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:168)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:138)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:94)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.registerBeanDefinitions(&#010;&gt; XmlBeanDefinitionReader.java:508)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.doLoadBeanDefinitions(&#010;&gt; XmlBeanDefinitionReader.java:392)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt; 336)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt; 304)&#010;&gt;&#010;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt; DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(&#010;&gt; DefaultBeanDefinitionDocumentReader.java:239)&#010;&gt;&#010;&gt;                 ... 26 more&#010;&gt;&#010;&gt; Caused by: javax.xml.bind.JAXBException: Provider&#010;&gt; com.sun.xml.internal.bind.v2.ContextFactory could not be instantiated:&#010;&gt; javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt; contain ObjectFactory.class or jaxb.index&#010;&gt;&#010;&gt; - with linked exception:&#010;&gt;&#010;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&#010;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt; java:146)&#010;&gt;&#010;&gt;                 at javax.xml.bind.ContextFinder.&#010;&gt; find(ContextFinder.java:356)&#010;&gt;&#010;&gt;                 at javax.xml.bind.JAXBContext.&#010;&gt; newInstance(JAXBContext.java:431)&#010;&gt;&#010;&gt;                 at javax.xml.bind.JAXBContext.&#010;&gt; newInstance(JAXBContext.java:394)&#010;&gt;&#010;&gt;                 at org.apache.camel.impl.DefaultModelJAXBContextFactory&#010;&gt; .newJAXBContext(DefaultModelJAXBContextFactory.java:31)&#010;&gt;&#010;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler.&#010;&gt; getJaxbContext(CamelNamespaceHandler.java:217)&#010;&gt;&#010;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler$&#010;&gt; RouteContextDefinitionParser.doParse(CamelNamespaceHandler.java:279)&#010;&gt;&#010;&gt;                 ... 39 more&#010;&gt;&#010;&gt; Caused by: javax.xml.bind.JAXBException: ""org.apache.camel.model.config""&#010;&gt; doesnt contain ObjectFactory.class or jaxb.index&#010;&gt;&#010;&gt;                 at com.sun.xml.internal.bind.v2.&#010;&gt; ContextFactory.createContext(ContextFactory.java:266)&#010;&gt;&#010;&gt;                 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native&#010;&gt; Method)&#010;&gt;&#010;&gt;                 at sun.reflect.NativeMethodAccessorImpl.invoke(&#010;&gt; NativeMethodAccessorImpl.java:62)&#010;&gt;&#010;&gt;                 at sun.reflect.DelegatingMethodAccessorImpl.invoke(&#010;&gt; DelegatingMethodAccessorImpl.java:43)&#010;&gt;&#010;&gt;                 at java.lang.reflect.Method.invoke(Method.java:498)&#010;&gt;&#010;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt; java:171)&#010;&gt;&#010;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt; java:131)&#010;&gt;&#010;&gt;                 ... 45 more&#010;&gt;&#010;&#010;"
239,240,Claus Ibsen,  Re: JAXBException while parsing camel-spring files,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNnfjaWOijQHdcVKTjQYx32VCxkKJ5r6NxnQGx9O-HK5Dg%40mail.gmail.com%3E,users,"Sun, 23 Apr 2017 08:03:21 GMT","Use blueprint as spring-dm (is EOL) and camel-spring DM is deprecated&#010;for a long time and is removed from Camel 2.19 onwards.&#010;&#010;&#010;On Thu, Apr 20, 2017 at 8:03 PM, Karel Bernolet&#010;&lt;karel.bernolet@gmail.com&gt; wrote:&#010;&gt; Hi,&#010;&gt;&#010;&gt; While upgrading a legacy application to camel 2.18.3, spring 4, ... we&#010;&gt; stumbled upon an issue while trying to parse camel routes in spring xml&#010;&gt; DSL. The stacktrace can be found below. I believe this is due to CAMEL-9521&#010;&gt; &lt;https://issues.apache.org/jira/browse/CAMEL-9521&gt;.&#010;&gt; By removing the class org.apache.camel.osgi.CamelNameSpaceHandler&#010;&gt; &lt;https://fisheye.apache.org/changelog/camel-git?cs=20a85773b751ebe726664b4be866423fb18463cc&gt;,&#010;&gt; the&#010;&gt; import packages on *org.apache.camel.model.config* etc got removed from the&#010;&gt; Manifest.&#010;&gt; As the *SpringModelJAXBContextFactory* extends from the&#010;&gt; *DefaultModelJAXBContextFactory*, it looks for an ObjectFactory or&#010;&gt; jaxb.index in packages it does no longer include.&#010;&gt; Is the behaviour expected after removal of spring-dm?&#010;&gt; What is the recommended behaviour or workaround?&#010;&gt; The application runs in a apache-felix OSGI environment.&#010;&gt;&#010;&gt; Regards,&#010;&gt; Karel&#010;&gt;&#010;&gt;&#010;&gt; 2017-04-20T18:55:32,921+0200 [EclipseGeminiBlueprintExtenderThread-1] DEBUG&#010;&gt;&gt; NamespacePlugins - Trying to resolving namespace handler for&#010;&gt;&gt; http://camel.apache.org/schema/spring - User= - Batch= - trace-id=&#010;&gt;&gt;&#010;&gt;&gt; 2017-04-20T18:55:32,936+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt;&gt; DEBUG NamespacePlugins - Namespace handler for http://camel.apache.org/&#010;&gt;&gt; schema/spring found inside bundle camel-spring (org.apache.camel.camel-spring)&#010;&gt;&gt; - User= - Batch= - trace-id=&#010;&gt;&gt;&#010;&gt;&gt; 2017-04-20T18:55:32,976+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt;&gt; DEBUG OsgiBundleXmlApplicationContext - Pre refresh error - User= -&#010;&gt;&gt; Batch= - trace-id=&#010;&gt;&gt;&#010;&gt;&gt; org.springframework.beans.factory.parsing.BeanDefinitionParsingException:&#010;&gt;&gt; Configuration problem: Failed to import bean definitions from relative&#010;&gt;&gt; location [useradmin-external-service-siebel-routes.xml]&#010;&gt;&gt;&#010;&gt;&gt; Offending resource: URL [bundle://40.0:0/OSGI-INF/&#010;&gt;&gt; blueprint/useradmin-external-service-siebel-context.xml]; nested&#010;&gt;&gt; exception is org.springframework.beans.factory.BeanDefinitionStoreException:&#010;&gt;&gt; Failed to create the JAXB binder; nested exception is&#010;&gt;&gt; javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory&#010;&gt;&gt; could not be instantiated: javax.xml.bind.JAXBException:&#010;&gt;&gt; ""org.apache.camel.model.config"" doesnt contain ObjectFactory.class or&#010;&gt;&gt; jaxb.index&#010;&gt;&gt;&#010;&gt;&gt; - with linked exception:&#010;&gt;&gt;&#010;&gt;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.parsing.&#010;&gt;&gt; FailFastProblemReporter.error(FailFastProblemReporter.java:70)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.&#010;&gt;&gt; factory.parsing.ReaderContext.error(ReaderContext.java:85)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.&#010;&gt;&gt; factory.parsing.ReaderContext.error(ReaderContext.java:76)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:255)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.parseDefaultElement(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:180)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:165)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:138)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:94)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.registerBeanDefinitions(&#010;&gt;&gt; XmlBeanDefinitionReader.java:508)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.doLoadBeanDefinitions(&#010;&gt;&gt; XmlBeanDefinitionReader.java:392)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt;&gt; 336)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt;&gt; 304)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.support.&#010;&gt;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt;&gt; AbstractBeanDefinitionReader.java:181)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.support.&#010;&gt;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt;&gt; AbstractBeanDefinitionReader.java:217)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.support.&#010;&gt;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt;&gt; AbstractBeanDefinitionReader.java:188)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; OsgiBundleXmlApplicationContext.loadBeanDefinitions(&#010;&gt;&gt; OsgiBundleXmlApplicationContext.java:170)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; OsgiBundleXmlApplicationContext.loadBeanDefinitions(&#010;&gt;&gt; OsgiBundleXmlApplicationContext.java:140)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.context.support.&#010;&gt;&gt; AbstractRefreshableApplicationContext.refreshBeanFactory(&#010;&gt;&gt; AbstractRefreshableApplicationContext.java:129)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.context.support.&#010;&gt;&gt; AbstractApplicationContext.obtainFreshBeanFactory(&#010;&gt;&gt; AbstractApplicationContext.java:609)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.access$800(&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.java:60)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext$3.run(&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.java:242)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.&#010;&gt;&gt; util.internal.PrivilegedUtils.executeWithCustomTCCL(&#010;&gt;&gt; PrivilegedUtils.java:85)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.startRefresh(&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.java:220)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.extender.internal.&#010;&gt;&gt; dependencies.startup.DependencyWaiterApplicationContextExecutor.stageOne(&#010;&gt;&gt; DependencyWaiterApplicationContextExecutor.java:224)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.extender.internal.&#010;&gt;&gt; dependencies.startup.DependencyWaiterApplicationContextExecutor.refresh(&#010;&gt;&gt; DependencyWaiterApplicationContextExecutor.java:177)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.refresh(&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.java:157)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.&#010;&gt;&gt; extender.internal.activator.LifecycleManager$1.run(&#010;&gt;&gt; LifecycleManager.java:207)&#010;&gt;&gt;&#010;&gt;&gt;                 at java.util.concurrent.ThreadPoolExecutor.runWorker(&#010;&gt;&gt; ThreadPoolExecutor.java:1142)&#010;&gt;&gt;&#010;&gt;&gt;                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(&#010;&gt;&gt; ThreadPoolExecutor.java:617)&#010;&gt;&gt;&#010;&gt;&gt;                 at java.lang.Thread.run(Thread.java:745)&#010;&gt;&gt;&#010;&gt;&gt; Caused by: org.springframework.beans.factory.BeanDefinitionStoreException:&#010;&gt;&gt; Failed to create the JAXB binder; nested exception is&#010;&gt;&gt; javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory&#010;&gt;&gt; could not be instantiated: javax.xml.bind.JAXBException:&#010;&gt;&gt; ""org.apache.camel.model.config"" doesnt contain ObjectFactory.class or&#010;&gt;&gt; jaxb.index&#010;&gt;&gt;&#010;&gt;&gt; - with linked exception:&#010;&gt;&gt;&#010;&gt;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&gt;&#010;&gt;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler$&#010;&gt;&gt; RouteContextDefinitionParser.doParse(CamelNamespaceHandler.java:281)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; AbstractSingleBeanDefinitionParser.parseInternal(&#010;&gt;&gt; AbstractSingleBeanDefinitionParser.java:85)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; AbstractBeanDefinitionParser.parse(AbstractBeanDefinitionParser.java:61)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:74)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; BeanDefinitionParserDelegate.parseCustomElement(&#010;&gt;&gt; BeanDefinitionParserDelegate.java:1411)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; BeanDefinitionParserDelegate.parseCustomElement(&#010;&gt;&gt; BeanDefinitionParserDelegate.java:1401)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:168)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:138)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:94)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.registerBeanDefinitions(&#010;&gt;&gt; XmlBeanDefinitionReader.java:508)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.doLoadBeanDefinitions(&#010;&gt;&gt; XmlBeanDefinitionReader.java:392)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt;&gt; 336)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt;&gt; 304)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:239)&#010;&gt;&gt;&#010;&gt;&gt;                 ... 26 more&#010;&gt;&gt;&#010;&gt;&gt; Caused by: javax.xml.bind.JAXBException: Provider&#010;&gt;&gt; com.sun.xml.internal.bind.v2.ContextFactory could not be instantiated:&#010;&gt;&gt; javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt;&gt; contain ObjectFactory.class or jaxb.index&#010;&gt;&gt;&#010;&gt;&gt; - with linked exception:&#010;&gt;&gt;&#010;&gt;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt;&gt; java:146)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.ContextFinder.&#010;&gt;&gt; find(ContextFinder.java:356)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.JAXBContext.&#010;&gt;&gt; newInstance(JAXBContext.java:431)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.JAXBContext.&#010;&gt;&gt; newInstance(JAXBContext.java:394)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.apache.camel.impl.DefaultModelJAXBContextFactory&#010;&gt;&gt; .newJAXBContext(DefaultModelJAXBContextFactory.java:31)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler.&#010;&gt;&gt; getJaxbContext(CamelNamespaceHandler.java:217)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler$&#010;&gt;&gt; RouteContextDefinitionParser.doParse(CamelNamespaceHandler.java:279)&#010;&gt;&gt;&#010;&gt;&gt;                 ... 39 more&#010;&gt;&gt;&#010;&gt;&gt; Caused by: javax.xml.bind.JAXBException: ""org.apache.camel.model.config""&#010;&gt;&gt; doesnt contain ObjectFactory.class or jaxb.index&#010;&gt;&gt;&#010;&gt;&gt;                 at com.sun.xml.internal.bind.v2.&#010;&gt;&gt; ContextFactory.createContext(ContextFactory.java:266)&#010;&gt;&gt;&#010;&gt;&gt;                 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native&#010;&gt;&gt; Method)&#010;&gt;&gt;&#010;&gt;&gt;                 at sun.reflect.NativeMethodAccessorImpl.invoke(&#010;&gt;&gt; NativeMethodAccessorImpl.java:62)&#010;&gt;&gt;&#010;&gt;&gt;                 at sun.reflect.DelegatingMethodAccessorImpl.invoke(&#010;&gt;&gt; DelegatingMethodAccessorImpl.java:43)&#010;&gt;&gt;&#010;&gt;&gt;                 at java.lang.reflect.Method.invoke(Method.java:498)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt;&gt; java:171)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt;&gt; java:131)&#010;&gt;&gt;&#010;&gt;&gt;                 ... 45 more&#010;&gt;&gt;&#010;&gt;&gt; 2017-04-20T18:55:32,981+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt;&gt; ERROR ExtenderConfiguration - Application context refresh failed (&#010;&gt;&gt; OsgiBundleXmlApplicationContext(bundle=be.isabel.useradmin-external-service-siebel,&#010;&gt;&gt; config=OSGI-INF/blueprint/useradmin-external-service-&#010;&gt;&gt; siebel-beans.xml,OSGI-INF/blueprint/useradmin-external-&#010;&gt;&gt; service-siebel-context.xml,OSGI-INF/blueprint/useradmin-&#010;&gt;&gt; external-service-siebel-osgi-context.xml,OSGI-INF/&#010;&gt;&gt; blueprint/useradmin-external-service-siebel-routes.xml)) - User= - Batch=&#010;&gt;&gt; - trace-id=&#010;&gt;&gt;&#010;&gt;&gt; org.springframework.beans.factory.parsing.BeanDefinitionParsingException:&#010;&gt;&gt; Configuration problem: Failed to import bean definitions from relative&#010;&gt;&gt; location [useradmin-external-service-siebel-routes.xml]&#010;&gt;&gt;&#010;&gt;&gt; Offending resource: URL [bundle://40.0:0/OSGI-INF/&#010;&gt;&gt; blueprint/useradmin-external-service-siebel-context.xml]; nested&#010;&gt;&gt; exception is org.springframework.beans.factory.BeanDefinitionStoreException:&#010;&gt;&gt; Failed to create the JAXB binder; nested exception is&#010;&gt;&gt; javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory&#010;&gt;&gt; could not be instantiated: javax.xml.bind.JAXBException:&#010;&gt;&gt; ""org.apache.camel.model.config"" doesnt contain ObjectFactory.class or&#010;&gt;&gt; jaxb.index&#010;&gt;&gt;&#010;&gt;&gt; - with linked exception:&#010;&gt;&gt;&#010;&gt;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.parsing.&#010;&gt;&gt; FailFastProblemReporter.error(FailFastProblemReporter.java:70)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.&#010;&gt;&gt; factory.parsing.ReaderContext.error(ReaderContext.java:85)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.&#010;&gt;&gt; factory.parsing.ReaderContext.error(ReaderContext.java:76)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:255)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.parseDefaultElement(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:180)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:165)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:138)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:94)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.registerBeanDefinitions(&#010;&gt;&gt; XmlBeanDefinitionReader.java:508)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.doLoadBeanDefinitions(&#010;&gt;&gt; XmlBeanDefinitionReader.java:392)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt;&gt; 336)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt;&gt; 304)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.support.&#010;&gt;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt;&gt; AbstractBeanDefinitionReader.java:181)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.support.&#010;&gt;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt;&gt; AbstractBeanDefinitionReader.java:217)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.support.&#010;&gt;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt;&gt; AbstractBeanDefinitionReader.java:188)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; OsgiBundleXmlApplicationContext.loadBeanDefinitions(&#010;&gt;&gt; OsgiBundleXmlApplicationContext.java:170)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; OsgiBundleXmlApplicationContext.loadBeanDefinitions(&#010;&gt;&gt; OsgiBundleXmlApplicationContext.java:140)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.context.support.&#010;&gt;&gt; AbstractRefreshableApplicationContext.refreshBeanFactory(&#010;&gt;&gt; AbstractRefreshableApplicationContext.java:129)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.context.support.&#010;&gt;&gt; AbstractApplicationContext.obtainFreshBeanFactory(&#010;&gt;&gt; AbstractApplicationContext.java:609)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.access$800(&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.java:60)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext$3.run(&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.java:242)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.&#010;&gt;&gt; util.internal.PrivilegedUtils.executeWithCustomTCCL(&#010;&gt;&gt; PrivilegedUtils.java:85)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.startRefresh(&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.java:220)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.extender.internal.&#010;&gt;&gt; dependencies.startup.DependencyWaiterApplicationContextExecutor.stageOne(&#010;&gt;&gt; DependencyWaiterApplicationContextExecutor.java:224)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.extender.internal.&#010;&gt;&gt; dependencies.startup.DependencyWaiterApplicationContextExecutor.refresh(&#010;&gt;&gt; DependencyWaiterApplicationContextExecutor.java:177)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.refresh(&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.java:157)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.&#010;&gt;&gt; extender.internal.activator.LifecycleManager$1.run(&#010;&gt;&gt; LifecycleManager.java:207)&#010;&gt;&gt;&#010;&gt;&gt;                 at java.util.concurrent.ThreadPoolExecutor.runWorker(&#010;&gt;&gt; ThreadPoolExecutor.java:1142)&#010;&gt;&gt;&#010;&gt;&gt;                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(&#010;&gt;&gt; ThreadPoolExecutor.java:617)&#010;&gt;&gt;&#010;&gt;&gt;                 at java.lang.Thread.run(Thread.java:745)&#010;&gt;&gt;&#010;&gt;&gt; Caused by: org.springframework.beans.factory.BeanDefinitionStoreException:&#010;&gt;&gt; Failed to create the JAXB binder; nested exception is&#010;&gt;&gt; javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory&#010;&gt;&gt; could not be instantiated: javax.xml.bind.JAXBException:&#010;&gt;&gt; ""org.apache.camel.model.config"" doesnt contain ObjectFactory.class or&#010;&gt;&gt; jaxb.index&#010;&gt;&gt;&#010;&gt;&gt; - with linked exception:&#010;&gt;&gt;&#010;&gt;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&gt;&#010;&gt;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler$&#010;&gt;&gt; RouteContextDefinitionParser.doParse(CamelNamespaceHandler.java:281)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; AbstractSingleBeanDefinitionParser.parseInternal(&#010;&gt;&gt; AbstractSingleBeanDefinitionParser.java:85)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; AbstractBeanDefinitionParser.parse(AbstractBeanDefinitionParser.java:61)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:74)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; BeanDefinitionParserDelegate.parseCustomElement(&#010;&gt;&gt; BeanDefinitionParserDelegate.java:1411)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; BeanDefinitionParserDelegate.parseCustomElement(&#010;&gt;&gt; BeanDefinitionParserDelegate.java:1401)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:168)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:138)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:94)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.registerBeanDefinitions(&#010;&gt;&gt; XmlBeanDefinitionReader.java:508)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.doLoadBeanDefinitions(&#010;&gt;&gt; XmlBeanDefinitionReader.java:392)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt;&gt; 336)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt;&gt; 304)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:239)&#010;&gt;&gt;&#010;&gt;&gt;                 ... 26 more&#010;&gt;&gt;&#010;&gt;&gt; Caused by: javax.xml.bind.JAXBException: Provider&#010;&gt;&gt; com.sun.xml.internal.bind.v2.ContextFactory could not be instantiated:&#010;&gt;&gt; javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt;&gt; contain ObjectFactory.class or jaxb.index&#010;&gt;&gt;&#010;&gt;&gt; - with linked exception:&#010;&gt;&gt;&#010;&gt;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt;&gt; java:146)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.ContextFinder.&#010;&gt;&gt; find(ContextFinder.java:356)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.JAXBContext.&#010;&gt;&gt; newInstance(JAXBContext.java:431)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.JAXBContext.&#010;&gt;&gt; newInstance(JAXBContext.java:394)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.apache.camel.impl.DefaultModelJAXBContextFactory&#010;&gt;&gt; .newJAXBContext(DefaultModelJAXBContextFactory.java:31)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler.&#010;&gt;&gt; getJaxbContext(CamelNamespaceHandler.java:217)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler$&#010;&gt;&gt; RouteContextDefinitionParser.doParse(CamelNamespaceHandler.java:279)&#010;&gt;&gt;&#010;&gt;&gt;                 ... 39 more&#010;&gt;&gt;&#010;&gt;&gt; Caused by: javax.xml.bind.JAXBException: ""org.apache.camel.model.config""&#010;&gt;&gt; doesnt contain ObjectFactory.class or jaxb.index&#010;&gt;&gt;&#010;&gt;&gt;                 at com.sun.xml.internal.bind.v2.&#010;&gt;&gt; ContextFactory.createContext(ContextFactory.java:266)&#010;&gt;&gt;&#010;&gt;&gt;                 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native&#010;&gt;&gt; Method)&#010;&gt;&gt;&#010;&gt;&gt;                 at sun.reflect.NativeMethodAccessorImpl.invoke(&#010;&gt;&gt; NativeMethodAccessorImpl.java:62)&#010;&gt;&gt;&#010;&gt;&gt;                 at sun.reflect.DelegatingMethodAccessorImpl.invoke(&#010;&gt;&gt; DelegatingMethodAccessorImpl.java:43)&#010;&gt;&gt;&#010;&gt;&gt;                 at java.lang.reflect.Method.invoke(Method.java:498)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt;&gt; java:171)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt;&gt; java:131)&#010;&gt;&gt;&#010;&gt;&gt;                 ... 45 more&#010;&gt;&gt;&#010;&gt;&gt; 2017-04-20T18:55:32,983+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt;&gt; DEBUG DependencyWaiterApplicationContextExecutor - Cancelled dependency&#010;&gt;&gt; watchdog... - User= - Batch= - trace-id=&#010;&gt;&gt;&#010;&gt;&gt; 2017-04-20T18:55:32,983+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt;&gt; DEBUG DependencyWaiterApplicationContextExecutor - Closing appCtx for&#010;&gt;&gt; OsgiBundleXmlApplicationContext(bundle=be.isabel.useradmin-external-service-siebel,&#010;&gt;&gt; config=OSGI-INF/blueprint/useradmin-external-service-&#010;&gt;&gt; siebel-beans.xml,OSGI-INF/blueprint/useradmin-external-&#010;&gt;&gt; service-siebel-context.xml,OSGI-INF/blueprint/useradmin-&#010;&gt;&gt; external-service-siebel-osgi-context.xml,OSGI-INF/&#010;&gt;&gt; blueprint/useradmin-external-service-siebel-routes.xml) - User= - Batch=&#010;&gt;&gt; - trace-id=&#010;&gt;&gt;&#010;&gt;&gt; 2017-04-20T18:55:32,983+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt;&gt; DEBUG DependencyWaiterApplicationContextExecutor - Cleaning up appCtx&#010;&gt;&gt; OsgiBundleXmlApplicationContext(bundle=be.isabel.useradmin-external-service-siebel,&#010;&gt;&gt; config=OSGI-INF/blueprint/useradmin-external-service-&#010;&gt;&gt; siebel-beans.xml,OSGI-INF/blueprint/useradmin-external-&#010;&gt;&gt; service-siebel-context.xml,OSGI-INF/blueprint/useradmin-&#010;&gt;&gt; external-service-siebel-osgi-context.xml,OSGI-INF/&#010;&gt;&gt; blueprint/useradmin-external-service-siebel-routes.xml) - User= - Batch=&#010;&gt;&gt; - trace-id=&#010;&gt;&gt;&#010;&gt;&gt; 2017-04-20T18:55:32,984+0200 [EclipseGeminiBlueprintExtenderThread-1]&#010;&gt;&gt; ERROR DependencyWaiterApplicationContextExecutor - Unable to create&#010;&gt;&gt; application context for [be.isabel.useradmin-external-service-siebel],&#010;&gt;&gt; unsatisfied dependencies: none - User= - Batch= - trace-id=&#010;&gt;&gt;&#010;&gt;&gt; org.springframework.beans.factory.parsing.BeanDefinitionParsingException:&#010;&gt;&gt; Configuration problem: Failed to import bean definitions from relative&#010;&gt;&gt; location [useradmin-external-service-siebel-routes.xml]&#010;&gt;&gt;&#010;&gt;&gt; Offending resource: URL [bundle://40.0:0/OSGI-INF/&#010;&gt;&gt; blueprint/useradmin-external-service-siebel-context.xml]; nested&#010;&gt;&gt; exception is org.springframework.beans.factory.BeanDefinitionStoreException:&#010;&gt;&gt; Failed to create the JAXB binder; nested exception is&#010;&gt;&gt; javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory&#010;&gt;&gt; could not be instantiated: javax.xml.bind.JAXBException:&#010;&gt;&gt; ""org.apache.camel.model.config"" doesnt contain ObjectFactory.class or&#010;&gt;&gt; jaxb.index&#010;&gt;&gt;&#010;&gt;&gt; - with linked exception:&#010;&gt;&gt;&#010;&gt;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.parsing.&#010;&gt;&gt; FailFastProblemReporter.error(FailFastProblemReporter.java:70)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.&#010;&gt;&gt; factory.parsing.ReaderContext.error(ReaderContext.java:85)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.&#010;&gt;&gt; factory.parsing.ReaderContext.error(ReaderContext.java:76)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:255)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.parseDefaultElement(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:180)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:165)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:138)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:94)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.registerBeanDefinitions(&#010;&gt;&gt; XmlBeanDefinitionReader.java:508)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.doLoadBeanDefinitions(&#010;&gt;&gt; XmlBeanDefinitionReader.java:392)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt;&gt; 336)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt;&gt; 304)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.support.&#010;&gt;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt;&gt; AbstractBeanDefinitionReader.java:181)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.support.&#010;&gt;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt;&gt; AbstractBeanDefinitionReader.java:217)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.support.&#010;&gt;&gt; AbstractBeanDefinitionReader.loadBeanDefinitions(&#010;&gt;&gt; AbstractBeanDefinitionReader.java:188)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; OsgiBundleXmlApplicationContext.loadBeanDefinitions(&#010;&gt;&gt; OsgiBundleXmlApplicationContext.java:170)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; OsgiBundleXmlApplicationContext.loadBeanDefinitions(&#010;&gt;&gt; OsgiBundleXmlApplicationContext.java:140)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.context.support.&#010;&gt;&gt; AbstractRefreshableApplicationContext.refreshBeanFactory(&#010;&gt;&gt; AbstractRefreshableApplicationContext.java:129)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.context.support.&#010;&gt;&gt; AbstractApplicationContext.obtainFreshBeanFactory(&#010;&gt;&gt; AbstractApplicationContext.java:609)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.access$800(&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.java:60)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext$3.run(&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.java:242)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.&#010;&gt;&gt; util.internal.PrivilegedUtils.executeWithCustomTCCL(&#010;&gt;&gt; PrivilegedUtils.java:85)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.startRefresh(&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.java:220)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.extender.internal.&#010;&gt;&gt; dependencies.startup.DependencyWaiterApplicationContextExecutor.stageOne(&#010;&gt;&gt; DependencyWaiterApplicationContextExecutor.java:224)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.extender.internal.&#010;&gt;&gt; dependencies.startup.DependencyWaiterApplicationContextExecutor.refresh(&#010;&gt;&gt; DependencyWaiterApplicationContextExecutor.java:177)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.context.support.&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.refresh(&#010;&gt;&gt; AbstractDelegatedExecutionApplicationContext.java:157)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.eclipse.gemini.blueprint.&#010;&gt;&gt; extender.internal.activator.LifecycleManager$1.run(&#010;&gt;&gt; LifecycleManager.java:207)&#010;&gt;&gt;&#010;&gt;&gt;                 at java.util.concurrent.ThreadPoolExecutor.runWorker(&#010;&gt;&gt; ThreadPoolExecutor.java:1142)&#010;&gt;&gt;&#010;&gt;&gt;                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(&#010;&gt;&gt; ThreadPoolExecutor.java:617)&#010;&gt;&gt;&#010;&gt;&gt;                 at java.lang.Thread.run(Thread.java:745)&#010;&gt;&gt;&#010;&gt;&gt; Caused by: org.springframework.beans.factory.BeanDefinitionStoreException:&#010;&gt;&gt; Failed to create the JAXB binder; nested exception is&#010;&gt;&gt; javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory&#010;&gt;&gt; could not be instantiated: javax.xml.bind.JAXBException:&#010;&gt;&gt; ""org.apache.camel.model.config"" doesnt contain ObjectFactory.class or&#010;&gt;&gt; jaxb.index&#010;&gt;&gt;&#010;&gt;&gt; - with linked exception:&#010;&gt;&gt;&#010;&gt;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&gt;&#010;&gt;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler$&#010;&gt;&gt; RouteContextDefinitionParser.doParse(CamelNamespaceHandler.java:281)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; AbstractSingleBeanDefinitionParser.parseInternal(&#010;&gt;&gt; AbstractSingleBeanDefinitionParser.java:85)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; AbstractBeanDefinitionParser.parse(AbstractBeanDefinitionParser.java:61)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:74)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; BeanDefinitionParserDelegate.parseCustomElement(&#010;&gt;&gt; BeanDefinitionParserDelegate.java:1411)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; BeanDefinitionParserDelegate.parseCustomElement(&#010;&gt;&gt; BeanDefinitionParserDelegate.java:1401)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:168)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:138)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:94)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.registerBeanDefinitions(&#010;&gt;&gt; XmlBeanDefinitionReader.java:508)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.doLoadBeanDefinitions(&#010;&gt;&gt; XmlBeanDefinitionReader.java:392)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt;&gt; 336)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:&#010;&gt;&gt; 304)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.springframework.beans.factory.xml.&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(&#010;&gt;&gt; DefaultBeanDefinitionDocumentReader.java:239)&#010;&gt;&gt;&#010;&gt;&gt;                 ... 26 more&#010;&gt;&gt;&#010;&gt;&gt; Caused by: javax.xml.bind.JAXBException: Provider&#010;&gt;&gt; com.sun.xml.internal.bind.v2.ContextFactory could not be instantiated:&#010;&gt;&gt; javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt;&gt; contain ObjectFactory.class or jaxb.index&#010;&gt;&gt;&#010;&gt;&gt; - with linked exception:&#010;&gt;&gt;&#010;&gt;&gt; [javax.xml.bind.JAXBException: ""org.apache.camel.model.config"" doesnt&#010;&gt;&gt; contain ObjectFactory.class or jaxb.index]&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt;&gt; java:146)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.ContextFinder.&#010;&gt;&gt; find(ContextFinder.java:356)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.JAXBContext.&#010;&gt;&gt; newInstance(JAXBContext.java:431)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.JAXBContext.&#010;&gt;&gt; newInstance(JAXBContext.java:394)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.apache.camel.impl.DefaultModelJAXBContextFactory&#010;&gt;&gt; .newJAXBContext(DefaultModelJAXBContextFactory.java:31)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler.&#010;&gt;&gt; getJaxbContext(CamelNamespaceHandler.java:217)&#010;&gt;&gt;&#010;&gt;&gt;                 at org.apache.camel.spring.handler.CamelNamespaceHandler$&#010;&gt;&gt; RouteContextDefinitionParser.doParse(CamelNamespaceHandler.java:279)&#010;&gt;&gt;&#010;&gt;&gt;                 ... 39 more&#010;&gt;&gt;&#010;&gt;&gt; Caused by: javax.xml.bind.JAXBException: ""org.apache.camel.model.config""&#010;&gt;&gt; doesnt contain ObjectFactory.class or jaxb.index&#010;&gt;&gt;&#010;&gt;&gt;                 at com.sun.xml.internal.bind.v2.&#010;&gt;&gt; ContextFactory.createContext(ContextFactory.java:266)&#010;&gt;&gt;&#010;&gt;&gt;                 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native&#010;&gt;&gt; Method)&#010;&gt;&gt;&#010;&gt;&gt;                 at sun.reflect.NativeMethodAccessorImpl.invoke(&#010;&gt;&gt; NativeMethodAccessorImpl.java:62)&#010;&gt;&gt;&#010;&gt;&gt;                 at sun.reflect.DelegatingMethodAccessorImpl.invoke(&#010;&gt;&gt; DelegatingMethodAccessorImpl.java:43)&#010;&gt;&gt;&#010;&gt;&gt;                 at java.lang.reflect.Method.invoke(Method.java:498)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt;&gt; java:171)&#010;&gt;&gt;&#010;&gt;&gt;                 at javax.xml.bind.ContextFinder.newInstance(ContextFinder.&#010;&gt;&gt; java:131)&#010;&gt;&gt;&#010;&gt;&gt;                 ... 45 more&#010;&gt;&gt;&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
240,241,srakshit,How to send message to different Queue hosted in different queue manager and hostname in IBM MQ cluster,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492748523539-5797942.post%40n5.nabble.com%3E,users,"Fri, 21 Apr 2017 04:22:03 GMT","Hi Users,&#010;&#010;I have posted my concerns over stackoverflow. Please find the link for the&#010;same.&#010;&#010;http://stackoverflow.com/questions/43525900/how-to-send-message-to-different-queue-hosted-in-different-queue-manager-and-hos&#010;&lt;http://stackoverflow.com/questions/43525900/how-to-send-message-to-different-queue-hosted-in-different-queue-manager-and-hos&gt;&#010; &#010;&#010;where JoshMc from IBM MQ stack group member is saying that it's possible to&#010;send message to other Queue manger(cluster) using the same URI which my app&#010;IBM MQ team also suggesting.&#010;&#010;for e.g.&#010;JMSReplyTo = queue://QM1012/TEST.REPLY&#010;&#010;Now from camel how to resolve this URI. As per camel API URI should be in&#010;below format.&#010;jmsComponent(wmq): queue/topic: queue/topic name&#010;&#010;but above  JMSReplyTo URI is coming including queue manager.&#010;&#010;Can any one please help to resolve this URI using camel. Please let me know&#010;if you need more details.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/How-to-send-message-to-different-Queue-hosted-in-different-queue-manager-and-hostname-in-IBM-MQ-clusr-tp5797942.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
241,242,T.K,Log end SQL statement in sql component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1492827396915-5798079.post%40n5.nabble.com%3E,users,"Sat, 22 Apr 2017 02:16:36 GMT","Hi&#010;&#010;I am using servicemix 7.0.0, camel 2.16.3.&#010;&#010;I am using camel SQL Component as below-&#010;&#010;&lt;to uri=""sql:INSERT INTO transactions(txn_id, sender_org_unit_id, &#010;&#009;&#009;&#009;&#009;receiver_org_unit_id, doc_type_id, bp_id, route_id, txn_create_datetime, &#010;&#009;&#009;&#009;&#009;txn_modified_datetime, doc_id, bp_instance_id, technical_status_id,&#010;source_doc, &#010;&#009;&#009;&#009;&#009;target_doc) VALUES (:#transactionID, :#senderID, :#receiverID,&#010;:#docTypeID, &#010;&#009;&#009;&#009;&#009;:#bpID, :#routeID, :#createDateTime, :#modifiedDateTime, :#docID,&#010;:#bpInstanceID, &#010;&#009;&#009;&#009;&#009;:#statusID, :#sourceDoc, :#targetDoc);"" /&gt;&#010;&#010;I need to log actual INSERT sql statement into servicemix log file which get&#010;triggered after all values has been set.&#010;&#010;I change PAX logging threshold to DEBUG, also added &#010;&#010;log4j.logger.org.apache.camel.component.sql=DEBUG&#010;log4j.logger.org.apache.camel.component.sql.appender-ref=out&#010;&#010;but no luck.&#010;&#010;Rgds&#010;T.K&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Log-end-SQL-statement-in-sql-component-tp5798079.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
242,243,Claus Ibsen,  Re: Log end SQL statement in sql component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNnCcqNsGNCBmPb022-z7m0drL7s671qXK0ZmLAhqcR40g%40mail.gmail.com%3E,users,"Sat, 22 Apr 2017 07:10:57 GMT","Its using jdbc prepared statements so you cannot see the actual SQL&#010;query. However I think there is some JDBC spy drivers you can use as&#010;proxy that can log the actual SQL. Or you can look at the database&#010;side which should have such information.&#010;&#010;You can also try to turn on some DEBUG/TRACE logging on spring jdbc&#010;and the camel sql component as it may also log a bit more details that&#010;can get you more details.&#010;&#010;On Sat, Apr 22, 2017 at 4:16 AM, T.K &lt;agarwal.trilok@icloud.com&gt; wrote:&#010;&gt; Hi&#010;&gt;&#010;&gt; I am using servicemix 7.0.0, camel 2.16.3.&#010;&gt;&#010;&gt; I am using camel SQL Component as below-&#010;&gt;&#010;&gt; &lt;to uri=""sql:INSERT INTO transactions(txn_id, sender_org_unit_id,&#010;&gt;                                 receiver_org_unit_id, doc_type_id, bp_id, route_id, txn_create_datetime,&#010;&gt;                                 txn_modified_datetime, doc_id, bp_instance_id, technical_status_id,&#010;&gt; source_doc,&#010;&gt;                                 target_doc) VALUES (:#transactionID, :#senderID, :#receiverID,&#010;&gt; :#docTypeID,&#010;&gt;                                 :#bpID, :#routeID, :#createDateTime, :#modifiedDateTime,&#010;:#docID,&#010;&gt; :#bpInstanceID,&#010;&gt;                                 :#statusID, :#sourceDoc, :#targetDoc);"" /&gt;&#010;&gt;&#010;&gt; I need to log actual INSERT sql statement into servicemix log file which get&#010;&gt; triggered after all values has been set.&#010;&gt;&#010;&gt; I change PAX logging threshold to DEBUG, also added&#010;&gt;&#010;&gt; log4j.logger.org.apache.camel.component.sql=DEBUG&#010;&gt; log4j.logger.org.apache.camel.component.sql.appender-ref=out&#010;&gt;&#010;&gt; but no luck.&#010;&gt;&#010;&gt; Rgds&#010;&gt; T.K&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Log-end-SQL-statement-in-sql-component-tp5798079.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
243,244,sbrandt2,"Guidance to choose ""future proof"" http consumer/producer components",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493031301603-5798182.post%40n5.nabble.com%3E,users,"Mon, 24 Apr 2017 10:55:01 GMT","With the jetty producer surprisingly being deprecated recently via&#010;CAMEL-10998 I (and probably a lot of other users) are now in the situation&#010;having to plan the migration to another http producer. &#010;I'd also like to avoid being in the same situation again in some months&#010;having to migrate again.&#010;&#010;Given the choice of available http related components, I'd like to ask Camel&#010;developers for guidance on which http component(s) will be the ""main"" long&#010;time supported http stack for Camel.&#010;&#010;For producer endpoints, the choice would probably be between: http4,&#010;netty4-http, undertow&#010;For consumer endpoints: jetty, netty4-http, undertow&#010;&#010;I'm aware of the dynamics of open source projects, but given the importance&#010;of actively developed and supported http producer/consumer endpoints for an&#010;integration framework I believe an answer is valuable to Camel users.&#010;&#010;Also, to assess the urgency of a migration away from jetty producer&#010;endpoint, it would be helpful to know if there are serious issues with it.&#010;The description in CAMEL-10998 is a bit vague and I didn't find any&#010;discussion about the deprecation on the dev forum.&#010;&#010;Thank you!&#010;Sebastian&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Guidance-to-choose-future-proof-http-consumer-producer-components-tp5798182.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
244,245,Zoran Regvart,"  Re: Guidance to choose ""future proof"" http consumer/producer components",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCABD_Zr85Dzh4kg9r%2BKMrO7K4LV31%3De4d_scy6w1FcW1YRHKyHA%40mail.gmail.com%3E,users,"Wed, 26 Apr 2017 15:42:06 GMT","Hi Sebastian,&#010;speaking from my experience, the reasoning behind the decision to&#010;deprecate Jetty producer has to do with the amount of work needed keep&#010;up with Jetty changes.&#010;&#010;As an illustration take a look at the number of upgrade Jetty issues&#010;on the Camel JIRA[1]. Some of those issues were upgrades of minor&#010;Jetty versions that introduced braking changes in public API.&#010;&#010;I think that going forward you can rely on HTTP Components v4 (http4&#010;component) as it has a proven track record and we can easily keep up&#010;with any changes there. Not to mention that it's a Apache Foundation&#010;project so within our garden.&#010;&#010;Undertow producer is not par with features of http4 producer at the&#010;moment, but will be of significance once it has matured a bit more.&#010;&#010;zoran&#010;&#010;[1] https://issues.apache.org/jira/browse/CAMEL-2402?jql=project%20%3D%20CAMEL%20AND%20text%20~%20%22upgrade%20jetty%22&#010;&#010;On Mon, Apr 24, 2017 at 12:55 PM, sbrandt2 &lt;sb.list@posteo.net&gt; wrote:&#010;&gt; With the jetty producer surprisingly being deprecated recently via&#010;&gt; CAMEL-10998 I (and probably a lot of other users) are now in the situation&#010;&gt; having to plan the migration to another http producer.&#010;&gt; I'd also like to avoid being in the same situation again in some months&#010;&gt; having to migrate again.&#010;&gt;&#010;&gt; Given the choice of available http related components, I'd like to ask Camel&#010;&gt; developers for guidance on which http component(s) will be the ""main"" long&#010;&gt; time supported http stack for Camel.&#010;&gt;&#010;&gt; For producer endpoints, the choice would probably be between: http4,&#010;&gt; netty4-http, undertow&#010;&gt; For consumer endpoints: jetty, netty4-http, undertow&#010;&gt;&#010;&gt; I'm aware of the dynamics of open source projects, but given the importance&#010;&gt; of actively developed and supported http producer/consumer endpoints for an&#010;&gt; integration framework I believe an answer is valuable to Camel users.&#010;&gt;&#010;&gt; Also, to assess the urgency of a migration away from jetty producer&#010;&gt; endpoint, it would be helpful to know if there are serious issues with it.&#010;&gt; The description in CAMEL-10998 is a bit vague and I didn't find any&#010;&gt; discussion about the deprecation on the dev forum.&#010;&gt;&#010;&gt; Thank you!&#010;&gt; Sebastian&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Guidance-to-choose-future-proof-http-consumer-producer-components-tp5798182.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Zoran Regvart&#010;&#010;"
245,246,Claus Ibsen,"    Re: Guidance to choose ""future proof"" http consumer/producer components",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNkYUvg1wGNAN27JPxfJbzv4uMd8aZ5O6eJceHDCAXW5zA%40mail.gmail.com%3E,users,"Wed, 26 Apr 2017 17:38:18 GMT","Jetty is known and best used for their HTTP Server.&#010;Not their http client which are ""not so good"" and not really a high&#010;priority of that company of Jetty.&#010;&#010;The jetty consumer is not deprecated, its only the producer (using Camel lingo).&#010;&#010;&#010;&#010;On Wed, Apr 26, 2017 at 5:42 PM, Zoran Regvart &lt;zoran@regvart.com&gt; wrote:&#010;&gt; Hi Sebastian,&#010;&gt; speaking from my experience, the reasoning behind the decision to&#010;&gt; deprecate Jetty producer has to do with the amount of work needed keep&#010;&gt; up with Jetty changes.&#010;&gt;&#010;&gt; As an illustration take a look at the number of upgrade Jetty issues&#010;&gt; on the Camel JIRA[1]. Some of those issues were upgrades of minor&#010;&gt; Jetty versions that introduced braking changes in public API.&#010;&gt;&#010;&gt; I think that going forward you can rely on HTTP Components v4 (http4&#010;&gt; component) as it has a proven track record and we can easily keep up&#010;&gt; with any changes there. Not to mention that it's a Apache Foundation&#010;&gt; project so within our garden.&#010;&gt;&#010;&gt; Undertow producer is not par with features of http4 producer at the&#010;&gt; moment, but will be of significance once it has matured a bit more.&#010;&gt;&#010;&gt; zoran&#010;&gt;&#010;&gt; [1] https://issues.apache.org/jira/browse/CAMEL-2402?jql=project%20%3D%20CAMEL%20AND%20text%20~%20%22upgrade%20jetty%22&#010;&gt;&#010;&gt; On Mon, Apr 24, 2017 at 12:55 PM, sbrandt2 &lt;sb.list@posteo.net&gt; wrote:&#010;&gt;&gt; With the jetty producer surprisingly being deprecated recently via&#010;&gt;&gt; CAMEL-10998 I (and probably a lot of other users) are now in the situation&#010;&gt;&gt; having to plan the migration to another http producer.&#010;&gt;&gt; I'd also like to avoid being in the same situation again in some months&#010;&gt;&gt; having to migrate again.&#010;&gt;&gt;&#010;&gt;&gt; Given the choice of available http related components, I'd like to ask Camel&#010;&gt;&gt; developers for guidance on which http component(s) will be the ""main"" long&#010;&gt;&gt; time supported http stack for Camel.&#010;&gt;&gt;&#010;&gt;&gt; For producer endpoints, the choice would probably be between: http4,&#010;&gt;&gt; netty4-http, undertow&#010;&gt;&gt; For consumer endpoints: jetty, netty4-http, undertow&#010;&gt;&gt;&#010;&gt;&gt; I'm aware of the dynamics of open source projects, but given the importance&#010;&gt;&gt; of actively developed and supported http producer/consumer endpoints for an&#010;&gt;&gt; integration framework I believe an answer is valuable to Camel users.&#010;&gt;&gt;&#010;&gt;&gt; Also, to assess the urgency of a migration away from jetty producer&#010;&gt;&gt; endpoint, it would be helpful to know if there are serious issues with it.&#010;&gt;&gt; The description in CAMEL-10998 is a bit vague and I didn't find any&#010;&gt;&gt; discussion about the deprecation on the dev forum.&#010;&gt;&gt;&#010;&gt;&gt; Thank you!&#010;&gt;&gt; Sebastian&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt;&#010;&gt;&gt; --&#010;&gt;&gt; View this message in context: http://camel.465427.n5.nabble.com/Guidance-to-choose-future-proof-http-consumer-producer-components-tp5798182.html&#010;&gt;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Zoran Regvart&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
246,247,sbrandt2,"      Re: Guidance to choose ""future proof"" http consumer/producer components",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493299133882-5798412.post%40n5.nabble.com%3E,users,"Thu, 27 Apr 2017 13:18:53 GMT","Thank you Zoran and Claus!&#010;&#010;To sum it up, the recommendation is: use http4 component for http producer&#010;endpoints (to(...)) and jetty component for http consumer endpoints&#010;(from(...)).&#010;Possibly re-evaluate when undertow component has matured.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Guidance-to-choose-future-proof-http-consumer-producer-components-tp5798182p5798412.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
247,248,souciance,"        Re: Guidance to choose ""future proof"" http consumer/producer components",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs3-whFNReZTK8pTPS7PAS9%3Dw-59R37u%2B9neV6H_ZjCz%2BA%40mail.gmail.com%3E,users,"Thu, 27 Apr 2017 13:35:52 GMT","Hi,&#010;&#010;Do you guys have any comments on the netty component for http? Will it&#010;continue or will it also soon be deprecated?&#010;&#010;Thanks&#010;Souciance&#010;&#010;On Thu, Apr 27, 2017 at 3:18 PM, sbrandt2 [via Camel] &lt;&#010;ml+s465427n5798412h35@n5.nabble.com&gt; wrote:&#010;&#010;&gt; Thank you Zoran and Claus!&#010;&gt;&#010;&gt; To sum it up, the recommendation is: use http4 component for http producer&#010;&gt; endpoints (to(...)) and jetty component for http consumer endpoints&#010;&gt; (from(...)).&#010;&gt; Possibly re-evaluate when undertow component has matured.&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Guidance-to-choose-future-&#010;&gt; proof-http-consumer-producer-components-tp5798182p5798412.html&#010;&gt; To start a new topic under Camel - Users, email ml+s465427n465428h31@n5.&#010;&gt; nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Guidance-to-choose-future-proof-http-consumer-producer-components-tp5798182p5798414.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
248,249,dancerjohn,QuartzComponent startDelayedSeconds bug,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493038395697-5798192.post%40n5.nabble.com%3E,users,"Mon, 24 Apr 2017 12:53:15 GMT","I believe there is a bug in the QuartzComponent WRT startDelayedSeconds. I am&#010;starting here instead of creating a ticket per the request on the forum.&#010;This is how to demonstrate the issue:&#010;&#010;create route with start delay:&#010;from(""quartz2:route1?startDelaySeconds=25&amp;trigger.repeatInterval=500"")....&#010;&#010;create another route with NO start delay&#010;from(""quartz2:route2?trigger.repeatInterval=500"")....&#010;&#010;Behavior is that route2 will have a start delay if it is created AFTER&#010;route1 but NOT have a start delay if it is created BEFORE route1. This is&#010;because the QuartzComponent is using a field for the startDelaySeconds and&#010;not resetting it to null of the URI parameters to not have a&#010;startDelaySeconds set.&#010;&#010;protected Endpoint More ...createEndpoint(String uri, String remaining,&#010;Map&lt;String, Object&gt; parameters) throws Exception {&#010;        // Get couple of scheduler settings&#010;        Integer startDelayedSeconds = getAndRemoveParameter(parameters,&#010;""startDelayedSeconds"", Integer.class);&#010;        if (startDelayedSeconds != null) {&#010;               .............. this.startDelayedSeconds =&#010;startDelayedSeconds;&#010;&#010;&#010;So only if the variable ""startDelayedSeconds"" is not null will the&#010;""this.startDelayedSeconds"" be reset to the value desired by the URI.&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/QuartzComponent-startDelayedSeconds-bug-tp5798192.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
249,250,Claus Ibsen,  Re: QuartzComponent startDelayedSeconds bug,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNm1sw4eYt5nnNJP_%3DbjFAbYgVqrAW4qO%2BiJ9Lo1fHuGWg%40mail.gmail.com%3E,users,"Mon, 24 Apr 2017 12:59:29 GMT","Hi&#010;&#010;That is not the intention, its a global option you set on the&#010;component level .. ideally.&#010;And if you have a single endpoint etc you can set it there.&#010;&#010;You cannot have different started delayed, as its for starting the&#010;quartz scheduler&#010;&#010;On Mon, Apr 24, 2017 at 2:53 PM, dancerjohn &lt;winddancerjohn@gmail.com&gt; wrote:&#010;&gt; I believe there is a bug in the QuartzComponent WRT startDelayedSeconds. I am&#010;&gt; starting here instead of creating a ticket per the request on the forum.&#010;&gt; This is how to demonstrate the issue:&#010;&gt;&#010;&gt; create route with start delay:&#010;&gt; from(""quartz2:route1?startDelaySeconds=25&amp;trigger.repeatInterval=500"")....&#010;&gt;&#010;&gt; create another route with NO start delay&#010;&gt; from(""quartz2:route2?trigger.repeatInterval=500"")....&#010;&gt;&#010;&gt; Behavior is that route2 will have a start delay if it is created AFTER&#010;&gt; route1 but NOT have a start delay if it is created BEFORE route1. This is&#010;&gt; because the QuartzComponent is using a field for the startDelaySeconds and&#010;&gt; not resetting it to null of the URI parameters to not have a&#010;&gt; startDelaySeconds set.&#010;&gt;&#010;&gt; protected Endpoint More ...createEndpoint(String uri, String remaining,&#010;&gt; Map&lt;String, Object&gt; parameters) throws Exception {&#010;&gt;         // Get couple of scheduler settings&#010;&gt;         Integer startDelayedSeconds = getAndRemoveParameter(parameters,&#010;&gt; ""startDelayedSeconds"", Integer.class);&#010;&gt;         if (startDelayedSeconds != null) {&#010;&gt;                .............. this.startDelayedSeconds =&#010;&gt; startDelayedSeconds;&#010;&gt;&#010;&gt;&#010;&gt; So only if the variable ""startDelayedSeconds"" is not null will the&#010;&gt; ""this.startDelayedSeconds"" be reset to the value desired by the URI.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/QuartzComponent-startDelayedSeconds-bug-tp5798192.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
250,251,dancerjohn,    Re: QuartzComponent startDelayedSeconds bug,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493038980889-5798194.post%40n5.nabble.com%3E,users,"Mon, 24 Apr 2017 13:03:00 GMT","Ah, I see in the documentation that it is documented as being set on the&#010;component instead of as part of the endpoint URI. Thanks for the&#010;clarification.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/QuartzComponent-startDelayedSeconds-bug-tp5798192p5798194.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
251,253,jamest,  Re: camel-jpa and PersistenceException,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493120926526-5798255.post%40n5.nabble.com%3E,users,"Tue, 25 Apr 2017 11:48:46 GMT",I opened a JIRA an attached a patch  CAMEL-11197&#010;&lt;https://issues.apache.org/jira/browse/CAMEL-11197&gt;  &#010;&#010;I couldn't come up with a way to unit test this change without introducing&#010;integration tests with various connection pool providers but I am using this&#010;patch in my project already.  No more problems with lost database connection&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/camel-jpa-and-PersistenceException-tp5795205p5798255.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
252,254,Mark Nuttall,AWS S3 and Minio (or other S3 emulator),http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAMhV9p642CaoSsGPkUT0GusyN7Au1qWcZwzaD69tnyzgxQ0VtA%40mail.gmail.com%3E,users,"Tue, 25 Apr 2017 12:59:17 GMT","Does anyone have experience using Camel with an AWS S3 ""emulator"". I don't&#010;currently have access to AWS S3 so i am trying to use Minio (Minio.io) to&#010;develop with until I can get the real S3. I have not been successful&#010;getting it to work. I have tried creating the AmazonS3Client myself but am&#010;running into a myriad of errors.  I've tried a few different things. I did&#010;have to drop back to a previous version of Minio because of a known bug&#010;with it and the  Amazon Java API.&#010;&#010;If you have used one, what did you use and how did you get the AWS S3&#010;component to work with it?&#010;&#010;Thanks!&#010;Mark&#010;&#010;"
253,255,dennyej...@yahoo.com.INVALID,  Re: AWS S3 and Minio (or other S3 emulator),http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C66b986da-09d8-4ff1-b932-6a2638586b02%40yahoo.com%3E,users,"Thu, 27 Apr 2017 21:28:08 GMT","Why don't u go for a free tier account and use S3? I'm using it with camel and java sdk ..&#010;works well..&#010;&#010;Sent from my Cyanogen phone&#010;&#010;On Apr 25, 2017 8:59 AM, Mark Nuttall &lt;mknuttall@gmail.com&gt; wrote:&#010;&#010;Does anyone have experience using Camel with an AWS S3 ""emulator"". I don't&#010;currently have access to AWS S3 so i am trying to use Minio (Minio.io) to&#010;develop with until I can get the real S3. I have not been successful&#010;getting it to work. I have tried creating the AmazonS3Client myself but am&#010;running into a myriad of errors.  I've tried a few different things. I did&#010;have to drop back to a previous version of Minio because of a known bug&#010;with it and the  Amazon Java API.&#010;&#010;If you have used one, what did you use and how did you get the AWS S3&#010;component to work with it?&#010;&#010;Thanks!&#010;Mark&#010;&#010;"
254,256,Mark Nuttall,    Re: AWS S3 and Minio (or other S3 emulator),http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAMhV9p6U%3DFROAtH7wX2O96hdhno_XyWZx4owRb0s4mA-_vQbeQ%40mail.gmail.com%3E,users,"Thu, 27 Apr 2017 21:32:20 GMT","Thanks. I was thinking the same after looking at the free tier. It is for&#010;work though and I didn't want my info in our environment.  I might stlll do&#010;it.&#010;&#010;I forged ahead with just using Minio with a processor. I might make up an&#010;endpoint that better emulates the S3 one and put it on github.&#010;&#010;On Thu, Apr 27, 2017 at 5:28 PM, &lt;dennyejose@yahoo.com.invalid&gt; wrote:&#010;&#010;&gt; Why don't u go for a free tier account and use S3? I'm using it with camel&#010;&gt; and java sdk .. works well..&#010;&gt;&#010;&gt; Sent from my Cyanogen phone&#010;&gt;&#010;&gt; On Apr 25, 2017 8:59 AM, Mark Nuttall &lt;mknuttall@gmail.com&gt; wrote:&#010;&gt;&#010;&gt; Does anyone have experience using Camel with an AWS S3 ""emulator"". I don't&#010;&gt; currently have access to AWS S3 so i am trying to use Minio (Minio.io) to&#010;&gt; develop with until I can get the real S3. I have not been successful&#010;&gt; getting it to work. I have tried creating the AmazonS3Client myself but am&#010;&gt; running into a myriad of errors.  I've tried a few different things. I did&#010;&gt; have to drop back to a previous version of Minio because of a known bug&#010;&gt; with it and the  Amazon Java API.&#010;&gt;&#010;&gt; If you have used one, what did you use and how did you get the AWS S3&#010;&gt; component to work with it?&#010;&gt;&#010;&gt; Thanks!&#010;&gt; Mark&#010;&gt;&#010;&gt;&#010;&#010;"
255,257,dennyej...@yahoo.com.INVALID,      Re: AWS S3 and Minio (or other S3 emulator),http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3Cdab10a71-95f5-403e-8aef-1273d5031072%40yahoo.com%3E,users,"Thu, 27 Apr 2017 21:51:23 GMT","I don't know your app architecture but if you are planning to move that camel code on aws i&#010;will recommend to go with an ec2 instance and test it out on the free tier using S3. You may&#010;find some issues that you can address early before you move deep&#010;&#010;Sent from my Cyanogen phone&#010;&#010;On Apr 27, 2017 5:32 PM, Mark Nuttall &lt;mknuttall@gmail.com&gt; wrote:&#010;&#010;Thanks. I was thinking the same after looking at the free tier. It is for&#010;work though and I didn't want my info in our environment.  I might stlll do&#010;it.&#010;&#010;I forged ahead with just using Minio with a processor. I might make up an&#010;endpoint that better emulates the S3 one and put it on github.&#010;&#010;On Thu, Apr 27, 2017 at 5:28 PM, &lt;dennyejose@yahoo.com.invalid&gt; wrote:&#010;&#010;&gt; Why don't u go for a free tier account and use S3? I'm using it with camel&#010;&gt; and java sdk .. works well..&#010;&gt;&#010;&gt; Sent from my Cyanogen phone&#010;&gt;&#010;&gt; On Apr 25, 2017 8:59 AM, Mark Nuttall &lt;mknuttall@gmail.com&gt; wrote:&#010;&gt;&#010;&gt; Does anyone have experience using Camel with an AWS S3 ""emulator"". I don't&#010;&gt; currently have access to AWS S3 so i am trying to use Minio (Minio.io) to&#010;&gt; develop with until I can get the real S3. I have not been successful&#010;&gt; getting it to work. I have tried creating the AmazonS3Client myself but am&#010;&gt; running into a myriad of errors.  I've tried a few different things. I did&#010;&gt; have to drop back to a previous version of Minio because of a known bug&#010;&gt; with it and the  Amazon Java API.&#010;&gt;&#010;&gt; If you have used one, what did you use and how did you get the AWS S3&#010;&gt; component to work with it?&#010;&gt;&#010;&gt; Thanks!&#010;&gt; Mark&#010;&gt;&#010;&gt;&#010;&#010;"
256,258,andcrow,Audit Database with Apache Camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493129444364-5798257.post%40n5.nabble.com%3E,users,"Tue, 25 Apr 2017 14:10:44 GMT","Still in this battle, because the *""WINTER IS COMING""*... lol hehehe&#010;&#010;Does Apache Camel have any component that can perform auditing on a&#010;database? Or audit records that will be sent to a web service using a JSON&#010;file?&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Audit-Database-with-Apache-Camel-tp5798257.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
257,259,Mark Nuttall,  Re: Audit Database with Apache Camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAMhV9p4Jr-FfU5O1WZdPLL8pJ3gnxKu0PrB5mP-qZcSAN8F2dA%40mail.gmail.com%3E,users,"Tue, 25 Apr 2017 23:40:02 GMT","If you use  Hibernate (or Spring JPA with Hibernate (as the provider) with&#010;Camel there is Hibernate Envers for RDBMS. Spring also provides ""auditing""&#010;for web calls too. I don't spend any time with anything else so I am not&#010;sure but I have not run across anything.&#010;&#010;On Tue, Apr 25, 2017 at 10:10 AM, andcrow &lt;andcrow25@gmail.com&gt; wrote:&#010;&#010;&gt; Still in this battle, because the *""WINTER IS COMING""*... lol hehehe&#010;&gt;&#010;&gt; Does Apache Camel have any component that can perform auditing on a&#010;&gt; database? Or audit records that will be sent to a web service using a JSON&#010;&gt; file?&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; com/Audit-Database-with-Apache-Camel-tp5798257.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&#010;"
258,260,,Re: Help diagnosing camel exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAMhV9p4Jr-FfU5O1WZdPLL8pJ3gnxKu0PrB5mP-qZcSAN8F2dA%40mail.gmail.com%3E,users,"Tue, 25 Apr 2017 23:40:02 GMT","If you use  Hibernate (or Spring JPA with Hibernate (as the provider) with&#010;Camel there is Hibernate Envers for RDBMS. Spring also provides ""auditing""&#010;for web calls too. I don't spend any time with anything else so I am not&#010;sure but I have not run across anything.&#010;&#010;On Tue, Apr 25, 2017 at 10:10 AM, andcrow &lt;andcrow25@gmail.com&gt; wrote:&#010;&#010;&gt; Still in this battle, because the *""WINTER IS COMING""*... lol hehehe&#010;&gt;&#010;&gt; Does Apache Camel have any component that can perform auditing on a&#010;&gt; database? Or audit records that will be sent to a web service using a JSON&#010;&gt; file?&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; com/Audit-Database-with-Apache-Camel-tp5798257.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&#010;"
259,261,Ryan T,  Re: Help diagnosing camel exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493134397328-5798261.post%40n5.nabble.com%3E,users,"Tue, 25 Apr 2017 15:33:17 GMT",Sorry it took me so long to get back.  I wanted to add some more logging to&#010;try to be more complete in defining my problem.  Below is the code:&#010;&#010;&#010;&#010;Below here is the logs of what I am getting:&#010;Error:&#010;&#010;&#010;success:&#010;&#010;&#010;In the error case I am confused to as why it skipped several nodes of the&#010;route.  I expected that once it handled the exception it would continue to&#010;process the rest of the nodes.  I mean the whole point of putting all the&#010;extra logging nodes into the route was to attempt to identify the actual&#010;node having the timeout.  But I am no closer to solving this.&#010;&#010;Thanks for any help you might be able to provide.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Help-diagnosing-camel-exception-tp5796669p5798261.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
260,262,Ryan T,  Re: Help diagnosing camel exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493248092547-5798367.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 23:08:12 GMT",More code that might help in diagnosing the issue.  What do you think could&#010;be happening?&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Help-diagnosing-camel-exception-tp5796669p5798367.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
261,263,souciance,    Re: Help diagnosing camel exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs1N7UAdQSAqn9LPa04%2Bwfsb3VTQUseqD4aNNyM0Vviq5Q%40mail.gmail.com%3E,users,"Thu, 27 Apr 2017 11:12:08 GMT","Hello,&#010;&#010;Not the easiest route to follow ;) But basically the log seems to say that&#010;you are doing a synchronous action over some protocol and waiting for a&#010;response. You fail to get the response within 30000 milliseconds so you get&#010;a timeout exception. I suspect it is in the bean(iJobService) based on the&#010;logs but can't confirm. Do you do any calls to third party systems in that&#010;bean?&#010;&#010;Best&#010;Souciance&#010;&#010;On Thu, Apr 27, 2017 at 1:08 AM, Ryan T [via Camel] &lt;&#010;ml+s465427n5798367h40@n5.nabble.com&gt; wrote:&#010;&#010;&gt; More code that might help in diagnosing the issue.  What do you think&#010;&gt; could be happening?&#010;&gt;&#010;&gt; public class TimeOutErrorProcessor implements Processor {&#010;&gt;&#010;&gt; &#009;private static final Logger LOGGER = LogManager.getLogger(TimeOutErrorProcessor.class.getName());&#010;&gt;&#010;&gt; &#009;public TimeOutErrorProcessor() {&#010;&gt; &#009;&#009;// Empty Constructor&#010;&gt; &#009;}&#010;&gt;&#010;&gt; &#009;@Override&#010;&gt; &#009;public void process(Exchange exchange) throws Exception {&#010;&gt;&#010;&gt; &#009;&#009;LOGGER.debug(""Begin:TimeOutErrorProcessor"");&#010;&gt; &#009;&#009;String trackingId = """";&#010;&gt;&#010;&gt; &#009;&#009;final List&lt;DeviceInformation&gt; timeOutList = (List&lt;DeviceInformation&gt;) exchange.getProperty(IConstant.TIMEOUT_DEVICE_LIST);&#010;&gt; &#009;&#009;final DeviceInformation deviceInformation = (DeviceInformation) exchange.getIn().getBody();&#010;&gt; &#009;&#009;trackingId = ""["" + deviceInformation.getNetSuiteId() + ""] - "";&#010;&gt; &#009;&#009;printTimeoutDetails(exchange, trackingId);&#010;&gt; &#009;&#009;LOGGER.warn(trackingId + "" NetSuite Id of timeOut Device is................"" + deviceInformation.getNetSuiteId());&#010;&gt;&#010;&gt; &#009;&#009;timeOutList.add(deviceInformation);&#010;&gt; &#009;&#009;exchange.setProperty(IConstant.TIMEOUT_DEVICE_LIST, timeOutList);&#010;&gt; &#009;&#009;&#010;&gt; &#009;&#009;LOGGER.debug(""End:TimeOutErrorProcessor"");&#010;&gt; &#009;}&#010;&gt;&#010;&gt; &#009;private static void printTimeoutDetails(Exchange exchange, String midwayId) {&#010;&gt; &#009;&#009;LOGGER.warn(midwayId + "" Id"");&#010;&gt; &#009;&#009;LOGGER.warn(midwayId + "" CamelFailureRouteId: "" + exchange.getProperty(""CamelFailureRouteId""));&#010;&gt; &#009;&#009;LOGGER.warn(midwayId + "" CamelFailureEndpoint: "" + exchange.getProperty(""CamelFailureEndpoint""));&#010;&gt; &#009;&#009;RouteContext routeContext = (exchange.getUnitOfWork() == null || exchange.getUnitOfWork().getRouteContext()&#010;== null) ? null : exchange.getUnitOfWork().getRouteContext();&#010;&gt; &#009;&#009;String routeId =  routeContext != null ? exchange.getUnitOfWork().getRouteContext().getRoute().getId()&#010;: ""Unknown"";&#010;&gt; &#009;&#009;LOGGER.warn(midwayId + "" RouteId: "" + routeId);&#010;&gt; &#009;&#009;final ExchangeTimedOutException ex = (ExchangeTimedOutException) exchange.getProperty(Exchange.EXCEPTION_CAUGHT);&#010;&gt; &#009;&#009;if (ex != null) {&#010;&gt; &#009;&#009;&#009;LOGGER.warn(midwayId + "" Error: "" + ex.getMessage(), ex);&#010;&gt; &#009;&#009;}&#010;&gt; &#009;&#009;LOGGER.warn(midwayId + "" TimeOut exception occurred................"" + exchange.getIn().getBody().toString());&#010;&gt; &#009;}&#010;&gt; }&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Help-diagnosing-camel-&#010;&gt; exception-tp5796669p5798367.html&#010;&gt; To start a new topic under Camel - Users, email ml+s465427n465428h31@n5.&#010;&gt; nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Help-diagnosing-camel-exception-tp5796669p5798401.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
262,264,Ryan T,      Re: Help diagnosing camel exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493312041616-5798424.post%40n5.nabble.com%3E,users,"Thu, 27 Apr 2017 16:54:01 GMT","In the bean:jobService it may go on to hit a mongo instance.  But I'm not&#010;sure where in the logs it led you to think it was there except that you&#010;looked at the initial logs in the original message.  Those logs could be a&#010;little confusing I'm sure as the original authors of the code did some&#010;interesting routes.  I've attempted to simplify them somewhat so the&#010;original error logs may not reflect the current code.  I would if you have&#010;time concentrate on the reply messages that I sent most recently instead. &#010;Sorry if it confused you.  I tried to comment in the code what things are&#010;doing so I did not have to send you the whole code base.  The important&#010;thing to look at now would be the recent logs I messaged along with the&#010;code.  The TimeOutErrorProcessor is implementing some of your suggestions&#010;for the logs that is why I included it.  I sent you two routes, but the&#010;second one is the most interesting as that is where the time out occurs. See&#010;""//start of problem area"".  I am just not sure which node.  I'm leaning that&#010;it is the call externally, but since it never prints some of the log entries&#010;I am not sure.  See success log example vs failure log example.  You will&#010;see that some of the log entries that should be printing out are not and are&#010;skipped, but then when it gets to the ""saveDeviceUsageHistory' it starts&#010;logging again.  There are stop and end log entries inside of every&#010;Processor/Bean node entry so that I can see when it is starting and ending a&#010;node.  You can see this by looking at the successful log.&#010;&#010;Sorry for the novel,  I hope you can help me.  And thanks for your time.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Help-diagnosing-camel-exception-tp5796669p5798424.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
263,265,souciance,        Re: Help diagnosing camel exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs3WN23MTRrGDoWsAPrKs-LYVudhzrNGiTKQ_ZpMAUHGiQ%40mail.gmail.com%3E,users,"Thu, 27 Apr 2017 17:08:39 GMT","Just a quick thing, couldn't you disable all the routes and beans first and&#010;then enable them one by one to pinpoint which one is the culprit?&#010;&#010;Den 27 apr. 2017 6:54 em skrev ""Ryan T [via Camel]"" &lt;&#010;ml+s465427n5798424h7@n5.nabble.com&gt;:&#010;&#010;In the bean:jobService it may go on to hit a mongo instance.  But I'm not&#010;sure where in the logs it led you to think it was there except that you&#010;looked at the initial logs in the original message.  Those logs could be a&#010;little confusing I'm sure as the original authors of the code did some&#010;interesting routes.  I've attempted to simplify them somewhat so the&#010;original error logs may not reflect the current code.  I would if you have&#010;time concentrate on the reply messages that I sent most recently instead.&#010;Sorry if it confused you.  I tried to comment in the code what things are&#010;doing so I did not have to send you the whole code base.  The important&#010;thing to look at now would be the recent logs I messaged along with the&#010;code.  The TimeOutErrorProcessor is implementing some of your suggestions&#010;for the logs that is why I included it.  I sent you two routes, but the&#010;second one is the most interesting as that is where the time out occurs.&#010;See ""//start of problem area"".  I am just not sure which node.  I'm leaning&#010;that it is the call externally, but since it never prints some of the log&#010;entries I am not sure.  See success log example vs failure log example.&#010;You will see that some of the log entries that should be printing out are&#010;not and are skipped, but then when it gets to the ""saveDeviceUsageHistory'&#010;it starts logging again.  There are stop and end log entries inside of&#010;every Processor/Bean node entry so that I can see when it is starting and&#010;ending a node.  You can see this by looking at the successful log.&#010;&#010;Sorry for the novel,  I hope you can help me.  And thanks for your time.&#010;&#010;------------------------------&#010;If you reply to this email, your message will be added to the discussion&#010;below:&#010;http://camel.465427.n5.nabble.com/Help-diagnosing-camel-&#010;exception-tp5796669p5798424.html&#010;To start a new topic under Camel - Users, email ml+s465427n465428h31@n5.&#010;nabble.com&#010;To unsubscribe from Camel - Users, click here&#010;&lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;.&#010;NAML&#010;&lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Help-diagnosing-camel-exception-tp5796669p5798426.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
264,266,Ryan T,          Re: Help diagnosing camel exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493315952701-5798428.post%40n5.nabble.com%3E,users,"Thu, 27 Apr 2017 17:59:12 GMT","That would be ideal, but I it is really hard to reproduce.  Out of say 60000&#010;records processed.  I ""sometimes"" get the timeout.  Everytime I run it in my&#010;local dev environment it seems to succeed.  When it does fail in my dev&#010;environment, I usually have to add more logging as I learn more.  I'm&#010;basically trying to prove that it is a network or connectivity issue and&#010;eliminate the code as the problem, but if I cannot pin point the exact node&#010;there is the doubt that it could be happening in the serializer or a&#010;database call to mongo or in the cxf code that does the rest call.  My gut&#010;says that it is a connectivity issue, but how do you explain to management&#010;that the problem is between Amazon, and Verizon, Kore(T-Mobile), or ATT. &#010;They are more inclined to say it is the code base.  Because of this being&#010;more reproducible in a production environment, it makes it really hard to&#010;just start removing node to find the problem.  It is however an interesting&#010;thought and I will look into maybe making a pseudo route that can mimic&#010;pieces in the route, specifically the places I think it might be happening.&#010;&#010;On a side note:  I forgot to give you the actual exception in the log as&#010;part of the log post message to this board.  Included below:&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Help-diagnosing-camel-exception-tp5796669p5798428.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
265,267,Paul Gale,            Re: Help diagnosing camel exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAJ5znhtYCAZPH9PqmbER8gWSL1HANpZ_sm7era0ebrgm8z6k2A%40mail.gmail.com%3E,users,"Thu, 27 Apr 2017 18:22:42 GMT","Hi Ryan,&#010;&#010;It seems to be that you'd be better off breaking up some of those routes;&#010;they seem very large and monolithic. Prefer composed routes instead, each&#010;with discrete error handlers. Currently you're looking for a fault through&#010;a large slice of functionality. The use of the doCatch clauses is alluding&#010;to the fact that these routes need to be broken up. With a larger number of&#010;smaller composed routes it will bring greater focus to your error&#010;detection/handling. Same concept behind keeping regular method sizes small.&#010;&#010;Can you explain why some of the individual processor nodes in each route&#010;have processing times in the order of an hour or more!?&#010;&#010;Also, give each node in the processing chain of a route a discrete ID.&#010;Makes it a lot easier to map, rather than figuring out what 'choice43' is!&#010;&#010;How are you testing these routes? What unit tests do you have for these&#010;routes?&#010;&#010;Thanks,&#010;Paul&#010;&#010;On Thu, Apr 27, 2017 at 1:59 PM, Ryan T &lt;bratnmw@yahoo.com&gt; wrote:&#010;&#010;&gt; That would be ideal, but I it is really hard to reproduce.  Out of say&#010;&gt; 60000&#010;&gt; records processed.  I ""sometimes"" get the timeout.  Everytime I run it in&#010;&gt; my&#010;&gt; local dev environment it seems to succeed.  When it does fail in my dev&#010;&gt; environment, I usually have to add more logging as I learn more.  I'm&#010;&gt; basically trying to prove that it is a network or connectivity issue and&#010;&gt; eliminate the code as the problem, but if I cannot pin point the exact node&#010;&gt; there is the doubt that it could be happening in the serializer or a&#010;&gt; database call to mongo or in the cxf code that does the rest call.  My gut&#010;&gt; says that it is a connectivity issue, but how do you explain to management&#010;&gt; that the problem is between Amazon, and Verizon, Kore(T-Mobile), or ATT.&#010;&gt; They are more inclined to say it is the code base.  Because of this being&#010;&gt; more reproducible in a production environment, it makes it really hard to&#010;&gt; just start removing node to find the problem.  It is however an interesting&#010;&gt; thought and I will look into maybe making a pseudo route that can mimic&#010;&gt; pieces in the route, specifically the places I think it might be happening.&#010;&gt;&#010;&gt; On a side note:  I forgot to give you the actual exception in the log as&#010;&gt; part of the log post message to this board.  Included below:&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; com/Help-diagnosing-camel-exception-tp5796669p5798428.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&#010;"
266,268,souciance,              Re: Help diagnosing camel exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs2gFSLEfNd-VvDNZnnKf6N1f3NnQ60PoUf0814Jvd1xeQ%40mail.gmail.com%3E,users,"Thu, 27 Apr 2017 19:52:23 GMT","Hi Ryan&#010;&#010;I agree with Paul. It is quit hard to troubleshoot those complicated&#010;routes. It would be easier if you can break them into smaller and more&#010;independent routes which can be tested easier.&#010;&#010;I would also enable this class which is the AuditEventNotifier which will&#010;give more detailed information about each step that is being executed.&#010;http://camel.apache.org/eventnotifier-to-log-details-about-all-sent-exchanges.html&#010;&#010;Essentially I think a call to MongoDB or some other third party system is&#010;taking more than the allowed timeout value. Either increase the timeout and&#010;see if the problem goes away or perhaps it could be worth run some sort of&#010;a load test using JMeter to trigger those timeouts and then see exactly&#010;which record is causing this happen.&#010;&#010;Best&#010;Souciance&#010;&#010;&lt;https://www.avast.com/sig-email?utm_medium=email&amp;utm_source=link&amp;utm_campaign=sig-email&amp;utm_content=webmail&gt;&#010;Virusfritt.&#010;www.avast.com&#010;&lt;https://www.avast.com/sig-email?utm_medium=email&amp;utm_source=link&amp;utm_campaign=sig-email&amp;utm_content=webmail&gt;&#010;&lt;#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2&gt;&#010;&#010;On Thu, Apr 27, 2017 at 8:23 PM, Paul Gale [via Camel] &lt;&#010;ml+s465427n5798429h62@n5.nabble.com&gt; wrote:&#010;&#010;&gt; Hi Ryan,&#010;&gt;&#010;&gt; It seems to be that you'd be better off breaking up some of those routes;&#010;&gt; they seem very large and monolithic. Prefer composed routes instead, each&#010;&gt; with discrete error handlers. Currently you're looking for a fault through&#010;&gt; a large slice of functionality. The use of the doCatch clauses is alluding&#010;&gt; to the fact that these routes need to be broken up. With a larger number&#010;&gt; of&#010;&gt; smaller composed routes it will bring greater focus to your error&#010;&gt; detection/handling. Same concept behind keeping regular method sizes&#010;&gt; small.&#010;&gt;&#010;&gt; Can you explain why some of the individual processor nodes in each route&#010;&gt; have processing times in the order of an hour or more!?&#010;&gt;&#010;&gt; Also, give each node in the processing chain of a route a discrete ID.&#010;&gt; Makes it a lot easier to map, rather than figuring out what 'choice43' is!&#010;&gt;&#010;&gt; How are you testing these routes? What unit tests do you have for these&#010;&gt; routes?&#010;&gt;&#010;&gt; Thanks,&#010;&gt; Paul&#010;&gt;&#010;&gt; On Thu, Apr 27, 2017 at 1:59 PM, Ryan T &lt;[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5798429&amp;i=0&gt;&gt; wrote:&#010;&gt;&#010;&gt; &gt; That would be ideal, but I it is really hard to reproduce.  Out of say&#010;&gt; &gt; 60000&#010;&gt; &gt; records processed.  I ""sometimes"" get the timeout.  Everytime I run it&#010;&gt; in&#010;&gt; &gt; my&#010;&gt; &gt; local dev environment it seems to succeed.  When it does fail in my dev&#010;&gt; &gt; environment, I usually have to add more logging as I learn more.  I'm&#010;&gt; &gt; basically trying to prove that it is a network or connectivity issue and&#010;&gt; &gt; eliminate the code as the problem, but if I cannot pin point the exact&#010;&gt; node&#010;&gt; &gt; there is the doubt that it could be happening in the serializer or a&#010;&gt; &gt; database call to mongo or in the cxf code that does the rest call.  My&#010;&gt; gut&#010;&gt; &gt; says that it is a connectivity issue, but how do you explain to&#010;&gt; management&#010;&gt; &gt; that the problem is between Amazon, and Verizon, Kore(T-Mobile), or ATT.&#010;&gt; &gt; They are more inclined to say it is the code base.  Because of this&#010;&gt; being&#010;&gt; &gt; more reproducible in a production environment, it makes it really hard&#010;&gt; to&#010;&gt; &gt; just start removing node to find the problem.  It is however an&#010;&gt; interesting&#010;&gt; &gt; thought and I will look into maybe making a pseudo route that can mimic&#010;&gt; &gt; pieces in the route, specifically the places I think it might be&#010;&gt; happening.&#010;&gt; &gt;&#010;&gt; &gt; On a side note:  I forgot to give you the actual exception in the log as&#010;&gt; &gt; part of the log post message to this board.  Included below:&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; --&#010;&gt; &gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; &gt; com/Help-diagnosing-camel-exception-tp5796669p5798428.html&#010;&gt; &gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt; &gt;&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Help-diagnosing-camel-&#010;&gt; exception-tp5796669p5798429.html&#010;&gt; To start a new topic under Camel - Users, email ml+s465427n465428h31@n5.&#010;&gt; nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Help-diagnosing-camel-exception-tp5796669p5798436.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
267,269,Ryan T,                Re: Help diagnosing camel exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493324417709-5798467.post%40n5.nabble.com%3E,users,"Thu, 27 Apr 2017 20:20:17 GMT","I thought about increasing the timeout limit, but the timings do not suggest&#010;that would be the best way to handle the issue.  The reason I say that is&#010;because the timings on 99% are with in 2 seconds.  Fact is the only time i&#010;see them go above 2 seconds is when these timeouts occur.  This suggests to&#010;me that it is an external pause of some sort or maybe a GC happens. &#010;Although the GC does not quite make sense either because other processes do&#010;not pause at the same time from what I can see.  I have had these timeouts&#010;happen on single API calls too.  Not just the batch jobs.  It sure smells of&#010;network issues to me.  I want to eliminate the carriers(ATT, Verizon, etc)&#010;as it happens regardless of carrier API I am hitting.  If I were to narrow&#010;down to what things it could be, I would say it is either network issues, a&#010;problem in CXF(Camel), or a problem in the marshalling&#010;JacksonXML/Json(Camel).&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Help-diagnosing-camel-exception-tp5796669p5798467.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
268,270,Ryan T,              Re: Help diagnosing camel exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493323262110-5798451.post%40n5.nabble.com%3E,users,"Thu, 27 Apr 2017 20:01:02 GMT","&gt; Can you explain why some of the individual processor nodes in each route &#010;&gt; have processing times in the order of an hour or more!?&#010;&#010;The route is a batch job process that is triggered by a Quartz2 or API get&#010;call.  The base route can take anywhere from 2 minutes to run in the case of&#010;ATT because we only have 200 devices.  But for Verizon we have 50000 devices&#010;and that can take around 2 hours to run.&#010;&#010;&gt; How are you testing these routes? What unit tests do you have for these &#010;&gt; routes?&#010;&#010;We have some Scala tests that unit test the individual Processors passing in&#010;a Mocked exchange object.  As for the beans they mostly are services to&#010;interact with a Mongodb store.  Not much processing actually happens in&#010;them.  I inherited this code and I have slowly been refactoring it to be&#010;less monolithic, but that takes time.  I have created some tests, not in&#010;this area with the timeouts, that test whole routes Mocking the external&#010;payloads that are received.  They are on the more simpler routes.   But&#010;doing these test can be difficult because of how monolithic these routes&#010;are.&#010;&#010;&gt; Also, give each node in the processing chain of a route a discrete ID. &#010;&gt; Makes it a lot easier to map, rather than figuring out what 'choice43' is!&#010;&#010;Agreed this would help.  I will implement them right away.   The problem is,&#010;to get the verbose logging, I have to tell camel that the exceptions are not&#010;handled and if I do that then the whole batch stops when an exception&#010;happens.  I need a way of printing the verbose logging, like in the original&#010;ticket message, but without stopping the world when they happen.  Do you&#010;know how to do that?&#010;&#010;Thanks for your help.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Help-diagnosing-camel-exception-tp5796669p5798451.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
269,271,souciance,                Re: Help diagnosing camel exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs1b4HtwqBBe8KqC%3DFBm-CEUSYCna4ROZqb8qaq18Bgw_Q%40mail.gmail.com%3E,users,"Thu, 27 Apr 2017 20:04:59 GMT","Couldn't you use an OnException for logging and then continue? This way,&#010;the processing doesn't step because of one error.&#010;&#010;OnException().continued(true).to(""seda:LogErrors"");&#010;&#010;&lt;https://www.avast.com/sig-email?utm_medium=email&amp;utm_source=link&amp;utm_campaign=sig-email&amp;utm_content=webmail&gt;&#010;Virusfritt.&#010;www.avast.com&#010;&lt;https://www.avast.com/sig-email?utm_medium=email&amp;utm_source=link&amp;utm_campaign=sig-email&amp;utm_content=webmail&gt;&#010;&lt;#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2&gt;&#010;&#010;On Thu, Apr 27, 2017 at 10:01 PM, Ryan T [via Camel] &lt;&#010;ml+s465427n5798451h44@n5.nabble.com&gt; wrote:&#010;&#010;&gt; &gt; Can you explain why some of the individual processor nodes in each route&#010;&gt; &gt; have processing times in the order of an hour or more!?&#010;&gt;&#010;&gt; The route is a batch job process that is triggered by a Quartz2 or API get&#010;&gt; call.  The base route can take anywhere from 2 minutes to run in the case&#010;&gt; of ATT because we only have 200 devices.  But for Verizon we have 50000&#010;&gt; devices and that can take around 2 hours to run.&#010;&gt;&#010;&gt; &gt; How are you testing these routes? What unit tests do you have for these&#010;&gt; &gt; routes?&#010;&gt;&#010;&gt; We have some Scala tests that unit test the individual Processors passing&#010;&gt; in a Mocked exchange object.  As for the beans they mostly are services to&#010;&gt; interact with a Mongodb store.  Not much processing actually happens in&#010;&gt; them.  I inherited this code and I have slowly been refactoring it to be&#010;&gt; less monolithic, but that takes time.  I have created some tests, not in&#010;&gt; this area with the timeouts, that test whole routes Mocking the external&#010;&gt; payloads that are received.  They are on the more simpler routes.   But&#010;&gt; doing these test can be difficult because of how monolithic these routes&#010;&gt; are.&#010;&gt;&#010;&gt; &gt; Also, give each node in the processing chain of a route a discrete ID.&#010;&gt; &gt; Makes it a lot easier to map, rather than figuring out what 'choice43'&#010;&gt; is!&#010;&gt;&#010;&gt; Agreed this would help.  I will implement them right away.   The problem&#010;&gt; is, to get the verbose logging, I have to tell camel that the exceptions&#010;&gt; are not handled and if I do that then the whole batch stops when an&#010;&gt; exception happens.  I need a way of printing the verbose logging, like in&#010;&gt; the original ticket message, but without stopping the world when they&#010;&gt; happen.  Do you know how to do that?&#010;&gt;&#010;&gt; Thanks for your help.&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Help-diagnosing-camel-&#010;&gt; exception-tp5796669p5798451.html&#010;&gt; To start a new topic under Camel - Users, email ml+s465427n465428h31@n5.&#010;&gt; nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Help-diagnosing-camel-exception-tp5796669p5798460.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
270,272,Ryan T,                  Re: Help diagnosing camel exception,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493324988304-5798468.post%40n5.nabble.com%3E,users,"Thu, 27 Apr 2017 20:29:48 GMT","I actually do have that.  If you look at the code the try catch only catches:&#010;CxfOperationException.class,&#010;UnknownHostException.class,&#010;ConnectException.class,&#010;SocketTimeoutException.class,&#010;NoRouteToHostException.class,&#010;Fault.class&#010;&#010;When the TimeoutException happens it does not go into this portion of the&#010;route. &#010; &#010;It is going into this portion of code which is why I included both routes as&#010;this is in the parent route.&#010;&#010;&#010;&#010;Do you think that the error message might be more plain and/or helpful if I&#010;moved this onException into the seda routes?  Is the fact that the&#010;onException is in the parent route hiding important information do you&#010;think?&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Help-diagnosing-camel-exception-tp5796669p5798468.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
271,273,urwithsumit,Camel HTTP: I/O exception (java.net.SocketException) caught when processing request: Too many open files,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493148220096-5798262.post%40n5.nabble.com%3E,users,"Tue, 25 Apr 2017 19:23:40 GMT","Hi,&#010;I have a rest API exposed using camel Jetty. The api makes call to another&#010;API to fetch some data.&#010;Intermittently, we are getting exception ""I/O exception&#010;(java.net.SocketException) caught when processing request: Too many open&#010;files"". The number of connections is well below the default Unix uLimit of&#010;1024. I am using Camel 2.18.2. Any pointers to solve this problem? &#010;&#010;2017-04-25T09:19:11,341  INFO [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.HttpMethodDirector: Retrying request&#010;2017-04-25T09:19:11,341 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.HttpConnection: Open connection to XXXXXXX&#010;2017-04-25T09:19:11,341 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.HttpMethodDirector: Closing the connection.&#010;2017-04-25T09:19:11,341  INFO [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.HttpMethodDirector: I/O exception&#010;(java.net.SocketException) caught when processing request: Too many open&#010;files&#010;2017-04-25T09:19:11,341  INFO [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.HttpMethodDirector: Retrying request&#010;2017-04-25T09:19:11,341 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.HttpConnection: Open connection to&#010;p1dn-id-vs:8080&#010;2017-04-25T09:19:11,341 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.HttpMethodDirector: Closing the connection.&#010;2017-04-25T09:19:11,341  INFO [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.HttpMethodDirector: I/O exception&#010;(java.net.SocketException) caught when processing request: Too many open&#010;files&#010;2017-04-25T09:19:11,342  INFO [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.HttpMethodDirector: Retrying request&#010;2017-04-25T09:19:11,342 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.HttpConnection: Open connection to XXXXXXX&#010;2017-04-25T09:19:11,342 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.HttpMethodDirector: Closing the connection.&#010;2017-04-25T09:19:11,342 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.HttpMethodDirector: Method retry handler&#010;returned false. Automatic recovery will not be attempted&#010;2017-04-25T09:19:11,342 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.HttpConnection: Releasing connection back to&#010;connection manager.&#010;2017-04-25T09:19:11,342 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;org.apache.commons.httpclient.MultiThreadedHttpConnectionManager: Freeing&#010;connection, hostConfig=HostConfiguration[host=http: XXXXXX&#010;&#010;&#010;Route definition: &#010;&lt;camel:route id=""dnc_webget_route""&gt;&#010;&#009;&#009;&#009;&lt;from uri=""jetty:{{dnc.dmz.service.address}}/check_dnc_media"" /&gt;&#010;&#010;&#009;&#009;&#009;&lt;camel:removeHeaders pattern=""CamelHttp*"" /&gt;&#010;&#009;&#009;&#009;&lt;camel:setHeader headerName=""CamelHttpMethod""&gt;&#010;&#009;&#009;&#009;&#009;&lt;camel:constant&gt;GET&lt;/camel:constant&gt;&#010;&#009;&#009;&#009;&lt;/camel:setHeader&gt;&#010;&#009;&#009;&#009;&lt;camel:setHeader headerName=""Content-Type""&gt;&#010;&#009;&#009;&#009;&#009;&lt;camel:constant&gt;application/json&lt;/camel:constant&gt;&#010;&#009;&#009;&#009;&lt;/camel:setHeader&gt;&#010;&#010;&#009;&#009;&#009;&lt;camel:enrich&gt;&#010;&#009;&#009;&#009;&#009;&lt;camel:simple&gt;&#010;&#009;&#009;&#009;&#009;&#009;{{dnc.api.url}}?throwExceptionOnFailure=false&#010;&#009;&#009;&#009;&#009;&lt;/camel:simple&gt;&#010;&#009;&#009;&#009;&lt;/camel:enrich&gt;&#010;&#010;&#009;&#009;&#009;&lt;camel:unmarshal ref=""succ_resp"" /&gt;&#010;&#009;&#009;&#009;&lt;camel:process ref=""dncResponseProcessor"" /&gt;&#010;&#009;&#009;&#009;&lt;camel:process ref=""webgetResponseProcessor"" /&gt;&#010;&#009;&#009;&#009;&lt;camel:onException id=""camel_OnException""&gt;&#010;&#009;&#009;&#009;&#009;&lt;camel:exception&gt;java.net.ConnectException&lt;/camel:exception&gt;&#010;&#009;&#009;&#009;&#009;&lt;camel:exception&gt;java.lang.Throwable&lt;/camel:exception&gt;&#010;&#009;&#009;&#009;&#009;&lt;camel:handled&gt;&#010;&#009;&#009;&#009;&#009;&#009;&lt;constant&gt;true&lt;/constant&gt;&#010;&#009;&#009;&#009;&#009;&lt;/camel:handled&gt;&#010;&#009;&#009;&#009;&#009;&lt;camel:process ref=""webGetExceptionProcessor""&#010;id=""webGetExceptionProcessor"" /&gt;&#010;&#009;&#009;&#009;&lt;/camel:onException&gt;&#010;&#009;&#009;&lt;/camel:route&gt;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-HTTP-I-O-exception-java-net-SocketException-caught-when-processing-request-Too-many-open-files-tp5798262.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
272,274,Tomohisa Igarashi,  Re: Camel HTTP: I/O exception (java.net.SocketException) caught when processing request: Too many open files,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3Cce19c59c-148a-5c9d-781f-c810dfc1d36f%40gmail.com%3E,users,"Wed, 26 Apr 2017 04:18:26 GMT","Hi,&#010;&#010;I would increase nofile (ulimit -n) and see if it works.&#010;&#010;And the first thing I always do after clean install is to put 65535 as a nofile and noproc&#010;limit in /etc/security/limits.conf:&#010;# I'm on Fedora&#010;&#010;Thanks,&#010;Tomo&#010;&#010;&#010;On 04/26/2017 04:23 AM, urwithsumit wrote:&#010;&gt; Hi,&#010;&gt; I have a rest API exposed using camel Jetty. The api makes call to another&#010;&gt; API to fetch some data.&#010;&gt; Intermittently, we are getting exception ""I/O exception&#010;&gt; (java.net.SocketException) caught when processing request: Too many open&#010;&gt; files"". The number of connections is well below the default Unix uLimit of&#010;&gt; 1024. I am using Camel 2.18.2. Any pointers to solve this problem?&#010;&gt; &#010;&gt; 2017-04-25T09:19:11,341  INFO [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.HttpMethodDirector: Retrying request&#010;&gt; 2017-04-25T09:19:11,341 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.HttpConnection: Open connection to XXXXXXX&#010;&gt; 2017-04-25T09:19:11,341 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.HttpMethodDirector: Closing the connection.&#010;&gt; 2017-04-25T09:19:11,341  INFO [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.HttpMethodDirector: I/O exception&#010;&gt; (java.net.SocketException) caught when processing request: Too many open&#010;&gt; files&#010;&gt; 2017-04-25T09:19:11,341  INFO [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.HttpMethodDirector: Retrying request&#010;&gt; 2017-04-25T09:19:11,341 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.HttpConnection: Open connection to&#010;&gt; p1dn-id-vs:8080&#010;&gt; 2017-04-25T09:19:11,341 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.HttpMethodDirector: Closing the connection.&#010;&gt; 2017-04-25T09:19:11,341  INFO [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.HttpMethodDirector: I/O exception&#010;&gt; (java.net.SocketException) caught when processing request: Too many open&#010;&gt; files&#010;&gt; 2017-04-25T09:19:11,342  INFO [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.HttpMethodDirector: Retrying request&#010;&gt; 2017-04-25T09:19:11,342 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.HttpConnection: Open connection to XXXXXXX&#010;&gt; 2017-04-25T09:19:11,342 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.HttpMethodDirector: Closing the connection.&#010;&gt; 2017-04-25T09:19:11,342 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.HttpMethodDirector: Method retry handler&#010;&gt; returned false. Automatic recovery will not be attempted&#010;&gt; 2017-04-25T09:19:11,342 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.HttpConnection: Releasing connection back to&#010;&gt; connection manager.&#010;&gt; 2017-04-25T09:19:11,342 DEBUG [qtp1005845925-25 - /check_dnc_media]&#010;&gt; org.apache.commons.httpclient.MultiThreadedHttpConnectionManager: Freeing&#010;&gt; connection, hostConfig=HostConfiguration[host=http: XXXXXX&#010;&gt; &#010;&gt; &#010;&gt; Route definition:&#010;&gt; &lt;camel:route id=""dnc_webget_route""&gt;&#010;&gt; &#009;&#009;&#009;&lt;from uri=""jetty:{{dnc.dmz.service.address}}/check_dnc_media"" /&gt;&#010;&gt; &#010;&gt; &#009;&#009;&#009;&lt;camel:removeHeaders pattern=""CamelHttp*"" /&gt;&#010;&gt; &#009;&#009;&#009;&lt;camel:setHeader headerName=""CamelHttpMethod""&gt;&#010;&gt; &#009;&#009;&#009;&#009;&lt;camel:constant&gt;GET&lt;/camel:constant&gt;&#010;&gt; &#009;&#009;&#009;&lt;/camel:setHeader&gt;&#010;&gt; &#009;&#009;&#009;&lt;camel:setHeader headerName=""Content-Type""&gt;&#010;&gt; &#009;&#009;&#009;&#009;&lt;camel:constant&gt;application/json&lt;/camel:constant&gt;&#010;&gt; &#009;&#009;&#009;&lt;/camel:setHeader&gt;&#010;&gt; &#010;&gt; &#009;&#009;&#009;&lt;camel:enrich&gt;&#010;&gt; &#009;&#009;&#009;&#009;&lt;camel:simple&gt;&#010;&gt; &#009;&#009;&#009;&#009;&#009;{{dnc.api.url}}?throwExceptionOnFailure=false&#010;&gt; &#009;&#009;&#009;&#009;&lt;/camel:simple&gt;&#010;&gt; &#009;&#009;&#009;&lt;/camel:enrich&gt;&#010;&gt; &#010;&gt; &#009;&#009;&#009;&lt;camel:unmarshal ref=""succ_resp"" /&gt;&#010;&gt; &#009;&#009;&#009;&lt;camel:process ref=""dncResponseProcessor"" /&gt;&#010;&gt; &#009;&#009;&#009;&lt;camel:process ref=""webgetResponseProcessor"" /&gt;&#010;&gt; &#009;&#009;&#009;&lt;camel:onException id=""camel_OnException""&gt;&#010;&gt; &#009;&#009;&#009;&#009;&lt;camel:exception&gt;java.net.ConnectException&lt;/camel:exception&gt;&#010;&gt; &#009;&#009;&#009;&#009;&lt;camel:exception&gt;java.lang.Throwable&lt;/camel:exception&gt;&#010;&gt; &#009;&#009;&#009;&#009;&lt;camel:handled&gt;&#010;&gt; &#009;&#009;&#009;&#009;&#009;&lt;constant&gt;true&lt;/constant&gt;&#010;&gt; &#009;&#009;&#009;&#009;&lt;/camel:handled&gt;&#010;&gt; &#009;&#009;&#009;&#009;&lt;camel:process ref=""webGetExceptionProcessor""&#010;&gt; id=""webGetExceptionProcessor"" /&gt;&#010;&gt; &#009;&#009;&#009;&lt;/camel:onException&gt;&#010;&gt; &#009;&#009;&lt;/camel:route&gt;&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Camel-HTTP-I-O-exception-java-net-SocketException-caught-when-processing-request-Too-many-open-files-tp5798262.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt; &#010;&#010;"
273,275,urwithsumit,    Re: Camel HTTP: I/O exception (java.net.SocketException) caught when processing request: Too many open files,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493413404001-5798493.post%40n5.nabble.com%3E,users,"Fri, 28 Apr 2017 21:03:24 GMT","Thanks Tomo for sharing your thoughts.&#010;&#010;I got the problem solved by switching from Camel-Http to Camel-Http4&#010;component.&#010;With Http4 i was able to set the headers for closing the connections and&#010;also a timeout period.&#010;&#010;In case of Http, the connections were not closing and that was accounting&#010;towards large number of open files.&#010;&#010;&#010;Regards&#010;Sumit&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-HTTP-I-O-exception-java-net-SocketException-caught-when-processing-request-Too-many-open-files-tp5798262p5798493.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
274,276,Moshe Recanati,Using stream resequencer with Custom comparator,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2BhKCHOJXUngtXcrnSRF4RuGbAAEooW-BK4Vc3iyoyGox815fQ%40mail.gmail.com%3E,users,"Tue, 25 Apr 2017 20:08:06 GMT","Hi,&#010;I'm using stream resequencer with custom comparator.&#010;I'm having issue that some of the elements compared return 0 as they are&#010;equal in terms of sorting but different in content level.&#010;This cause a situation that these elements not pushed to the consumer.&#010;I tried to add timestamp to the elements and take this as the compare in&#010;case it's equal but than the queue entered into endless loop.&#010;Are you familiar with this situation? Anything that I can do to solve it?&#010;&#010;I know there is batch option of resequencer however I don't know how to&#010;implement custom comparator for this use case. Can you help with this?&#010;&#010;Below you can find short snipplet from my code:&#010;&#010;Thank you in advance,&#010;Moshe&#010;&#010;&#010;*Configure*&#010;*context.addComponent(""activemq"",*&#010;*&#010;ActiveMQComponent.activeMQComponent(""vm://localhost?broker.persistent=false""));*&#010;* context.addRoutes(new RouteBuilder() {*&#010;* @Override*&#010;* public void configure() throws Exception {*&#010;* // START SNIPPET: e1*&#010;* from(""activemq:queue:test.queue"")*&#010;&#010;*&#010;.resequence(header(""seqno"")).stream().timeout(50000).capacity(10).comparator(comparator)*&#010;* // END SNIPPET: e1*&#010;* }*&#010;* });*&#010;&#010;*Comperator*&#010;*public int compare(Exchange arg0, Exchange arg1) {*&#010;&#010;* ICM icmA = (ICM) arg0.getIn().getBody();*&#010;* ICM icmB = (ICM) arg1.getIn().getBody();*&#010;&#010;* List&lt;ICM&gt; icmsA;*&#010;* List&lt;ICM&gt; icmsB;*&#010;* if (icmRepository != null) {*&#010;* icmsA =&#010;icmRepository.findByProspectIDAndIcmStatus(icmA.getProspect().get_id(), 1);*&#010;* icmsB =&#010;icmRepository.findByProspectIDAndIcmStatus(icmB.getProspect().get_id(), 1);*&#010;* }*&#010;* else*&#010;* {*&#010;* icmsA = new ArrayList&lt;ICM&gt;();*&#010;* icmsA.add(icmA);*&#010;* icmsB = new ArrayList&lt;ICM&gt;();*&#010;* icmsB.add(icmB);*&#010;* }*&#010;* int icmATime = (int) (icmA.getTimeStamp() / 1000);*&#010;* int icmBTime = (int) (icmB.getTimeStamp() / 1000) + 1;*&#010;* int ICMA = calculateValue(icmsA)/* * 10000 + icmATime */;*&#010;* int ICMB = calculateValue(icmsB)/* * 10000 + icmBTime */;*&#010;&#010;* int compare = ICMB - ICMA;*&#010;&#010;* /**&#010;* * if (compare == 0 &amp;&amp; icmA != icmB) { compare = (int) i++; }*&#010;* */*&#010;&#010;* System.out.println(""^^^^^^^^comparing messages "" + icmA + "" .... "" + icmB&#010;+ "" result= ICMA - "" + ICMA*&#010;* + "" ICMB - "" + ICMB + "" total - "" + compare);*&#010;* return compare;*&#010;*}*&#010;&#010;"
275,277,imranrazakhan,Unable to convert value org.mybatis.spring.SqlSessionFactoryBean@3de15b24 to type org.apache.ibatis.session.SqlSessionFactory,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493153490183-5798274.post%40n5.nabble.com%3E,users,"Tue, 25 Apr 2017 20:51:30 GMT","Hi,&#010;&#010;I am configuring Apache Camel MyBatis route in Jboss Fuse, but getting error&#010;&#010;""Unable to convert value org.mybatis.spring.SqlSessionFactoryBean@3de15b24&#010;to type org.apache.ibatis.session.SqlSessionFactory""&#010;&#010;I verified only camel-mybatis is installed in jboss, it look like it still&#010;expecting old ibatis&#010;&#010;My Config:&#010;&lt;bean id=""sqlSessionFactory""&#010;class=""org.mybatis.spring.SqlSessionFactoryBean""&gt;&#010;        &lt;property name=""dataSource"" ref=""mySqlDS""/&gt;&#010;        &lt;property name=""configLocation"" ref=""mybatisConfig""/&gt;&#010;        &lt;property name=""mapperLocations""&gt;&#010;        &#009;&lt;array value-type=""org.springframework.core.io.Resource""&gt;&#010;        &#009;&lt;bean class=""org.springframework.core.io.ClassPathResource""&gt;&#010;        &#009;&#009;&lt;argument value=""xyz.xml"" /&gt;&#010;        &#009;&lt;/bean&gt;&#010;        &#009;&lt;/array&gt;&#010;       &#009;&lt;/property&gt;&#010;    &lt;/bean&gt;&#010;&#010;    &lt;bean id=""mybatis""&#010;class=""org.apache.camel.component.mybatis.MyBatisComponent""&gt;&#010;        &lt;property name=""sqlSessionFactory"" ref=""sqlSessionFactory""/&gt;&#010;    &lt;/bean&gt;&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Unable-to-convert-value-org-mybatis-spring-SqlSessionFactoryBean-3de15b24-to-type-org-apache-ibatis-y-tp5798274.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
276,278,Tomohisa Igarashi,  Re: Unable to convert value org.mybatis.spring.SqlSessionFactoryBean@3de15b24 to type org.apache.ibatis.session.SqlSessionFactory,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3Cee20e15d-ab3d-fa5c-3e0b-ae1590840119%40gmail.com%3E,users,"Wed, 26 Apr 2017 04:19:16 GMT","Hi,&#010;&#010;You need to ask Red Hat support about Red Hat product.&#010;&#010;BTW found a related topic&#010;http://camel.465427.n5.nabble.com/blueprint-myBatis-transactions-td5764629.html&#010;&#010;Thanks,&#010;Tomo&#010;&#010;&#010;On 04/26/2017 05:51 AM, imranrazakhan wrote:&#010;&gt; Hi,&#010;&gt; &#010;&gt; I am configuring Apache Camel MyBatis route in Jboss Fuse, but getting error&#010;&gt; &#010;&gt; ""Unable to convert value org.mybatis.spring.SqlSessionFactoryBean@3de15b24&#010;&gt; to type org.apache.ibatis.session.SqlSessionFactory""&#010;&gt; &#010;&gt; I verified only camel-mybatis is installed in jboss, it look like it still&#010;&gt; expecting old ibatis&#010;&gt; &#010;&gt; My Config:&#010;&gt; &lt;bean id=""sqlSessionFactory""&#010;&gt; class=""org.mybatis.spring.SqlSessionFactoryBean""&gt;&#010;&gt;          &lt;property name=""dataSource"" ref=""mySqlDS""/&gt;&#010;&gt;          &lt;property name=""configLocation"" ref=""mybatisConfig""/&gt;&#010;&gt;          &lt;property name=""mapperLocations""&gt;&#010;&gt;          &#009;&lt;array value-type=""org.springframework.core.io.Resource""&gt;&#010;&gt;          &#009;&lt;bean class=""org.springframework.core.io.ClassPathResource""&gt;&#010;&gt;          &#009;&#009;&lt;argument value=""xyz.xml"" /&gt;&#010;&gt;          &#009;&lt;/bean&gt;&#010;&gt;          &#009;&lt;/array&gt;&#010;&gt;         &#009;&lt;/property&gt;&#010;&gt;      &lt;/bean&gt;&#010;&gt; &#010;&gt;      &lt;bean id=""mybatis""&#010;&gt; class=""org.apache.camel.component.mybatis.MyBatisComponent""&gt;&#010;&gt;          &lt;property name=""sqlSessionFactory"" ref=""sqlSessionFactory""/&gt;&#010;&gt;      &lt;/bean&gt;&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Unable-to-convert-value-org-mybatis-spring-SqlSessionFactoryBean-3de15b24-to-type-org-apache-ibatis-y-tp5798274.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt; &#010;&#010;"
277,279,Tim Jones,Spring Remoting with JMS >V2.16 issue with binding to correct method,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493163877483-5798277.post%40n5.nabble.com%3E,users,"Tue, 25 Apr 2017 23:44:37 GMT",We use Spring remoting with JMS (Camel V2.15.4) to proxy our calls between&#010;Swing clients and a Karaf server. From 2.16.x there appears to be an issue&#010;with binding to the correct method. This can fairly easily be reproduced by&#010;modifying the examples in spring-example-spring-jms and adding an additional&#010;method to the Multiplier interface and implemented Treble class e.g. int&#010;multiplyAgain(int originalNumber); The  CamelClientRemoting client and&#010;SpringJmsClientRemotingServerTest test fail. It seems that there is an issue&#010;introduced after 2.16 (I also tested against 2.18.3) perhaps in the binding&#010;logic. Can anyone confirm whether they have experienced the same issue?&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Spring-Remoting-with-JMS-V2-16-issue-with-binding-to-correct-method-tp5798277.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
278,280,Claus Ibsen,  Re: Spring Remoting with JMS >V2.16 issue with binding to correct method,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNnAzMmkG3GMp9kdtoZU9qTXTYBa5UjERHJZpcXQspnRNQ%40mail.gmail.com%3E,users,"Wed, 26 Apr 2017 07:19:12 GMT","See the release notes and the docs, there is some options you need to&#010;turn on / off to have old behavior&#010;&#010;On Wed, Apr 26, 2017 at 1:44 AM, Tim Jones &lt;tim.jones@mccarthy.co.nz&gt; wrote:&#010;&gt; We use Spring remoting with JMS (Camel V2.15.4) to proxy our calls between&#010;&gt; Swing clients and a Karaf server. From 2.16.x there appears to be an issue&#010;&gt; with binding to the correct method. This can fairly easily be reproduced by&#010;&gt; modifying the examples in spring-example-spring-jms and adding an additional&#010;&gt; method to the Multiplier interface and implemented Treble class e.g. int&#010;&gt; multiplyAgain(int originalNumber); The  CamelClientRemoting client and&#010;&gt; SpringJmsClientRemotingServerTest test fail. It seems that there is an issue&#010;&gt; introduced after 2.16 (I also tested against 2.18.3) perhaps in the binding&#010;&gt; logic. Can anyone confirm whether they have experienced the same issue?&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Spring-Remoting-with-JMS-V2-16-issue-with-binding-to-correct-method-tp5798277.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
279,281,Tim Jones,    Re: Spring Remoting with JMS >V2.16 issue with binding to correct method,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493239533495-5798364.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 20:45:33 GMT","Thanks Claus.&#010;&#010;for others in the dark the change needed to enable the Spring Remoting&#010;example to work &gt;2.16.x (effected by CAMEL-5402) with multiple methods is to&#010;camel-client-remoting.xml adding binding=""false"" as follows&#010;&#010;    &lt;camel:proxy&#010;      id=""multiplierProxy""&#010;      binding=""false""&#010;      serviceInterface=""org.apache.camel.example.server.Multiplier""&#010;      serviceUrl=""jms:queue:numbers""/&gt;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Spring-Remoting-with-JMS-V2-16-issue-with-binding-to-correct-method-tp5798277p5798364.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
280,282,srinivas.indali,"After Camel 2.16, absolute paths will be invalid",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493185270056-5798288.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 05:41:10 GMT","Hi All,&#010;&#010;We are currently using Camle 2.12.3, we have been used absolute paths in the&#010;code base, now we are upgrading to camel 2.16.3, because of absolute paths&#010;converting to relative paths in Camel 2.16.3 we are facing issues, is there&#010;any way that we can force camel to use absolute paths. or any quick work&#010;around.&#010;&#010;Thanks and Regards,&#010;Srinivas.&#010;&#010; &#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/After-Camel-2-16-absolute-paths-will-be-invalid-tp5798288.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
281,283,Jim Pirkle,"  Re: After Camel 2.16, absolute paths will be invalid",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAHgYEh9SXx4cjgqdAZZdjAGkduViQFtfYRMsqCiu8bs4zGPzBQ%40mail.gmail.com%3E,users,"Wed, 26 Apr 2017 13:02:08 GMT","Work around:&#010;&#010;Navigate from default directory up to the root, then to desired directory.&#010;Ugly, but it works for me:&#010;     sftp://servername/../../dir/subdir/&#010;&#010;&#010;On Wed, Apr 26, 2017 at 3:00 AM srinivas.indali &lt;srini.indali@gmail.com&gt;&#010;wrote:&#010;&#010;&gt; Hi All,&#010;&gt;&#010;&gt; We are currently using Camle 2.12.3, we have been used absolute paths in&#010;&gt; the&#010;&gt; code base, now we are upgrading to camel 2.16.3, because of absolute paths&#010;&gt; converting to relative paths in Camel 2.16.3 we are facing issues, is there&#010;&gt; any way that we can force camel to use absolute paths. or any quick work&#010;&gt; around.&#010;&gt;&#010;&gt; Thanks and Regards,&#010;&gt; Srinivas.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context:&#010;&gt; http://camel.465427.n5.nabble.com/After-Camel-2-16-absolute-paths-will-be-invalid-tp5798288.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&#010;"
282,284,,Re: Camel + myBatis Issue,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAHgYEh9SXx4cjgqdAZZdjAGkduViQFtfYRMsqCiu8bs4zGPzBQ%40mail.gmail.com%3E,users,"Wed, 26 Apr 2017 13:02:08 GMT","Work around:&#010;&#010;Navigate from default directory up to the root, then to desired directory.&#010;Ugly, but it works for me:&#010;     sftp://servername/../../dir/subdir/&#010;&#010;&#010;On Wed, Apr 26, 2017 at 3:00 AM srinivas.indali &lt;srini.indali@gmail.com&gt;&#010;wrote:&#010;&#010;&gt; Hi All,&#010;&gt;&#010;&gt; We are currently using Camle 2.12.3, we have been used absolute paths in&#010;&gt; the&#010;&gt; code base, now we are upgrading to camel 2.16.3, because of absolute paths&#010;&gt; converting to relative paths in Camel 2.16.3 we are facing issues, is there&#010;&gt; any way that we can force camel to use absolute paths. or any quick work&#010;&gt; around.&#010;&gt;&#010;&gt; Thanks and Regards,&#010;&gt; Srinivas.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context:&#010;&gt; http://camel.465427.n5.nabble.com/After-Camel-2-16-absolute-paths-will-be-invalid-tp5798288.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&#010;"
283,285,Arunit,  Re: Camel + myBatis Issue,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493187371341-5798289.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 06:16:11 GMT","hi everyone,&#010;                  using mybatis component  for read xml file to insert in&#010;mysql. I dono any idea but clearly understood the flow of mybatis but &#010;facing problem. any body guide ME&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-myBatis-Issue-tp5740706p5798289.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
284,286,gelawlor,Camel context NULL in derived class,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493200764130-5798307.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 09:59:24 GMT","Hi,&#010;&#010;I am implementing a Camel based connector service to ActiveMQ and the class&#010;outline looks as follows:&#010;&#010;public class ActiveMQCamelRouterService {&#010;&#009;&#010;&#009;private CamelContext camelContext;&#010;    private ProducerTemplate camelTemplate;&#010;&#009;&#010;&#010;&#009;public ActiveMQCamelRouterService()&#010;&#009;{&#010;&#009;&#009;try &#010;&#009;&#009;{&#010;&#009;&#009;&#009;CamelContext camelContext = new DefaultCamelContext();&#010;&#009;&#009;   &#009;ActiveMQComponent queue =&#010;ActiveMQComponent.activeMQComponent(""tcp://localhost:61616?broker.persistent=false"");&#010;&#009;        queue.setBrokerURL(""tcp://localhost:61616"");&#010;&#009;        camelContext.addComponent(""activemq"", queue); &#010;&#009;        camelTemplate = camelContext.createProducerTemplate();       &#010;&#009; }&#010;&#009;&#009;catch(...)&#010;&#009;&#009;{&#010;&#009;&#009;}&#010;&#009;}&#010;&#009;&#010;    public void process(SOAPEnvelope req, SOAPEnvelope resp) throws&#010;Exception {&#010;&#009;&#009;try&#010;&#009;&#009;{&#010;&#009;&#009;&#009;Node requestNode = getMessageNode(req);&#010;&#009;&#009;&#009;if(requestNode!=null)&#010;&#009;    &#009;        {&#010;&#009;&#009;&#009;&#009;final String routeSource = ""direct:activemq"";&#010;&#009;&#009;&#009;&#009;final String routeDestination = ""activemq:queue:testqueue"";&#010;&#010;&#009;&#009;&#009;&#009;if( camelContext != null )&#010;&#009;&#009;&#009;&#009;{&#010;&#009;&#009;&#009;&#009;&#009;camelContext.addRoutes(new RouteBuilder() {&#009;&#009;    &#010;&#009;&#009;&#009;            public void configure() throws Exception {&#010;&#009;&#009;&#009;                from(routeSource).to(routeDestination);&#010;&#009;&#009;&#009;            }&#010;&#009;&#009;&#009;        });&#010;&#010;&#009;            &#009;camelContext.start();&#010;&#010;&#009;            &#009;//need to understand how to shape message with headers to&#010;activemq through camel&#010;&#009;            &#009;camelTemplate.sendBody(routeSource, ""This is a test message&#010;from Camel"");&#010;            &#009;}&#010;&#010;&#009;    &#009;}&#010;&#009;&#009;}&#010;&#009;&#009;catch(...)&#010;}&#010;&#010;What I have noticed is that the Camel context is initialized in the&#010;constructor but is NULL when the process method is called. I have tested&#010;this code instantiating other objects in the constructor and can see they&#010;are valid in the process method. Do you know if this is a known issue or&#010;design feature of Camel ? Would this happen if somehow I got the mix of jars&#010;(Camel, Camel-ActiveMQ and Spring) matched up incorrectly? &#010;&#010;Thanks,&#010;Ger.&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-context-NULL-in-derived-class-tp5798307.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
285,287,Claus Ibsen,  Re: Camel context NULL in derived class,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yN%3DA%3D7S%2B93z7_YB7m3%3DyoQd0K3SAXJDoGct9pcqRhgi4Dg%40mail.gmail.com%3E,users,"Wed, 26 Apr 2017 10:02:35 GMT","Hi&#010;&#010;That is because the ctr is creating a local instance, eg&#010;&#010; CamelContext camelContext = new DefaultCamelContext();&#010;&#010;should be&#010;&#010; camelContext = new DefaultCamelContext();&#010;&#010;On Wed, Apr 26, 2017 at 11:59 AM, gelawlor &lt;ger.lawlor@gmail.com&gt; wrote:&#010;&gt; Hi,&#010;&gt;&#010;&gt; I am implementing a Camel based connector service to ActiveMQ and the class&#010;&gt; outline looks as follows:&#010;&gt;&#010;&gt; public class ActiveMQCamelRouterService {&#010;&gt;&#010;&gt;         private CamelContext camelContext;&#010;&gt;     private ProducerTemplate camelTemplate;&#010;&gt;&#010;&gt;&#010;&gt;         public ActiveMQCamelRouterService()&#010;&gt;         {&#010;&gt;                 try&#010;&gt;                 {&#010;&gt;                         CamelContext camelContext = new DefaultCamelContext();&#010;&gt;                         ActiveMQComponent queue =&#010;&gt; ActiveMQComponent.activeMQComponent(""tcp://localhost:61616?broker.persistent=false"");&#010;&gt;                 queue.setBrokerURL(""tcp://localhost:61616"");&#010;&gt;                 camelContext.addComponent(""activemq"", queue);&#010;&gt;                 camelTemplate = camelContext.createProducerTemplate();&#010;&gt;          }&#010;&gt;                 catch(...)&#010;&gt;                 {&#010;&gt;                 }&#010;&gt;         }&#010;&gt;&#010;&gt;     public void process(SOAPEnvelope req, SOAPEnvelope resp) throws&#010;&gt; Exception {&#010;&gt;                 try&#010;&gt;                 {&#010;&gt;                         Node requestNode = getMessageNode(req);&#010;&gt;                         if(requestNode!=null)&#010;&gt;                         {&#010;&gt;                                 final String routeSource = ""direct:activemq"";&#010;&gt;                                 final String routeDestination = ""activemq:queue:testqueue"";&#010;&gt;&#010;&gt;                                 if( camelContext != null )&#010;&gt;                                 {&#010;&gt;                                         camelContext.addRoutes(new RouteBuilder() {&#010;&gt;                                     public void configure() throws Exception {&#010;&gt;                                         from(routeSource).to(routeDestination);&#010;&gt;                                     }&#010;&gt;                                 });&#010;&gt;&#010;&gt;                         camelContext.start();&#010;&gt;&#010;&gt;                         //need to understand how to shape message with headers to&#010;&gt; activemq through camel&#010;&gt;                         camelTemplate.sendBody(routeSource, ""This is a test message&#010;&gt; from Camel"");&#010;&gt;                 }&#010;&gt;&#010;&gt;                 }&#010;&gt;                 }&#010;&gt;                 catch(...)&#010;&gt; }&#010;&gt;&#010;&gt; What I have noticed is that the Camel context is initialized in the&#010;&gt; constructor but is NULL when the process method is called. I have tested&#010;&gt; this code instantiating other objects in the constructor and can see they&#010;&gt; are valid in the process method. Do you know if this is a known issue or&#010;&gt; design feature of Camel ? Would this happen if somehow I got the mix of jars&#010;&gt; (Camel, Camel-ActiveMQ and Spring) matched up incorrectly?&#010;&gt;&#010;&gt; Thanks,&#010;&gt; Ger.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/Camel-context-NULL-in-derived-class-tp5798307.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
286,288,gelawlor,    Re: Camel context NULL in derived class,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAMW-qPB_-hCJu%3DkfV_4d9m7Dt03SuPLKuSrrVzgnhoVpVo0wmQ%40mail.gmail.com%3E,users,"Wed, 26 Apr 2017 10:08:21 GMT","Of course. Thanks for the prompt response. I cannot believe I let something&#010;so obvious slip through.&#010;&#010;On Wed, Apr 26, 2017 at 11:03 AM, Claus Ibsen-2 [via Camel] &lt;&#010;ml+s465427n5798308h71@n5.nabble.com&gt; wrote:&#010;&#010;&gt; Hi&#010;&gt;&#010;&gt; That is because the ctr is creating a local instance, eg&#010;&gt;&#010;&gt;  CamelContext camelContext = new DefaultCamelContext();&#010;&gt;&#010;&gt; should be&#010;&gt;&#010;&gt;  camelContext = new DefaultCamelContext();&#010;&gt;&#010;&gt; On Wed, Apr 26, 2017 at 11:59 AM, gelawlor &lt;[hidden email]&#010;&gt; &lt;http:///user/SendEmail.jtp?type=node&amp;node=5798308&amp;i=0&gt;&gt; wrote:&#010;&gt;&#010;&gt; &gt; Hi,&#010;&gt; &gt;&#010;&gt; &gt; I am implementing a Camel based connector service to ActiveMQ and the&#010;&gt; class&#010;&gt; &gt; outline looks as follows:&#010;&gt; &gt;&#010;&gt; &gt; public class ActiveMQCamelRouterService {&#010;&gt; &gt;&#010;&gt; &gt;         private CamelContext camelContext;&#010;&gt; &gt;     private ProducerTemplate camelTemplate;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;         public ActiveMQCamelRouterService()&#010;&gt; &gt;         {&#010;&gt; &gt;                 try&#010;&gt; &gt;                 {&#010;&gt; &gt;                         CamelContext camelContext = new&#010;&gt; DefaultCamelContext();&#010;&gt; &gt;                         ActiveMQComponent queue =&#010;&gt; &gt; ActiveMQComponent.activeMQComponent(""tcp://localhost:61616?broker.persistent=false"");&#010;&gt;&#010;&gt; &gt;                 queue.setBrokerURL(""tcp://localhost:61616"");&#010;&gt; &gt;                 camelContext.addComponent(""activemq"", queue);&#010;&gt; &gt;                 camelTemplate = camelContext.createProducerTemplate();&#010;&gt; &gt;          }&#010;&gt; &gt;                 catch(...)&#010;&gt; &gt;                 {&#010;&gt; &gt;                 }&#010;&gt; &gt;         }&#010;&gt; &gt;&#010;&gt; &gt;     public void process(SOAPEnvelope req, SOAPEnvelope resp) throws&#010;&gt; &gt; Exception {&#010;&gt; &gt;                 try&#010;&gt; &gt;                 {&#010;&gt; &gt;                         Node requestNode = getMessageNode(req);&#010;&gt; &gt;                         if(requestNode!=null)&#010;&gt; &gt;                         {&#010;&gt; &gt;                                 final String routeSource =&#010;&gt; ""direct:activemq"";&#010;&gt; &gt;                                 final String routeDestination =&#010;&gt; ""activemq:queue:testqueue"";&#010;&gt; &gt;&#010;&gt; &gt;                                 if( camelContext != null )&#010;&gt; &gt;                                 {&#010;&gt; &gt;                                         camelContext.addRoutes(new&#010;&gt; RouteBuilder() {&#010;&gt; &gt;                                     public void configure() throws&#010;&gt; Exception {&#010;&gt; &gt;                                         from(routeSource).to(routeDestination);&#010;&gt;&#010;&gt; &gt;                                     }&#010;&gt; &gt;                                 });&#010;&gt; &gt;&#010;&gt; &gt;                         camelContext.start();&#010;&gt; &gt;&#010;&gt; &gt;                         //need to understand how to shape message with&#010;&gt; headers to&#010;&gt; &gt; activemq through camel&#010;&gt; &gt;                         camelTemplate.sendBody(routeSource, ""This is a&#010;&gt; test message&#010;&gt; &gt; from Camel"");&#010;&gt; &gt;                 }&#010;&gt; &gt;&#010;&gt; &gt;                 }&#010;&gt; &gt;                 }&#010;&gt; &gt;                 catch(...)&#010;&gt; &gt; }&#010;&gt; &gt;&#010;&gt; &gt; What I have noticed is that the Camel context is initialized in the&#010;&gt; &gt; constructor but is NULL when the process method is called. I have tested&#010;&gt; &gt; this code instantiating other objects in the constructor and can see&#010;&gt; they&#010;&gt; &gt; are valid in the process method. Do you know if this is a known issue or&#010;&gt; &gt; design feature of Camel ? Would this happen if somehow I got the mix of&#010;&gt; jars&#010;&gt; &gt; (Camel, Camel-ActiveMQ and Spring) matched up incorrectly?&#010;&gt; &gt;&#010;&gt; &gt; Thanks,&#010;&gt; &gt; Ger.&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt;&#010;&gt; &gt; --&#010;&gt; &gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; com/Camel-context-NULL-in-derived-class-tp5798307.html&#010;&gt; &gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/Camel-context-NULL-in-derived-class-&#010;&gt; tp5798307p5798308.html&#010;&gt; To unsubscribe from Camel context NULL in derived class, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=5798307&amp;code=Z2VyLmxhd2xvckBnbWFpbC5jb218NTc5ODMwN3wxMjgxNjExMjA0&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-context-NULL-in-derived-class-tp5798307p5798309.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
287,289,ayache.k,XMLSecurity not generating,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493209982537-5798321.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 12:33:02 GMT","Hi&#010;&#010;I am using Camel XML security component to sign an xml using the following&#010;setup:&#010;&#010;&lt;recipientList&gt;&#010;               &#010;&lt;simple&gt;xmlsecurity:sign://enveloped?keyAccessor=#keyAccessor&amp;amp;parentLocalName=FragmentsToBeHashed&amp;amp;signatureAlgorithm=http://www.w3.org/2000/09/xmldsig#rsa-sha1&amp;amp;digestAlgorithm=http://www.w3.org/2000/09/xmldsig#sha1&amp;amp;addKeyInfoReference=false&amp;amp;canonicalizationMethod=C14n&lt;/simple&gt;&#010; &lt;/recipientList&gt;&#010;&#010;The signature produced - see below - does not include the X509Certificate&#010;element. This is needed for the verifier client to extract the publicKey. Is&#010;there a way of telling the xml security component to include this? It is not&#010;obvious from the compoent doc page.&#010;&#010;Kind regards,&#010;&#010;Ayache&#010;&#010;&#010;&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;&#010;&lt;ds:Signature xmlns:ds=""http://www.w3.org/2000/09/xmldsig#""&#010;Id=""_d0540f2b-661e-4fd7-b3d0-03f5f2ae5afe""&gt;&#010;   &lt;ds:SignedInfo&gt;&#010;      &lt;ds:CanonicalizationMethod&#010;Algorithm=""http://www.w3.org/TR/2001/REC-xml-c14n-20010315"" /&gt;&#010;      &lt;ds:SignatureMethod&#010;Algorithm=""http://www.w3.org/2000/09/xmldsig#rsa-sha1"" /&gt;&#010;      &lt;ds:Reference URI=""""&gt;&#010;         &lt;ds:Transforms&gt;&#010;            &lt;ds:Transform&#010;Algorithm=""http://www.w3.org/2000/09/xmldsig#enveloped-signature"" /&gt;&#010;            &lt;ds:Transform&#010;Algorithm=""http://www.w3.org/TR/2001/REC-xml-c14n-20010315"" /&gt;&#010;         &lt;/ds:Transforms&gt;&#010;         &lt;ds:DigestMethod Algorithm=""http://www.w3.org/2000/09/xmldsig#sha1""&#010;/&gt;&#010;         &lt;ds:DigestValue&gt;ND6UKUHRSxgGFqDCchmYxlO/H1k=&lt;/ds:DigestValue&gt;&#010;      &lt;/ds:Reference&gt;&#010;   &lt;/ds:SignedInfo&gt;&#010;  &#010;&lt;ds:SignatureValue&gt;JiG1VlPOywLKDXhzvsanjSEAYHCvwNSTYqWIWHC2qNtvqZSc+j9fh1yLlqh7zKDnQ8u74aWDSKERT6KC2aqECDCF3jY16B1r9T7HgpRP0LH42845MdOe8xamNy91Oi7rE614a9CzXNy0smhUKvIxGxj1D0iCkqVHyhITuOIyjLuzcHCIBAegBoy7LE+rp3pLc6k3UX7YSXeC/1ZQz1AxU9qJakP5GxI3sYPfK7qz0IFU6quLx7UVTl7Iv/iKm6RKOlIuiGbD8KczBpH5kHXg6zrs4P0g06SbLUE7s7RNNZ6uMDZeVIR6SMPPrnYOd5+Zig/rbysDnYCGgo1uSL73gg==&lt;/ds:SignatureValue&gt;&#010;   &lt;ds:KeyInfo Id=""_2a65b9fa-04c5-4d31-b656-6f950d6e4d04""&gt;&#010;      &lt;ds:X509Data&gt;&#010;         &lt;ds:X509IssuerSerial&gt;&#010;            &lt;ds:X509IssuerName&gt;CN=rootCA, OU=vision, O=INPS, L=London,&#010;ST=Greater London, C=UK&lt;/ds:X509IssuerName&gt;&#010;            &lt;ds:X509SerialNumber&gt;13213122219353237285&lt;/ds:X509SerialNumber&gt;&#010;         &lt;/ds:X509IssuerSerial&gt;&#010;      &lt;/ds:X509Data&gt;&#010;   &lt;/ds:KeyInfo&gt;&#010;&lt;/ds:Signature&gt;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/XMLSecurity-not-generating-tp5798321.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
288,290,Trilok Agrawal,  Re: XMLSecurity not generating,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C7B8E5148-F369-4CDE-96B0-A1F34C9B796E%40icloud.com%3E,users,"Thu, 27 Apr 2017 01:16:13 GMT","Yes, you should choose BST_DIRECT_REFERENCE&#010;&#010;Take a look at http://coheigea.blogspot.in/2013/03/signature-and-encryption-key.html &lt;http://coheigea.blogspot.in/2013/03/signature-and-encryption-key.html&gt;&#010;&#010;T.K&#010;&#010;&gt; On 26-Apr-2017, at 5:33 AM, ayache.k &lt;ayache.khettar@gmail.com&gt; wrote:&#010;&gt; &#010;&gt; Hi&#010;&gt; &#010;&gt; I am using Camel XML security component to sign an xml using the following&#010;&gt; setup:&#010;&gt; &#010;&gt; &lt;recipientList&gt;&#010;&gt; &#010;&gt; &lt;simple&gt;xmlsecurity:sign://enveloped?keyAccessor=#keyAccessor&amp;amp;parentLocalName=FragmentsToBeHashed&amp;amp;signatureAlgorithm=http://www.w3.org/2000/09/xmldsig#rsa-sha1&amp;amp;digestAlgorithm=http://www.w3.org/2000/09/xmldsig#sha1&amp;amp;addKeyInfoReference=false&amp;amp;canonicalizationMethod=C14n&lt;/simple&gt;&#010;&gt; &lt;/recipientList&gt;&#010;&gt; &#010;&gt; The signature produced - see below - does not include the X509Certificate&#010;&gt; element. This is needed for the verifier client to extract the publicKey. Is&#010;&gt; there a way of telling the xml security component to include this? It is not&#010;&gt; obvious from the compoent doc page.&#010;&gt; &#010;&gt; Kind regards,&#010;&gt; &#010;&gt; Ayache&#010;&gt; &#010;&gt; &#010;&gt; &lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;&#010;&gt; &lt;ds:Signature xmlns:ds=""http://www.w3.org/2000/09/xmldsig#""&#010;&gt; Id=""_d0540f2b-661e-4fd7-b3d0-03f5f2ae5afe""&gt;&#010;&gt;   &lt;ds:SignedInfo&gt;&#010;&gt;      &lt;ds:CanonicalizationMethod&#010;&gt; Algorithm=""http://www.w3.org/TR/2001/REC-xml-c14n-20010315"" /&gt;&#010;&gt;      &lt;ds:SignatureMethod&#010;&gt; Algorithm=""http://www.w3.org/2000/09/xmldsig#rsa-sha1"" /&gt;&#010;&gt;      &lt;ds:Reference URI=""""&gt;&#010;&gt;         &lt;ds:Transforms&gt;&#010;&gt;            &lt;ds:Transform&#010;&gt; Algorithm=""http://www.w3.org/2000/09/xmldsig#enveloped-signature"" /&gt;&#010;&gt;            &lt;ds:Transform&#010;&gt; Algorithm=""http://www.w3.org/TR/2001/REC-xml-c14n-20010315"" /&gt;&#010;&gt;         &lt;/ds:Transforms&gt;&#010;&gt;         &lt;ds:DigestMethod Algorithm=""http://www.w3.org/2000/09/xmldsig#sha1""&#010;&gt; /&gt;&#010;&gt;         &lt;ds:DigestValue&gt;ND6UKUHRSxgGFqDCchmYxlO/H1k=&lt;/ds:DigestValue&gt;&#010;&gt;      &lt;/ds:Reference&gt;&#010;&gt;   &lt;/ds:SignedInfo&gt;&#010;&gt; &#010;&gt; &lt;ds:SignatureValue&gt;JiG1VlPOywLKDXhzvsanjSEAYHCvwNSTYqWIWHC2qNtvqZSc+j9fh1yLlqh7zKDnQ8u74aWDSKERT6KC2aqECDCF3jY16B1r9T7HgpRP0LH42845MdOe8xamNy91Oi7rE614a9CzXNy0smhUKvIxGxj1D0iCkqVHyhITuOIyjLuzcHCIBAegBoy7LE+rp3pLc6k3UX7YSXeC/1ZQz1AxU9qJakP5GxI3sYPfK7qz0IFU6quLx7UVTl7Iv/iKm6RKOlIuiGbD8KczBpH5kHXg6zrs4P0g06SbLUE7s7RNNZ6uMDZeVIR6SMPPrnYOd5+Zig/rbysDnYCGgo1uSL73gg==&lt;/ds:SignatureValue&gt;&#010;&gt;   &lt;ds:KeyInfo Id=""_2a65b9fa-04c5-4d31-b656-6f950d6e4d04""&gt;&#010;&gt;      &lt;ds:X509Data&gt;&#010;&gt;         &lt;ds:X509IssuerSerial&gt;&#010;&gt;            &lt;ds:X509IssuerName&gt;CN=rootCA, OU=vision, O=INPS, L=London,&#010;&gt; ST=Greater London, C=UK&lt;/ds:X509IssuerName&gt;&#010;&gt;            &lt;ds:X509SerialNumber&gt;13213122219353237285&lt;/ds:X509SerialNumber&gt;&#010;&gt;         &lt;/ds:X509IssuerSerial&gt;&#010;&gt;      &lt;/ds:X509Data&gt;&#010;&gt;   &lt;/ds:KeyInfo&gt;&#010;&gt; &lt;/ds:Signature&gt;&#010;&gt; &#010;&gt; &#010;&gt; &#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/XMLSecurity-not-generating-tp5798321.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;"
289,291,ayache.k,    Re: XMLSecurity not generating,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493238303801-5798363.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 20:25:03 GMT","Thanks for your reply. My query is around Camel XML security component. I&#010;wanted to know if it is possible to generate the *X509Certificate* element&#010;in the *Signature* element - see below example.&#010;Of course I can use Java API/Bouncycastle to generate, but that's last&#010;resort.&#010;&#010; &lt;Signature xmlns=""http://www.w3.org/2000/09/xmldsig#""&gt;&#010;  &lt;SignedInfo&gt;&#010;   &lt;CanonicalizationMethod&#010;    Algorithm=""http://www.w3.org/TR/2001/REC-xml-c14n-20010315""/&gt;&#010;   &lt;SignatureMethod&#010;    Algorithm=""http://www.w3.org/2000/09/xmldsig#rsa-sha1""/&gt;&#010;   &lt;Reference URI=""""&gt;&#010;    &lt;Transforms&gt;&#010;     &lt;Transform&#010;      Algorithm=""http://www.w3.org/2000/09/xmldsig#enveloped-signature""/&gt;&#010;    &lt;/Transforms&gt;&#010;    &lt;DigestMethod Algorithm=""http://www.w3.org/2000/09/xmldsig#sha1""/&gt;&#010;    &lt;DigestValue&gt;tVicGh6V+8cHbVYFIU91o5+L3OQ=&lt;/DigestValue&gt;&#010;   &lt;/Reference&gt;&#010;  &lt;/SignedInfo&gt;&#010;  &lt;SignatureValue&gt;&#010;   dJDHiGQMaKN8iPuWApAL57eVnxz2BQtyujwfPSgE7HyKoxYtoRB97ocxZ&#010;   8ZU440wHtE39ZwRGIjvwor3WfURxnIgnI1CChMXXwoGpHH//Zc0z4ejaz&#010;   DuCNEq4Mm4OUVTiEVuwcWAOMkfDHaM82awYQiOGcwMbZe38UX0oPJ2DOE=&#010;  &lt;/SignatureValue&gt;&#010;  &lt;KeyInfo&gt;&#010;   &lt;X509Data&gt;&#010;    &lt;X509SubjectName&gt;&#010;     CN=My Name,O=Test Certificates Inc.,C=US&#010;    &lt;/X509SubjectName&gt;&#010;    &lt;X509Certificate&gt;&#010;     MIIB9zCCAWCgAwIBAgIERZwdkzANBgkqhkiG9w0BAQUFADBAMQswCQYD&#010;     VQQGEwJVUzEfMB0GA1UEChMWVGVzdCBDZXJ0aWZpY2F0ZXMgSW5jLjEQ&#010;     MA4GA1UEAxMHTXkgTmFtZTAeFw0wNzAxMDMyMTE4MTFaFw0zMTA4MjUy&#010;     ...&#010;    &lt;/X509Certificate&gt;&#010;   &lt;/X509Data&gt;&#010;  &lt;/KeyInfo&gt;&#010; &lt;/Signature&gt;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/XMLSecurity-not-generating-tp5798321p5798363.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
290,292,Franz Paul Forsthofer,      Re: XMLSecurity not generating,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGvJFufVtWurwtTv-3yyGF0Dqmh2M3ORZA4Jr%2B-VyaiC1bqYfQ%40mail.gmail.com%3E,users,"Thu, 27 Apr 2017 11:35:43 GMT","Hello Ayache,&#010;&#010;you can do this by implementing your own KeyAccessor. The KeyAccessor&#010;interface&#010;https://github.com/apache/camel/blob/master/components/camel-xmlsecurity/src/main/java/org/apache/camel/component/xmlsecurity/api/KeyAccessor.java&#010;contains the method&#010;&#010;KeyInfo getKeyInfo(Message message, Node messageBody, KeyInfoFactory&#010;keyInfoFactory) throws Exception;&#010;&#010;which returns the KeyInfo element. An example implementation is given by&#010;&#010;https://github.com/apache/camel/blob/master/components/camel-xmlsecurity/src/main/java/org/apache/camel/component/xmlsecurity/api/DefaultKeyAccessor.java&#010;&#010;which returns the total certificate chain. So you have to adapt this&#010;example to your needs.&#010;&#010;Best Regards Franz&#010;&#010;On Wed, Apr 26, 2017 at 10:25 PM, ayache.k &lt;ayache.khettar@gmail.com&gt; wrote:&#010;&#010;&gt; Thanks for your reply. My query is around Camel XML security component. I&#010;&gt; wanted to know if it is possible to generate the *X509Certificate* element&#010;&gt; in the *Signature* element - see below example.&#010;&gt; Of course I can use Java API/Bouncycastle to generate, but that's last&#010;&gt; resort.&#010;&gt;&#010;&gt;  &lt;Signature xmlns=""http://www.w3.org/2000/09/xmldsig#""&gt;&#010;&gt;   &lt;SignedInfo&gt;&#010;&gt;    &lt;CanonicalizationMethod&#010;&gt;     Algorithm=""http://www.w3.org/TR/2001/REC-xml-c14n-20010315""/&gt;&#010;&gt;    &lt;SignatureMethod&#010;&gt;     Algorithm=""http://www.w3.org/2000/09/xmldsig#rsa-sha1""/&gt;&#010;&gt;    &lt;Reference URI=""""&gt;&#010;&gt;     &lt;Transforms&gt;&#010;&gt;      &lt;Transform&#010;&gt;       Algorithm=""http://www.w3.org/2000/09/xmldsig#enveloped-signature""/&gt;&#010;&gt;     &lt;/Transforms&gt;&#010;&gt;     &lt;DigestMethod Algorithm=""http://www.w3.org/2000/09/xmldsig#sha1""/&gt;&#010;&gt;     &lt;DigestValue&gt;tVicGh6V+8cHbVYFIU91o5+L3OQ=&lt;/DigestValue&gt;&#010;&gt;    &lt;/Reference&gt;&#010;&gt;   &lt;/SignedInfo&gt;&#010;&gt;   &lt;SignatureValue&gt;&#010;&gt;    dJDHiGQMaKN8iPuWApAL57eVnxz2BQtyujwfPSgE7HyKoxYtoRB97ocxZ&#010;&gt;    8ZU440wHtE39ZwRGIjvwor3WfURxnIgnI1CChMXXwoGpHH//Zc0z4ejaz&#010;&gt;    DuCNEq4Mm4OUVTiEVuwcWAOMkfDHaM82awYQiOGcwMbZe38UX0oPJ2DOE=&#010;&gt;   &lt;/SignatureValue&gt;&#010;&gt;   &lt;KeyInfo&gt;&#010;&gt;    &lt;X509Data&gt;&#010;&gt;     &lt;X509SubjectName&gt;&#010;&gt;      CN=My Name,O=Test Certificates Inc.,C=US&#010;&gt;     &lt;/X509SubjectName&gt;&#010;&gt;     &lt;X509Certificate&gt;&#010;&gt;      MIIB9zCCAWCgAwIBAgIERZwdkzANBgkqhkiG9w0BAQUFADBAMQswCQYD&#010;&gt;      VQQGEwJVUzEfMB0GA1UEChMWVGVzdCBDZXJ0aWZpY2F0ZXMgSW5jLjEQ&#010;&gt;      MA4GA1UEAxMHTXkgTmFtZTAeFw0wNzAxMDMyMTE4MTFaFw0zMTA4MjUy&#010;&gt;      ...&#010;&gt;     &lt;/X509Certificate&gt;&#010;&gt;    &lt;/X509Data&gt;&#010;&gt;   &lt;/KeyInfo&gt;&#010;&gt;  &lt;/Signature&gt;&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.&#010;&gt; com/XMLSecurity-not-generating-tp5798321p5798363.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&gt;&#010;&#010;"
291,293,ayache.k,        Re: XMLSecurity not generating,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493303569636-5798419.post%40n5.nabble.com%3E,users,"Thu, 27 Apr 2017 14:32:49 GMT","Many thanks Franz, that's what I've implemented yesterday and I was going to&#010;come back here to update the post and you beat me.&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/XMLSecurity-not-generating-tp5798321p5798419.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
292,294,Bernard Ligny,Body lost with intra-context calls using direct-vm component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493213601903-5798327.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 13:33:21 GMT","I am busy with the refactoring of a mono-context Camel application into a&#010;multi-context one.&#010;In order to allow cross-contexts direct calls (and to avoid the replacement&#010;of numerous existing ""direct:"" uris), I did the following (that is to say:&#010;""direct"" alias now uses DirectVmComponent instead of DirectComponent)&#010;&#010;&#009;&#010;&#009;&#010;This is working fine...&#010;However, by doing this, I noticed this (very very strange) behaviour.&#010;&#010;When calling (with ""direct"" alias but using direct-vm component) a sub-route&#010;of the SAME context, the exchange body is lost when exiting the sub-route.&#010;&#010;*Example*:&#010;&#010;&#009;&#010;&#009;&#010;When run, the stdout is:&#010;&#010;&#010;&#010;=&gt; we can see the body is populated when exiting the sub-route, and suddenly&#010;becomes empty when returned back to the calling route.&#010;&#010;NB: Yes stream caching is enabled (to read body many times) + I did a stream&#010;to string conversion (convertBodyToString)&#010;&#010;As soon as I comment the ""@Produces"" section (to use DirectComponent and no&#010;more DirectVmComponent),&#010;the route behave as expected.&#010;&#010;&#010;&#010;Am I doing something wrong, or should I create a JIRA issue about it ?&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Body-lost-with-intra-context-calls-using-direct-vm-component-tp5798327.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
293,295,Bernard Ligny,  Re: Body lost with intra-context calls using direct-vm component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493225004565-5798337.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 16:43:24 GMT","Surprisingly, to make it work, I had to force a In&amp;Out pattern on the To uri&#010;!&#010;&#010;&#010;&#010;I guess (not checked in the Camel source) that the Exchange *copy* that was&#010;sent to the direct-vm endpoint, inherits by default from the same&#010;ExchangePattern as the original...which (in my case) was a InOnly one (&gt;JMS&#010;consumer) ??&#010;&#010;&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Body-lost-with-intra-context-calls-using-direct-vm-component-tp5798327p5798337.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
294,296,Bernard Ligny,  Re: Body lost with intra-context calls using direct-vm component,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493363779225-5798476.post%40n5.nabble.com%3E,users,"Fri, 28 Apr 2017 07:16:19 GMT",Issue created in JIRA:&#010;https://issues.apache.org/jira/browse/CAMEL-11217&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Body-lost-with-intra-context-calls-using-direct-vm-component-tp5798327p5798476.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
295,297,Rich Bowen,Last chance: ApacheCon is just three weeks away,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3Ce2f5db8d-de1d-7df9-2066-1e7b5e09f874%40rcbowen.com%3E,users,"Wed, 26 Apr 2017 13:46:12 GMT","ApacheCon is just three weeks away, in Miami, Florida, May 15th - 18th.&#010;http://apachecon.com/&#010;&#010;There's still time to register and attend. ApacheCon is the best place&#010;to find out about tomorrow's software, today.&#010;&#010;ApacheCon is the official convention of The Apache Software Foundation,&#010;and includes the co-located events:&#010;  * Apache: Big Data&#010;  * Apache: IoT&#010;  * TomcatCon&#010;  * FlexJS Summit&#010;  * Cloudstack Collaboration Conference&#010;  * BarCampApache&#010;  * ApacheCon Lightning Talks&#010;&#010;And there's dozens of opportunities to meet your fellow Apache&#010;enthusiasts, both from your project, and from the other 200+ projects at&#010;the Apache Software Foundation.&#010;&#010;Register here:&#010;http://events.linuxfoundation.org/events/apachecon-north-america/attend/register-&#010;&#010;More information here: http://apachecon.com/&#010;&#010;Follow us and learn more about ApacheCon:&#010;  * Twitter: @ApacheCon&#010;  * Discussion mailing list:&#010;https://lists.apache.org/list.html?apachecon-discuss@apache.org&#010;  * Podcasts and speaker interviews: http://feathercast.apache.org/&#010;  * IRC: #apachecon on the https://freenode.net/&#010;&#010;We look forward to seeing you in Miami!&#010;&#010;-- &#010;Rich Bowen - VP Conferences, The Apache Software Foundation&#010;http://apachecon.com/&#010;@apachecon&#010;&#010;&#010;"
296,298,$Georges$,Usage of mapHttpMessageHeaders,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493220691386-5798333.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 15:31:31 GMT","Hi,&#010;&#010;After updating to Camel 2.18, I've wanted to use the mapHttpMessageHeaders&#010;endpoint parameter of my http4 endpoint (http://camel.apache.org/http4.html)&#010;to replace my headerFilterStrategy that prevents leaking Camel headers into&#010;HTTP headers (and causing HTTP error 400 in some cases).&#010;&#010;However, it seems that even setting mapHttpMessageHeaders=true on my&#010;endpoint definition, does not remove Camel headers from HTTP headers.&#010;&#010;After looking at&#010;org.apache.camel.component.http4.HttpProducer.process(Exchange exchange), it&#010;appears that Camel headers are added to the HTTP headers regardless of the&#010;mapHttpMessageHeaders setting.&#010;&#010;Did I get something wrong? What does this setting do?&#010;&#010;Thanks a lot,&#010;Georges&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Usage-of-mapHttpMessageHeaders-tp5798333.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
297,299,Gary,camel splitter,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493225930592-5798339.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 16:58:50 GMT","hello, thanks in advance, just looking for advice with camel, pondering ideal&#010;approach. &#010;&#010;I have big data files, that need to be split in to their own iostreams or&#010;files based on a field in the inbound message. &#010;&#010;example: message: &#010;9VXI1148,2/15/2016 9:55,Hydraulic Brake Temperature,0&#010;9VXI1148,2/15/2016 9:55,HP Feedback,262.7061768&#010;8TI999,2/15/2016 12:36,Hydraulic Brake Temperature,0&#010;8TI999,2/15/2016 12:36,HP Feedback,762.9597778&#010;TE1430B,2/15/2016 12:36,Hydraulic Brake Temperature,0&#010;TE1430B,2/15/2016 12:36,HP Feedback,5.79165554&#010;9TI1151,2/15/2016 12:25,Hydraulic Brake Temperature,0&#010;9TI1151,2/15/2016 12:25,HP Feedback,1952.955078&#010;...&#010;&#010;I need to split the message based on the first field/column in the csv. so&#010;the output would be separate collections lists on the exchange such as&#010;&#010;split 1 ( all records holding 9VXI1148 ) &#010;split 2 ( all records holding 8TI999 ) &#010;split 3 ( all records holding TE1430B ) &#010;etc... &#010;&#010;is there an easy approach for camel to do this? I somehow, need to get ahold&#010;of field 1 of each record and build a collection and send it out when done.&#010;what is an approach to get the pivot field from the message and then form&#010;out bound collections? &#010;&#010;thank you&#010;&#010;&#010;&#010;-----&#010;Gary Lee Mills&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/camel-splitter-tp5798339.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
298,300,souciance,  Re: camel splitter,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs1pnGYus_%2B8dV9gTqNujjvSMF5rJDtFWCqBsHa_k%3D5xxA%40mail.gmail.com%3E,users,"Wed, 26 Apr 2017 18:14:44 GMT","Since it seems your file has a well defined structure, why not map it to&#010;bindy or csv dataformat first.&#010;&#010;Then you will have a list of rows which you can filter out in some way.&#010;&#010;But do you know in advance how many type of collections you are interested&#010;in?&#010;&#010;On Wed, Apr 26, 2017 at 6:58 PM, Gary [via Camel] &lt;&#010;ml+s465427n5798339h72@n5.nabble.com&gt; wrote:&#010;&#010;&gt; hello, thanks in advance, just looking for advice with camel, pondering&#010;&gt; ideal approach.&#010;&gt;&#010;&gt; I have big data files, that need to be split in to their own iostreams or&#010;&gt; files based on a field in the inbound message.&#010;&gt;&#010;&gt; example: message:&#010;&gt; 9VXI1148,2/15/2016 9:55,Hydraulic Brake Temperature,0&#010;&gt; 9VXI1148,2/15/2016 9:55,HP Feedback,262.7061768 &lt;(262)%20706-1768&gt;&#010;&gt; 8TI999,2/15/2016 12:36,Hydraulic Brake Temperature,0&#010;&gt; 8TI999,2/15/2016 12:36,HP Feedback,762.9597778 &lt;(762)%20959-7778&gt;&#010;&gt; TE1430B,2/15/2016 12:36,Hydraulic Brake Temperature,0&#010;&gt; TE1430B,2/15/2016 12:36,HP Feedback,5.79165554&#010;&gt; 9TI1151,2/15/2016 12:25,Hydraulic Brake Temperature,0&#010;&gt; 9TI1151,2/15/2016 12:25,HP Feedback,1952.955078&#010;&gt; ...&#010;&gt;&#010;&gt; I need to split the message based on the first field/column in the csv. so&#010;&gt; the output would be separate collections lists on the exchange such as&#010;&gt;&#010;&gt; split 1 ( all records holding 9VXI1148 )&#010;&gt; split 2 ( all records holding 8TI999 )&#010;&gt; split 3 ( all records holding TE1430B )&#010;&gt; etc...&#010;&gt;&#010;&gt; is there an easy approach for camel to do this? I somehow, need to get&#010;&gt; ahold of field 1 of each record and build a collection and send it out when&#010;&gt; done. what is an approach to get the pivot field from the message and then&#010;&gt; form out bound collections?&#010;&gt;&#010;&gt; thank you&#010;&gt; Gary Lee Mills&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/camel-splitter-tp5798339.html&#010;&gt; To start a new topic under Camel - Users, email ml+s465427n465428h31@n5.&#010;&gt; nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/camel-splitter-tp5798339p5798358.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
299,301,Gary,    Re: camel splitter,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493237323470-5798362.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 20:08:43 GMT","hi, and thanks !&#010;&#010;But do you know in advance how many type of collections you are interested&#010;in?&#010;&#010;No. each customers data packets will be different. and the asset or the&#010;first column/field is a reference to the asset. it will always be dynamic&#010;and variable. &#010;&#010;&#010;&#010;-----&#010;Gary Lee Mills&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/camel-splitter-tp5798339p5798362.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
300,302,Gary,      Re: camel splitter,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493242861527-5798365.post%40n5.nabble.com%3E,users,"Wed, 26 Apr 2017 21:41:01 GMT","I'm thinking about something like this, first get the tokens from the message&#010;body, then split them based on this list of tokens. psuedo code: using beans&#010;in the route for split.&#010;what do you think on this, was hoping for a cleaner approach. thanks!&#010;&#010;public class AssetSplitterBean {&#010;&#010;&#009;    public List&lt;String&gt; splitBody(String body, Exchange exchange) {&#009;&#010;&#009;    &#009;&#010;&#009;        List&lt;String&gt; serviceRecords = new ArrayList&lt;String&gt;();&#010;&#009;        &#010;&#009;        List&lt;String&gt; tokens =&#010;(List&lt;String&gt;)exchange.getProperty(""splitTokens"");&#010;&#009;        for ( String token : tokens ){&#010;&#009;        &#009;String[] records = body.split(token);&#010;&#009;        &#009;for (String record : records) {&#010;&#009;&#009;            serviceRecords.add(record);&#010;&#009;&#009;        }&#010;&#009;        }&#010;&#009;        return serviceRecords;&#010;&#009;    }&#010;&#010;    public Object initSplitTokens(Exchange exchange) {&#010;    &#009;exchange.setProperty(""splitTokens"", new ArrayList&lt;String&gt;());&#010;        return exchange.getIn().getBody();&#010;    }&#010;&#010;    public Object addToken(Exchange exchange) {&#010;    &#009;&#010;    &#009;String payload = exchange.getIn().getBody(String.class);&#010;&#009;&#009;&#010;    &#009;Scanner sc = new Scanner(payload).useDelimiter(""\r\n|\n"");&#010;&#009;&#009;while(sc.hasNextLine()){&#010;&#009;&#009;&#009;String line = sc.nextLine();&#010;&#009;&#009;&#009;String[] aa = line.split("","");&#010;&#009;&#009;&#009;List&lt;String&gt; tokens = (List&lt;String&gt;)exchange.getProperty(""splitTokens"");&#010;&#009;&#009;&#009;if ( !tokens.contains(aa[0]) ){&#010;&#009;&#009;&#009;&#009;((List&lt;String&gt;)exchange.getProperty(""splitTokens"")).add(aa[0]);&#010;&#009;&#009;&#009;}&#009;&#009;&#009;&#010;&#009;&#009;} sc.close();&#010;        &#010;        return null;&#010;    }&#010;   &#010;} &#010;&#010;&#010;&#010;-----&#010;Gary Lee Mills&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/camel-splitter-tp5798339p5798365.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
301,303,souciance,        Re: camel splitter,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2Bwbgs0WDWn%3DQprO4S6Vcby1uZfe7eToMfKrbib00c_pBNbs7w%40mail.gmail.com%3E,users,"Wed, 26 Apr 2017 22:30:29 GMT","That could work for sure.&#010;&#010;But would an alternative solution be to read the body and store the records&#010;in a multimap structure (google guava's multimap).&#010;&#010;For instance:&#010;&#010;Split by new line&#010;   Extract the first column separated by a comma&#010;   Search in multimap if the key exist&#010;       if key exist save the line as a value to that key&#010;       if key is not found create a new entry with the column as key and&#010;line as value&#010;&#010;I guess it depends on how big the structure will grow. But yeah, could work&#010;as an alternative.&#010;&#010;Best&#010;Souciance&#010;&#010;On Wed, Apr 26, 2017 at 11:41 PM, Gary [via Camel] &lt;&#010;ml+s465427n5798365h78@n5.nabble.com&gt; wrote:&#010;&#010;&gt; I'm thinking about something like this, first get the tokens from the&#010;&gt; message body, then split them based on this list of tokens. psuedo code:&#010;&gt; using beans in the route for split.&#010;&gt; what do you think on this, was hoping for a cleaner approach. thanks!&#010;&gt;&#010;&gt; public class AssetSplitterBean {&#010;&gt;&#010;&gt;             public List&lt;String&gt; splitBody(String body, Exchange exchange)&#010;&gt; {&#010;&gt;&#010;&gt;                 List&lt;String&gt; serviceRecords = new ArrayList&lt;String&gt;();&#010;&gt;&#010;&gt;                 List&lt;String&gt; tokens = (List&lt;String&gt;)exchange.getProperty(""splitTokens"");&#010;&gt;&#010;&gt;                 for ( String token : tokens ){&#010;&gt;                 String[] records = body.split(token);&#010;&gt;                 for (String record : records) {&#010;&gt;                             serviceRecords.add(record);&#010;&gt;                         }&#010;&gt;                 }&#010;&gt;                 return serviceRecords;&#010;&gt;             }&#010;&gt;&#010;&gt;     public Object initSplitTokens(Exchange exchange) {&#010;&gt;     exchange.setProperty(""splitTokens"", new ArrayList&lt;String&gt;());&#010;&gt;         return exchange.getIn().getBody();&#010;&gt;     }&#010;&gt;&#010;&gt;     public Object addToken(Exchange exchange) {&#010;&gt;&#010;&gt;     String payload = exchange.getIn().getBody(String.class);&#010;&gt;&#010;&gt;     Scanner sc = new Scanner(payload).useDelimiter(""\r\n|\n"");&#010;&gt;                 while(sc.hasNextLine()){&#010;&gt;                         String line = sc.nextLine();&#010;&gt;                         String[] aa = line.split("","");&#010;&gt;                         List&lt;String&gt; tokens = (List&lt;String&gt;)exchange.getProperty(""splitTokens"");&#010;&gt;&#010;&gt;                         if ( !tokens.contains(aa[0]) ){&#010;&gt;                                 ((List&lt;String&gt;)exchange.&#010;&gt; getProperty(""splitTokens"")).add(aa[0]);&#010;&gt;                         }&#010;&gt;                 } sc.close();&#010;&gt;&#010;&gt;         return null;&#010;&gt;     }&#010;&gt;&#010;&gt; }&#010;&gt; Gary Lee Mills&#010;&gt;&#010;&gt;&#010;&gt; ------------------------------&#010;&gt; If you reply to this email, your message will be added to the discussion&#010;&gt; below:&#010;&gt; http://camel.465427.n5.nabble.com/camel-splitter-tp5798339p5798365.html&#010;&gt; To start a new topic under Camel - Users, email ml+s465427n465428h31@n5.&#010;&gt; nabble.com&#010;&gt; To unsubscribe from Camel - Users, click here&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=465428&amp;code=c291Y2lhbmNlLmVxZGFtLnJhc2h0aUBnbWFpbC5jb218NDY1NDI4fDE1MzI5MTE2NTY=&gt;&#010;&gt; .&#010;&gt; NAML&#010;&gt; &lt;http://camel.465427.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&gt;&#010;&gt;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/camel-splitter-tp5798339p5798366.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;"
302,304,Gary,          Re: camel splitter,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493301409386-5798416.post%40n5.nabble.com%3E,users,"Thu, 27 Apr 2017 13:56:49 GMT","thank you very much for the idea, I will try that. I like it more than my&#010;approach. I will let you know. &#010;&#010;thanks so much again!&#010;&#010;&#010;&#010;&#010;&#010;-----&#010;Gary Lee Mills&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/camel-splitter-tp5798339p5798416.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
303,305,Moshe Recanati,Prioritize messages based on custom rules,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2BhKCHPPq3K6%3D5EaCn_XAszKKhopVhcBA27oq8G7zT6%2BwtdsiQ%40mail.gmail.com%3E,users,"Wed, 26 Apr 2017 17:27:36 GMT","Hi,&#010;I would like to use Camel with resequencer in order prioritize two Java&#010;Objects based on custom rules.&#010;I thought about using stream and custom comparator however in most cases&#010;the objects are equal so Camel is ignoring them.&#010;&#010;Do you have an alternative to such requirement? Can I use batch processing&#010;and custom comparator?&#010;Any other ideas?&#010;This is crucial for me, without this ability I'll need to find other&#010;solution.&#010;&#010;Thank you in advance,&#010;Moshe&#010;&#010;"
304,306,Claus Ibsen,  Re: Prioritize messages based on custom rules,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNnu5tKED-R8S5YWTBUrOM-vMtXog3UpcjuiEyAEEYZfbw%40mail.gmail.com%3E,users,"Wed, 26 Apr 2017 17:35:51 GMT","Can you now assign an unique sequence number that can order them correctly&#010;&#010;So that the sequence number are truely unique, also when you say two&#010;objects are equal.&#010;&#010;eg try to forget about CAmel and think about what logic you need to&#010;re-order the message in the correct order, eg what the sequence number&#010;should be for each element.&#010;&#010;And when you have that then you can use that to assign truely unique&#010;sequence numbers, that the Camel sequencer EIP uses.&#010;&#010;On Wed, Apr 26, 2017 at 7:27 PM, Moshe Recanati &lt;re.moshe@gmail.com&gt; wrote:&#010;&gt; Hi,&#010;&gt; I would like to use Camel with resequencer in order prioritize two Java&#010;&gt; Objects based on custom rules.&#010;&gt; I thought about using stream and custom comparator however in most cases&#010;&gt; the objects are equal so Camel is ignoring them.&#010;&gt;&#010;&gt; Do you have an alternative to such requirement? Can I use batch processing&#010;&gt; and custom comparator?&#010;&gt; Any other ideas?&#010;&gt; This is crucial for me, without this ability I'll need to find other&#010;&gt; solution.&#010;&gt;&#010;&gt; Thank you in advance,&#010;&gt; Moshe&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
305,307,Moshe Recanati,    Re: Prioritize messages based on custom rules,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2BhKCHNXb9R5FNnnNusNZLF61PgvEQhb%2BuzJC%2BaYtH57aFG%3DyQ%40mail.gmail.com%3E,users,"Wed, 26 Apr 2017 17:40:16 GMT","Hi Claus,&#010;Thank you.&#010;I tried adding timestamp or enumerator for this sake (as less significant&#010; 'value' of the object), however from some reason once I did it Camel&#010;entered into endless loop with the comperator and duplicates the messages.&#010;&#010;Moshe&#010;&#010;&#010;On Wed, Apr 26, 2017 at 8:35 PM, Claus Ibsen &lt;claus.ibsen@gmail.com&gt; wrote:&#010;&#010;&gt; Can you now assign an unique sequence number that can order them correctly&#010;&gt;&#010;&gt; So that the sequence number are truely unique, also when you say two&#010;&gt; objects are equal.&#010;&gt;&#010;&gt; eg try to forget about CAmel and think about what logic you need to&#010;&gt; re-order the message in the correct order, eg what the sequence number&#010;&gt; should be for each element.&#010;&gt;&#010;&gt; And when you have that then you can use that to assign truely unique&#010;&gt; sequence numbers, that the Camel sequencer EIP uses.&#010;&gt;&#010;&gt; On Wed, Apr 26, 2017 at 7:27 PM, Moshe Recanati &lt;re.moshe@gmail.com&gt;&#010;&gt; wrote:&#010;&gt; &gt; Hi,&#010;&gt; &gt; I would like to use Camel with resequencer in order prioritize two Java&#010;&gt; &gt; Objects based on custom rules.&#010;&gt; &gt; I thought about using stream and custom comparator however in most cases&#010;&gt; &gt; the objects are equal so Camel is ignoring them.&#010;&gt; &gt;&#010;&gt; &gt; Do you have an alternative to such requirement? Can I use batch&#010;&gt; processing&#010;&gt; &gt; and custom comparator?&#010;&gt; &gt; Any other ideas?&#010;&gt; &gt; This is crucial for me, without this ability I'll need to find other&#010;&gt; &gt; solution.&#010;&gt; &gt;&#010;&gt; &gt; Thank you in advance,&#010;&gt; &gt; Moshe&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; Claus Ibsen&#010;&gt; -----------------&#010;&gt; http://davsclaus.com @davsclaus&#010;&gt; Camel in Action 2: https://www.manning.com/ibsen2&#010;&gt;&#010;&#010;"
306,308,jan.schjoenning,header message show different values in log statements,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493274386579-5798372.post%40n5.nabble.com%3E,users,"Thu, 27 Apr 2017 06:26:26 GMT","Given following route :&#010;&#010;&#009;&#009;from(""direct:TranslateEpgData"")&#010;&#009;&#009;.routeId(""TranslateEpgData"")&#010;&#009;&#009;.setHeader(""xxx"", constant(""xxx""))&#010;&#009;&#009;   .to(""log:?showAll=true&amp;multiline=true"")&#010;&#009;&#009;   .log(""serviceId = ${header.serviceId}, scheduleStart =&#010;${header.scheduleStart}, scheduleEnd = ${header.scheduleEnd}, originId =&#010;${header.originId}"")  &#010;&#009;&#009;   .to(""log:?showAll=true&amp;multiline=true"")&#010;&#009;&#009;   .to(""xslt:whatson_to_tvanytime.xsl"")&#010;&#009;&#009;   .log(""${body}"");&#010;&#010;1. log of ${header.serviceId} =&#010;serviceId=com.sun.org.apache.xml.internal.dtm.ref.DTMNodeList@7e5afaa6&#010;&#010;2. log of ${header.serviceId} = TV2ZULU&#010;&#010;3. log of ${header.serviceId} =&#010;serviceId=com.sun.org.apache.xml.internal.dtm.ref.DTMNodeList@7e5afaa6&#010;&#010;As flow states no changes between , why do i have this difference ?&#010;&#010;&#010;actual Output:&#010;[main] INFO  - Exchange[&#010;, Id: ID-mac161892-local-54873-1493272656658-1-6&#010;, ExchangePattern: InOnly&#010;, Properties: {CamelAggregationStrategy={Splitter[on: XPath:&#010;//tva:ServiceInformation to:&#010;Channel[Multicast[[Channel[sendTo(Endpoint[direct://step2])]]]] aggregate:&#010;null]=UseOriginalAggregationStrategy}, CamelBatchComplete=true,&#010;CamelBatchIndex=0, CamelBatchSize=1,&#010;CamelCorrelationId=ID-mac161892-local-54873-1493272656658-1-4,&#010;CamelCreatedTimestamp=Thu Apr 27 07:57:37 CEST 2017,&#010;CamelFileExchangeFile=RemoteFile[TV2ZULU.xml],&#010;CamelMessageHistory=[DefaultMessageHistory[routeId=MEnrichWithTV2Channels,&#010;node=multicast1], DefaultMessageHistory[routeId=MEnrichWithTV2Channels,&#010;node=to6], DefaultMessageHistory[routeId=MEnrichWithEpgData,&#010;node=setHeader9], DefaultMessageHistory[routeId=MEnrichWithEpgData,&#010;node=setHeader10], DefaultMessageHistory[routeId=MEnrichWithEpgData,&#010;node=log11], DefaultMessageHistory[routeId=MEnrichWithEpgData, node=log12],&#010;DefaultMessageHistory[routeId=MEnrichWithEpgData, node=to7],&#010;DefaultMessageHistory[routeId=EnrichWithEpgData, node=log1],&#010;DefaultMessageHistory[routeId=EnrichWithEpgData, node=log2],&#010;DefaultMessageHistory[routeId=EnrichWithEpgData, node=pollEnrich1],&#010;DefaultMessageHistory[routeId=EnrichWithEpgData, node=log3],&#010;DefaultMessageHistory[routeId=MEnrichWithEpgData, node=to8],&#010;DefaultMessageHistory[routeId=MTranslateEpgData, node=log13],&#010;DefaultMessageHistory[routeId=MTranslateEpgData, node=log14],&#010;DefaultMessageHistory[routeId=MTranslateEpgData, node=log15],&#010;DefaultMessageHistory[routeId=MTranslateEpgData, node=log16],&#010;DefaultMessageHistory[routeId=MTranslateEpgData, node=to9],&#010;DefaultMessageHistory[routeId=TranslateEpgData, node=setHeader1],&#010;DefaultMessageHistory[routeId=TranslateEpgData, node=to1]],&#010;CamelMulticastComplete=true, CamelMulticastIndex=0, CamelSplitComplete=true,&#010;CamelSplitIndex=0, CamelSplitSize=1,&#010;CamelStreamCacheUnitOfWork=DefaultUnitOfWork,&#010;CamelToEndpoint=log://?multiline=true&amp;showAll=true}&#010;, Headers: {breadcrumbId=ID-mac161892-local-54873-1493272656658-1-1,&#010;channelId=com.sun.org.apache.xml.internal.dtm.ref.DTMNodeList@483f6d77,&#010;originId=Whatson, scheduleDate=2017-04-27, scheduleEnd=2017-04-28 06:00:00,&#010;scheduleStart=2017-04-27 06:00:00,&#010;serviceId=com.sun.org.apache.xml.internal.dtm.ref.DTMNodeList@7e5afaa6,&#010;xxx=xxx}&#010;, BodyType: org.apache.camel.component.file.remote.RemoteFile&#010;, Body: [Body is file based: RemoteFile[TV2ZULU.xml]]&#010;, Out: null: &#010;]&#010;[main] INFO TranslateEpgData - serviceId = TV2ZULU, scheduleStart =&#010;2017-04-27 06:00:00, scheduleEnd = 2017-04-28 06:00:00, originId = Whatson&#010;[main] INFO  - Exchange[&#010;, Id: ID-mac161892-local-54873-1493272656658-1-6&#010;, ExchangePattern: InOnly&#010;, Properties: {CamelAggregationStrategy={Splitter[on: XPath:&#010;//tva:ServiceInformation to:&#010;Channel[Multicast[[Channel[sendTo(Endpoint[direct://step2])]]]] aggregate:&#010;null]=UseOriginalAggregationStrategy}, CamelBatchComplete=true,&#010;CamelBatchIndex=0, CamelBatchSize=1,&#010;CamelCorrelationId=ID-mac161892-local-54873-1493272656658-1-4,&#010;CamelCreatedTimestamp=Thu Apr 27 07:57:37 CEST 2017,&#010;CamelFileExchangeFile=RemoteFile[TV2ZULU.xml],&#010;CamelMessageHistory=[DefaultMessageHistory[routeId=MEnrichWithTV2Channels,&#010;node=multicast1], DefaultMessageHistory[routeId=MEnrichWithTV2Channels,&#010;node=to6], DefaultMessageHistory[routeId=MEnrichWithEpgData,&#010;node=setHeader9], DefaultMessageHistory[routeId=MEnrichWithEpgData,&#010;node=setHeader10], DefaultMessageHistory[routeId=MEnrichWithEpgData,&#010;node=log11], DefaultMessageHistory[routeId=MEnrichWithEpgData, node=log12],&#010;DefaultMessageHistory[routeId=MEnrichWithEpgData, node=to7],&#010;DefaultMessageHistory[routeId=EnrichWithEpgData, node=log1],&#010;DefaultMessageHistory[routeId=EnrichWithEpgData, node=log2],&#010;DefaultMessageHistory[routeId=EnrichWithEpgData, node=pollEnrich1],&#010;DefaultMessageHistory[routeId=EnrichWithEpgData, node=log3],&#010;DefaultMessageHistory[routeId=MEnrichWithEpgData, node=to8],&#010;DefaultMessageHistory[routeId=MTranslateEpgData, node=log13],&#010;DefaultMessageHistory[routeId=MTranslateEpgData, node=log14],&#010;DefaultMessageHistory[routeId=MTranslateEpgData, node=log15],&#010;DefaultMessageHistory[routeId=MTranslateEpgData, node=log16],&#010;DefaultMessageHistory[routeId=MTranslateEpgData, node=to9],&#010;DefaultMessageHistory[routeId=TranslateEpgData, node=setHeader1],&#010;DefaultMessageHistory[routeId=TranslateEpgData, node=to1],&#010;DefaultMessageHistory[routeId=TranslateEpgData, node=log4],&#010;DefaultMessageHistory[routeId=TranslateEpgData, node=to2]],&#010;CamelMulticastComplete=true, CamelMulticastIndex=0, CamelSplitComplete=true,&#010;CamelSplitIndex=0, CamelSplitSize=1,&#010;CamelStreamCacheUnitOfWork=DefaultUnitOfWork,&#010;CamelToEndpoint=log://?multiline=true&amp;showAll=true}&#010;, Headers: {breadcrumbId=ID-mac161892-local-54873-1493272656658-1-1,&#010;channelId=com.sun.org.apache.xml.internal.dtm.ref.DTMNodeList@483f6d77,&#010;originId=Whatson, scheduleDate=2017-04-27, scheduleEnd=2017-04-28 06:00:00,&#010;scheduleStart=2017-04-27 06:00:00,&#010;serviceId=com.sun.org.apache.xml.internal.dtm.ref.DTMNodeList@7e5afaa6,&#010;xxx=xxx}&#010;, BodyType: org.apache.camel.component.file.remote.RemoteFile&#010;, Body: [Body is file based: RemoteFile[TV2ZULU.xml]]&#010;, Out: null: &#010;]&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/header-message-show-different-values-in-log-statements-tp5798372.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
307,309,Doug Douglass,  Re: header message show different values in log statements,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAFRBt-Q7yLvZYL_sC8RN-%2BNokTF4LbCo05jQ4S%3DGbgVLENY_LQ%40mail.gmail.com%3E,users,"Thu, 27 Apr 2017 16:55:55 GMT","On Wed, Apr 26, 2017 at 11:26 PM, jan.schjoenning &lt;jan.schjoenning@gmail.com&#010;&gt; wrote:&#010;&#010;&gt; Given following route :&#010;&gt;&#010;&gt;                 from(""direct:TranslateEpgData"")&#010;&gt;                 .routeId(""TranslateEpgData"")&#010;&gt;                 .setHeader(""xxx"", constant(""xxx""))&#010;&gt;                    .to(""log:?showAll=true&amp;multiline=true"")&#010;&gt;                    .log(""serviceId = ${header.serviceId}, scheduleStart =&#010;&gt; ${header.scheduleStart}, scheduleEnd = ${header.scheduleEnd}, originId =&#010;&gt; ${header.originId}"")&#010;&gt;                    .to(""log:?showAll=true&amp;multiline=true"")&#010;&gt;                    .to(""xslt:whatson_to_tvanytime.xsl"")&#010;&gt;                    .log(""${body}"");&#010;&gt;&#010;&gt; 1. log of ${header.serviceId} =&#010;&gt; serviceId=com.sun.org.apache.xml.internal.dtm.ref.DTMNodeList@7e5afaa6&#010;&gt;&#010;&gt; 2. log of ${header.serviceId} = TV2ZULU&#010;&gt;&#010;&gt; 3. log of ${header.serviceId} =&#010;&gt; serviceId=com.sun.org.apache.xml.internal.dtm.ref.DTMNodeList@7e5afaa6&#010;&gt;&#010;&gt; As flow states no changes between , why do i have this difference ?&#010;&gt;&#010;&gt;&#010;Because .to(""log:..."") uses the Log Component[1] while .log(""..."") uses the&#010;Log EIP[2], which uses the Simple language[3].&#010;&#010;If you want .to(""log:?showAll=true&amp;multiline=true"") to show the content of&#010;the XML nodelist as .log(""serviceId = ${header.serviceId}..."") does, then&#010;you should specify the result type when setting the header[4].&#010;&#010;I've been caught by this before and have learned to always provide a result&#010;type when using xpath expressions.&#010;&#010;Hope that helps,&#010;Doug&#010;&#010;[1] http://camel.apache.org/log.html&#010;[2] http://camel.apache.org/logeip.html&#010;[3] http://camel.apache.org/simple.html&#010;[4] http://camel.apache.org/simple.html#Simple-SettingtheResultType&#010;&#010;"
308,310,jan.schjoenning,    Re: header message show different values in log statements,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493313988329-5798427.post%40n5.nabble.com%3E,users,"Thu, 27 Apr 2017 17:26:28 GMT","Thanks Doug !&#010;&#010;Fine explanation - and make sense.&#010;&#010;Reason for having log was to find out why parameters transfer to xslt  were&#010;""wrong""- so they will be removed from solution.&#010;&#010;Regards &#010;&#010;Jan&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/header-message-show-different-values-in-log-statements-tp5798372p5798427.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
309,311,owain,"2.18.3 - Rest DSL MockEndpoint - second unit test weaveByToUri fails with ""no output which matches: direct:RouteB in the Route(getRoute)",http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493291743620-5798402.post%40n5.nabble.com%3E,users,"Thu, 27 Apr 2017 11:15:43 GMT","I have discovered an issue when I run multiple tests on a route using&#010;weaveByToUri on the same endpoint.  I have it replicated in my sample app.&#010;https://github.com/owain68/camel-spring-boot-examples&#010;&#010;It looks as though the .replace() replaces the endpoint for the whole test&#010;class, not just the individual test.  &#010;Each test passes individually but mockTestOneNotFound() fails when both are&#010;run together.  If I comment out the weaveByToUri in mockTestOneNotFound()&#010;then both tests pass when run together.&#010;&#010;Is this something to do with the routes being generated by Rest DSL and then&#010;not being regenerated for each test?  I can't think of anything else.&#010;&#010;The route is. RestRoute&#010;&#010;@Override&#010;public void configure() throws Exception {&#010;&#010;rest(""/"")&#010;.get(""{body}"")&#010;.id(""getRoute"")&#010;.produces(""application/json"")&#010;.to(""direct:RouteB"");&#010;}&#010;&#010;and the test class is: RestMockTests&#010;&#010;@RunWith(CamelSpringBootRunner.class)&#010;@MockEndpoints&#010;@UseAdviceWith&#010;@SpringBootTest(classes =&#010;mydomain.springbootcamel.SpringBootCamelExamples.class, webEnvironment =&#010;SpringBootTest.WebEnvironment.RANDOM_PORT)&#010;public class RestMockTests {&#010;&#010;@Autowired&#010;private CamelContext camelContext;&#010;&#010;@Autowired&#010;private TestRestTemplate restTemplate;&#010;&#010;@Test&#010;public void mockTestOneNotFound() throws Exception {&#010;&#010;camelContext.getRouteDefinition(""getRoute"")&#010;.adviceWith(camelContext, new AdviceWithRouteBuilder() {&#010;@Override&#010;public void configure() throws Exception {&#010;// send the outgoing message to mock&#010;weaveByToUri(""direct:RouteB"").replace().inOut(""mock:routeB"");&#010;}&#010;});&#010;&#010;camelContext.start();&#010;MockEndpoint mockOut = camelContext.getEndpoint(""mock:routeB"",&#010;MockEndpoint.class);&#010;mockOut.expectedMessageCount(0);&#010;ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(""/dummy"",&#010;String.class);&#010;mockOut.assertIsSatisfied();&#010;assertThat(response.getStatusCode()).isEqualTo(HttpStatus.NOT_FOUND);&#010;}&#010;&#010;@Test&#010;public void mockTestTwoFound() throws Exception {&#010;&#010;camelContext.getRouteDefinition(""getRoute"")&#010;.adviceWith(camelContext, new AdviceWithRouteBuilder() {&#010;@Override&#010;public void configure() throws Exception {&#010;// send the outgoing message to mock&#010;weaveByToUri(""direct:RouteB"").replace().inOut(""mock:routeB"");&#010;}&#010;});&#010;&#010;camelContext.start();&#010;MockEndpoint mockOut = camelContext.getEndpoint(""mock:routeB"",&#010;MockEndpoint.class);&#010;mockOut.expectedMessageCount(1);&#010;ResponseEntity&lt;String&gt; response =&#010;restTemplate.getForEntity(""/api/something"", String.class);&#010;mockOut.assertIsSatisfied();&#010;assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK);&#010;}&#010;}&#010;&#010;The error on the second test is:&#010;&#010;https://gist.github.com/owain68/58aa626ac4a17db3ce47dce21e7c12ab&#010;&#010;java.lang.IllegalArgumentException: There are no outputs which matches:&#010;direct:RouteB in the route:&#010;Route(getRoute)[[From[rest:get:/:{body}?routeId=getRoute&amp;produces=application%2Fjson]]&#010;-&gt; [RestBinding, pipeline -&gt; [[To[mock:routeB]]]]]&#010;&#010;at org.apache.camel.builder.AdviceWithTasks$1.task(AdviceWithTasks.java:194)&#010;at&#010;org.apache.camel.model.RouteDefinition.adviceWith(RouteDefinition.java:280)&#010;at&#010;org.apache.camel.model.RouteDefinition.adviceWith(RouteDefinition.java:215)&#010;at&#010;mydomain.springbootcamel.RestMockTests.mockTestOneNotFound(RestMockTests.java:33)&#010;at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&#010;at&#010;sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&#010;at&#010;sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&#010;at java.lang.reflect.Method.invoke(Method.java:498)&#010;at&#010;org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)&#010;at&#010;org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)&#010;at&#010;org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)&#010;at&#010;org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)&#010;at&#010;org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)&#010;at&#010;org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)&#010;at&#010;org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)&#010;at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)&#010;at&#010;org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)&#010;at&#010;org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)&#010;at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)&#010;at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)&#010;at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)&#010;at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)&#010;at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)&#010;at&#010;org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)&#010;at&#010;org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)&#010;at org.junit.runners.ParentRunner.run(ParentRunner.java:363)&#010;at&#010;org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)&#010;at org.junit.runner.JUnitCore.run(JUnitCore.java:137)&#010;at&#010;com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)&#010;at&#010;com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:51)&#010;at&#010;com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)&#010;at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/2-18-3-Rest-DSL-MockEndpoint-second-unit-test-weaveByToUri-fails-with-no-output-which-matches-direct-tp5798402.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
310,312,"Huber, Christian",Camel 2.18.1 Jetty UrlRewrite does not return cookies from original response,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CD527D267.809D%25christian.huber%40sueddeutsche.de%3E,users,"Thu, 27 Apr 2017 14:52:56 GMT","Hi all,&#010;&#010;we are just upgrading one of our applications which also uses Camel for&#010;routing purposes. We also decided to upgrade the Camel version and went&#010;from 2.11.x to 2.18.1.&#010;&#010;We now discovered that when routing to the following endpoint 'to&#010;uri=""jetty:$gui/polopoly/?bridgeEndpoint=true&amp;amp;urlRewrite=#simpleGuiUrlR&#010;ewriter&amp;amp;throwExceptionOnFailure=falseŒ that the response does not&#010;contain the cookies set by the backend. If we call the the backend&#010;directly all cookies are there.&#010;&#010;This did work in the earlier versions, so now we wonder what we have to&#010;change in our configuration to get it working again. We found a note on&#010;https://camel.apache.org/jetty.html about a cookieHandler property, which&#010;sounds as it might be what we need. But according to the documentation&#010;this is only available in 2.19 and so far we could not find an example&#010;about how to use it.&#010;&#010;So we would be very grateful if you could point us to the right direction&#010;on what could be missing in our configuration. If needed I can provide&#010;more details on our config.&#010;&#010;Thanks&#010;Christian&#010;&#010;&#010;-- &#010;Christian Huber&#010;Software-Architekt&#010; &#010;Süddeutsche Zeitung Digitale Medien GmbH&#010;Hultschiner Str. 8&#010;DE 81677 München&#010; &#010;Tel.:  +49 89 21 83-9481&#010;E-Mail: christian.huber@sz.de&#010;www.sz.de &lt;http://www.sueddeutsche.de/&gt;&#010; &#010;Sitz der Gesellschaft: München&#010;Eingetragen beim Amtsgericht München unter: HRB 129987&#010;Geschäftsführer: Johannes Vogel, Stefan Hilscher&#010;USt-IdNr.: DE 206361881&#010;&#010;&#010;"
311,313,sma,camel-kafka offset commit,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493306601713-5798423.post%40n5.nabble.com%3E,users,"Thu, 27 Apr 2017 15:23:21 GMT","Hi,&#010;&#010;I have a question about offset commit, if auto commit is off, then it does a&#010;batch commit, my question is in this case, ss a message considered consumed&#010;after reading from the topic or after the whole processing is done?&#010;&#010;Thanks&#010;Shannon&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/camel-kafka-offset-commit-tp5798423.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
312,314,Ryan T,Understanding onExceptionOccurred,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493326271225-5798470.post%40n5.nabble.com%3E,users,"Thu, 27 Apr 2017 20:51:11 GMT",What is the difference between the following:&#010;&#010;&#010;&#010;and &#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Understanding-onExceptionOccurred-tp5798470.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
313,315,Cruizer Ma,Camel_CXF - Basic Authentication - username password,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493360067735-5798475.post%40n5.nabble.com%3E,users,"Fri, 28 Apr 2017 06:14:27 GMT","Hi,&#010;&#010;I have tried to use Camel-CXF send a Soap message, and camel route like&#010;this:&#010;&#010;from(""jms:queue:jms/XXXQ"").recipientList(urls).aggregationStrategy(new&#010;CustomizeStrategy()).ignoreInvalidEndpoints().parallelProcessing();&#010;&#010;List&lt;String&gt; urls = new ArrayList&lt;String&gt;();&#010;String url =&#010;""cxf://http://localhost:18088/COMPANY/Client/service/?wsdlURL=http://localhost:18088/COMPANY/Client/service/?wsdl&amp;loggingFeatureEnabled=true&amp;serviceClass=com.company.client.ClientService&amp;username=test&amp;password=test"";&#010;urls.add(url);&#010;&#010;It works well but I found the sending message without UserNameToken, the&#010;working environment is Websphere Application Server 8.5.5 and Camel version&#010;is 2.15.2.&#010;So I manual created the CXFEndpoint and set userid/password like this:&#010;&#010;from(""jms:queue:jms/XXXQ"").recipientList(eps).aggregationStrategy(new&#010;CustomizeStrategy()).ignoreInvalidEndpoints().parallelProcessing();&#010;&#010;List&lt;Endpoint&gt; eps = new ArrayList&lt;Endpoint&gt;();&#010;CxfComponent cxfComponent = new CxfComponent(exchange.getContext());&#010;final CxfEndpoint endpoint = (CxfEndpoint)&#010;cxfComponent.createEndpoint(""cxf://bean:configServiceEndpoint"");&#010;endpoint.setAddress(""http://localhost:18088/COMPANY/Client/service/"");&#010;endpoint.setWsdlURL(""http://localhost:18088/COMPANY/Client/service/?wsdl"");&#010;endpoint.setLoggingFeatureEnabled(true);&#010;setPassword(endpoint, ""test"", ""test"");&#010;eps.add(endpoint);&#010;&#010;&#009;&lt;cxf:cxfEndpoint id=""configServiceEndpoint"" address=""${CXFTestSupport.URL}""&#010;&#009;&#009;wsdlURL=""${CXFTestSupport.WSDL}""&#010;serviceClass=""com.company.client.ClientService""&gt;&#010;&#009;&lt;/cxf:cxfEndpoint&gt;&#010;&#010;&#010;When testing from Test Class can receive message with UserNameToken, but&#010;when trigger from WAS program will hung at ""recipientList(eps)"".&#010;&#010;Checking Camel DEBUG log got the following info:&#010;2017-04-27 10:06:39,858 487009 DEBUG org.apache.camel.impl.ProducerCache  -&#010;Adding to producer cache with key:&#010;Endpoint[http://localhost:18088/COMPANY/Client/service/] for producer:&#010;Producer[http://localhost:18088/COMPANY/Client/service/]&#010;2017-04-27 10:06:39,858 487009 DEBUG org.apache.camel.impl.ProducerCache  -&#010;Adding to producer cache with key:&#010;Endpoint[http://localhost:18088/COMPANY/Client/service/] for producer:&#010;Producer[http://localhost:18088/COMPANY/Client/service/]&#010;2017-04-27 10:06:39,860 487011 DEBUG&#010;org.apache.camel.processor.MulticastProcessor  - Waiting for on-the-fly&#010;aggregation to complete aggregating 1 responses for exchangeId:&#010;ID-csm-dapp203-anr-psaemea-38278-1493279914232-0-5&#010;2017-04-27 10:06:39,860 487011 DEBUG&#010;org.apache.camel.processor.MulticastProcessor  - Waiting for on-the-fly&#010;aggregation to complete aggregating 1 responses for exchangeId:&#010;ID-csm-dapp203-anr-psaemea-38278-1493279914232-0-5&#010;2017-04-27 10:06:39,860 487011 DEBUG&#010;org.apache.camel.processor.MulticastProcessor  - Message exchange has&#010;failed: Parallel processing failed for number 0 for exchange:&#010;Exchange[JmsMessage[JmsMessageID:&#010;ID:9f108705475ef5e9ce027847110a134f0000000000000001]] Exception:&#010;java.lang.NullPointerException&#010;2017-04-27 10:06:39,860 487011 DEBUG&#010;org.apache.camel.processor.MulticastProcessor  - Message exchange has&#010;failed: Parallel processing failed for number 0 for exchange:&#010;Exchange[JmsMessage[JmsMessageID:&#010;ID:9f108705475ef5e9ce027847110a134f0000000000000001]] Exception:&#010;java.lang.NullPointerException&#010;2017-04-27 10:06:39,860 487011 DEBUG&#010;org.apache.camel.processor.MulticastProcessor  - Message exchange has&#010;failed: Parallel processing failed for number 0 for exchange:&#010;Exchange[JmsMessage[JmsMessageID:&#010;ID:9f108705475ef5e9ce027847110a134f0000000000000001]] Exception:&#010;java.lang.NullPointerException&#010;2017-04-27 10:06:39,860 487011 DEBUG&#010;org.apache.camel.processor.MulticastProcessor  - Message exchange has&#010;failed: Parallel processing failed for number 0 for exchange:&#010;Exchange[JmsMessage[JmsMessageID:&#010;ID:9f108705475ef5e9ce027847110a134f0000000000000001]] Exception:&#010;java.lang.NullPointerException&#010;2017-04-27 10:06:39,860 487011 DEBUG&#010;org.apache.camel.processor.MulticastProcessor  - Done aggregating 1&#010;exchanges on the fly.&#010;2017-04-27 10:06:39,860 487011 DEBUG&#010;org.apache.camel.processor.MulticastProcessor  - Done aggregating 1&#010;exchanges on the fly.&#010;2017-04-27 10:06:39,860 487011 DEBUG&#010;org.apache.camel.processor.MulticastProcessor  - Signaling we are done&#010;aggregating on the fly for exchangeId:&#010;ID-csm-dapp203-anr-psaemea-38278-1493279914232-0-5&#010;2017-04-27 10:06:39,860 487011 DEBUG&#010;org.apache.camel.processor.MulticastProcessor  - Signaling we are done&#010;aggregating on the fly for exchangeId:&#010;ID-csm-dapp203-anr-psaemea-38278-1493279914232-0-5&#010;2017-04-27 10:06:39,860 487011 DEBUG&#010;org.apache.camel.processor.MulticastProcessor  - Done parallel processing 1&#010;exchanges&#010;2017-04-27 10:06:39,860 487011 DEBUG&#010;org.apache.camel.processor.MulticastProcessor  - Done parallel processing 1&#010;exchanges&#010;2017-04-27 10:06:39,860 487011 DEBUG org.apache.camel.processor.Pipeline  -&#010;Message exchange has failed: so breaking out of pipeline for exchange:&#010;Exchange[JmsMessage[JmsMessageID:&#010;ID:9f108705475ef5e9ce027847110a134f0000000000000001]] Exception:&#010;java.lang.NullPointerException&#010;2017-04-27 10:06:39,860 487011 DEBUG org.apache.camel.processor.Pipeline  -&#010;Message exchange has failed: so breaking out of pipeline for exchange:&#010;Exchange[JmsMessage[JmsMessageID:&#010;ID:9f108705475ef5e9ce027847110a134f0000000000000001]] Exception:&#010;java.lang.NullPointerException&#010;2017-04-27 10:06:39,861 487012 DEBUG org.apache.camel.processor.Pipeline  -&#010;Message exchange has failed: so breaking out of pipeline for exchange:&#010;Exchange[JmsMessage[JmsMessageID:&#010;ID:9f108705475ef5e9ce027847110a134f0000000000000001]] Exception:&#010;java.lang.NullPointerException&#010;2017-04-27 10:06:39,861 487012 DEBUG org.apache.camel.processor.Pipeline  -&#010;Message exchange has failed: so breaking out of pipeline for exchange:&#010;Exchange[JmsMessage[JmsMessageID:&#010;ID:9f108705475ef5e9ce027847110a134f0000000000000001]] Exception:&#010;java.lang.NullPointerException&#010;2017-04-27 10:06:39,861 487012 DEBUG org.apache.camel.processor.Pipeline  -&#010;Message exchange has failed: so breaking out of pipeline for exchange:&#010;Exchange[JmsMessage[JmsMessageID:&#010;ID:9f108705475ef5e9ce027847110a134f0000000000000001]] Exception:&#010;java.lang.NullPointerException&#010;2017-04-27 10:06:39,861 487012 DEBUG org.apache.camel.processor.Pipeline  -&#010;Message exchange has failed: so breaking out of pipeline for exchange:&#010;Exchange[JmsMessage[JmsMessageID:&#010;ID:9f108705475ef5e9ce027847110a134f0000000000000001]] Exception:&#010;java.lang.NullPointerException&#010;2017-04-27 10:06:39,861 487012 DEBUG org.apache.camel.processor.Pipeline  -&#010;Message exchange has failed: so breaking out of pipeline for exchange:&#010;Exchange[JmsMessage[JmsMessageID:&#010;ID:9f108705475ef5e9ce027847110a134f0000000000000001]] Exception:&#010;java.lang.NullPointerException&#010;2017-04-27 10:06:39,861 487012 DEBUG org.apache.camel.processor.Pipeline  -&#010;Message exchange has failed: so breaking out of pipeline for exchange:&#010;Exchange[JmsMessage[JmsMessageID:&#010;ID:9f108705475ef5e9ce027847110a134f0000000000000001]] Exception:&#010;java.lang.NullPointerException&#010;2017-04-27 10:06:39,861 487012 WARN &#010;org.apache.camel.component.jms.EndpointMessageListener  - Execution of JMS&#010;message listener failed. Caused by: [org.apache.camel.RuntimeCamelException&#010;- java.lang.NullPointerException]&#010;org.apache.camel.RuntimeCamelException: java.lang.NullPointerException&#010;        at&#010;org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1619)&#010;        at&#010;org.apache.camel.component.jms.EndpointMessageListener$EndpointMessageListenerAsyncCallback.done(EndpointMessageListener.java:186)&#010;        at&#010;org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:107)&#010;        at&#010;org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:699)&#010;        at&#010;org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:637)&#010;        at&#010;org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:605)&#010;        at&#010;org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:308)&#010;        at&#010;org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:246)&#010;        at&#010;org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1144)&#010;        at&#010;org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1136)&#010;        at&#010;org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:1033)&#010;        at&#010;java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1157)&#010;        at&#010;java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:627)&#010;        at java.lang.Thread.run(Thread.java:809)&#010;Caused by: java.lang.NullPointerException&#010;        at&#010;org.apache.camel.component.cxf.CxfProducer.prepareRequest(CxfProducer.java:194)&#010;        at&#010;org.apache.camel.component.cxf.CxfProducer.process(CxfProducer.java:111)&#010;        at&#010;org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:91)&#010;        at&#010;org.apache.camel.builder.NoErrorHandlerBuilder$1.process(NoErrorHandlerBuilder.java:40)&#010;        at&#010;org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:191)&#010;        at&#010;org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109)&#010;        at&#010;org.apache.camel.processor.MulticastProcessor.doProcessParallel(MulticastProcessor.java:798)&#010;        at&#010;org.apache.camel.processor.MulticastProcessor.access$200(MulticastProcessor.java:83)&#010;        at&#010;org.apache.camel.processor.MulticastProcessor$1.call(MulticastProcessor.java:304)&#010;        at&#010;org.apache.camel.processor.MulticastProcessor$1.call(MulticastProcessor.java:289)&#010;        at java.util.concurrent.FutureTask.run(FutureTask.java:274)&#010;        ... 3 more&#010;2017-04-27 10:06:39,861 487012 WARN &#010;org.apache.camel.component.jms.EndpointMessageListener  - Execution of JMS&#010;message listener failed. Caused by: [org.apache.camel.RuntimeCamelException&#010;- java.lang.NullPointerException]&#010;org.apache.camel.RuntimeCamelException: java.lang.NullPointerException&#010;        at&#010;org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1619)&#010;        at&#010;org.apache.camel.component.jms.EndpointMessageListener$EndpointMessageListenerAsyncCallback.done(EndpointMessageListener.java:186)&#010;        at&#010;org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:107)&#010;        at&#010;org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:699)&#010;        at&#010;org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:637)&#010;        at&#010;org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:605)&#010;        at&#010;org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:308)&#010;        at&#010;org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:246)&#010;        at&#010;org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1144)&#010;        at&#010;org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1136)&#010;        at&#010;org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:1033)&#010;        at&#010;java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1157)&#010;        at&#010;java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:627)&#010;        at java.lang.Thread.run(Thread.java:809)&#010;Caused by: java.lang.NullPointerException&#010;        at&#010;org.apache.camel.component.cxf.CxfProducer.prepareRequest(CxfProducer.java:194)&#010;        at&#010;org.apache.camel.component.cxf.CxfProducer.process(CxfProducer.java:111)&#010;        at&#010;org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:91)&#010;        at&#010;org.apache.camel.builder.NoErrorHandlerBuilder$1.process(NoErrorHandlerBuilder.java:40)&#010;        at&#010;org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:191)&#010;        at&#010;org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109)&#010;        at&#010;org.apache.camel.processor.MulticastProcessor.doProcessParallel(MulticastProcessor.java:798)&#010;        at&#010;org.apache.camel.processor.MulticastProcessor.access$200(MulticastProcessor.java:83)&#010;        at&#010;org.apache.camel.processor.MulticastProcessor$1.call(MulticastProcessor.java:304)&#010;        at&#010;org.apache.camel.processor.MulticastProcessor$1.call(MulticastProcessor.java:289)&#010;        at java.util.concurrent.FutureTask.run(FutureTask.java:274)&#010;        ... 3 more&#010;&#010;&#010;Could anyone can help to advise this?&#010;&#010;Thanks &amp; Regards&#010;Cruizer Ma&#010;&#010;&#010;&#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/Camel-CXF-Basic-Authentication-username-password-tp5798475.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
314,316,Moshe Recanati,resequencer stream comparator camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2BhKCHMVr3N-OpuErn2ZsyU2rVJiZ%3D7yfg_kA6czcpMNSy5N6Q%40mail.gmail.com%3E,users,"Fri, 28 Apr 2017 08:46:37 GMT","Hi,&#010;I came to know that resequencer, stream with custom comparator requires&#010;that the compare results will have no gap.&#010;Since items entered and calculated dynamically I don't understand how I can&#010;make it happen. In most cases in the calculation will have gaps.&#010;Any other option to sort and prioritize messages based on comparator&#010;without such limitation?&#010;Or any logic to apply that will make sure no gaps.&#010;&#010;Thank you,&#010;&#010;&#010;Regards,&#010;Moshe&#010;&#010;"
315,317,Moshe Recanati,  Re: resequencer stream comparator camel,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCA%2BhKCHP0Kc4oVRsdoKS_qjtivo%2BDdwnu9nKbeDR9OWR5uQv80g%40mail.gmail.com%3E,users,"Fri, 28 Apr 2017 14:08:05 GMT","Hi,&#010;Issue resolved by using batch and calculate value once entering it to queue&#010;&#010;On Fri, Apr 28, 2017 at 11:46 AM, Moshe Recanati &lt;re.moshe@gmail.com&gt; wrote:&#010;&#010;&gt; Hi,&#010;&gt; I came to know that resequencer, stream with custom comparator requires&#010;&gt; that the compare results will have no gap.&#010;&gt; Since items entered and calculated dynamically I don't understand how I&#010;&gt; can make it happen. In most cases in the calculation will have gaps.&#010;&gt; Any other option to sort and prioritize messages based on comparator&#010;&gt; without such limitation?&#010;&gt; Or any logic to apply that will make sure no gaps.&#010;&gt;&#010;&gt; Thank you,&#010;&gt;&#010;&gt;&#010;&gt; Regards,&#010;&gt; Moshe&#010;&gt;&#010;&#010;"
316,318,prasad.dl,ProducerTemplate thread waits indefinitely when messaging system (Tibco EMS) was down,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493369967878-5798479.post%40n5.nabble.com%3E,users,"Fri, 28 Apr 2017 08:59:27 GMT","I am using producerTemplate.asyncCallback(., ., .) method to publish messages&#010;to Tibco EMS. While running my application, if EMS server down then so-many&#010;producertemplate threads as waiting and my server is creating lot of&#010;threads.&#010;&#010;Please help me to resolve the issue &#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/ProducerTemplate-thread-waits-indefinitely-when-messaging-system-Tibco-EMS-was-down-tp5798479.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;"
317,319,Claus Ibsen,  Re: ProducerTemplate thread waits indefinitely when messaging system (Tibco EMS) was down,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAGB5yNkjLz1Pz2pFTaPrhYtzcAbpPNc2h%3DaRMJViQDpqkcJzCQ%40mail.gmail.com%3E,users,"Fri, 28 Apr 2017 09:23:34 GMT","You likely need to configure your jms client on tibco with some kind&#010;of timeout or fail fast or something. Look the the Tibco JMS&#010;documentation.&#010;&#010;On Fri, Apr 28, 2017 at 10:59 AM, prasad.dl &lt;prasad.dls@gmail.com&gt; wrote:&#010;&gt; I am using producerTemplate.asyncCallback(., ., .) method to publish messages&#010;&gt; to Tibco EMS. While running my application, if EMS server down then so-many&#010;&gt; producertemplate threads as waiting and my server is creating lot of&#010;&gt; threads.&#010;&gt;&#010;&gt; Please help me to resolve the issue&#010;&gt;&#010;&gt;&#010;&gt;&#010;&gt; --&#010;&gt; View this message in context: http://camel.465427.n5.nabble.com/ProducerTemplate-thread-waits-indefinitely-when-messaging-system-Tibco-EMS-was-down-tp5798479.html&#010;&gt; Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;&#010;&#010;-- &#010;Claus Ibsen&#010;-----------------&#010;http://davsclaus.com @davsclaus&#010;Camel in Action 2: https://www.manning.com/ibsen2&#010;&#010;"
318,320,David Hoffer,How to implement DataFormat,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAA8BW8H6wUvG1S%3DMe5o7T0OMX5djVE2S5Ahsv4SM0iuJ7V_xvQ%40mail.gmail.com%3E,users,"Fri, 28 Apr 2017 14:48:56 GMT","We have several DataFormat implementations that handle a variety of&#010;compression algorithms.  We use these as beans in routes to&#010;marshal/unmarshal.  Here is an example unmarshal:&#010;&#010;where zip is our Zip DataFormat implementation bean.&#010;&#010;&lt;when id=""obsRouter-Zip""&gt;&#010;    &lt;simple&gt;${file:name} regex 'obs-.*\.zip'&lt;/simple&gt;&#010;    &lt;unmarshal ref=""zip""/&gt;&#010;    &lt;split&gt;&#010;        &lt;simple&gt;${header.CamelGroupedExchange}&lt;/simple&gt;&#010;        &lt;!-- to dynamic router --&gt;&#010;        &lt;bean ref=""routeManager"" method=""route(*)""/&gt;&#010;    &lt;/split&gt;&#010;&lt;/when&gt;&#010;&#010;&#010;And here is a marshall example:&#010;&#010;&lt;aggregate strategyRef=""codacAggregator"" completionSize=""1000""&#010;completionInterval=""5000""&gt;&#010;    &lt;correlationExpression&gt;&#010;        &lt;constant&gt;true&lt;/constant&gt;&#010;    &lt;/correlationExpression&gt;&#010;    &lt;marshal ref=""zip""/&gt;&#010;    &lt;setHeader headerName=""CamelFileName""&gt;&#010;        &lt;simple&gt;${file:name}.zip&lt;/simple&gt;&#010;    &lt;/setHeader&gt;&#010;    &lt;to uri=""bean:ingestClient""/&gt;&#010;&lt;/aggregate&gt;&#010;&#010;&#010;My question is where is it documented how Camel will call the marshal and&#010;unmarshal methods?  For example in the following marshal method what will&#010;Camel set in the Exchange and Object parameters?&#010;&#010;void marshal(Exchange exchange, Object graph, OutputStream stream)&#010;throws Exception&#010;&#010;E.g. there has to be some convention of where Camel put all the files that&#010;are being combined into a single zip file.  Are the files in the Exchange's&#010;Exchange.GROUPED_EXCHANGE property?  Or are they somehow retrieved via the&#010;Exchange's getIn()?  I'm looking at some of our existing code and its&#010;getting from both which seems wrong.  I'm trying to write some unit tests&#010;for our code and I need to put the files in the same place that Camel will&#010;put them at runtime but don't see any docs on how Camel handles this.&#010;&#010;Then regarding unmarshal its a similar questions where does Camel want me&#010;to put the un-zipped files?  As a Exchange.GROUPED_EXCHANGE Exchange&#010;property that has a list of Messages (where each is a file)?  Same if just&#010;one file?  What about the unmarshal Object return value, any need to set&#010;that?  If so to what?&#010;&#010;Could someone point me in the right direction?&#010;&#010;-Dave&#010;&#010;"
319,321,,Re: LoadBalancing to a dynamic list of endpoints,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3CCAA8BW8H6wUvG1S%3DMe5o7T0OMX5djVE2S5Ahsv4SM0iuJ7V_xvQ%40mail.gmail.com%3E,users,"Fri, 28 Apr 2017 14:48:56 GMT","We have several DataFormat implementations that handle a variety of&#010;compression algorithms.  We use these as beans in routes to&#010;marshal/unmarshal.  Here is an example unmarshal:&#010;&#010;where zip is our Zip DataFormat implementation bean.&#010;&#010;&lt;when id=""obsRouter-Zip""&gt;&#010;    &lt;simple&gt;${file:name} regex 'obs-.*\.zip'&lt;/simple&gt;&#010;    &lt;unmarshal ref=""zip""/&gt;&#010;    &lt;split&gt;&#010;        &lt;simple&gt;${header.CamelGroupedExchange}&lt;/simple&gt;&#010;        &lt;!-- to dynamic router --&gt;&#010;        &lt;bean ref=""routeManager"" method=""route(*)""/&gt;&#010;    &lt;/split&gt;&#010;&lt;/when&gt;&#010;&#010;&#010;And here is a marshall example:&#010;&#010;&lt;aggregate strategyRef=""codacAggregator"" completionSize=""1000""&#010;completionInterval=""5000""&gt;&#010;    &lt;correlationExpression&gt;&#010;        &lt;constant&gt;true&lt;/constant&gt;&#010;    &lt;/correlationExpression&gt;&#010;    &lt;marshal ref=""zip""/&gt;&#010;    &lt;setHeader headerName=""CamelFileName""&gt;&#010;        &lt;simple&gt;${file:name}.zip&lt;/simple&gt;&#010;    &lt;/setHeader&gt;&#010;    &lt;to uri=""bean:ingestClient""/&gt;&#010;&lt;/aggregate&gt;&#010;&#010;&#010;My question is where is it documented how Camel will call the marshal and&#010;unmarshal methods?  For example in the following marshal method what will&#010;Camel set in the Exchange and Object parameters?&#010;&#010;void marshal(Exchange exchange, Object graph, OutputStream stream)&#010;throws Exception&#010;&#010;E.g. there has to be some convention of where Camel put all the files that&#010;are being combined into a single zip file.  Are the files in the Exchange's&#010;Exchange.GROUPED_EXCHANGE property?  Or are they somehow retrieved via the&#010;Exchange's getIn()?  I'm looking at some of our existing code and its&#010;getting from both which seems wrong.  I'm trying to write some unit tests&#010;for our code and I need to put the files in the same place that Camel will&#010;put them at runtime but don't see any docs on how Camel handles this.&#010;&#010;Then regarding unmarshal its a similar questions where does Camel want me&#010;to put the un-zipped files?  As a Exchange.GROUPED_EXCHANGE Exchange&#010;property that has a list of Messages (where each is a file)?  Same if just&#010;one file?  What about the unmarshal Object return value, any need to set&#010;that?  If so to what?&#010;&#010;Could someone point me in the right direction?&#010;&#010;-Dave&#010;&#010;"
320,322,deeps26,  Re: LoadBalancing to a dynamic list of endpoints,http://mail-archives.apache.org/mod_mbox/camel-users/201704.mbox/ajax/%3C1493415228926-5798495.post%40n5.nabble.com%3E,users,"Fri, 28 Apr 2017 21:33:48 GMT",Hey do you have an example of a bean adding dynamic endpoints for load&#010;balancer and &#010;send using a producer template. &#010;&#010;&#010;&#010;--&#010;View this message in context: http://camel.465427.n5.nabble.com/LoadBalancing-to-a-dynamic-list-of-endpoints-tp1705611p5798495.html&#010;Sent from the Camel - Users mailing list archive at Nabble.com.&#010;&#010;
